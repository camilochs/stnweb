var ode=Object.defineProperty,ade=Object.defineProperties,lde=Object.getOwnPropertyDescriptors,fB=Object.getOwnPropertySymbols,cde=Object.prototype.hasOwnProperty,ude=Object.prototype.propertyIsEnumerable,nC=(Ke,J,Re)=>J in Ke?ode(Ke,J,{enumerable:!0,configurable:!0,writable:!0,value:Re}):Ke[J]=Re,iC=(Ke,J)=>{for(var Re in J||(J={}))cde.call(J,Re)&&nC(Ke,Re,J[Re]);if(fB)for(var Re of fB(J))ude.call(J,Re)&&nC(Ke,Re,J[Re]);return Ke},rC=(Ke,J)=>ade(Ke,lde(J)),z0=(Ke,J,Re)=>(nC(Ke,"symbol"!=typeof J?J+"":J,Re),Re),sC=(Ke,J,Re)=>{if(!J.has(Ke))throw TypeError("Cannot "+Re)},Jt=(Ke,J,Re)=>(sC(Ke,J,"read from private field"),Re?Re.call(Ke):J.get(Ke)),ln=(Ke,J,Re)=>{if(J.has(Ke))throw TypeError("Cannot add the same private member more than once");J instanceof WeakSet?J.add(Ke):J.set(Ke,Re)},Pi=(Ke,J,Re,N)=>(sC(Ke,J,"write to private field"),N?N.call(Ke,Re):J.set(Ke,Re),Re),pB=(Ke,J,Re,N)=>({set _(He){Pi(Ke,J,He,Re)},get _(){return Jt(Ke,J,N)}}),tn=(Ke,J,Re)=>(sC(Ke,J,"access private method"),Re);(self.webpackChunkweb=self.webpackChunkweb||[]).push([[179],{485:(Ke,J,Re)=>{"use strict";function N(n){return"function"==typeof n}function He(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ae=He(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function be(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ge{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(N(i))try{i()}catch(s){e=s instanceof Ae?s.errors:[s]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const s of r)try{Y(s)}catch(o){e=null!=e?e:[],o instanceof Ae?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ae(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Y(e);else{if(e instanceof ge){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&be(t,e)}remove(e){const{_teardowns:t}=this;t&&be(t,e),e instanceof ge&&e._removeParent(this)}}ge.EMPTY=(()=>{const n=new ge;return n.closed=!0,n})();const ne=ge.EMPTY;function C(n){return n instanceof ge||n&&"closed"in n&&N(n.remove)&&N(n.add)&&N(n.unsubscribe)}function Y(n){N(n)?n():n.unsubscribe()}const V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},z={setTimeout(...n){const{delegate:e}=z;return((null==e?void 0:e.setTimeout)||setTimeout)(...n)},clearTimeout(n){const{delegate:e}=z;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function L(n){z.setTimeout(()=>{const{onUnhandledError:e}=V;if(!e)throw n;e(n)})}function A(){}const S=W("C",void 0,void 0);function W(n,e,t){return{kind:n,value:e,error:t}}let F=null;function U(n){if(V.useDeprecatedSynchronousErrorHandling){const e=!F;if(e&&(F={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=F;if(F=null,t)throw i}}else n()}class x extends ge{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,C(e)&&e.add(this)):this.destination=ie}static create(e,t,i){return new G(e,t,i)}next(e){this.isStopped?te(function P(n){return W("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?te(function b(n){return W("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?te(S,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class G extends x{constructor(e,t,i){let r;if(super(),N(e))r=e;else if(e){let s;({next:r,error:t,complete:i}=e),this&&V.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe()):s=e,r=null==r?void 0:r.bind(s),t=null==t?void 0:t.bind(s),i=null==i?void 0:i.bind(s)}this.destination={next:r?j(r):A,error:j(null!=t?t:$),complete:i?j(i):A}}}function j(n,e){return(...t)=>{try{n(...t)}catch(i){V.useDeprecatedSynchronousErrorHandling?function y(n){V.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=n)}(i):L(i)}}}function $(n){throw n}function te(n,e){const{onStoppedNotification:t}=V;t&&z.setTimeout(()=>t(n,e))}const ie={closed:!0,next:A,error:$,complete:A},ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function _e(n){return n}let Pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function Be(n){return n&&n instanceof x||function Ie(n){return n&&N(n.next)&&N(n.error)&&N(n.complete)}(n)&&C(n)}(t)?t:new G(t,i,r);return U(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=ye(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),null==o||o.unsubscribe()}},s,r)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[ae](){return this}pipe(...t){return function Oe(n){return 0===n.length?_e:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=ye(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function ye(n){var e;return null!==(e=null!=n?n:V.Promise)&&void 0!==e?e:Promise}const we=He(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let De=(()=>{class n extends Pe{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Q(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new we}next(t){U(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(t)}})}error(t){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?ne:(s.push(t),new ge(()=>be(s,t)))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Pe;return t.source=this,t}}return n.create=(e,t)=>new Q(e,t),n})();class Q extends De{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:ne}}function E(n){return N(null==n?void 0:n.lift)}function R(n){return e=>{if(E(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class v extends x{constructor(e,t,i,r,s){super(e),this.onFinalize=s,this._next=t?function(o){try{t(o)}catch(a){e.error(a)}}:super._next,this._error=r?function(o){try{r(o)}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function T(n,e){return R((t,i)=>{let r=0;t.subscribe(new v(i,s=>{i.next(n.call(e,s,r++))}))})}function he(n){return this instanceof he?(this.v=n,this):new he(n)}function Fe(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof he?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function gt(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Pt(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const Ye=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function oe(n){return N(null==n?void 0:n.then)}function le(n){return N(n[ae])}function nt(n){return Symbol.asyncIterator&&N(null==n?void 0:n[Symbol.asyncIterator])}function pt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const At=function Ct(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function An(n){return N(null==n?void 0:n[At])}function Vn(n){return Fe(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield he(t.read());if(r)return yield he(void 0);yield yield he(i)}}finally{t.releaseLock()}})}function wi(n){return N(null==n?void 0:n.getReader)}function _n(n){if(n instanceof Pe)return n;if(null!=n){if(le(n))return function tr(n){return new Pe(e=>{const t=n[ae]();if(N(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ye(n))return function Oi(n){return new Pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(oe(n))return function fs(n){return new Pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,L)})}(n);if(nt(n))return Mr(n);if(An(n))return function Ei(n){return new Pe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(wi(n))return function Ns(n){return Mr(Vn(n))}(n)}throw pt(n)}function Mr(n){return new Pe(e=>{(function ps(n,e){var t,i,r,s;return function Ee(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=gt(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function nr(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Un(n,e,t=1/0){return N(e)?Un((i,r)=>T((s,o)=>e(i,s,r,o))(_n(n(i,r))),t):("number"==typeof e&&(t=e),R((i,r)=>function Dr(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let m=!1;_n(t(g,u++)).subscribe(new v(e,_=>{null==r||r(_),s?f(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<i;){const _=l.shift();o?nr(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(new v(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(i,r,n,t)))}function to(n=1/0){return Un(_e,n)}const jr=new Pe(n=>n.complete());function cC(n){return n&&N(n.schedule)}function $0(n){return n[n.length-1]}function Sp(n){return N($0(n))?n.pop():void 0}function Yd(n){return cC($0(n))?n.pop():void 0}function uC(n,e=0){return R((t,i)=>{t.subscribe(new v(i,r=>nr(i,n,()=>i.next(r),e),()=>nr(i,n,()=>i.complete(),e),r=>nr(i,n,()=>i.error(r),e)))})}function dC(n,e=0){return R((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function hC(n,e){if(!n)throw new Error("Iterable cannot be null");return new Pe(t=>{nr(t,e,()=>{const i=n[Symbol.asyncIterator]();nr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function ir(n,e){return e?function NB(n,e){if(null!=n){if(le(n))return function TB(n,e){return _n(n).pipe(dC(e),uC(e))}(n,e);if(Ye(n))return function PB(n,e){return new Pe(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(oe(n))return function DB(n,e){return _n(n).pipe(dC(e),uC(e))}(n,e);if(nt(n))return hC(n,e);if(An(n))return function OB(n,e){return new Pe(t=>{let i;return nr(t,e,()=>{i=n[At](),nr(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>N(null==i?void 0:i.return)&&i.return()})}(n,e);if(wi(n))return function RB(n,e){return hC(Vn(n),e)}(n,e)}throw pt(n)}(n,e):_n(n)}function fC(...n){const e=Yd(n),t=function EB(n,e){return"number"==typeof $0(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?_n(i[0]):to(t)(ir(i,e)):jr}function Ar(n){return n<=0?()=>jr:R((e,t)=>{let i=0;e.subscribe(new v(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function pC(n={}){const{connector:e=(()=>new De),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o=null,a=null,l=null,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=null},f=()=>{h(),o=l=null,u=d=!1},p=()=>{const g=o;f(),null==g||g.unsubscribe()};return R((g,m)=>{c++,!d&&!u&&h();const _=l=null!=l?l:e();m.add(()=>{c--,0===c&&!d&&!u&&(a=q0(p,r))}),_.subscribe(m),o||(o=new G({next:w=>_.next(w),error:w=>{d=!0,h(),a=q0(f,t,w),_.error(w)},complete:()=>{u=!0,h(),a=q0(f,i),_.complete()}}),ir(g).subscribe(o))})(s)}}function q0(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(Ar(1)).subscribe(()=>n())}function gi(n){for(let e in n)if(n[e]===gi)return e;throw Error("Could not find renamed property on target object.")}function Y0(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Zn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Zn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function X0(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const IB=gi({__forward_ref__:gi});function ii(n){return n.__forward_ref__=ii,n.toString=function(){return Zn(this())},n}function In(n){return gC(n)?n():n}function gC(n){return"function"==typeof n&&n.hasOwnProperty(IB)&&n.__forward_ref__===ii}class gs extends Error{constructor(e,t){super(function K0(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function En(n){return"string"==typeof n?n:null==n?"":String(n)}function Gr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():En(n)}function Cp(n,e){const t=e?` in ${e}`:"";throw new gs("201",`No provider for ${Gr(n)} found${t}`)}function _s(n,e){null==n&&function Ti(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function nn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Q0(n){return mC(n,Mp)||mC(n,yC)}function mC(n,e){return n.hasOwnProperty(e)?n[e]:null}function _C(n){return n&&(n.hasOwnProperty(J0)||n.hasOwnProperty(HB))?n[J0]:null}const Mp=gi({\u0275prov:gi}),J0=gi({\u0275inj:gi}),yC=gi({ngInjectableDef:gi}),HB=gi({ngInjectorDef:gi});var Pn=(()=>((Pn=Pn||{})[Pn.Default=0]="Default",Pn[Pn.Host=1]="Host",Pn[Pn.Self=2]="Self",Pn[Pn.SkipSelf=4]="SkipSelf",Pn[Pn.Optional=8]="Optional",Pn))();let Z0;function Wa(n){const e=Z0;return Z0=n,e}function vC(n,e,t){const i=Q0(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Pn.Optional?null:void 0!==e?e:void Cp(Zn(n),"Injector")}function $a(n){return{toString:n}.toString()}var no=(()=>((no=no||{})[no.OnPush=0]="OnPush",no[no.Default=1]="Default",no))(),io=(()=>{return(n=io||(io={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",io;var n})();const jB="undefined"!=typeof globalThis&&globalThis,GB="undefined"!=typeof window&&window,WB="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pi=jB||"undefined"!=typeof global&&global||GB||WB,Uc={},mi=[],Ap=gi({\u0275cmp:gi}),ey=gi({\u0275dir:gi}),ty=gi({\u0275pipe:gi}),bC=gi({\u0275mod:gi}),ca=gi({\u0275fac:gi}),Xd=gi({__NG_ELEMENT_ID__:gi});let $B=0;function Wr(n){return $a(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===no.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||mi,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||io.Emulated,id:"c",styles:n.styles||mi,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=$B++,i.inputs=CC(n.inputs,t),i.outputs=CC(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(wC):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(xC):null,i})}function wC(n){return Ir(n)||function qa(n){return n[ey]||null}(n)}function xC(n){return function Rl(n){return n[ty]||null}(n)}const SC={};function ei(n){return $a(()=>{const e={type:n.type,bootstrap:n.bootstrap||mi,declarations:n.declarations||mi,imports:n.imports||mi,exports:n.exports||mi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(SC[n.id]=n.type),e})}function CC(n,e){if(null==n)return Uc;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const Gt=Wr;function $r(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ir(n){return n[Ap]||null}function Is(n,e){const t=n[bC]||null;if(!t&&!0===e)throw new Error(`Type ${Zn(n)} does not have '\u0275mod' property.`);return t}function No(n){return Array.isArray(n)&&"object"==typeof n[1]}function so(n){return Array.isArray(n)&&!0===n[1]}function ry(n){return 0!=(8&n.flags)}function Pp(n){return 2==(2&n.flags)}function Op(n){return 1==(1&n.flags)}function oo(n){return null!==n.template}function JB(n){return 0!=(512&n[2])}function Fl(n,e){return n.hasOwnProperty(ca)?n[ca]:null}class tV{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function hr(){return AC}function AC(n){return n.type.prototype.ngOnChanges&&(n.setInput=iV),nV}function nV(){const n=TC(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Uc)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function iV(n,e,t,i){const r=TC(n)||function rV(n,e){return n[EC]=e}(n,{previous:Uc,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new tV(l&&l.currentValue,e,o===Uc),n[i]=e}hr.ngInherit=!0;const EC="__ngSimpleChanges__";function TC(n){return n[EC]||null}let ay;function ly(){return void 0!==ay?ay:"undefined"!=typeof document?document:void 0}function Gi(n){return!!n.listen}const OC={createRenderer:(n,e)=>ly()};function rr(n){for(;Array.isArray(n);)n=n[0];return n}function Rp(n,e){return rr(e[n])}function Ls(n,e){return rr(e[n.index])}function cy(n,e){return n.data[e]}function vs(n,e){const t=e[n];return No(t)?t:t[0]}function RC(n){return 4==(4&n[2])}function uy(n){return 128==(128&n[2])}function Ya(n,e){return null==e?null:n[e]}function NC(n){n[18]=0}function dy(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const xn={lFrame:HC(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function IC(){return xn.bindingsEnabled}function xt(){return xn.lFrame.lView}function ti(){return xn.lFrame.tView}function Ni(n){return xn.lFrame.contextLView=n,n[8]}function fr(){let n=kC();for(;null!==n&&64===n.type;)n=n.parent;return n}function kC(){return xn.lFrame.currentTNode}function Io(n,e){const t=xn.lFrame;t.currentTNode=n,t.isParent=e}function hy(){return xn.lFrame.isParent}function fy(){xn.lFrame.isParent=!1}function Np(){return xn.isInCheckNoChangesMode}function Ip(n){xn.isInCheckNoChangesMode=n}function $c(){return xn.lFrame.bindingIndex++}function da(n){const e=xn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function yV(n,e){const t=xn.lFrame;t.bindingIndex=t.bindingRootIndex=n,py(e)}function py(n){xn.lFrame.currentDirectiveIndex=n}function BC(){return xn.lFrame.currentQueryIndex}function my(n){xn.lFrame.currentQueryIndex=n}function bV(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function VC(n,e,t){if(t&Pn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Pn.Host||(r=bV(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=xn.lFrame=UC();return i.currentTNode=e,i.lView=n,!0}function kp(n){const e=UC(),t=n[1];xn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function UC(){const n=xn.lFrame,e=null===n?null:n.child;return null===e?HC(n):e}function HC(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function zC(){const n=xn.lFrame;return xn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jC=zC;function Fp(){const n=zC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yr(){return xn.lFrame.selectedIndex}function Xa(n){xn.lFrame.selectedIndex=n}function Wi(){const n=xn.lFrame;return cy(n.tView,n.selectedIndex)}function Lp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Bp(n,e,t){GC(n,e,3,t)}function Vp(n,e,t,i){(3&n[2])===t&&GC(n,e,t,i)}function _y(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function GC(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(DV(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function DV(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class eh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Up(n,e,t){const i=Gi(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];vy(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function WC(n){return 3===n||4===n||6===n}function vy(n){return 64===n.charCodeAt(0)}function Hp(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||$C(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function $C(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function qC(n){return-1!==n}function qc(n){return 32767&n}function Yc(n,e){let t=function IV(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let by=!0;function zp(n){const e=by;return by=n,e}let kV=0;function nh(n,e){const t=xy(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,wy(i.data,n),wy(e,null),wy(i.blueprint,null));const r=jp(n,e),s=n.injectorIndex;if(qC(r)){const o=qc(r),a=Yc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function wy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function xy(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function jp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Gp(n,e,t){!function FV(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Xd)&&(i=t[Xd]),null==i&&(i=t[Xd]=kV++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function KC(n,e,t){if(t&Pn.Optional)return n;Cp(e,"NodeInjector")}function QC(n,e,t,i){if(t&Pn.Optional&&void 0===i&&(i=null),0==(t&(Pn.Self|Pn.Host))){const r=n[9],s=Wa(void 0);try{return r?r.get(e,i,t&Pn.Optional):vC(e,i,t&Pn.Optional)}finally{Wa(s)}}return KC(i,e,t)}function JC(n,e,t,i=Pn.Default,r){if(null!==n){const s=function UV(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Xd)?n[Xd]:void 0;return"number"==typeof e?e>=0?255&e:BV:e}(t);if("function"==typeof s){if(!VC(e,n,i))return i&Pn.Host?KC(r,t,i):QC(e,t,i,r);try{const o=s(i);if(null!=o||i&Pn.Optional)return o;Cp(t)}finally{jC()}}else if("number"==typeof s){let o=null,a=xy(n,e),l=-1,c=i&Pn.Host?e[16][6]:null;for((-1===a||i&Pn.SkipSelf)&&(l=-1===a?jp(n,e):e[a+8],-1!==l&&tM(i,!1)?(o=e[1],a=qc(l),e=Yc(l,e)):a=-1);-1!==a;){const u=e[1];if(eM(s,a,u.data)){const d=VV(a,e,t,o,i,c);if(d!==ZC)return d}l=e[a+8],-1!==l&&tM(i,e[1].data[a+8]===c)&&eM(s,a,e)?(o=u,a=qc(l),e=Yc(l,e)):a=-1}}}return QC(e,t,i,r)}const ZC={};function BV(){return new Xc(fr(),xt())}function VV(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=Wp(a,o,t,null==i?Pp(a)&&by:i!=o&&0!=(3&a.type),r&Pn.Host&&s===a);return null!==u?ih(e,o,u,a):ZC}function Wp(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&oo(f)&&f.type===t)return l}return null}function ih(n,e,t,i){let r=n[t];const s=e.data;if(function PV(n){return n instanceof eh}(r)){const o=r;o.resolving&&function kB(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new gs("200",`Circular dependency in DI detected for ${n}${t}`)}(Gr(s[t]));const a=zp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Wa(o.injectImpl):null;VC(n,i,Pn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function TV(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=AC(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Wa(l),zp(a),o.resolving=!1,jC()}}return r}function eM(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function tM(n,e){return!(n&Pn.Self||n&Pn.Host&&e)}class Xc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return JC(this._tNode,this._lView,e,i,t)}}function bs(n){return $a(()=>{const e=n.prototype.constructor,t=e[ca]||Sy(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[ca]||Sy(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Sy(n){return gC(n)?()=>{const e=Sy(In(n));return e&&e()}:Fl(n)}const Qc="__parameters__";function Zc(n,e,t){return $a(()=>{const i=function Cy(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Qc)?l[Qc]:Object.defineProperty(l,Qc,{value:[]})[Qc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class On{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=nn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zV=new On("AnalyzeForEntryComponents");function Bs(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Bs(i,e)):e!==n&&e.push(i)}return e}function ko(n,e){n.forEach(t=>Array.isArray(t)?ko(t,e):e(t))}function iM(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $p(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function oh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function ws(n,e,t){let i=eu(n,e);return i>=0?n[1|i]=t:(i=~i,function WV(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Ay(n,e){const t=eu(n,e);if(t>=0)return n[1|t]}function eu(n,e){return function oM(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const ah={},Ty="__NG_DI_FLAG__",Yp="ngTempTokenPath",JV=/\n/gm,lM="__source",eU=gi({provide:String,useValue:gi});let lh;function cM(n){const e=lh;return lh=n,e}function tU(n,e=Pn.Default){if(void 0===lh)throw new Error("inject() must be called from an injection context");return null===lh?vC(n,void 0,e):lh.get(n,e&Pn.Optional?null:void 0,e)}function Ft(n,e=Pn.Default){return(function zB(){return Z0}()||tU)(In(n),e)}function Dy(n){const e=[];for(let t=0;t<n.length;t++){const i=In(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=Pn.Default;for(let o=0;o<i.length;o++){const a=i[o],l=nU(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(Ft(r,s))}else e.push(Ft(i))}return e}function ch(n,e){return n[Ty]=e,n.prototype[Ty]=e,n}function nU(n){return n[Ty]}const uh=ch(Zc("Inject",n=>({token:n})),-1),Fo=ch(Zc("Optional"),8),tu=ch(Zc("SkipSelf"),4);let Kp,Qp;function iu(n){var e;return(null===(e=function Oy(){if(void 0===Kp&&(Kp=null,pi.trustedTypes))try{Kp=pi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Kp}())||void 0===e?void 0:e.createHTML(n))||n}function gM(n){var e;return(null===(e=function Ry(){if(void 0===Qp&&(Qp=null,pi.trustedTypes))try{Qp=pi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Qp}())||void 0===e?void 0:e.createHTML(n))||n}class Bl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gU extends Bl{getTypeName(){return"HTML"}}class mU extends Bl{getTypeName(){return"Style"}}class _U extends Bl{getTypeName(){return"Script"}}class yU extends Bl{getTypeName(){return"URL"}}class vU extends Bl{getTypeName(){return"ResourceURL"}}function xs(n){return n instanceof Bl?n.changingThisBreaksApplicationSecurity:n}function Lo(n,e){const t=yM(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function yM(n){return n instanceof Bl&&n.getTypeName()||null}class MU{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(iu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class AU{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=iu(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=iu(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const TU=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,DU=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function hh(n){return(n=String(n)).match(TU)||n.match(DU)?n:"unsafe:"+n}function bM(n){return(n=String(n)).split(",").map(e=>hh(e.trim())).join(", ")}function Bo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function fh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const wM=Bo("area,br,col,hr,img,wbr"),xM=Bo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),SM=Bo("rp,rt"),Ny=fh(wM,fh(xM,Bo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fh(SM,Bo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fh(SM,xM)),Iy=Bo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ky=Bo("srcset"),CM=fh(Iy,ky,Bo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),PU=Bo("script,style,template");class OU{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Ny.hasOwnProperty(t))return this.sanitizedSomething=!0,!PU.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!CM.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Iy[a]&&(l=hh(l)),ky[a]&&(l=bM(l)),this.buf.push(" ",o,'="',MM(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Ny.hasOwnProperty(t)&&!wM.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(MM(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const RU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NU=/([^\#-~ |!])/g;function MM(n){return n.replace(/&/g,"&amp;").replace(RU,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(NU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jp;function AM(n,e){let t=null;try{Jp=Jp||function vM(n){const e=new AU(n);return function EU(){try{return!!(new window.DOMParser).parseFromString(iu(""),"text/html")}catch(n){return!1}}()?new MU(e):e}(n);let i=e?String(e):"";t=Jp.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Jp.getInertBodyElement(i)}while(i!==s);return iu((new OU).sanitizeChildren(Fy(t)||t))}finally{if(t){const i=Fy(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Fy(n){return"content"in n&&function IU(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Si=(()=>((Si=Si||{})[Si.NONE=0]="NONE",Si[Si.HTML=1]="HTML",Si[Si.STYLE=2]="STYLE",Si[Si.SCRIPT=3]="SCRIPT",Si[Si.URL=4]="URL",Si[Si.RESOURCE_URL=5]="RESOURCE_URL",Si))();function EM(n){const e=function ph(){const n=xt();return n&&n[12]}();return e?gM(e.sanitize(Si.HTML,n)||""):Lo(n,"HTML")?gM(xs(n)):AM(ly(),En(n))}const PM="__ngContext__";function Fr(n,e){n[PM]=e}function Vy(n){const e=function gh(n){return n[PM]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Hy(n){return n.ngOriginalError}function QU(n,...e){n.error(...e)}class ru{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function KU(n){return n&&n.ngErrorLogger||QU}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Hy(e);for(;t&&Hy(t);)t=Hy(t);return t||null}}const kM=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(pi))();function FM(n){return n.ownerDocument.defaultView}function LM(n){return n.ownerDocument}function Vo(n){return n instanceof Function?n():n}var Ss=(()=>((Ss=Ss||{})[Ss.Important=1]="Important",Ss[Ss.DashCase=2]="DashCase",Ss))();function jy(n,e){return undefined(n,e)}function mh(n){const e=n[3];return so(e)?e[3]:e}function Gy(n){return zM(n[13])}function Wy(n){return zM(n[4])}function zM(n){for(;null!==n&&!so(n);)n=n[4];return n}function ou(n,e,t,i,r){if(null!=i){let s,o=!1;so(i)?s=i:No(i)&&(o=!0,i=i[0]);const a=rr(i);0===n&&null!==t?null==r?YM(e,t,a):Vl(e,t,a,r||null,!0):1===n&&null!==t?Vl(e,t,a,r||null,!0):2===n?function tA(n,e,t){const i=Zp(n,e);i&&function yH(n,e,t,i){Gi(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function wH(n,e,t,i,r){const s=t[7];s!==rr(t)&&ou(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];_h(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function qy(n,e,t){return Gi(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function GM(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,dy(r,-1)),t.splice(i,1)}function Yy(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&GM(r,i),e>0&&(n[t-1][4]=i[4]);const s=$p(n,10+e);!function uH(n,e){_h(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function WM(n,e){if(!(256&e[2])){const t=e[11];Gi(t)&&t.destroyNode&&_h(n,e,t,3,null,null),function fH(n){let e=n[13];if(!e)return Xy(n[1],n);for(;e;){let t=null;if(No(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)No(e)&&Xy(e[1],e),e=e[3];null===e&&(e=n),No(e)&&Xy(e[1],e),t=e&&e[4]}e=t}}(e)}}function Xy(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function _H(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof eh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function mH(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):rr(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&Gi(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&so(e[3])){t!==e[3]&&GM(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function $M(n,e,t){return function qM(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===io.None||r===io.Emulated)return null}return Ls(i,t)}(n,e.parent,t)}function Vl(n,e,t,i,r){Gi(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function YM(n,e,t){Gi(n)?n.appendChild(e,t):e.appendChild(t)}function XM(n,e,t,i,r){null!==i?Vl(n,e,t,i,r):YM(n,e,t)}function Zp(n,e){return Gi(n)?n.parentNode(e):e.parentNode}function KM(n,e,t){return JM(n,e,t)}let JM=function QM(n,e,t){return 40&n.type?Ls(n,t):null};function eg(n,e,t,i){const r=$M(n,i,e),s=e[11],a=KM(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)XM(s,r,t[l],a,!1);else XM(s,r,t,a,!1)}function tg(n,e){if(null!==e){const t=e.type;if(3&t)return Ls(e,n);if(4&t)return Qy(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return tg(n,i);{const r=n[e.index];return so(r)?Qy(-1,r):rr(r)}}if(32&t)return jy(e,n)()||rr(n[e.index]);{const i=eA(n,e);return null!==i?Array.isArray(i)?i[0]:tg(mh(n[16]),i):tg(n,e.next)}}return null}function eA(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Qy(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return tg(i,r)}return e[7]}function Jy(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Fr(rr(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)Jy(n,e,t.child,i,r,s,!1),ou(e,n,r,a,s);else if(32&l){const c=jy(t,i);let u;for(;u=c();)ou(e,n,r,u,s);ou(e,n,r,a,s)}else 16&l?nA(n,e,i,t,r,s):ou(e,n,r,a,s);t=o?t.projectionNext:t.next}}function _h(n,e,t,i,r,s){Jy(t,i,n.firstChild,e,r,s,!1)}function nA(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ou(e,n,r,l[c],s);else Jy(n,e,l,o[3],r,s,!0)}function iA(n,e,t){Gi(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Zy(n,e,t){Gi(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function rA(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const sA="ng-template";function SH(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==rA(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function oA(n){return 4===n.type&&n.value!==sA}function CH(n,e,t){return e===(4!==n.type||t?n.value:sA)}function MH(n,e,t){let i=4;const r=n.attrs||[],s=function TH(n){for(let e=0;e<n.length;e++)if(WC(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!CH(n,l,t)||""===l&&1===e.length){if(ao(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!SH(n.attrs,c,t)){if(ao(i))return!1;o=!0}continue}const d=AH(8&i?"class":l,r,oA(n),t);if(-1===d){if(ao(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==rA(f,c,0)||2&i&&c!==h){if(ao(i))return!1;o=!0}}}}else{if(!o&&!ao(i)&&!ao(l))return!1;if(o&&ao(l))continue;o=!1,i=l|1&i}}return ao(i)||o}function ao(n){return 0==(1&n)}function AH(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function DH(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function aA(n,e,t=!1){for(let i=0;i<e.length;i++)if(MH(n,e[i],t))return!0;return!1}function PH(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function lA(n,e){return n?":not("+e.trim()+")":e}function OH(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ao(o)&&(e+=lA(s,r),r=""),i=o,s=s||!ao(i);t++}return""!==r&&(e+=lA(s,r)),e}const Tn={};function Nt(n){cA(ti(),xt(),Yr()+n,Np())}function cA(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Bp(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Vp(e,s,0,t)}Xa(t)}function ng(n,e){return n<<17|e<<2}function lo(n){return n>>17&32767}function ev(n){return 2|n}function ha(n){return(131068&n)>>2}function tv(n,e){return-131069&n|e<<2}function nv(n){return 1|n}function bA(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];my(r),o.contentQueries(2,e[s],s)}}}function yh(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,NC(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function au(n,e,t,i,r){let s=n.data[e];if(null===s)s=function dv(n,e,t,i,r){const s=kC(),o=hy(),l=n.data[e]=function XH(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function _V(){return xn.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Zd(){const n=xn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Io(s,!0),s}function lu(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function vh(n,e,t){kp(e);try{const i=n.viewQuery;null!==i&&bv(1,i,t);const r=n.template;null!==r&&wA(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&bA(n,e),n.staticViewQueries&&bv(2,n.viewQuery,t);const s=n.components;null!==s&&function $H(n,e){for(let t=0;t<e.length;t++)fz(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Fp()}}function cu(n,e,t,i){const r=e[2];if(256==(256&r))return;kp(e);const s=Np();try{NC(e),function FC(n){return xn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&wA(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&Bp(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Vp(e,c,0,null),_y(e,0)}if(function dz(n){for(let e=Gy(n);null!==e;e=Wy(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&dy(s,1),r[2]|=1024}}}(e),function uz(n){for(let e=Gy(n);null!==e;e=Wy(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];uy(i)&&cu(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&bA(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&Bp(e,c)}else{const c=n.contentHooks;null!==c&&Vp(e,c,1),_y(e,1)}!function GH(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Xa(~r);else{const s=r,o=t[++i],a=t[++i];yV(o,s),a(2,e[s])}}}finally{Xa(-1)}}(n,e);const a=n.components;null!==a&&function WH(n,e){for(let t=0;t<e.length;t++)hz(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&bv(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&Bp(e,c)}else{const c=n.viewHooks;null!==c&&Vp(e,c,2),_y(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,dy(e[3],-1))}finally{Fp()}}function qH(n,e,t,i){const r=e[10],s=!Np(),o=RC(e);try{s&&!o&&r.begin&&r.begin(),o&&vh(n,e,i),cu(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function wA(n,e,t,i,r){const s=Yr(),o=2&i;try{Xa(-1),o&&e.length>20&&cA(n,e,20,Np()),t(i,r)}finally{Xa(s)}}function hv(n,e,t){!IC()||(function nz(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||nh(t,e),Fr(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=oo(l);c&&az(e,t,l);const u=ih(e,n,a,t);Fr(u,e),null!==o&&lz(0,a-r,u,l,0,o),c&&(vs(t.index,e)[8]=u)}}(n,e,t,Ls(t,e)),128==(128&t.flags)&&function iz(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function vV(){return xn.lFrame.currentDirectiveIndex}();try{Xa(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];py(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&PA(c,u)}}finally{Xa(-1),py(a)}}(n,e,t))}function fv(n,e,t=Ls){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function SA(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=sg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function sg(n,e,t,i,r,s,o,a,l,c){const u=20+i,d=u+r,h=function YH(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Tn);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function AA(n,e,t,i){const r=FA(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&LA(n).push(i,r.length-1))}function EA(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function Cs(n,e,t,i,r,s,o,a){const l=Ls(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(UA(n,t,u,i,r),Pp(e)&&function JH(n,e){const t=vs(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function QH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,Gi(s)?s.setProperty(l,i,r):vy(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function pv(n,e,t,i){let r=!1;if(IC()){const s=function rz(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];aA(t,o.selectors,!1)&&(r||(r=[]),Gp(nh(t,e),n,o.type),oo(o)?(OA(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,RA(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=lu(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=Hp(t.mergedAttrs,d.hostAttrs),NA(n,t,e,c,d),oz(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function KH(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||oA(e)?null:cz(d,s);o.push(h),a=EA(d,c,a),l=EA(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function sz(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new gs("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Hp(t.mergedAttrs,t.attrs),r}function DA(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function tz(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function PA(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function OA(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function oz(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;oo(e)&&(t[""]=n)}}function RA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function NA(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Fl(r.type)),o=new eh(s,oo(r),null);n.blueprint[i]=o,t[i]=o,DA(n,e,0,i,lu(n,t,r.hostVars,Tn),r)}function az(n,e,t){const i=Ls(e,n),r=SA(t),s=n[10],o=og(n,yh(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function Uo(n,e,t,i,r,s){const o=Ls(n,e);!function gv(n,e,t,i,r,s,o){if(null==s)Gi(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?En(s):o(s,i||"",r);Gi(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function lz(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function cz(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function IA(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function hz(n,e){const t=vs(e,n);if(uy(t)){const i=t[1];80&t[2]?cu(i,t,i.template,t[8]):t[5]>0&&mv(t)}}function mv(n){for(let i=Gy(n);null!==i;i=Wy(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];cu(o,s,o.template,s[8])}else s[5]>0&&mv(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=vs(t[i],n);uy(r)&&r[5]>0&&mv(r)}}function fz(n,e){const t=vs(e,n),i=t[1];(function pz(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),vh(i,t,t[8])}function og(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function _v(n){for(;n;){n[2]|=64;const e=mh(n);if(JB(n)&&!e)return n;n=e}return null}function vv(n,e,t){const i=e[10];i.begin&&i.begin();try{cu(n,e,n.template,t)}catch(r){throw VA(e,r),r}finally{i.end&&i.end()}}function kA(n){!function yv(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Vy(t),r=i[1];qH(r,i,r.template,t)}}(n[8])}function bv(n,e,t){my(0),e(n,t)}const yz=(()=>Promise.resolve(null))();function FA(n){return n[7]||(n[7]=[])}function LA(n){return n.cleanup||(n.cleanup=[])}function VA(n,e){const t=n[9],i=t?t.get(ru,null):null;i&&i.handleError(e)}function UA(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function fa(n,e,t){const i=Rp(e,n);!function jM(n,e,t){Gi(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function ag(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=X0(r,a):2==s&&(i=X0(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const wv=new On("INJECTOR",-1);class HA{get(e,t=ah){if(t===ah){const i=new Error(`NullInjectorError: No provider for ${Zn(e)}!`);throw i.name="NullInjectorError",i}return t}}const xv=new On("Set Injector scope."),bh={},wz={};let Sv;function zA(){return void 0===Sv&&(Sv=new HA),Sv}function jA(n,e=null,t=null,i){const r=GA(n,e,t,i);return r._resolveInjectorDefTypes(),r}function GA(n,e=null,t=null,i){return new xz(n,t,e||zA(),i)}class xz{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&ko(t,a=>this.processProvider(a,e,t)),ko([e],a=>this.processInjectorType(a,[],s)),this.records.set(wv,uu(void 0,this));const o=this.records.get(xv);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:Zn(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=ah,i=Pn.Default){this.assertNotDestroyed();const r=cM(this),s=Wa(void 0);try{if(!(i&Pn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function Pz(n){return"function"==typeof n||"object"==typeof n&&n instanceof On}(e)&&Q0(e);a=l&&this.injectableDefInScope(l)?uu(Cv(e),bh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Pn.Self?zA():this.parent).get(e,t=i&Pn.Optional&&t===ah?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Yp]=o[Yp]||[]).unshift(Zn(e)),r)throw o;return function iU(n,e,t,i){const r=n[Yp];throw e[lM]&&r.unshift(e[lM]),n.message=function rU(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=Zn(e);if(Array.isArray(e))r=e.map(Zn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Zn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(JV,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Yp]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Wa(s),cM(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(Zn(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=In(e)))return!1;let r=_C(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=_C(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{ko(r.imports,d=>{this.processInjectorType(d,t,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];ko(f,p=>this.processProvider(p,h,f||mi))}}this.injectorDefTypes.add(o);const l=Fl(o)||(()=>new o);this.records.set(o,uu(l,bh));const c=r.providers;if(null!=c&&!a){const u=e;ko(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=du(e=In(e))?e:In(e&&e.provide);const s=function Cz(n,e,t){return $A(n)?uu(void 0,n.useValue):uu(WA(n),bh)}(e);if(du(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=uu(void 0,bh,!0),o.factory=()=>Dy(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===bh&&(t.value=wz,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Dz(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=In(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Cv(n){const e=Q0(n),t=null!==e?e.factory:Fl(n);if(null!==t)return t;if(n instanceof On)throw new Error(`Token ${Zn(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function Sz(n){const e=n.length;if(e>0){const i=oh(e,"?");throw new Error(`Can't resolve all parameters for ${Zn(n)}: (${i.join(", ")}).`)}const t=function VB(n){const e=n&&(n[Mp]||n[yC]);if(e){const t=function UB(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function WA(n,e,t){let i;if(du(n)){const r=In(n);return Fl(r)||Cv(r)}if($A(n))i=()=>In(n.useValue);else if(function Az(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Dy(n.deps||[]));else if(function Mz(n){return!(!n||!n.useExisting)}(n))i=()=>Ft(In(n.useExisting));else{const r=In(n&&(n.useClass||n.provide));if(!function Tz(n){return!!n.deps}(n))return Fl(r)||Cv(r);i=()=>new r(...Dy(n.deps))}return i}function uu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function $A(n){return null!==n&&"object"==typeof n&&eU in n}function du(n){return"function"==typeof n}let $i=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return jA({name:""},i,t,"");{const s=null!==(r=t.name)&&void 0!==r?r:"";return jA({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=ah,n.NULL=new HA,n.\u0275prov=nn({token:n,providedIn:"any",factory:()=>Ft(wv)}),n.__NG_ELEMENT_ID__=-1,n})();function Bz(n,e){Lp(Vy(n)[1],fr())}function _i(n){let e=function rE(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(oo(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=Ev(n.inputs),o.declaredInputs=Ev(n.declaredInputs),o.outputs=Ev(n.outputs);const a=r.hostBindings;a&&zz(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&Uz(n,l),c&&Hz(n,c),Y0(n.inputs,r.inputs),Y0(n.declaredInputs,r.declaredInputs),Y0(n.outputs,r.outputs),oo(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===_i&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Vz(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Hp(r.hostAttrs,t=Hp(t,r.hostAttrs))}}(i)}function Ev(n){return n===Uc?{}:n===mi?[]:n}function Uz(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function Hz(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function zz(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let lg=null;function hu(){if(!lg){const n=pi.Symbol;if(n&&n.iterator)lg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(lg=i)}}}return lg}function wh(n){return!!Tv(n)&&(Array.isArray(n)||!(n instanceof Map)&&hu()in n)}function Tv(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Lr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ni(n,e,t,i){const r=xt();return Lr(r,$c(),e)&&(ti(),Uo(Wi(),r,n,e,t,i)),ni}function rn(n,e,t,i,r,s,o,a){const l=xt(),c=ti(),u=n+20,d=c.firstCreatePass?function Xz(n,e,t,i,r,s,o,a,l){const c=e.consts,u=au(e,n,4,o||null,Ya(c,a));pv(e,t,u,Ya(c,l)),Lp(e,u);const d=u.tViews=sg(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];Io(d,!1);const h=l[11].createComment("");eg(c,l,h,d),Fr(h,l),og(l,l[u]=IA(h,l,h,d)),Op(d)&&hv(c,l,d),null!=o&&fv(l,d,a)}function Ge(n,e=Pn.Default){const t=xt();return null===t?Ft(n,e):JC(fr(),t,In(n),e)}function Nv(){throw new Error("invalid")}function jt(n,e,t){const i=xt();return Lr(i,$c(),e)&&Cs(ti(),Wi(),i,n,e,i[11],t,!1),jt}function Iv(n,e,t,i,r){const o=r?"class":"style";UA(n,t,e.inputs[o],o,i)}function ce(n,e,t,i){const r=xt(),s=ti(),o=20+n,a=r[11],l=r[o]=qy(a,e,function EV(){return xn.lFrame.currentNamespace}()),c=s.firstCreatePass?function m5(n,e,t,i,r,s,o){const a=e.consts,c=au(e,n,2,r,Ya(a,s));return pv(e,t,c,Ya(a,o)),null!==c.attrs&&ag(c,c.attrs,!1),null!==c.mergedAttrs&&ag(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];Io(c,!0);const u=c.mergedAttrs;null!==u&&Up(a,l,u);const d=c.classes;null!==d&&Zy(a,l,d);const h=c.styles;null!==h&&iA(a,l,h),64!=(64&c.flags)&&eg(s,r,l,c),0===function dV(){return xn.lFrame.elementDepthCount}()&&Fr(l,r),function hV(){xn.lFrame.elementDepthCount++}(),Op(c)&&(hv(s,r,c),function xA(n,e,t){if(ry(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,r)),null!==i&&fv(r,c)}function ue(){let n=fr();hy()?fy():(n=n.parent,Io(n,!1));const e=n;!function fV(){xn.lFrame.elementDepthCount--}();const t=ti();t.firstCreatePass&&(Lp(t,n),ry(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function RV(n){return 0!=(16&n.flags)}(e)&&Iv(t,e,xt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function NV(n){return 0!=(32&n.flags)}(e)&&Iv(t,e,xt(),e.stylesWithoutHost,!1)}function on(n,e,t,i){ce(n,e,t,i),ue()}function gr(){return xt()}function Sh(n){return!!n&&"function"==typeof n.then}const kv=function AE(n){return!!n&&"function"==typeof n.subscribe};function fn(n,e,t,i){const r=xt(),s=ti(),o=fr();return function TE(n,e,t,i,r,s,o,a){const l=Op(i),u=n.firstCreatePass&&LA(n),d=e[8],h=FA(e);let f=!0;if(3&i.type||a){const m=Ls(i,e),_=a?a(m):m,w=h.length,D=a?M=>a(rr(M[i.index])):i.index;if(Gi(t)){let M=null;if(!a&&l&&(M=function v5(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==M)(M.__ngLastListenerFn__||M).__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,f=!1;else{s=Fv(i,e,d,s,!1);const O=t.listen(_,r,s);h.push(s,O),u&&u.push(r,D,w,w+1)}}else s=Fv(i,e,d,s,!0),_.addEventListener(r,s,o),h.push(s),u&&u.push(r,D,w,o)}else s=Fv(i,e,d,s,!1);const p=i.outputs;let g;if(f&&null!==p&&(g=p[r])){const m=g.length;if(m)for(let _=0;_<m;_+=2){const q=e[g[_]][g[_+1]].subscribe(s),Z=h.length;h.push(s,q),u&&u.push(r,i.index,Z,-(Z+1))}}}(s,r,r[11],o,n,e,!!t,i),fn}function DE(n,e,t,i){try{return!1!==t(i)}catch(r){return VA(n,r),!1}}function Fv(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?vs(n.index,e):e;0==(32&e[2])&&_v(a);let l=DE(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=DE(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function cn(n=1){return function wV(n){return(xn.lFrame.contextLView=function xV(n,e){for(;n>0;)e=e[15],n--;return e}(n,xn.lFrame.contextLView))[8]}(n)}function b5(n,e){let t=null;const i=function EH(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?aA(n,s,!0):PH(i,s))return r}else t=r}return t}function dg(n){const e=xt()[16][6];if(!e.projection){const i=e.projection=oh(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?b5(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function hg(n,e=0,t){const i=xt(),r=ti(),s=au(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),fy(),64!=(64&s.flags)&&function bH(n,e,t){nA(e[11],0,e,t,$M(n,t,e),KM(t.parent||e[6],t,e))}(r,i,s)}function BE(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?lo(s):ha(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];S5(n[a],e)&&(l=!0,n[a+1]=i?nv(u):ev(u)),a=i?lo(u):ha(u)}l&&(n[t+1]=i?ev(s):nv(s))}function S5(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&eu(n,e)>=0}const mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function VE(n){return n.substring(mr.key,mr.keyEnd)}function UE(n,e){const t=mr.textEnd;return t===e?-1:(e=mr.keyEnd=function E5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,mr.key=e,t),Su(n,e,t))}function Su(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Cu(n,e,t){return uo(n,e,t,!1),Cu}function Ii(n,e){return uo(n,e,null,!0),Ii}function ga(n){!function ho(n,e,t,i){const r=ti(),s=da(2);r.firstUpdatePass&&$E(r,null,s,i);const o=xt();if(t!==Tn&&Lr(o,s,t)){const a=r.data[Yr()];if(KE(a,i)&&!WE(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=X0(l,t||"")),Iv(r,a,o,t,i)}else!function F5(n,e,t,i,r,s,o,a){r===Tn&&(r=mi);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let g,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,g=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,g=f),null!==p&&YE(n,e,t,i,p,g,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function k5(n,e,t){if(null==t||""===t)return mi;const i=[],r=xs(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(ws,jo,n,!0)}function jo(n,e){for(let t=function M5(n){return function zE(n){mr.key=0,mr.keyEnd=0,mr.value=0,mr.valueEnd=0,mr.textEnd=n.length}(n),UE(n,Su(n,0,mr.textEnd))}(e);t>=0;t=UE(e,t))ws(n,VE(e),!0)}function uo(n,e,t,i){const r=xt(),s=ti(),o=da(2);s.firstUpdatePass&&$E(s,n,o,i),e!==Tn&&Lr(r,o,e)&&YE(s,s.data[Yr()],r,r[11],n,r[o+1]=function L5(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Zn(xs(n)))),n}(e,t),i,o)}function WE(n,e){return e>=n.expandoStartIndex}function $E(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Yr()],o=WE(n,t);KE(s,i)&&null===e&&!o&&(e=!1),e=function O5(n,e,t,i){const r=function gy(n){const e=xn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Ch(t=Bv(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Bv(r,n,e,t,i),null===s){let l=function R5(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==ha(i))return n[lo(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=Bv(null,n,e,l[1],i),l=Ch(l,e.attrs,i),function N5(n,e,t,i){n[lo(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function I5(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Ch(i,n[s].hostAttrs,t);return Ch(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function w5(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=lo(o),l=ha(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||eu(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=lo(n[a+1]);n[i+1]=ng(h,a),0!==h&&(n[h+1]=tv(n[h+1],i)),n[a+1]=function IH(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=ng(a,0),0!==a&&(n[a+1]=tv(n[a+1],i)),a=i;else n[i+1]=ng(l,0),0===a?a=i:n[l+1]=tv(n[l+1],i),l=i;c&&(n[i+1]=ev(n[i+1])),BE(n,u,i,!0),BE(n,u,i,!1),function x5(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&eu(s,e)>=0&&(t[i+1]=nv(t[i+1]))}(e,u,n,i,s),o=ng(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function Bv(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Ch(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Ch(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ws(n,o,!!t||e[++s]))}return void 0===n?null:n}function YE(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];pg(function hA(n){return 1==(1&n)}(c)?XE(l,e,t,r,ha(c),o):void 0)||(pg(s)||function dA(n){return 2==(2&n)}(c)&&(s=XE(l,null,t,r,a,o)),function xH(n,e,t,i,r){const s=Gi(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Ss.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Ss.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Rp(Yr(),t),r,s))}function XE(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===Tn&&(h=d?mi:void 0);let f=d?Ay(h,i):u===i?h:void 0;if(c&&!pg(f)&&(f=Ay(l,i)),pg(f)&&(a=f,o))return a;const p=n[r+1];r=o?lo(p):ha(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Ay(l,i))}return a}function pg(n){return void 0!==n}function KE(n,e){return 0!=(n.flags&(e?16:32))}function Lt(n,e=""){const t=xt(),i=ti(),r=n+20,s=i.firstCreatePass?au(i,r,1,e,null):i.data[r],o=t[r]=function $y(n,e){return Gi(n)?n.createText(e):n.createTextNode(e)}(t[11],e);eg(i,t,o,s),Io(s,!1)}function Vv(n){return Us("",n,""),Vv}function Us(n,e,t){const i=xt(),r=function pu(n,e,t,i){return Lr(n,$c(),t)?e+En(t)+i:Tn}(i,n,e,t);return r!==Tn&&fa(i,Yr(),r),Us}function Za(n,e,t){const i=xt();return Lr(i,$c(),e)&&Cs(ti(),Wi(),i,n,e,i[11],t,!0),Za}const Hl=void 0;var ij=["en",[["a","p"],["AM","PM"],Hl],[["AM","PM"],Hl,Hl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hl,"{1} 'at' {0}",Hl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nj(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Mu={};function mT(n){return n in Mu||(Mu[n]=pi.ng&&pi.ng.common&&pi.ng.common.locales&&pi.ng.common.locales[n]),Mu[n]}var Kt=(()=>((Kt=Kt||{})[Kt.LocaleId=0]="LocaleId",Kt[Kt.DayPeriodsFormat=1]="DayPeriodsFormat",Kt[Kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Kt[Kt.DaysFormat=3]="DaysFormat",Kt[Kt.DaysStandalone=4]="DaysStandalone",Kt[Kt.MonthsFormat=5]="MonthsFormat",Kt[Kt.MonthsStandalone=6]="MonthsStandalone",Kt[Kt.Eras=7]="Eras",Kt[Kt.FirstDayOfWeek=8]="FirstDayOfWeek",Kt[Kt.WeekendRange=9]="WeekendRange",Kt[Kt.DateFormat=10]="DateFormat",Kt[Kt.TimeFormat=11]="TimeFormat",Kt[Kt.DateTimeFormat=12]="DateTimeFormat",Kt[Kt.NumberSymbols=13]="NumberSymbols",Kt[Kt.NumberFormats=14]="NumberFormats",Kt[Kt.CurrencyCode=15]="CurrencyCode",Kt[Kt.CurrencySymbol=16]="CurrencySymbol",Kt[Kt.CurrencyName=17]="CurrencyName",Kt[Kt.Currencies=18]="Currencies",Kt[Kt.Directionality=19]="Directionality",Kt[Kt.PluralCase=20]="PluralCase",Kt[Kt.ExtraData=21]="ExtraData",Kt))();const gg="en-US";let _T=gg;function jv(n,e,t,i,r){if(n=In(n),Array.isArray(n))for(let s=0;s<n.length;s++)jv(n[s],e,t,i,r);else{const s=ti(),o=xt();let a=du(n)?n:In(n.provide),l=WA(n);const c=fr(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(du(n)||!n.multi){const f=new eh(l,r,Ge),p=Wv(a,e,r?u:u+h,d);-1===p?(Gp(nh(c,o),s,a),Gv(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=Wv(a,e,u+h,d),p=Wv(a,e,u,u+h),g=f>=0&&t[f],m=p>=0&&t[p];if(r&&!m||!r&&!g){Gp(nh(c,o),s,a);const _=function e4(n,e,t,i,r){const s=new eh(n,t,Ge);return s.multi=[],s.index=e,s.componentProviders=0,HT(s,r,i&&!t),s}(r?Zj:Jj,t.length,r,i,l);!r&&m&&(t[p].providerFactory=_),Gv(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(_),o.push(_)}else Gv(s,n,f>-1?f:p,HT(t[r?p:f],l,!r&&i));!r&&i&&m&&t[p].componentProviders++}}}function Gv(n,e,t,i){const r=du(e),s=function Ez(n){return!!n.useClass}(e);if(r||s){const l=(s?In(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function HT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Wv(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Jj(n,e,t,i){return $v(this.multi,[])}function Zj(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ih(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),$v(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],$v(r,s);return s}function $v(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function yi(n,e=[]){return t=>{t.providersResolver=(i,r)=>function Qj(n,e,t){const i=ti();if(i.firstCreatePass){const r=oo(n);jv(t,i.data,i.blueprint,r,!0),jv(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class zT{}class i4{resolveComponentFactory(e){throw function n4(n){const e=Error(`No component factory found for ${Zn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let zl=(()=>{class n{}return n.NULL=new i4,n})();function r4(){return Eu(fr(),xt())}function Eu(n,e){return new ai(Ls(n,e))}let ai=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=r4,n})();function s4(n){return n instanceof ai?n.nativeElement:n}class Tu{}let Hs=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function a4(){const n=xt(),t=vs(fr().index,n);return function o4(n){return n[11]}(No(t)?t:n)}(),n})(),l4=(()=>{class n{}return n.\u0275prov=nn({token:n,providedIn:"root",factory:()=>null}),n})();class Dh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const c4=new Dh("13.0.3"),qv={};function bg(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(rr(s)),so(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&bg(l[1],l,c,i)}const o=t.type;if(8&o)bg(n,e,t.child,i);else if(32&o){const a=jy(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=eA(e,t);if(Array.isArray(a))i.push(...a);else{const l=mh(e[16]);bg(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Ph{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return bg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(so(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Yy(e,i),$p(t,i))}this._attachedToViewContainer=!1}WM(this._lView[1],this._lView)}onDestroy(e){AA(this._lView[1],this._lView,null,e)}markForCheck(){_v(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mz(n,e,t){Ip(!0);try{vv(n,e,t)}finally{Ip(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hH(n,e){_h(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class u4 extends Ph{constructor(e){super(e),this._view=e}detectChanges(){kA(this._view)}checkNoChanges(){!function _z(n){Ip(!0);try{kA(n)}finally{Ip(!1)}}(this._view)}get context(){return null}}class GT extends zl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ir(e);return new Yv(t,this.ngModule)}}function WT(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const h4=new On("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kM});class Yv extends zT{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function RH(n){return n.map(OH).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return WT(this.componentDef.inputs)}get outputs(){return WT(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function f4(n,e){return{get:(t,i,r)=>{const s=n.get(t,qv,r);return s!==qv||i===qv?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(Tu,OC),a=s.get(l4,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function MA(n,e,t){if(Gi(n))return n.selectRootElement(e,t===io.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):qy(o.createRenderer(null,this.componentDef),c,function d4(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,h=function iE(n,e){return{components:[],scheduler:n||kM,clean:yz,playerHandler:e||null,flags:0}}(),f=sg(0,null,null,1,0,null,null,null,null,null),p=yh(null,f,h,d,null,null,o,l,a,s);let g,m;kp(p);try{const _=function tE(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=au(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(ag(l,c,!0),null!==n&&(Up(r,n,c),null!==l.classes&&Zy(r,n,l.classes),null!==l.styles&&iA(r,n,l.styles)));const u=i.createRenderer(n,e),d=yh(t,SA(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(Gp(nh(l,t),o,e.type),OA(o,l),RA(l,t.length,1)),og(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(i)Up(l,u,["ng-version",c4.full]);else{const{attrs:w,classes:D}=function NH(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!ao(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);w&&Up(l,u,w),D&&D.length>0&&Zy(l,u,D.join(" "))}if(m=cy(f,20),void 0!==t){const w=m.projection=[];for(let D=0;D<this.ngContentSelectors.length;D++){const M=t[D];w.push(null!=M?Array.from(M):null)}}g=function nE(n,e,t,i,r){const s=t[1],o=function ez(n,e,t){const i=fr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),NA(n,i,e,lu(n,e,1,null),t));const r=ih(e,n,i.directiveStart,i);Fr(r,e);const s=Ls(i,e);return s&&Fr(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=fr();e.contentQueries(1,o,l.directiveStart)}const a=fr();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Xa(a.index),DA(t[1],a,0,a.directiveStart,a.directiveEnd,e),PA(e,o)),o}(_,this.componentDef,p,h,[Bz]),vh(f,p,null)}finally{Fp()}return new g4(this.componentType,g,Eu(m,p),p,m)}}class g4 extends class t4{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new u4(r),this.componentType=e}get injector(){return new Xc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class ma{}class $T{}const Du=new Map;class XT extends ma{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new GT(this);const i=Is(e);this._bootstrapComponents=Vo(i.bootstrap),this._r3Injector=GA(e,t,[{provide:ma,useValue:this},{provide:zl,useValue:this.componentFactoryResolver}],Zn(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=$i.THROW_IF_NOT_FOUND,i=Pn.Default){return e===$i||e===ma||e===wv?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Xv extends $T{constructor(e){super(),this.moduleType=e,null!==Is(e)&&function _4(n){const e=new Set;!function t(i){const r=Is(i,!0),s=r.id;null!==s&&(function qT(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Zn(e)} vs ${Zn(e.name)}`)}(s,Du.get(s),i),Du.set(s,i));const o=Vo(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new XT(this.moduleType,e)}}function KT(n,e,t,i,r,s){const o=e+t;return Lr(n,o,r)?function Ho(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function Rh(n,e){const t=n[e];return t===Tn?void 0:t}(n,o+1)}function nD(n,e,t){const i=n+20,r=xt(),s=function Wc(n,e){return n[e]}(r,i);return function Nh(n,e){return n[1].data[e].pure}(r,i)?KT(r,function qr(){const n=xn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,s.transform,t,s):s.transform(t)}function Qv(n){return e=>{setTimeout(n,void 0,e)}}const yn=class P4 extends De{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const d=e;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=Qv(l),a&&(a=Qv(a)),c&&(c=Qv(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof ge&&e.add(u),u}};function O4(){return this._results[hu()]()}class Jv{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=hu(),i=Jv.prototype;i[t]||(i[t]=O4)}get changes(){return this._changes||(this._changes=new yn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Bs(e);(this._changesDetected=!function jV(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Bi=(()=>{class n{}return n.__NG_ELEMENT_ID__=I4,n})();const R4=Bi,N4=class extends R4{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=yh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),vh(t,i,e),new Ph(i)}};function I4(){return xg(fr(),xt())}function xg(n,e){return 4&n.type?new N4(e,n,Eu(n,e)):null}let zs=(()=>{class n{}return n.__NG_ELEMENT_ID__=k4,n})();function k4(){return sD(fr(),xt())}const F4=zs,iD=class extends F4{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Eu(this._hostTNode,this._hostLView)}get injector(){return new Xc(this._hostTNode,this._hostLView)}get parentInjector(){const e=jp(this._hostTNode,this._hostLView);if(qC(e)){const t=Yc(e,this._hostLView),i=qc(e);return new Xc(t[1].data[i+8],t)}return new Xc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=rD(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function sh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new Yv(Ir(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule&&c){const d=c.get(ma,null);d&&(s=d)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function uV(n){return so(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new iD(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function pH(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],iM(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function gH(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=Qy(s,o),l=i[11],c=Zp(l,o[7]);return null!==c&&function dH(n,e,t,i,r,s){i[0]=r,i[6]=e,_h(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),iM(Zv(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=rD(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Yy(this._lContainer,t);i&&($p(Zv(this._lContainer),t),WM(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=Yy(this._lContainer,t);return i&&null!=$p(Zv(this._lContainer),t)?new Ph(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function rD(n){return n[8]}function Zv(n){return n[8]||(n[8]=[])}function sD(n,e){let t;const i=e[n.index];if(so(i))t=i;else{let r;if(8&n.type)r=rr(i);else{const s=e[11];r=s.createComment("");const o=Ls(n,e);Vl(s,Zp(s,o),r,function vH(n,e){return Gi(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=IA(i,e,r,n),og(e,t)}return new iD(t,n,e)}class eb{constructor(e){this.queryList=e,this.matches=null}clone(){return new eb(this.queryList)}setDirty(){this.queryList.setDirty()}}class tb{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new tb(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==uD(e,t).matches&&this.queries[t].setDirty()}}class oD{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class nb{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new nb(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ib{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ib(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,V4(t,s)),this.matchTNodeWithReadOption(e,t,Wp(t,e,s,!1,!1))}else i===Bi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Wp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ai||r===zs||r===Bi&&4&t.type)this.addMatch(t.index,-2);else{const s=Wp(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function V4(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function H4(n,e,t,i){return-1===t?function U4(n,e){return 11&n.type?Eu(n,e):4&n.type?xg(n,e):null}(e,n):-2===t?function z4(n,e,t){return t===ai?Eu(e,n):t===Bi?xg(e,n):t===zs?sD(e,n):void 0}(n,e,i):ih(n,n[1],t,e)}function aD(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:H4(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function rb(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=aD(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&rb(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];rb(f[1],f,c,i)}}}}}return i}function Ci(n){const e=xt(),t=ti(),i=BC();my(i+1);const r=uD(t,i);if(n.dirty&&RC(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?rb(t,e,i,[]):aD(t,e,r,i);n.reset(s,s4),n.notifyOnChanges()}return!0}return!1}function Pu(n,e,t){const i=ti();i.firstCreatePass&&(function cD(n,e,t){null===n.queries&&(n.queries=new nb),n.queries.track(new ib(e,t))}(i,new oD(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function lD(n,e,t){const i=new Jv(4==(4&t));AA(n,e,i,i.destroy),null===e[19]&&(e[19]=new tb),e[19].queries.push(new eb(i))}(i,xt(),e)}function Mi(){return function j4(n,e){return n[19].queries[e].queryList}(xt(),BC())}function uD(n,e){return n.queries.getByIndex(e)}function Mg(...n){}const Ag=new On("Application Initializer");let Ru=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Mg,this.reject=Mg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Sh(s))t.push(s);else if(kv(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Ft(Ag,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const kh=new On("AppId"),lG={provide:kh,useFactory:function aG(){return`${ub()}${ub()}${ub()}`},deps:[]};function ub(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ED=new On("Platform Initializer"),Fh=new On("Platform ID"),TD=new On("appBootstrapListener");let DD=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const tl=new On("LocaleId"),PD=new On("DefaultCurrencyCode");class cG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Eg=(()=>{class n{compileModuleSync(t){return new Xv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Vo(Is(t).declarations).reduce((o,a)=>{const l=Ir(a);return l&&o.push(new Yv(l)),o},[]);return new cG(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const dG=(()=>Promise.resolve(0))();function db(n){"undefined"==typeof Zone?dG.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class li{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yn(!1),this.onMicrotaskEmpty=new yn(!1),this.onStable=new yn(!1),this.onError=new yn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function hG(){let n=pi.requestAnimationFrame,e=pi.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function gG(n){const e=()=>{!function pG(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(pi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,fb(n),n.isCheckStableRunning=!0,hb(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),fb(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return OD(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),RD(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return OD(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),RD(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,fb(n),hb(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!li.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(li.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,fG,Mg,Mg);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const fG={};function hb(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function fb(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function OD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function RD(n){n._nesting--,hb(n)}class mG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yn,this.onMicrotaskEmpty=new yn,this.onStable=new yn,this.onError=new yn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let pb=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{li.assertNotInAngularZone(),db(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())db(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Ft(li))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),ND=(()=>{class n{constructor(){this._applications=new Map,gb.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return gb.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class _G{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let fo,gb=new _G;const ID=new On("AllowMultipleToken");class kD{constructor(e,t){this.name=e,this.token=t}}function FD(n,e,t=[]){const i=`Platform: ${e}`,r=new On(i);return(s=[])=>{let o=LD();if(!o||o.injector.get(ID,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:xv,useValue:"platform"});!function wG(n){if(fo&&!fo.destroyed&&!fo.injector.get(ID,!1))throw new gs("400","");fo=n.get(BD);const e=n.get(ED,null);e&&e.forEach(t=>t())}($i.create({providers:a,name:i}))}return function xG(n){const e=LD();if(!e)throw new gs("401","");return e}()}}function LD(){return fo&&!fo.destroyed?fo:null}let BD=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function SG(n,e){let t;return t="noop"===n?new mG:("zone.js"===n?void 0:n)||new li({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:li,useValue:a}];return a.run(()=>{const c=$i.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(ru,null);if(!d)throw new gs("402","");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{mb(this._modules,u),h.unsubscribe()})}),function CG(n,e,t){try{const i=t();return Sh(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(Ru);return h.runInitializers(),h.donePromise.then(()=>(function lj(n){_s(n,"Expected localeId to be defined"),"string"==typeof n&&(_T=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(tl,gg)||gg),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=VD({},i);return function vG(n,e,t){const i=new Xv(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(jl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new gs("403","");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new gs("404","");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Ft($i))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function VD(n,e){return Array.isArray(e)?e.reduce(VD,n):Object.assign(Object.assign({},n),e)}let jl=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new Pe(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Pe(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{li.assertNotInAngularZone(),db(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{li.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=fC(a,l.pipe(pC()))}bootstrap(t,i){if(!this._initStatus.done)throw new gs("405","");let r;r=t instanceof zT?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function bG(n){return n.isBoundToModule}(r)?void 0:this._injector.get(ma),a=r.create($i.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(pb,null),u=c&&a.injector.get(ND);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),mb(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new gs("101","");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;mb(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(TD,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(Ft(li),Ft($i),Ft(ru),Ft(zl),Ft(Ru))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function mb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let HD=!0,js=(()=>{class n{}return n.__NG_ELEMENT_ID__=EG,n})();function EG(n){return function TG(n,e,t){if(Pp(n)&&!t){const i=vs(n.index,e);return new Ph(i,i)}return 47&n.type?new Ph(e[16],e):null}(fr(),xt(),16==(16&n))}class YD{constructor(){}supports(e){return wh(e)}create(e){return new IG(e)}}const NG=(n,e)=>e;class IG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||NG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<KD(i,r,s)?t:i,a=KD(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!wh(e))throw new Error(`Error trying to diff '${Zn(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function Yz(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[hu()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new kG(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new XD),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new XD),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class kG{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class XD{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new FG,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function KD(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class QD{constructor(){}supports(e){return e instanceof Map||Tv(e)}create(){return new LG}}class LG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Tv(e)))throw new Error(`Error trying to diff '${Zn(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new BG(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class BG{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JD(){return new Lh([new YD])}let Lh=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||JD()),deps:[[n,new tu,new Fo]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function VG(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=nn({token:n,providedIn:"root",factory:JD}),n})();function ZD(){return new Nu([new QD])}let Nu=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||ZD()),deps:[[n,new tu,new Fo]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=nn({token:n,providedIn:"root",factory:ZD}),n})();const UG=[new QD],zG=new Lh([new YD]),jG=new Nu(UG),GG=FD(null,"core",[{provide:Fh,useValue:"unknown"},{provide:BD,deps:[$i]},{provide:ND,deps:[]},{provide:DD,deps:[]}]),XG=[{provide:jl,useClass:jl,deps:[li,$i,ru,zl,Ru]},{provide:h4,deps:[li],useFactory:function KG(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ru,useClass:Ru,deps:[[new Fo,Ag]]},{provide:Eg,useClass:Eg,deps:[]},lG,{provide:Lh,useFactory:function WG(){return zG},deps:[]},{provide:Nu,useFactory:function $G(){return jG},deps:[]},{provide:tl,useFactory:function qG(n){return n||function YG(){return"undefined"!=typeof $localize&&$localize.locale||gg}()},deps:[[new uh(tl),new Fo,new tu]]},{provide:PD,useValue:"USD"}];let QG=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Ft(jl))},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({providers:XG}),n})(),Dg=null;function Go(){return Dg}const Vi=new On("DocumentToken");let Wl=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(){return function t8(){return Ft(eP)}()},providedIn:"platform"}),n})();const n8=new On("Location Initialized");let eP=(()=>{class n extends Wl{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Go().getBaseHref(this._doc)}onPopState(t){const i=Go().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Go().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){tP()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){tP()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Ft(Vi))},n.\u0275prov=nn({token:n,factory:function(){return function i8(){return new eP(Ft(Vi))}()},providedIn:"platform"}),n})();function tP(){return!!window.history.pushState}function wb(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function nP(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ya(n){return n&&"?"!==n[0]?"?"+n:n}let Iu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(){return function r8(n){const e=Ft(Vi).location;return new iP(Ft(Wl),e&&e.origin||"")}()},providedIn:"root"}),n})();const xb=new On("appBaseHref");let iP=(()=>{class n extends Iu{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return wb(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ya(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+ya(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+ya(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(Ft(Wl),Ft(xb,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),s8=(()=>{class n extends Iu{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=wb(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+ya(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+ya(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(Ft(Wl),Ft(xb,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),Sb=(()=>{class n{constructor(t,i){this._subject=new yn,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=nP(rP(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ya(i))}normalize(t){return n.stripTrailingSlash(function a8(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,rP(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ya(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ya(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=ya,n.joinWithSlash=wb,n.stripTrailingSlash=nP,n.\u0275fac=function(t){return new(t||n)(Ft(Iu),Ft(Wl))},n.\u0275prov=nn({token:n,factory:function(){return function o8(){return new Sb(Ft(Iu),Ft(Wl))}()},providedIn:"root"}),n})();function rP(n){return n.replace(/\/index.html$/,"")}var sr=(()=>((sr=sr||{})[sr.Zero=0]="Zero",sr[sr.One=1]="One",sr[sr.Two=2]="Two",sr[sr.Few=3]="Few",sr[sr.Many=4]="Many",sr[sr.Other=5]="Other",sr))();const p8=function gT(n){return function Kr(n){const e=function rj(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=mT(e);if(t)return t;const i=e.split("-")[0];if(t=mT(i),t)return t;if("en"===i)return ij;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[Kt.PluralCase]};class Vg{}let j8=(()=>{class n extends Vg{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(p8(i||this.locale)(t)){case sr.Zero:return"zero";case sr.One:return"one";case sr.Two:return"two";case sr.Few:return"few";case sr.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(Ft(tl))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function fP(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class $8{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $l=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function q8(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,s,o)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new $8(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new pP(r,a);i.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new pP(r,a);i.push(l)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,s=this._viewContainer.length;r<s;r++){const o=this._viewContainer.get(r);o.context.index=r,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Ge(zs),Ge(Bi),Ge(Lh))},n.\u0275dir=Gt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class pP{constructor(e,t){this.record=e,this.view=t}}let ql=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Y8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gP("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gP("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Ge(zs),Ge(Bi))},n.\u0275dir=Gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Y8{constructor(){this.$implicit=null,this.ngIf=null}}function gP(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Zn(e)}'.`)}let us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({providers:[{provide:Vg,useClass:j8}]}),n})();let CW=(()=>{class n{}return n.\u0275prov=nn({token:n,providedIn:"root",factory:()=>new MW(Ft(Vi),window)}),n})();class MW{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function AW(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=vP(this.window.history)||vP(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function vP(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bP{}class Fb extends class EW extends class e8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ZG(n){Dg||(Dg=n)}(new Fb)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function TW(){return Hh=Hh||document.querySelector("base"),Hh?Hh.getAttribute("href"):null}();return null==t?null:function DW(n){Ug=Ug||document.createElement("a"),Ug.setAttribute("href",n);const e=Ug.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fP(document.cookie,e)}}let Ug,Hh=null;const wP=new On("TRANSITION_ID"),OW=[{provide:Ag,useFactory:function PW(n,e,t){return()=>{t.get(Ru).donePromise.then(()=>{const i=Go(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[wP,Vi,$i],multi:!0}];class Lb{static init(){!function yG(n){gb=n}(new Lb)}addToWindow(e){pi.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},pi.getAllAngularTestabilities=()=>e.getAllTestabilities(),pi.getAllAngularRootElements=()=>e.getAllRootElements(),pi.frameworkStabilizers||(pi.frameworkStabilizers=[]),pi.frameworkStabilizers.push(i=>{const r=pi.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?Go().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let RW=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const Hg=new On("EventManagerPlugins");let zg=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Ft(Hg),Ft(li))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class xP{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Go().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let SP=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),zh=(()=>{class n extends SP{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(CP),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(CP))}}return n.\u0275fac=function(t){return new(t||n)(Ft(Vi))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function CP(n){Go().remove(n)}const Bb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vb=/%COMP%/g;function jg(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?jg(n,r,t):(r=r.replace(Vb,n),t.push(r))}return t}function EP(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Gg=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Ub(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case io.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new BW(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case io.ShadowDom:return new VW(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=jg(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Ft(zg),Ft(zh),Ft(kh))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class Ub{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Bb[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Bb[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Bb[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ss.DashCase|Ss.Important)?e.style.setProperty(t,i,r&Ss.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ss.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,EP(i)):this.eventManager.addEventListener(e,t,EP(i))}}class BW extends Ub{constructor(e,t,i,r){super(e),this.component=i;const s=jg(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function kW(n){return"_ngcontent-%COMP%".replace(Vb,n)}(r+"-"+i.id),this.hostAttr=function FW(n){return"_nghost-%COMP%".replace(Vb,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class VW extends Ub{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=jg(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let UW=(()=>{class n extends xP{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Ft(Vi))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const DP=["alt","control","meta","shift"],zW={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},PP={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jW={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let GW=(()=>{class n extends xP{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Go().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(DP.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function WW(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&PP.hasOwnProperty(e)&&(e=PP[e]))}return zW[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),DP.forEach(s=>{s!=r&&jW[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Ft(Vi))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const XW=FD(GG,"browser",[{provide:Fh,useValue:"browser"},{provide:ED,useValue:function $W(){Fb.makeCurrent(),Lb.init()},multi:!0},{provide:Vi,useFactory:function YW(){return function oV(n){ay=n}(document),document},deps:[]}]),KW=[{provide:xv,useValue:"root"},{provide:ru,useFactory:function qW(){return new ru},deps:[]},{provide:Hg,useClass:UW,multi:!0,deps:[Vi,li,Fh]},{provide:Hg,useClass:GW,multi:!0,deps:[Vi]},{provide:Gg,useClass:Gg,deps:[zg,zh,kh]},{provide:Tu,useExisting:Gg},{provide:SP,useExisting:zh},{provide:zh,useClass:zh,deps:[Vi]},{provide:pb,useClass:pb,deps:[li]},{provide:zg,useClass:zg,deps:[Hg,li]},{provide:bP,useClass:RW,deps:[]}];let OP=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:kh,useValue:t.appId},{provide:wP,useExisting:kh},OW]}}}return n.\u0275fac=function(t){return new(t||n)(Ft(n,12))},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({providers:KW,imports:[us,QG]}),n})();"undefined"!=typeof window&&window;let IP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(t){let i=null;return i=t?new(t||n):Ft(kP),i},providedIn:"root"}),n})(),kP=(()=>{class n extends IP{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Si.NONE:return i;case Si.HTML:return Lo(i,"HTML")?xs(i):AM(this._doc,String(i)).toString();case Si.STYLE:return Lo(i,"Style")?xs(i):i;case Si.SCRIPT:if(Lo(i,"Script"))return xs(i);throw new Error("unsafe value used in a script context");case Si.URL:return yM(i),Lo(i,"URL")?xs(i):hh(String(i));case Si.RESOURCE_URL:if(Lo(i,"ResourceURL"))return xs(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function bU(n){return new gU(n)}(t)}bypassSecurityTrustStyle(t){return function wU(n){return new mU(n)}(t)}bypassSecurityTrustScript(t){return function xU(n){return new _U(n)}(t)}bypassSecurityTrustUrl(t){return function SU(n){return new yU(n)}(t)}bypassSecurityTrustResourceUrl(t){return function CU(n){return new vU(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Ft(Vi))},n.\u0275prov=nn({token:n,factory:function(t){let i=null;return i=t?new t:function o6(n){return new kP(n.get(Vi))}(Ft($i)),i},providedIn:"root"}),n})();function Sn(...n){return ir(n,Yd(n))}class yr extends De{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const{isArray:a6}=Array,{getPrototypeOf:l6,prototype:c6,keys:u6}=Object;function FP(n){if(1===n.length){const e=n[0];if(a6(e))return{args:e,keys:null};if(function d6(n){return n&&"object"==typeof n&&l6(n)===c6}(e)){const t=u6(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:h6}=Array;function zb(n){return T(e=>function f6(n,e){return h6(e)?n(...e):n(e)}(n,e))}function LP(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function BP(n,e,t){n?nr(t,n,e):e()}const Wg=He(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function jh(...n){return function g6(){return to(1)}()(ir(n,Yd(n)))}function VP(n){return new Pe(e=>{_n(n()).subscribe(e)})}function UP(){return R((n,e)=>{let t=null;n._refCount++;const i=new v(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class m6 extends Pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,E(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ge;const t=this.getSubject();e.add(this.source.subscribe(new v(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ge.EMPTY)}return e}refCount(){return UP()(this)}}function ba(n,e){return R((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(new v(i,l=>{null==r||r.unsubscribe();let c=0;const u=s++;_n(n(l,u)).subscribe(r=new v(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function _6(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(new v(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function HP(n,e){return R(_6(n,e,arguments.length>=2,!0))}function ar(n,e){return R((t,i)=>{let r=0;t.subscribe(new v(i,s=>n.call(e,s,r++)&&i.next(s)))})}function il(n){return R((e,t)=>{let s,i=null,r=!1;i=e.subscribe(new v(t,void 0,void 0,o=>{s=_n(n(o,il(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function ku(n,e){return N(e)?Un(n,e,1):Un(n,1)}function Gb(n){return n<=0?()=>jr:R((e,t)=>{let i=[];e.subscribe(new v(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function zP(n=y6){return R((e,t)=>{let i=!1;e.subscribe(new v(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function y6(){return new Wg}function jP(n){return R((e,t)=>{let i=!1;e.subscribe(new v(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Fu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ar((r,s)=>n(r,s,i)):_e,Ar(1),t?jP(e):zP(()=>new Wg))}function Br(n,e,t){const i=N(n)||e||t?{next:n,error:e,complete:t}:n;return i?R((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(new v(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):_e}class wa{constructor(e,t){this.id=e,this.url=t}}class Wb extends wa{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gh extends wa{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class GP extends wa{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class w6 extends wa{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class x6 extends wa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class S6 extends wa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C6 extends wa{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class M6 extends wa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class A6 extends wa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WP{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $P{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class E6{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class T6{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D6{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P6{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qP{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gn="primary";class O6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lu(n){return new O6(n)}const YP="ngNavigationCancelingError";function $b(n){const e=Error("NavigationCancelingError: "+n);return e[YP]=!0,e}function N6(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Wo(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!XP(n[r],e[r]))return!1;return!0}function XP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function KP(n){return Array.prototype.concat.apply([],n)}function QP(n){return n.length>0?n[n.length-1]:null}function Pr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function $o(n){return kv(n)?n:Sh(n)?ir(Promise.resolve(n)):Sn(n)}const F6={exact:function eO(n,e,t){if(!Xl(n.segments,e.segments)||!qg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!eO(n.children[i],e.children[i],t))return!1;return!0},subset:tO},JP={exact:function L6(n,e){return Wo(n,e)},subset:function B6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>XP(n[t],e[t]))},ignored:()=>!0};function ZP(n,e,t){return F6[t.paths](n.root,e.root,t.matrixParams)&&JP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tO(n,e,t){return nO(n,e,e.segments,t)}function nO(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Xl(r,t)||e.hasChildren()||!qg(r,t,i))}if(n.segments.length===t.length){if(!Xl(n.segments,t)||!qg(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!tO(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Xl(n.segments,r)&&qg(n.segments,r,i)&&n.children[Gn])&&nO(n.children[Gn],e,s,i)}}function qg(n,e,t){return e.every((i,r)=>JP[t](n[r].parameters,i.parameters))}class Yl{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lu(this.queryParams)),this._queryParamMap}toString(){return H6.serialize(this)}}class Yn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Pr(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yg(this)}}class Wh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lu(this.parameters)),this._parameterMap}toString(){return aO(this)}}function Xl(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class iO{}class rO{parse(e){const t=new K6(e);return new Yl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$h(e.root,!0)}`,i=function G6(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Xg(t)}=${Xg(r)}`).join("&"):`${Xg(t)}=${Xg(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function z6(n){return encodeURI(n)}(e.fragment)}`:""}`}}const H6=new rO;function Yg(n){return n.segments.map(e=>aO(e)).join("/")}function $h(n,e){if(!n.hasChildren())return Yg(n);if(e){const t=n.children[Gn]?$h(n.children[Gn],!1):"",i=[];return Pr(n.children,(r,s)=>{s!==Gn&&i.push(`${s}:${$h(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function U6(n,e){let t=[];return Pr(n.children,(i,r)=>{r===Gn&&(t=t.concat(e(i,r)))}),Pr(n.children,(i,r)=>{r!==Gn&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Gn?[$h(n.children[Gn],!1)]:[`${r}:${$h(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gn]?`${Yg(n)}/${t[0]}`:`${Yg(n)}/(${t.join("//")})`}}function sO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xg(n){return sO(n).replace(/%3B/gi,";")}function qb(n){return sO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kg(n){return decodeURIComponent(n)}function oO(n){return Kg(n.replace(/\+/g,"%20"))}function aO(n){return`${qb(n.path)}${function j6(n){return Object.keys(n).map(e=>`;${qb(e)}=${qb(n[e])}`).join("")}(n.parameters)}`}const W6=/^[^\/()?;=#]+/;function Qg(n){const e=n.match(W6);return e?e[0]:""}const $6=/^[^=?&#]+/,Y6=/^[^&#]+/;class K6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yn([],{}):new Yn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Gn]=new Yn(e,t)),i}parseSegment(){const e=Qg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Wh(Kg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qg(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Qg(this.remaining);r&&(i=r,this.capture(i))}e[Kg(t)]=Kg(i)}parseQueryParam(e){const t=function q6(n){const e=n.match($6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function X6(n){const e=n.match(Y6);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=oO(t),s=oO(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Qg(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Gn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Gn]:new Yn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class lO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Yb(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Yb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Xb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Xb(e,this._root).map(t=>t.value)}}function Yb(n,e){if(n===e.value)return e;for(const t of e.children){const i=Yb(n,t);if(i)return i}return null}function Xb(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Xb(n,t);if(i.length)return i.unshift(e),i}return[]}class xa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cO extends lO{constructor(e,t){super(e),this.snapshot=t,Kb(this,e)}toString(){return this.snapshot.toString()}}function uO(n,e){const t=function Q6(n,e){const o=new Jg([],{},{},"",{},Gn,e,null,n.root,-1,{});return new hO("",new xa(o,[]))}(n,e),i=new yr([new Wh("",{})]),r=new yr({}),s=new yr({}),o=new yr({}),a=new yr(""),l=new Vu(i,r,o,a,s,Gn,e,t.root);return l.snapshot=t.root,new cO(new xa(l,[]),t)}class Vu{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(T(e=>Lu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(T(e=>Lu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dO(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function J6(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Jg{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hO extends lO{constructor(e,t){super(t),this.url=e,Kb(this,t)}toString(){return fO(this._root)}}function Kb(n,e){e.value._routerState=n,e.children.forEach(t=>Kb(n,t))}function fO(n){const e=n.children.length>0?` { ${n.children.map(fO).join(", ")} } `:"";return`${n.value}${e}`}function Qb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wo(e.params,t.params)||n.params.next(t.params),function I6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Jb(n,e){const t=Wo(n.params,e.params)&&function V6(n,e){return Xl(n,e)&&n.every((t,i)=>Wo(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Jb(n.parent,e.parent))}function qh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function e$(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return qh(n,i,r);return qh(n,i)})}(n,e,t);return new xa(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qh(n,a)),o}}const i=function t$(n){return new Vu(new yr(n.url),new yr(n.params),new yr(n.queryParams),new yr(n.fragment),new yr(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>qh(n,s));return new xa(i,r)}}function Zg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yh(n){return"object"==typeof n&&null!=n&&n.outlets}function Zb(n,e,t,i,r){let s={};return i&&Pr(i,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new Yl(t.root===n?e:pO(t.root,n,e),s,r)}function pO(n,e,t){const i={};return Pr(n.children,(r,s)=>{i[s]=r===e?t:pO(r,e,t)}),new Yn(n.segments,i)}class gO{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Zg(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Yh);if(r&&r!==QP(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class e1{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function mO(n,e,t){if(n||(n=new Yn([],{})),0===n.segments.length&&n.hasChildren())return em(n,e,t);const i=function a$(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Yh(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!yO(l,c,o))return s;i+=2}else{if(!yO(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Yn(n.segments.slice(0,i.pathIndex),{});return s.children[Gn]=new Yn(n.segments.slice(i.pathIndex),n.children),em(s,0,r)}return i.match&&0===r.length?new Yn(n.segments,{}):i.match&&!n.hasChildren()?t1(n,e,t):i.match?em(n,0,r):t1(n,e,t)}function em(n,e,t){if(0===t.length)return new Yn(n.segments,{});{const i=function o$(n){return Yh(n[0])?n[0].outlets:{[Gn]:n}}(t),r={};return Pr(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=mO(n.children[o],e,s))}),Pr(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Yn(n.segments,r)}}function t1(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Yh(s)){const l=l$(s.outlets);return new Yn(i,l)}if(0===r&&Zg(t[0])){i.push(new Wh(n.segments[e].path,_O(t[0]))),r++;continue}const o=Yh(s)?s.outlets[Gn]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Zg(a)?(i.push(new Wh(o,_O(a))),r+=2):(i.push(new Wh(o,{})),r++)}return new Yn(i,{})}function l$(n){const e={};return Pr(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=t1(new Yn([],{}),0,t))}),e}function _O(n){const e={};return Pr(n,(t,i)=>e[i]=`${t}`),e}function yO(n,e,t){return n==t.path&&Wo(e,t.parameters)}class u${constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Qb(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Bu(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Pr(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Bu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Bu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Bu(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new P6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new T6(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Qb(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Qb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function d$(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class n1{constructor(e,t){this.routes=e,this.module=t}}function rl(n){return"function"==typeof n}function Kl(n){return n instanceof Yl}const Xh=Symbol("INITIAL_VALUE");function Kh(){return ba(n=>function jb(...n){const e=Yd(n),t=Sp(n),{args:i,keys:r}=FP(n);if(0===i.length)return ir([],e);const s=new Pe(function p6(n,e,t=_e){return i=>{BP(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)BP(e,()=>{const c=ir(n[l],e);let u=!1;c.subscribe(new v(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>LP(r,o):_e));return t?s.pipe(zb(t)):s}(n.map(e=>e.pipe(Ar(1),function $g(...n){const e=Yd(n);return R((t,i)=>{(e?jh(n,t,e):jh(n,t)).subscribe(i)})}(Xh)))).pipe(HP((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==Xh?r:(s===Xh&&(i=!0),i||!1!==s&&o!==t.length-1&&!Kl(s)?r:s),e)},Xh),ar(e=>e!==Xh),T(e=>Kl(e)?e:!0===e),Ar(1)))}class _${constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Qh,this.attachRef=null}}class Qh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new _$,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let i1=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new yn,this.deactivateEvents=new yn,this.attachEvents=new yn,this.detachEvents=new yn,this.name=s||Gn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new y$(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(Ge(Qh),Ge(zs),Ge(zl),function Ll(n){return function LV(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(WC(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(fr(),n)}("name"),Ge(js))},n.\u0275dir=Gt({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class y${constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Vu?this.route:e===Qh?this.childContexts:this.parent.get(e,t)}}let vO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wr({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&on(0,"router-outlet")},directives:[i1],encapsulation:2}),n})();function bO(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];v$(i,b$(e,i))}}function v$(n,e){n.children&&bO(n.children,e)}function b$(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function r1(n){const e=n.children&&n.children.map(r1),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gn&&(t.component=vO),t}function $s(n){return n.outlet||Gn}function wO(n,e){const t=n.filter(i=>$s(i)===e);return t.push(...n.filter(i=>$s(i)!==e)),t}const xO={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function tm(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},xO):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||N6)(t,n,e);if(!s)return Object.assign({},xO);const o={};Pr(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function nm(n,e,t,i,r="corrected"){if(t.length>0&&function S$(n,e,t){return t.some(i=>im(n,e,i)&&$s(i)!==Gn)}(n,t,i)){const o=new Yn(e,function x$(n,e,t,i){const r={};r[Gn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&$s(s)!==Gn){const o=new Yn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[$s(s)]=o}return r}(n,e,i,new Yn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function C$(n,e,t){return t.some(i=>im(n,e,i))}(n,t,i)){const o=new Yn(n.segments,function w$(n,e,t,i,r,s){const o={};for(const a of i)if(im(n,t,a)&&!r[$s(a)]){const l=new Yn([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[$s(a)]=l}return Object.assign(Object.assign({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Yn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function im(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function SO(n,e,t,i){return!!($s(n)===i||i!==Gn&&im(e,t,n))&&("**"===n.path||tm(e,n,t).matched)}function CO(n,e,t){return 0===e.length&&!n.children[t]}class Jh{constructor(e){this.segmentGroup=e||null}}class MO{constructor(e){this.urlTree=e}}function rm(n){return new Pe(e=>e.error(new Jh(n)))}function AO(n){return new Pe(e=>e.error(new MO(n)))}function M$(n){return new Pe(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class T${constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(ma)}apply(){const e=nm(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Gn).pipe(T(s=>this.createUrlTree(s1(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(il(s=>{if(s instanceof MO)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Jh?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Gn).pipe(T(r=>this.createUrlTree(s1(r),e.queryParams,e.fragment))).pipe(il(r=>{throw r instanceof Jh?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Yn([],{[Gn]:e}):e;return new Yl(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(T(s=>new Yn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return ir(r).pipe(ku(s=>{const o=i.children[s],a=wO(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(T(l=>({segment:l,outlet:s})))}),HP((s,o)=>(s[o.outlet]=o.segment,s),{}),function v6(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ar((r,s)=>n(r,s,i)):_e,Gb(1),t?jP(e):zP(()=>new Wg))}())}expandSegment(e,t,i,r,s,o){return ir(i).pipe(ku(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(il(c=>{if(c instanceof Jh)return Sn(null);throw c}))),Fu(a=>!!a),il((a,l)=>{if(a instanceof Wg||"EmptyError"===a.name){if(CO(t,r,s))return Sn(new Yn([],{}));throw new Jh(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return SO(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):rm(t):rm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?AO(s):this.lineralizeSegments(i,s).pipe(Un(o=>{const a=new Yn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:u}=tm(t,r,s);if(!a)return rm(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?AO(d):this.lineralizeSegments(r,d).pipe(Un(h=>this.expandSegment(e,t,i,h.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Sn(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(T(h=>(i._loadedConfig=h,new Yn(r,{})))):Sn(new Yn(r,{}));const{matched:o,consumedSegments:a,lastChild:l}=tm(t,i,r);if(!o)return rm(t);const c=r.slice(l);return this.getChildConfig(e,i,r).pipe(Un(d=>{const h=d.module,f=d.routes,{segmentGroup:p,slicedSegments:g}=nm(t,a,c,f),m=new Yn(p.segments,p.children);if(0===g.length&&m.hasChildren())return this.expandChildren(h,f,m).pipe(T(M=>new Yn(a,M)));if(0===f.length&&0===g.length)return Sn(new Yn(a,{}));const _=$s(i)===s;return this.expandSegment(h,m,f,g,_?Gn:s,!0).pipe(T(D=>new Yn(a.concat(D.segments),D.children)))}))}getChildConfig(e,t,i){return t.children?Sn(new n1(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Sn(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(Un(r=>r?this.configLoader.load(e.injector,t).pipe(T(s=>(t._loadedConfig=s,s))):function A$(n){return new Pe(e=>e.error($b(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Sn(new n1([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?Sn(r.map(o=>{const a=e.get(o);let l;if(function f$(n){return n&&rl(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!rl(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return $o(l)})).pipe(Kh(),Br(o=>{if(!Kl(o))return;const a=$b(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),T(o=>!0===o)):Sn(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Sn(i);if(r.numberOfChildren>1||!r.children[Gn])return M$(e.redirectTo);r=r.children[Gn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Yl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Pr(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Pr(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new Yn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function s1(n){const e={};for(const i of Object.keys(n.children)){const s=s1(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function D$(n){if(1===n.numberOfChildren&&n.children[Gn]){const e=n.children[Gn];return new Yn(n.segments.concat(e.segments),e.children)}return n}(new Yn(n.segments,e))}class EO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sm{constructor(e,t){this.component=e,this.route=t}}function O$(n,e,t){const i=n._root;return Zh(i,e?e._root:null,t,[i.value])}function om(n,e,t){const i=function N$(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Zh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Bu(e);return n.children.forEach(o=>{(function I$(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function k$(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Xl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xl(n.url,e.url)||!Wo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jb(n,e)||!Wo(n.queryParams,e.queryParams);default:return!Jb(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new EO(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Zh(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new sm(a.outlet.component,o))}else o&&ef(e,a,r),r.canActivateChecks.push(new EO(i)),Zh(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Pr(s,(o,a)=>ef(o,t.getContext(a),r)),r}function ef(n,e,t){const i=Bu(n),r=n.value;Pr(i,(s,o)=>{ef(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new sm(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class G${}function TO(n){return new Pe(e=>e.error(n))}class $${constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=nm(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Gn);if(null===t)return null;const i=new Jg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new xa(i,t),s=new hO(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=dO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=wO(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=DO(i);return function q$(n){n.sort((e,t)=>e.value.outlet===Gn?-1:t.value.outlet===Gn?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return CO(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!SO(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const f=i.length>0?QP(i).parameters:{};s=new Jg(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,RO(e),$s(e),e.component,e,PO(t),OO(t)+i.length,NO(e))}else{const f=tm(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=i.slice(f.lastChild),s=new Jg(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,RO(e),$s(e),e.component,e,PO(t),OO(t)+o.length,NO(e))}const l=function Y$(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=nm(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new xa(s,f)]}if(0===l.length&&0===u.length)return[new xa(s,[])];const d=$s(e)===r,h=this.processSegment(l,c,u,d?Gn:r);return null===h?null:[new xa(s,h)]}}function X$(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function DO(n){const e=[],t=new Set;for(const i of n){if(!X$(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=DO(i.children);e.push(new xa(i.value,r))}return e.filter(i=>!t.has(i))}function PO(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function OO(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function RO(n){return n.data||{}}function NO(n){return n.resolve||{}}function o1(n){return ba(e=>{const t=n(e);return t?ir(t).pipe(T(()=>e)):Sn(e)})}class i7 extends class n7{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const a1=new On("ROUTES");class IO{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(T(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new n1(KP(o.injector.get(a1,void 0,Pn.Self|Pn.Optional)).map(r1),o)}),il(s=>{throw t._loader$=void 0,s}));return t._loader$=new m6(r,()=>new De).pipe(UP()),t._loader$}loadModuleFactory(e){return $o(e()).pipe(Un(t=>t instanceof $T?Sn(t):ir(this.compiler.compileModuleAsync(t))))}}class s7{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function o7(n){throw n}function a7(n,e,t){return e.parse("/")}function kO(n,e){return Sn(null)}const l7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ms=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new De,this.errorHandler=o7,this.malformedUriErrorHandler=a7,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kO,afterPreactivation:kO},this.urlHandlingStrategy=new s7,this.routeReuseStrategy=new i7,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(ma),this.console=o.get(DD);const d=o.get(li);this.isNgZoneEnabled=d instanceof li&&li.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function k6(){return new Yl(new Yn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new IO(o,a,h=>this.triggerEvent(new WP(h)),h=>this.triggerEvent(new $P(h))),this.routerState=uO(this.currentUrlTree,this.rootComponentType),this.transitions=new yr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(ar(r=>0!==r.id),T(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ba(r=>{let s=!1,o=!1;return Sn(r).pipe(Br(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ba(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return am(a.source)&&(this.browserUrlTree=a.extractedUrl),Sn(a).pipe(ba(d=>{const h=this.transitions.getValue();return i.next(new Wb(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?jr:Promise.resolve(d)}),function P$(n,e,t,i){return ba(r=>function E$(n,e,t,i,r){return new T$(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(T(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Br(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function K$(n,e,t,i,r){return Un(s=>function W$(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new $$(n,e,t,i,r,s).recognize();return null===o?TO(new G$):Sn(o)}catch(o){return TO(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(T(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Br(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new x6(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=a,_=new Wb(h,this.serializeUrl(f),p,g);i.next(_);const w=uO(f,this.rootComponentType).snapshot;return Sn(Object.assign(Object.assign({},a),{targetSnapshot:w,urlAfterRedirects:f,extras:Object.assign(Object.assign({},m),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),jr}),o1(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Br(a=>{const l=new S6(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),T(a=>Object.assign(Object.assign({},a),{guards:O$(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function F$(n,e){return Un(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Sn(Object.assign(Object.assign({},t),{guardsResult:!0})):function L$(n,e,t,i){return ir(n).pipe(Un(r=>function j$(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Sn(s.map(a=>{const l=om(a,e,r);let c;if(function m$(n){return n&&rl(n.canDeactivate)}(l))c=$o(l.canDeactivate(n,e,t,i));else{if(!rl(l))throw new Error("Invalid CanDeactivate guard");c=$o(l(n,e,t,i))}return c.pipe(Fu())})).pipe(Kh()):Sn(!0)}(r.component,r.route,t,e,i)),Fu(r=>!0!==r,!0))}(o,i,r,n).pipe(Un(a=>a&&function h$(n){return"boolean"==typeof n}(a)?function B$(n,e,t,i){return ir(e).pipe(ku(r=>jh(function U$(n,e){return null!==n&&e&&e(new E6(n)),Sn(!0)}(r.route.parent,i),function V$(n,e){return null!==n&&e&&e(new D6(n)),Sn(!0)}(r.route,i),function z$(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function R$(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>VP(()=>Sn(o.guards.map(l=>{const c=om(l,o.node,t);let u;if(function g$(n){return n&&rl(n.canActivateChild)}(c))u=$o(c.canActivateChild(i,n));else{if(!rl(c))throw new Error("Invalid CanActivateChild guard");u=$o(c(i,n))}return u.pipe(Fu())})).pipe(Kh())));return Sn(s).pipe(Kh())}(n,r.path,t),function H$(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Sn(!0);const r=i.map(s=>VP(()=>{const o=om(s,e,t);let a;if(function p$(n){return n&&rl(n.canActivate)}(o))a=$o(o.canActivate(e,n));else{if(!rl(o))throw new Error("Invalid CanActivate guard");a=$o(o(e,n))}return a.pipe(Fu())}));return Sn(r).pipe(Kh())}(n,r.route,t))),Fu(r=>!0!==r,!0))}(i,s,n,e):Sn(a)),T(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Br(a=>{if(Kl(a.guardsResult)){const c=$b(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new C6(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),ar(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),o1(a=>{if(a.guards.canActivateChecks.length)return Sn(a).pipe(Br(l=>{const c=new M6(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),ba(l=>{let c=!1;return Sn(l).pipe(function Q$(n,e){return Un(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Sn(t);let s=0;return ir(r).pipe(ku(o=>function J$(n,e,t,i){return function Z$(n,e,t,i){const r=Object.keys(n);if(0===r.length)return Sn({});const s={};return ir(r).pipe(Un(o=>function e7(n,e,t,i){const r=om(n,e,i);return $o(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(Br(a=>{s[o]=a}))),Gb(1),Un(()=>Object.keys(s).length===r.length?Sn(s):jr))}(n._resolve,n,e,i).pipe(T(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),dO(n,t).resolve),null)))}(o.route,i,n,e)),Br(()=>s++),Gb(1),Un(o=>s===r.length?Sn(t):jr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Br({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Br(l=>{const c=new A6(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),o1(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),T(a=>{const l=function Z6(n,e,t){const i=qh(n,e._root,t?t._root:void 0);return new cO(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Br(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>T(i=>(new u$(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Br({next(){s=!0},complete(){s=!0}}),function b6(n){return R((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),il(a=>{if(o=!0,function R6(n){return n&&n[YP]}(a)){const l=Kl(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new GP(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||am(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new w6(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return jr}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){bO(t),this.config=t.map(r1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function n$(n,e,t,i,r){if(0===t.length)return Zb(e.root,e.root,e,i,r);const s=function i$(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gO(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Pr(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new gO(t,e,i)}(t);if(s.toRoot())return Zb(e.root,new Yn([],{}),e,i,r);const o=function r$(n,e,t){if(n.isAbsolute)return new e1(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new e1(s,s===e.root,0)}const i=Zg(n.commands[0])?0:1;return function s$(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new e1(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?em(o.segmentGroup,o.index,s.commands):mO(o.segmentGroup,o.index,s.commands);return Zb(o.segmentGroup,a,e,i,r)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Kl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function u7(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},l7):!1===i?Object.assign({},c7):i,Kl(t))return ZP(this.currentUrlTree,t,r);const s=this.parseUrl(t);return ZP(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Gh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var a,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=am(i)&&u&&!am(u.source),h=u.rawUrl.toString()===t.toString(),f=u.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(d&&h&&f)return Promise.resolve(!0);let g,m,_;o?(g=o.resolve,m=o.reject,_=o.promise):_=new Promise((M,O)=>{g=M,m=O});const w=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),D=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):D=0,this.setTransition({id:w,targetPageId:D,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:g,reject:m,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(M=>Promise.reject(M))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new GP(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Nv()},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function am(n){return"imperative"!==n}class FO{}class LO{preload(e,t){return Sn(null)}}let BO=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new IO(r,i,l=>t.triggerEvent(new WP(l)),l=>t.triggerEvent(new $P(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(ar(t=>t instanceof Gh),ku(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ma);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return ir(r).pipe(to(),T(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Sn(i._loadedConfig):this.loader.load(t.injector,i)).pipe(Un(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(Ft(Ms),Ft(Eg),Ft($i),Ft(FO))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),u1=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Wb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new qP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Nv()},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const Ql=new On("ROUTER_CONFIGURATION"),VO=new On("ROUTER_FORROOT_GUARD"),p7=[Sb,{provide:iO,useClass:rO},{provide:Ms,useFactory:function v7(n,e,t,i,r,s,o={},a,l){const c=new Ms(null,n,e,t,i,r,KP(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function b7(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[iO,Qh,Sb,$i,Eg,a1,Ql,[class r7{},new Fo],[class t7{},new Fo]]},Qh,{provide:Vu,useFactory:function w7(n){return n.routerState.root},deps:[Ms]},BO,LO,class f7{preload(e,t){return t().pipe(il(()=>Sn(null)))}},{provide:Ql,useValue:{enableTracing:!1}}];function g7(){return new kD("Router",Ms)}let UO=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[p7,HO(t),{provide:VO,useFactory:y7,deps:[[Ms,new Fo,new tu]]},{provide:Ql,useValue:i||{}},{provide:Iu,useFactory:_7,deps:[Wl,[new uh(xb),new Fo],Ql]},{provide:u1,useFactory:m7,deps:[Ms,CW,Ql]},{provide:FO,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:LO},{provide:kD,multi:!0,useFactory:g7},[d1,{provide:Ag,multi:!0,useFactory:x7,deps:[d1]},{provide:zO,useFactory:S7,deps:[d1]},{provide:TD,multi:!0,useExisting:zO}]]}}static forChild(t){return{ngModule:n,providers:[HO(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Ft(VO,8),Ft(Ms,8))},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({}),n})();function m7(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new u1(n,e,t)}function _7(n,e,t={}){return t.useHash?new s8(n,e):new iP(n,e)}function y7(n){return"guarded"}function HO(n){return[{provide:zV,multi:!0,useValue:n},{provide:a1,multi:!0,useValue:n}]}let d1=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new De}appInitializer(){return this.injector.get(n8,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(Ms),o=this.injector.get(Ql);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Sn(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Ql),r=this.injector.get(BO),s=this.injector.get(u1),o=this.injector.get(Ms),a=this.injector.get(jl);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(Ft($i))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function x7(n){return n.appInitializer.bind(n)}function S7(n){return n.bootstrapListener.bind(n)}const zO=new On("Router Initializer");function jO(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function h1(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){jO(s,i,r,o,a,"next",l)}function a(l){jO(s,i,r,o,a,"throw",l)}o(void 0)})}}const qo={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ds=1001,vr=1003,lr=1006,ec=1009,tc=1014,ol=1015,rf=1016,qu=1020,qs=1023,nc=1026,Yu=1027,ic=3e3,Hi=3001,Ca="srgb",rc="srgb-linear";class mo{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Or=[];for(let n=0;n<256;n++)Or[n]=(n<16?"0":"")+n.toString(16);const sc=Math.PI/180,sf=180/Math.PI;function Es(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Or[255&n]+Or[n>>8&255]+Or[n>>16&255]+Or[n>>24&255]+"-"+Or[255&e]+Or[e>>8&255]+"-"+Or[e>>16&15|64]+Or[e>>24&255]+"-"+Or[63&t|128]+Or[t>>8&255]+"-"+Or[t>>16&255]+Or[t>>24&255]+Or[255&i]+Or[i>>8&255]+Or[i>>16&255]+Or[i>>24&255]).toLowerCase()}function Zi(n,e,t){return Math.max(e,Math.min(t,n))}function af(n,e,t){return(1-t)*n+t*e}function T1(n){return 0==(n&n-1)&&0!==n}function mm(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class ht{constructor(e=0,t=0){this.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _o{constructor(){this.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],g=r[0],m=r[3],_=r[6],w=r[1],D=r[4],M=r[7],O=r[2],q=r[5],Z=r[8];return s[0]=o*g+a*w+l*O,s[3]=o*m+a*D+l*q,s[6]=o*_+a*M+l*Z,s[1]=c*g+u*w+d*O,s[4]=c*m+u*D+d*q,s[7]=c*_+u*M+d*Z,s[2]=h*g+f*w+p*O,s[5]=h*m+f*D+p*q,s[8]=h*_+f*M+p*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(r*c-u*i)*g,e[2]=(a*i-r*o)*g,e[3]=h*g,e[4]=(u*t-r*l)*g,e[5]=(r*s-a*t)*g,e[6]=f*g,e[7]=(i*l-c*t)*g,e[8]=(o*t-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*o+i*c,r[6]=t*a+i*u,r[1]=-i*s+t*l,r[4]=-i*o+t*c,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function AR(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function lf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function oc(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function _m(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const D1={[Ca]:{[rc]:oc},[rc]:{[Ca]:_m}},yo={legacyMode:!0,get workingColorSpace(){return rc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(D1[e]&&void 0!==D1[e][t]){const i=D1[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},ER={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},br={r:0,g:0,b:0},vo={h:0,s:0,l:0},ym={h:0,s:0,l:0};function P1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function vm(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let Zu,Zt=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Ca){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,yo.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=rc){return this.r=t,this.g=i,this.b=r,yo.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=rc){if(t=function E1(n,e){return(n%e+e)%e}(t,1),i=Zi(i,0,1),r=Zi(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=P1(a,o,t+1/3),this.g=P1(a,o,t),this.b=P1(a,o,t-1/3)}return yo.toWorkingColorSpace(this,s),this}setStyle(t,i=Ca){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,yo.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,yo.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(c,u,d,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,yo.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,yo.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Ca){const r=ER[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=oc(t.r),this.g=oc(t.g),this.b=oc(t.b),this}copyLinearToSRGB(t){return this.r=_m(t.r),this.g=_m(t.g),this.b=_m(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ca){return yo.fromWorkingColorSpace(vm(this,br),t),Zi(255*br.r,0,255)<<16^Zi(255*br.g,0,255)<<8^Zi(255*br.b,0,255)<<0}getHexString(t=Ca){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=rc){yo.fromWorkingColorSpace(vm(this,br),i);const r=br.r,s=br.g,o=br.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case r:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-r)/h+2;break;case o:c=(r-s)/h+4}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,i=rc){return yo.fromWorkingColorSpace(vm(this,br),i),t.r=br.r,t.g=br.g,t.b=br.b,t}getStyle(t=Ca){return yo.fromWorkingColorSpace(vm(this,br),t),t!==Ca?`color(${t} ${br.r} ${br.g} ${br.b})`:`rgb(${255*br.r|0},${255*br.g|0},${255*br.b|0})`}offsetHSL(t,i,r){return this.getHSL(vo),vo.h+=t,vo.s+=i,vo.l+=r,this.setHSL(vo.h,vo.s,vo.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(vo),t.getHSL(ym);const r=af(vo.h,ym.h,i),s=af(vo.s,ym.s,i),o=af(vo.l,ym.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=ER,n})();class TR{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Zu&&(Zu=lf("canvas")),Zu.width=e.width,Zu.height=e.height;const i=Zu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Zu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=lf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*oc(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*oc(t[i]/255)):oc(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ed{constructor(e=null){this.isSource=!0,this.uuid=Es(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(O1(r[o].isDataTexture?r[o].image:r[o]))}else s=O1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function O1(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?TR.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Vq=0,al=(()=>{class n extends mo{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=ds,s=ds,o=lr,a=1008,l=qs,c=ec,u=1,d=ic){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Vq++}),this.uuid=Es(),this.name="",this.source=new ed(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ht(0,0),this.repeat=new ht(1,1),this.center=new ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _o,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case ds:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case ds:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class vi{constructor(e=0,t=0,i=0,r=1){this.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],g=l[2],m=l[6],_=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-g)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+g)<.1&&Math.abs(p+m)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(c+1)/2,M=(f+1)/2,O=(_+1)/2,q=(u+h)/4,Z=(d+g)/4,B=(p+m)/4;return D>M&&D>O?D<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(D),r=q/i,s=Z/i):M>O?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=q/r,s=B/r):O<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(O),i=Z/s,r=B/s),this.set(i,r,s,t),this}let w=Math.sqrt((m-p)*(m-p)+(d-g)*(d-g)+(h-u)*(h-u));return Math.abs(w)<.001&&(w=1),this.x=(m-p)/w,this.y=(d-g)/w,this.z=(h-u)/w,this.w=Math.acos((c+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ma extends mo{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new vi(0,0,e,t),this.scissorTest=!1,this.viewport=new vi(0,0,e,t),this.texture=new al({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:lr,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ed(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class R1 extends al{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=vr,this.minFilter=vr,this.wrapR=ds,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=g);if(d!==g||l!==h||c!==f||u!==p){let m=1-a;const _=l*h+c*f+u*p+d*g,w=_>=0?1:-1,D=1-_*_;if(D>Number.EPSILON){const O=Math.sqrt(D),q=Math.atan2(O,_*w);m=Math.sin(m*q)/O,a=Math.sin(a*q)/O}const M=a*w;if(l=l*m+h*M,c=c*m+f*M,u=u*m+p*M,d=d*m+g*M,m===1-a){const O=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=O,c*=O,u*=O,d*=O}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(e=0,t=0,i=0){this.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(PR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(PR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,d=l*r+s*i-o*t,h=-s*t-o*i-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return N1.copy(this).projectOnVector(e),this.sub(N1)}reflect(e){return this.sub(N1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Zi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const N1=new re,PR=new wr;class ll{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ac.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)ac.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(ac)}else null===i.boundingBox&&i.computeBoundingBox(),I1.copy(i.boundingBox),I1.applyMatrix4(e.matrixWorld),this.union(I1);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ac),ac.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cf),bm.subVectors(this.max,cf),td.subVectors(e.a,cf),nd.subVectors(e.b,cf),id.subVectors(e.c,cf),cl.subVectors(nd,td),ul.subVectors(id,nd),lc.subVectors(td,id);let t=[0,-cl.z,cl.y,0,-ul.z,ul.y,0,-lc.z,lc.y,cl.z,0,-cl.x,ul.z,0,-ul.x,lc.z,0,-lc.x,-cl.y,cl.x,0,-ul.y,ul.x,0,-lc.y,lc.x,0];return!(!k1(t,td,nd,id,bm)||(t=[1,0,0,0,1,0,0,0,1],!k1(t,td,nd,id,bm)))&&(wm.crossVectors(cl,ul),t=[wm.x,wm.y,wm.z],k1(t,td,nd,id,bm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ac.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(ac).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Aa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Aa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Aa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Aa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Aa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Aa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Aa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Aa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Aa)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Aa=[new re,new re,new re,new re,new re,new re,new re,new re],ac=new re,I1=new ll,td=new re,nd=new re,id=new re,cl=new re,ul=new re,lc=new re,cf=new re,bm=new re,wm=new re,cc=new re;function k1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){cc.fromArray(n,s);const a=r.x*Math.abs(cc.x)+r.y*Math.abs(cc.y)+r.z*Math.abs(cc.z),l=e.dot(cc),c=t.dot(cc),u=i.dot(cc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Uq=new ll,OR=new re,xm=new re,F1=new re;class rd{constructor(e=new re,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Uq.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){F1.subVectors(e,this.center);const t=F1.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(F1.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?xm.set(0,0,1).multiplyScalar(e.radius):xm.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(OR.copy(e.center).add(xm)),this.expandByPoint(OR.copy(e.center).sub(xm)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ea=new re,L1=new re,Sm=new re,dl=new re,B1=new re,Cm=new re,V1=new re;class Mm{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ea)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ea.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ea.copy(this.direction).multiplyScalar(t).add(this.origin),Ea.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){L1.copy(e).add(t).multiplyScalar(.5),Sm.copy(t).sub(e).normalize(),dl.copy(this.origin).sub(L1);const s=.5*e.distanceTo(t),o=-this.direction.dot(Sm),a=dl.dot(this.direction),l=-dl.dot(Sm),c=dl.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const g=1/u;d*=g,h*=g,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Sm).multiplyScalar(h).add(L1),f}intersectSphere(e,t){Ea.subVectors(e.center,this.origin);const i=Ea.dot(this.direction),r=Ea.dot(Ea)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Ea)}intersectTriangle(e,t,i,r,s){B1.subVectors(t,e),Cm.subVectors(i,e),V1.crossVectors(B1,Cm);let a,o=this.direction.dot(V1);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}dl.subVectors(this.origin,e);const l=a*this.direction.dot(Cm.crossVectors(dl,Cm));if(l<0)return null;const c=a*this.direction.dot(B1.cross(dl));if(c<0||l+c>o)return null;const u=-a*dl.dot(V1);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ln{constructor(){this.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,g,m){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=p,_[11]=g,_[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ln).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/sd.setFromMatrixColumn(e,0).length(),s=1/sd.setFromMatrixColumn(e,1).length(),o=1/sd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,g=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-g*c,t[9]=-a*l,t[2]=g-h*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,p=c*u,g=c*d;t[0]=h+g*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=g+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,p=c*u,g=c*d;t[0]=h-g*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=g-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,g=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+g,t[1]=l*d,t[5]=g*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=g-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-g*d}else if("XZY"===e.order){const h=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+g,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Hq,e,zq)}lookAt(e,t,i){const r=this.elements;return Ts.subVectors(e,t),0===Ts.lengthSq()&&(Ts.z=1),Ts.normalize(),hl.crossVectors(i,Ts),0===hl.lengthSq()&&(1===Math.abs(i.z)?Ts.x+=1e-4:Ts.z+=1e-4,Ts.normalize(),hl.crossVectors(i,Ts)),hl.normalize(),Am.crossVectors(Ts,hl),r[0]=hl.x,r[4]=Am.x,r[8]=Ts.x,r[1]=hl.y,r[5]=Am.y,r[9]=Ts.y,r[2]=hl.z,r[6]=Am.z,r[10]=Ts.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],g=i[6],m=i[10],_=i[14],w=i[3],D=i[7],M=i[11],O=i[15],q=r[0],Z=r[4],B=r[8],ee=r[12],me=r[1],xe=r[5],qe=r[9],it=r[13],ke=r[2],et=r[6],Ce=r[10],Ue=r[14],Xe=r[3],We=r[7],tt=r[11],wt=r[15];return s[0]=o*q+a*me+l*ke+c*Xe,s[4]=o*Z+a*xe+l*et+c*We,s[8]=o*B+a*qe+l*Ce+c*tt,s[12]=o*ee+a*it+l*Ue+c*wt,s[1]=u*q+d*me+h*ke+f*Xe,s[5]=u*Z+d*xe+h*et+f*We,s[9]=u*B+d*qe+h*Ce+f*tt,s[13]=u*ee+d*it+h*Ue+f*wt,s[2]=p*q+g*me+m*ke+_*Xe,s[6]=p*Z+g*xe+m*et+_*We,s[10]=p*B+g*qe+m*Ce+_*tt,s[14]=p*ee+g*it+m*Ue+_*wt,s[3]=w*q+D*me+M*ke+O*Xe,s[7]=w*Z+D*xe+M*et+O*We,s[11]=w*B+D*qe+M*Ce+O*tt,s[15]=w*ee+D*it+M*Ue+O*wt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],_=e[15],w=d*m*c-g*h*c+g*l*f-a*m*f-d*l*_+a*h*_,D=p*h*c-u*m*c-p*l*f+o*m*f+u*l*_-o*h*_,M=u*g*c-p*d*c+p*a*f-o*g*f-u*a*_+o*d*_,O=p*d*l-u*g*l-p*a*h+o*g*h+u*a*m-o*d*m,q=t*w+i*D+r*M+s*O;if(0===q)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Z=1/q;return e[0]=w*Z,e[1]=(g*h*s-d*m*s-g*r*f+i*m*f+d*r*_-i*h*_)*Z,e[2]=(a*m*s-g*l*s+g*r*c-i*m*c-a*r*_+i*l*_)*Z,e[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*Z,e[4]=D*Z,e[5]=(u*m*s-p*h*s+p*r*f-t*m*f-u*r*_+t*h*_)*Z,e[6]=(p*l*s-o*m*s-p*r*c+t*m*c+o*r*_-t*l*_)*Z,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*Z,e[8]=M*Z,e[9]=(p*d*s-u*g*s-p*i*f+t*g*f+u*i*_-t*d*_)*Z,e[10]=(o*g*s-p*a*s+p*i*c-t*g*c-o*i*_+t*a*_)*Z,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*f-t*a*f)*Z,e[12]=O*Z,e[13]=(u*g*r-p*d*r+p*i*h-t*g*h-u*i*m+t*d*m)*Z,e[14]=(p*a*r-o*g*r-p*i*l+t*g*l+o*i*m-t*a*m)*Z,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*h+t*a*h)*Z,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,g=o*u,m=o*d,_=a*d,w=l*c,D=l*u,M=l*d,O=i.x,q=i.y,Z=i.z;return r[0]=(1-(g+_))*O,r[1]=(f+M)*O,r[2]=(p-D)*O,r[3]=0,r[4]=(f-M)*q,r[5]=(1-(h+_))*q,r[6]=(m+w)*q,r[7]=0,r[8]=(p+D)*Z,r[9]=(m-w)*Z,r[10]=(1-(h+g))*Z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=sd.set(r[0],r[1],r[2]).length();const o=sd.set(r[4],r[5],r[6]).length(),a=sd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],bo.copy(this);const c=1/s,u=1/o,d=1/a;return bo.elements[0]*=c,bo.elements[1]*=c,bo.elements[2]*=c,bo.elements[4]*=u,bo.elements[5]*=u,bo.elements[6]*=u,bo.elements[8]*=d,bo.elements[9]*=d,bo.elements[10]*=d,t.setFromRotationMatrix(bo),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),d=(t+e)*l,h=(i+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const sd=new re,bo=new Ln,Hq=new re(0,0,0),zq=new re(1,1,1),hl=new re,Am=new re,Ts=new re,RR=new Ln,NR=new wr;let jq=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(Zi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Zi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Zi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Zi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Zi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Zi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return RR.makeRotationFromQuaternion(t),this.setFromRotationMatrix(RR,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return NR.setFromEuler(this),this.setFromQuaternion(NR,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class U1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Gq=0;const IR=new re,od=new wr,Ta=new Ln,Em=new re,uf=new re,Wq=new re,$q=new wr,kR=new re(1,0,0),FR=new re(0,1,0),LR=new re(0,0,1),qq={type:"added"},BR={type:"removed"};class xr extends mo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Gq++}),this.uuid=Es(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xr.DefaultUp.clone();const e=new re,t=new jq,i=new wr,r=new re(1,1,1);t._onChange(function s(){i.setFromEuler(t,!1)}),i._onChange(function o(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ln},normalMatrix:{value:new _o}}),this.matrix=new Ln,this.matrixWorld=new Ln,this.matrixAutoUpdate=xr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new U1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return od.setFromAxisAngle(e,t),this.quaternion.multiply(od),this}rotateOnWorldAxis(e,t){return od.setFromAxisAngle(e,t),this.quaternion.premultiply(od),this}rotateX(e){return this.rotateOnAxis(kR,e)}rotateY(e){return this.rotateOnAxis(FR,e)}rotateZ(e){return this.rotateOnAxis(LR,e)}translateOnAxis(e,t){return IR.copy(e).applyQuaternion(this.quaternion),this.position.add(IR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(kR,e)}translateY(e){return this.translateOnAxis(FR,e)}translateZ(e){return this.translateOnAxis(LR,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ta.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Em.copy(e):Em.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),uf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ta.lookAt(uf,Em,this.up):Ta.lookAt(Em,uf,this.up),this.quaternion.setFromRotationMatrix(Ta),r&&(Ta.extractRotation(r.matrixWorld),od.setFromRotationMatrix(Ta),this.quaternion.premultiply(od.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(qq)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(BR)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(BR)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ta.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ta.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ta),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(void 0!==o)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uf,e,Wq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uf,$q,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(e.shapes,l[c]);else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(e.animations,this.animations[a]))}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++)this.add(e.children[i].clone());return this}}xr.DefaultUp=new re(0,1,0),xr.DefaultMatrixAutoUpdate=!0;const wo=new re,Da=new re,H1=new re,Pa=new re,ad=new re,ld=new re,VR=new re,z1=new re,j1=new re,G1=new re;class xo{constructor(e=new re,t=new re,i=new re){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),wo.subVectors(e,t),r.cross(wo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){wo.subVectors(r,t),Da.subVectors(i,t),H1.subVectors(e,t);const o=wo.dot(wo),a=wo.dot(Da),l=wo.dot(H1),c=Da.dot(Da),u=Da.dot(H1),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Pa),Pa.x>=0&&Pa.y>=0&&Pa.x+Pa.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Pa),l.set(0,0),l.addScaledVector(s,Pa.x),l.addScaledVector(o,Pa.y),l.addScaledVector(a,Pa.z),l}static isFrontFacing(e,t,i,r){return wo.subVectors(i,t),Da.subVectors(e,t),wo.cross(Da).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return wo.subVectors(this.c,this.b),Da.subVectors(this.a,this.b),.5*wo.cross(Da).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return xo.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return xo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;ad.subVectors(r,i),ld.subVectors(s,i),z1.subVectors(e,i);const l=ad.dot(z1),c=ld.dot(z1);if(l<=0&&c<=0)return t.copy(i);j1.subVectors(e,r);const u=ad.dot(j1),d=ld.dot(j1);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(ad,o);G1.subVectors(e,s);const f=ad.dot(G1),p=ld.dot(G1);if(p>=0&&f<=p)return t.copy(s);const g=f*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(ld,a);const m=u*p-f*d;if(m<=0&&d-u>=0&&f-p>=0)return VR.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(VR,a);const _=1/(m+g+h);return o=g*_,a=h*_,t.copy(i).addScaledVector(ad,o).addScaledVector(ld,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Yq=0,Rr=(()=>{class n extends mo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Yq++}),this.uuid=Es(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const i in t){const r=t[i];if(void 0===r){console.warn("THREE.Material: '"+i+"' parameter is undefined.");continue}if("shading"===i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const s=this[i];void 0!==s?s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[i]=r:console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.")}}toJSON(t){const i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i){const o=s(t.textures),a=s(t.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let r=null;if(null!==i){const s=i.length;r=new Array(s);for(let o=0;o!==s;++o)r[o]=i[o].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}get vertexTangents(){return console.warn("THREE."+this.type+": .vertexTangents has been removed."),!1}set vertexTangents(t){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}return n.fromType=function(){return null},n})();class fl extends Rr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const cr=new re,Tm=new ht;class Sr{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Zt),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new ht),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new re),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new vi),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Tm.fromBufferAttribute(this,t),Tm.applyMatrix3(e),this.setXY(t,Tm.x,Tm.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyMatrix3(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyMatrix4(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyNormalMatrix(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.transformDirection(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class UR extends Sr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class HR extends Sr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class en extends Sr{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Xq=0;const Ys=new Ln,W1=new xr,cd=new re,Ds=new ll,df=new ll,Tr=new re;class Hn extends mo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Xq++}),this.uuid=Es(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(AR(e)?HR:UR)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new _o).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ys.makeRotationFromQuaternion(e),this.applyMatrix4(Ys),this}rotateX(e){return Ys.makeRotationX(e),this.applyMatrix4(Ys),this}rotateY(e){return Ys.makeRotationY(e),this.applyMatrix4(Ys),this}rotateZ(e){return Ys.makeRotationZ(e),this.applyMatrix4(Ys),this}translate(e,t,i){return Ys.makeTranslation(e,t,i),this.applyMatrix4(Ys),this}scale(e,t,i){return Ys.makeScale(e,t,i),this.applyMatrix4(Ys),this}lookAt(e){return W1.lookAt(e),W1.updateMatrix(),this.applyMatrix4(W1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cd).negate(),this.translate(cd.x,cd.y,cd.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new en(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ll);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Ds.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Tr.addVectors(this.boundingBox.min,Ds.min),this.boundingBox.expandByPoint(Tr),Tr.addVectors(this.boundingBox.max,Ds.max),this.boundingBox.expandByPoint(Tr)):(this.boundingBox.expandByPoint(Ds.min),this.boundingBox.expandByPoint(Ds.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rd);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new re,1/0);if(e){const i=this.boundingSphere.center;if(Ds.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)df.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Tr.addVectors(Ds.min,df.min),Ds.expandByPoint(Tr),Tr.addVectors(Ds.max,df.max),Ds.expandByPoint(Tr)):(Ds.expandByPoint(df.min),Ds.expandByPoint(df.max));Ds.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Tr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Tr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Tr.fromBufferAttribute(a,c),l&&(cd.fromBufferAttribute(e,c),Tr.add(cd)),r=Math.max(r,i.distanceToSquared(Tr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Sr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let me=0;me<a;me++)c[me]=new re,u[me]=new re;const d=new re,h=new re,f=new re,p=new ht,g=new ht,m=new ht,_=new re,w=new re;function D(me,xe,qe){d.fromArray(r,3*me),h.fromArray(r,3*xe),f.fromArray(r,3*qe),p.fromArray(o,2*me),g.fromArray(o,2*xe),m.fromArray(o,2*qe),h.sub(d),f.sub(d),g.sub(p),m.sub(p);const it=1/(g.x*m.y-m.x*g.y);!isFinite(it)||(_.copy(h).multiplyScalar(m.y).addScaledVector(f,-g.y).multiplyScalar(it),w.copy(f).multiplyScalar(g.x).addScaledVector(h,-m.x).multiplyScalar(it),c[me].add(_),c[xe].add(_),c[qe].add(_),u[me].add(w),u[xe].add(w),u[qe].add(w))}let M=this.groups;0===M.length&&(M=[{start:0,count:i.length}]);for(let me=0,xe=M.length;me<xe;++me){const qe=M[me],it=qe.start;for(let et=it,Ce=it+qe.count;et<Ce;et+=3)D(i[et+0],i[et+1],i[et+2])}const O=new re,q=new re,Z=new re,B=new re;function ee(me){Z.fromArray(s,3*me),B.copy(Z);const xe=c[me];O.copy(xe),O.sub(Z.multiplyScalar(Z.dot(xe))).normalize(),q.crossVectors(B,xe);const it=q.dot(u[me])<0?-1:1;l[4*me]=O.x,l[4*me+1]=O.y,l[4*me+2]=O.z,l[4*me+3]=it}for(let me=0,xe=M.length;me<xe;++me){const qe=M[me],it=qe.start;for(let et=it,Ce=it+qe.count;et<Ce;et+=3)ee(i[et+0]),ee(i[et+1]),ee(i[et+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Sr(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new re,s=new re,o=new re,a=new re,l=new re,c=new re,u=new re,d=new re;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),g=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,m),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(m,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===e.attributes[r])continue;const o=i[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Tr.fromBufferAttribute(e,t),Tr.normalize(),e.setXYZ(t,Tr.x,Tr.y,Tr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let g=0,m=l.length;g<m;g++){f=a.isInterleavedBufferAttribute?l[g]*a.data.stride+a.offset:l[g]*u;for(let _=0;_<u;_++)h[p++]=c[f++]}return new Sr(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Hn,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const zR=new Ln,ud=new Mm,$1=new rd,pl=new re,gl=new re,ml=new re,q1=new re,Y1=new re,X1=new re,Dm=new re,Pm=new re,Om=new re,Rm=new ht,Nm=new ht,Im=new ht,K1=new re,km=new re;class Vr extends xr{constructor(e=new Hn,t=new fl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),$1.copy(i.boundingSphere),$1.applyMatrix4(s),!1===e.ray.intersectsSphere($1))||(zR.copy(s).invert(),ud.copy(e.ray).applyMatrix4(zR),null!==i.boundingBox&&!1===ud.intersectsBox(i.boundingBox)))return;let o;const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let g=0,m=f.length;g<m;g++){const _=f[g],w=r[_.materialIndex];for(let O=Math.max(_.start,p.start),q=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));O<q;O+=3){const Z=a.getX(O),B=a.getX(O+1),ee=a.getX(O+2);o=Fm(this,w,e,ud,l,c,u,d,h,Z,B,ee),o&&(o.faceIndex=Math.floor(O/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else for(let _=Math.max(0,p.start),w=Math.min(a.count,p.start+p.count);_<w;_+=3){const D=a.getX(_),M=a.getX(_+1),O=a.getX(_+2);o=Fm(this,r,e,ud,l,c,u,d,h,D,M,O),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let g=0,m=f.length;g<m;g++){const _=f[g],w=r[_.materialIndex];for(let O=Math.max(_.start,p.start),q=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));O<q;O+=3)o=Fm(this,w,e,ud,l,c,u,d,h,O,O+1,O+2),o&&(o.faceIndex=Math.floor(O/3),o.face.materialIndex=_.materialIndex,t.push(o))}else for(let _=Math.max(0,p.start),w=Math.min(l.count,p.start+p.count);_<w;_+=3)o=Fm(this,r,e,ud,l,c,u,d,h,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}function Fm(n,e,t,i,r,s,o,a,l,c,u,d){pl.fromBufferAttribute(r,c),gl.fromBufferAttribute(r,u),ml.fromBufferAttribute(r,d);const h=n.morphTargetInfluences;if(s&&h){Dm.set(0,0,0),Pm.set(0,0,0),Om.set(0,0,0);for(let p=0,g=s.length;p<g;p++){const m=h[p],_=s[p];0!==m&&(q1.fromBufferAttribute(_,c),Y1.fromBufferAttribute(_,u),X1.fromBufferAttribute(_,d),o?(Dm.addScaledVector(q1,m),Pm.addScaledVector(Y1,m),Om.addScaledVector(X1,m)):(Dm.addScaledVector(q1.sub(pl),m),Pm.addScaledVector(Y1.sub(gl),m),Om.addScaledVector(X1.sub(ml),m)))}pl.add(Dm),gl.add(Pm),ml.add(Om)}n.isSkinnedMesh&&(n.boneTransform(c,pl),n.boneTransform(u,gl),n.boneTransform(d,ml));const f=function Kq(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;km.copy(a),km.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(km);return c<t.near||c>t.far?null:{distance:c,point:km.clone(),object:n}}(n,e,t,i,pl,gl,ml,K1);if(f){a&&(Rm.fromBufferAttribute(a,c),Nm.fromBufferAttribute(a,u),Im.fromBufferAttribute(a,d),f.uv=xo.getUV(K1,pl,gl,ml,Rm,Nm,Im,new ht)),l&&(Rm.fromBufferAttribute(l,c),Nm.fromBufferAttribute(l,u),Im.fromBufferAttribute(l,d),f.uv2=xo.getUV(K1,pl,gl,ml,Rm,Nm,Im,new ht));const p={a:c,b:u,c:d,normal:new re,materialIndex:0};xo.getNormal(pl,gl,ml,p.normal),f.face=p}return f}class uc extends Hn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(g,m,_,w,D,M,O,q,Z,B,ee){const me=M/Z,xe=O/B,qe=M/2,it=O/2,ke=q/2,et=Z+1,Ce=B+1;let Ue=0,Xe=0;const We=new re;for(let tt=0;tt<Ce;tt++){const wt=tt*xe-it;for(let ut=0;ut<et;ut++)We[g]=(ut*me-qe)*w,We[m]=wt*D,We[_]=ke,c.push(We.x,We.y,We.z),We[g]=0,We[m]=0,We[_]=q>0?1:-1,u.push(We.x,We.y,We.z),d.push(ut/Z),d.push(1-tt/B),Ue+=1}for(let tt=0;tt<B;tt++)for(let wt=0;wt<Z;wt++){const Et=h+wt+et*(tt+1),ot=h+(wt+1)+et*(tt+1),lt=h+(wt+1)+et*tt;l.push(h+wt+et*tt,Et,lt),l.push(Et,ot,lt),Xe+=6}a.addGroup(f,Xe,ee),f+=Xe,h+=Ue}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new en(c,3)),this.setAttribute("normal",new en(u,3)),this.setAttribute("uv",new en(d,2))}static fromJSON(e){return new uc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function dd(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function Ur(n){const e={};for(let t=0;t<n.length;t++){const i=dd(n[t]);for(const r in i)e[r]=i[r]}return e}const jR={clone:dd,merge:Ur};class So extends Rr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dd(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Q1 extends xr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ln,this.projectionMatrix=new Ln,this.projectionMatrixInverse=new Ln}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Nr extends Q1{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*sf*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*sc*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*sf*Math.atan(Math.tan(.5*sc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*sc*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Zq extends xr{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const r=new Nr(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new re(1,0,0)),this.add(r);const s=new Nr(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new re(-1,0,0)),this.add(s);const o=new Nr(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new re(0,1,0)),this.add(o);const a=new Nr(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new re(0,-1,0)),this.add(a);const l=new Nr(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new re(0,0,1)),this.add(l);const c=new Nr(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new re(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class Lm extends al{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class e9 extends Ma{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new Lm([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:lr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new uc(5,5,5),s=new So({name:"CubemapFromEquirect",uniforms:dd(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Vr(r,s),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=lr),new Zq(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const J1=new re,t9=new re,n9=new _o;class _l{constructor(e=new re(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=J1.subVectors(i,t).cross(t9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(J1),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||n9.getNormalMatrix(e),r=this.coplanarPoint(J1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const pd=new rd,Bm=new re;class Z1{constructor(e=new _l,t=new _l,i=new _l,r=new _l,s=new _l,o=new _l){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],p=i[10],g=i[11],m=i[12],_=i[13],w=i[14],D=i[15];return t[0].setComponents(a-r,d-l,g-h,D-m).normalize(),t[1].setComponents(a+r,d+l,g+h,D+m).normalize(),t[2].setComponents(a+s,d+c,g+f,D+_).normalize(),t[3].setComponents(a-s,d-c,g-f,D-_).normalize(),t[4].setComponents(a-o,d-u,g-p,D-w).normalize(),t[5].setComponents(a+o,d+u,g+p,D+w).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),pd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(pd)}intersectsSprite(e){return pd.center.set(0,0,0),pd.radius=.7071067811865476,pd.applyMatrix4(e.matrixWorld),this.intersectsSphere(pd)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Bm.x=r.normal.x>0?e.max.x:e.min.x,Bm.y=r.normal.y>0?e.max.y:e.min.y,Bm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Bm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function GR(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function i9(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function r(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);p=5121}return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class hf extends Hn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],g=[],m=[];for(let _=0;_<u;_++){const w=_*h-o;for(let D=0;D<c;D++)p.push(D*d-s,-w,0),g.push(0,0,1),m.push(D/a),m.push(1-_/l)}for(let _=0;_<l;_++)for(let w=0;w<a;w++){const M=w+c*(_+1),O=w+1+c*(_+1),q=w+1+c*_;f.push(w+c*_,M,q),f.push(M,O,q)}this.setIndex(f),this.setAttribute("position",new en(p,3)),this.setAttribute("normal",new en(g,3)),this.setAttribute("uv",new en(m,2))}static fromJSON(e){return new hf(e.width,e.height,e.widthSegments,e.heightSegments)}}const qn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},qt={common:{diffuse:{value:new Zt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new _o},uv2Transform:{value:new _o},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _o}},sprite:{diffuse:{value:new Zt(16777215)},opacity:{value:1},center:{value:new ht(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _o}}},Yo={basic:{uniforms:Ur([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.fog]),vertexShader:qn.meshbasic_vert,fragmentShader:qn.meshbasic_frag},lambert:{uniforms:Ur([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.fog,qt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:qn.meshlambert_vert,fragmentShader:qn.meshlambert_frag},phong:{uniforms:Ur([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.fog,qt.lights,{emissive:{value:new Zt(0)},specular:{value:new Zt(1118481)},shininess:{value:30}}]),vertexShader:qn.meshphong_vert,fragmentShader:qn.meshphong_frag},standard:{uniforms:Ur([qt.common,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.roughnessmap,qt.metalnessmap,qt.fog,qt.lights,{emissive:{value:new Zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qn.meshphysical_vert,fragmentShader:qn.meshphysical_frag},toon:{uniforms:Ur([qt.common,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.gradientmap,qt.fog,qt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:qn.meshtoon_vert,fragmentShader:qn.meshtoon_frag},matcap:{uniforms:Ur([qt.common,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.fog,{matcap:{value:null}}]),vertexShader:qn.meshmatcap_vert,fragmentShader:qn.meshmatcap_frag},points:{uniforms:Ur([qt.points,qt.fog]),vertexShader:qn.points_vert,fragmentShader:qn.points_frag},dashed:{uniforms:Ur([qt.common,qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qn.linedashed_vert,fragmentShader:qn.linedashed_frag},depth:{uniforms:Ur([qt.common,qt.displacementmap]),vertexShader:qn.depth_vert,fragmentShader:qn.depth_frag},normal:{uniforms:Ur([qt.common,qt.bumpmap,qt.normalmap,qt.displacementmap,{opacity:{value:1}}]),vertexShader:qn.meshnormal_vert,fragmentShader:qn.meshnormal_frag},sprite:{uniforms:Ur([qt.sprite,qt.fog]),vertexShader:qn.sprite_vert,fragmentShader:qn.sprite_frag},background:{uniforms:{uvTransform:{value:new _o},t2D:{value:null}},vertexShader:qn.background_vert,fragmentShader:qn.background_frag},cube:{uniforms:Ur([qt.envmap,{opacity:{value:1}}]),vertexShader:qn.cube_vert,fragmentShader:qn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qn.equirect_vert,fragmentShader:qn.equirect_frag},distanceRGBA:{uniforms:Ur([qt.common,qt.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qn.distanceRGBA_vert,fragmentShader:qn.distanceRGBA_frag},shadow:{uniforms:Ur([qt.lights,qt.fog,{color:{value:new Zt(0)},opacity:{value:1}}]),vertexShader:qn.shadow_vert,fragmentShader:qn.shadow_frag}};function tX(n,e,t,i,r,s){const o=new Zt(0);let l,c,a=!0===r?0:1,u=null,d=0,h=null;function p(g,m){t.buffers.color.setClear(g.r,g.g,g.b,m,s)}return{getClearColor:function(){return o},setClearColor:function(g,m=1){o.set(g),a=m,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(g){a=g,p(o,a)},render:function f(g,m){let _=!1,w=!0===m.isScene?m.background:null;w&&w.isTexture&&(w=e.get(w));const D=n.xr,M=D.getSession&&D.getSession();M&&"additive"===M.environmentBlendMode&&(w=null),null===w?p(o,a):w&&w.isColor&&(p(w,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||306===w.mapping)?(void 0===c&&(c=new Vr(new uc(1,1,1),new So({name:"BackgroundCubeMaterial",uniforms:dd(Yo.cube.uniforms),vertexShader:Yo.cube.vertexShader,fragmentShader:Yo.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(O,q,Z){this.matrixWorld.copyPosition(Z.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,(u!==w||d!==w.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=w,d=w.version,h=n.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(void 0===l&&(l=new Vr(new hf(2,2),new So({name:"BackgroundMaterial",uniforms:dd(Yo.background.uniforms),vertexShader:Yo.background.vertexShader,fragmentShader:Yo.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=w,!0===w.matrixAutoUpdate&&w.updateMatrix(),l.material.uniforms.uvTransform.value.copy(w.matrix),(u!==w||d!==w.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=w,d=w.version,h=n.toneMapping),l.layers.enableAll(),g.unshift(l,l.geometry,l.material,0,0,null))}}}function nX(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=m(null);let c=l,u=!1;function f(ke){return i.isWebGL2?n.bindVertexArray(ke):s.bindVertexArrayOES(ke)}function p(ke){return i.isWebGL2?n.deleteVertexArray(ke):s.deleteVertexArrayOES(ke)}function m(ke){const et=[],Ce=[],Ue=[];for(let Xe=0;Xe<r;Xe++)et[Xe]=0,Ce[Xe]=0,Ue[Xe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:et,enabledAttributes:Ce,attributeDivisors:Ue,object:ke,attributes:{},index:null}}function D(){const ke=c.newAttributes;for(let et=0,Ce=ke.length;et<Ce;et++)ke[et]=0}function M(ke){O(ke,0)}function O(ke,et){const Ue=c.enabledAttributes,Xe=c.attributeDivisors;c.newAttributes[ke]=1,0===Ue[ke]&&(n.enableVertexAttribArray(ke),Ue[ke]=1),Xe[ke]!==et&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ke,et),Xe[ke]=et)}function q(){const ke=c.newAttributes,et=c.enabledAttributes;for(let Ce=0,Ue=et.length;Ce<Ue;Ce++)et[Ce]!==ke[Ce]&&(n.disableVertexAttribArray(Ce),et[Ce]=0)}function Z(ke,et,Ce,Ue,Xe,We){!0!==i.isWebGL2||5124!==Ce&&5125!==Ce?n.vertexAttribPointer(ke,et,Ce,Ue,Xe,We):n.vertexAttribIPointer(ke,et,Ce,Xe,We)}function qe(){it(),u=!0,c!==l&&(c=l,f(c.object))}function it(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(ke,et,Ce,Ue,Xe){let We=!1;if(o){const tt=function g(ke,et,Ce){const Ue=!0===Ce.wireframe;let Xe=a[ke.id];void 0===Xe&&(Xe={},a[ke.id]=Xe);let We=Xe[et.id];void 0===We&&(We={},Xe[et.id]=We);let tt=We[Ue];return void 0===tt&&(tt=m(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),We[Ue]=tt),tt}(Ue,Ce,et);c!==tt&&(c=tt,f(c.object)),We=function _(ke,et,Ce,Ue){const Xe=c.attributes,We=et.attributes;let tt=0;const wt=Ce.getAttributes();for(const ut in wt)if(wt[ut].location>=0){const ot=Xe[ut];let lt=We[ut];if(void 0===lt&&("instanceMatrix"===ut&&ke.instanceMatrix&&(lt=ke.instanceMatrix),"instanceColor"===ut&&ke.instanceColor&&(lt=ke.instanceColor)),void 0===ot||ot.attribute!==lt||lt&&ot.data!==lt.data)return!0;tt++}return c.attributesNum!==tt||c.index!==Ue}(ke,Ue,Ce,Xe),We&&function w(ke,et,Ce,Ue){const Xe={},We=et.attributes;let tt=0;const wt=Ce.getAttributes();for(const ut in wt)if(wt[ut].location>=0){let ot=We[ut];void 0===ot&&("instanceMatrix"===ut&&ke.instanceMatrix&&(ot=ke.instanceMatrix),"instanceColor"===ut&&ke.instanceColor&&(ot=ke.instanceColor));const lt={};lt.attribute=ot,ot&&ot.data&&(lt.data=ot.data),Xe[ut]=lt,tt++}c.attributes=Xe,c.attributesNum=tt,c.index=Ue}(ke,Ue,Ce,Xe)}else{const tt=!0===et.wireframe;(c.geometry!==Ue.id||c.program!==Ce.id||c.wireframe!==tt)&&(c.geometry=Ue.id,c.program=Ce.id,c.wireframe=tt,We=!0)}null!==Xe&&t.update(Xe,34963),(We||u)&&(u=!1,function B(ke,et,Ce,Ue){if(!1===i.isWebGL2&&(ke.isInstancedMesh||Ue.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;D();const Xe=Ue.attributes,We=Ce.getAttributes(),tt=et.defaultAttributeValues;for(const wt in We){const ut=We[wt];if(ut.location>=0){let Et=Xe[wt];if(void 0===Et&&("instanceMatrix"===wt&&ke.instanceMatrix&&(Et=ke.instanceMatrix),"instanceColor"===wt&&ke.instanceColor&&(Et=ke.instanceColor)),void 0!==Et){const ot=Et.normalized,lt=Et.itemSize,ze=t.get(Et);if(void 0===ze)continue;const Ve=ze.buffer,rt=ze.type,Tt=ze.bytesPerElement;if(Et.isInterleavedBufferAttribute){const mt=Et.data,Wt=mt.stride,ct=Et.offset;if(mt.isInstancedInterleavedBuffer){for(let _t=0;_t<ut.locationSize;_t++)O(ut.location+_t,mt.meshPerAttribute);!0!==ke.isInstancedMesh&&void 0===Ue._maxInstanceCount&&(Ue._maxInstanceCount=mt.meshPerAttribute*mt.count)}else for(let _t=0;_t<ut.locationSize;_t++)M(ut.location+_t);n.bindBuffer(34962,Ve);for(let _t=0;_t<ut.locationSize;_t++)Z(ut.location+_t,lt/ut.locationSize,rt,ot,Wt*Tt,(ct+lt/ut.locationSize*_t)*Tt)}else{if(Et.isInstancedBufferAttribute){for(let mt=0;mt<ut.locationSize;mt++)O(ut.location+mt,Et.meshPerAttribute);!0!==ke.isInstancedMesh&&void 0===Ue._maxInstanceCount&&(Ue._maxInstanceCount=Et.meshPerAttribute*Et.count)}else for(let mt=0;mt<ut.locationSize;mt++)M(ut.location+mt);n.bindBuffer(34962,Ve);for(let mt=0;mt<ut.locationSize;mt++)Z(ut.location+mt,lt/ut.locationSize,rt,ot,lt*Tt,lt/ut.locationSize*mt*Tt)}}else if(void 0!==tt){const ot=tt[wt];if(void 0!==ot)switch(ot.length){case 2:n.vertexAttrib2fv(ut.location,ot);break;case 3:n.vertexAttrib3fv(ut.location,ot);break;case 4:n.vertexAttrib4fv(ut.location,ot);break;default:n.vertexAttrib1fv(ut.location,ot)}}}}q()}(ke,et,Ce,Ue),null!==Xe&&n.bindBuffer(34963,t.get(Xe).buffer))},reset:qe,resetDefaultState:it,dispose:function ee(){qe();for(const ke in a){const et=a[ke];for(const Ce in et){const Ue=et[Ce];for(const Xe in Ue)p(Ue[Xe].object),delete Ue[Xe];delete et[Ce]}delete a[ke]}},releaseStatesOfGeometry:function me(ke){if(void 0===a[ke.id])return;const et=a[ke.id];for(const Ce in et){const Ue=et[Ce];for(const Xe in Ue)p(Ue[Xe].object),delete Ue[Xe];delete et[Ce]}delete a[ke.id]},releaseStatesOfProgram:function xe(ke){for(const et in a){const Ce=a[et];if(void 0===Ce[ke.id])continue;const Ue=Ce[ke.id];for(const Xe in Ue)p(Ue[Xe].object),delete Ue[Xe];delete Ce[ke.id]}},initAttributes:D,enableAttribute:M,disableUnusedAttributes:q}}function iX(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),t.update(u,s,d)}}function rX(n,e,t){let i;function s(Z){if("highp"===Z){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Z="mediump"}return"mediump"===Z&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),g=n.getParameter(34921),m=n.getParameter(36347),_=n.getParameter(36348),w=n.getParameter(36349),D=h>0,M=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const Z=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(Z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:m,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:D,floatFragmentTextures:M,floatVertexTextures:D&&M,maxSamples:o?n.getParameter(36183):0}}function sX(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new _l,a=new _o,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,p){const g=null!==d?d.length:0;let m=null;if(0!==g){if(m=l.value,!0!==p||null===m){const _=f+4*g,w=h.matrixWorldInverse;a.getNormalMatrix(w),(null===m||m.length<_)&&(m=new Float32Array(_));for(let D=0,M=f;D!==g;++D,M+=4)o.copy(d[D]).applyMatrix4(w,a),o.normal.toArray(m,M),m[M+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,m}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=0!==d.length||h||0!==i||r;return r=h,t=u(d,f,0),i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,g=d.clipIntersection,m=d.clipShadows,_=n.get(d);if(!r||null===p||0===p.length||s&&!m)s?u(null):c();else{const w=s?0:i,D=4*w;let M=_.clippingState||null;l.value=M,M=u(p,h,D,f);for(let O=0;O!==D;++O)M[O]=t[O];_.clippingState=M,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=w}}}function oX(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new e9(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}Yo.physical={uniforms:Ur([Yo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ht(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Zt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ht},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Zt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Zt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:qn.meshphysical_vert,fragmentShader:qn.meshphysical_frag};class ff extends Q1{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const WR=[.125,.215,.35,.446,.526,.582],ew=new ff,$R=new Zt;let tw=null;const hc=(1+Math.sqrt(5))/2,md=1/hc,qR=[new re(1,1,1),new re(-1,1,1),new re(1,1,-1),new re(-1,1,-1),new re(0,hc,md),new re(0,hc,-md),new re(md,0,hc),new re(-md,0,hc),new re(hc,md,0),new re(-hc,md,0)];class YR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){tw=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=QR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=KR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(tw),e.scissorTest=!1,Vm(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),tw=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:lr,minFilter:lr,generateMipmaps:!1,type:rf,format:qs,encoding:ic,depthBuffer:!1},r=XR(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=XR(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function aX(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+WR.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=WR[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,g=3,m=2,_=1,w=new Float32Array(g*p*f),D=new Float32Array(m*p*f),M=new Float32Array(_*p*f);for(let q=0;q<f;q++){const Z=q%3*2/3-1,B=q>2?0:-1;w.set([Z,B,0,Z+2/3,B,0,Z+2/3,B+1,0,Z,B,0,Z+2/3,B+1,0,Z,B+1,0],g*p*q),D.set(h,m*p*q),M.set([q,q,q,q,q,q],_*p*q)}const O=new Hn;O.setAttribute("position",new Sr(w,g)),O.setAttribute("uv",new Sr(D,m)),O.setAttribute("faceIndex",new Sr(M,_)),e.push(O),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function lX(n,e,t){const i=new Float32Array(20),r=new re(0,1,0);return new So({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Vr(this._lodPlanes[0],e);this._renderer.compile(t,ew)}_sceneToCubeUV(e,t,i,r){const a=new Nr(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor($R),u.toneMapping=0,u.autoClear=!1;const f=new fl({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Vr(new uc,f);let g=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,g=!0):(f.color.copy($R),g=!0);for(let _=0;_<6;_++){const w=_%3;0===w?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===w?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const D=this._cubeSize;Vm(r,w*D,_>2?D:0,D,D),u.setRenderTarget(r),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=QR()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=KR());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Vr(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;Vm(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,ew)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,qR[(r-1)%qR.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Vr(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,g=s/p,m=isFinite(s)?1+Math.floor(3*g):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const _=[];let w=0;for(let Z=0;Z<20;++Z){const B=Z/g,ee=Math.exp(-B*B/2);_.push(ee),0===Z?w+=ee:Z<m&&(w+=2*ee)}for(let Z=0;Z<_.length;Z++)_[Z]=_[Z]/w;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:D}=this;h.dTheta.value=p,h.mipInt.value=D-i;const M=this._sizeLods[r];Vm(t,3*M*(r>D-4?r-D+4:0),4*(this._cubeSize-M),3*M,2*M),l.setRenderTarget(t),l.render(d,ew)}}function XR(n,e,t){const i=new Ma(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function KR(){return new So({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function QR(){return new So({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function cX(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new YR(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new YR(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function uX(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function dX(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let g=0;if(null!==f){const w=f.array;g=f.version;for(let D=0,M=w.length;D<M;D+=3){const O=w[D+0],q=w[D+1],Z=w[D+2];h.push(O,q,q,Z,Z,O)}}else{g=p.version;for(let D=0,M=p.array.length/3-1;D<M;D+=3){const O=D+0,q=D+1,Z=D+2;h.push(O,q,q,Z,Z,O)}}const m=new(AR(h)?HR:UR)(h,1);m.version=g;const _=s.get(d);_&&e.remove(_),s.set(d,m)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const p in h)e.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const g=f[p];for(let m=0,_=g.length;m<_;m++)e.update(g[m],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function hX(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function d(h,f,p){if(0===p)return;let g,m;if(r)g=n,m="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",null===g)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[m](s,f,a,h*l,p),t.update(f,s,p)}}function fX(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function pX(n,e){return n[0]-e[0]}function gX(n,e){return Math.abs(e[1])-Math.abs(n[1])}function iw(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function mX(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new vi,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=void 0!==p?p.length:0;let m=s.get(u);if(void 0===m||m.count!==g){let et=function(){it.dispose(),s.delete(u),u.removeEventListener("dispose",et)};void 0!==m&&m.texture.dispose();const D=void 0!==u.morphAttributes.position,M=void 0!==u.morphAttributes.normal,O=void 0!==u.morphAttributes.color,q=u.morphAttributes.position||[],Z=u.morphAttributes.normal||[],B=u.morphAttributes.color||[];let ee=0;!0===D&&(ee=1),!0===M&&(ee=2),!0===O&&(ee=3);let me=u.attributes.position.count*ee,xe=1;me>e.maxTextureSize&&(xe=Math.ceil(me/e.maxTextureSize),me=e.maxTextureSize);const qe=new Float32Array(me*xe*4*g),it=new R1(qe,me,xe,g);it.type=ol,it.needsUpdate=!0;const ke=4*ee;for(let Ce=0;Ce<g;Ce++){const Ue=q[Ce],Xe=Z[Ce],We=B[Ce],tt=me*xe*4*Ce;for(let wt=0;wt<Ue.count;wt++){const ut=wt*ke;!0===D&&(o.fromBufferAttribute(Ue,wt),!0===Ue.normalized&&iw(o,Ue),qe[tt+ut+0]=o.x,qe[tt+ut+1]=o.y,qe[tt+ut+2]=o.z,qe[tt+ut+3]=0),!0===M&&(o.fromBufferAttribute(Xe,wt),!0===Xe.normalized&&iw(o,Xe),qe[tt+ut+4]=o.x,qe[tt+ut+5]=o.y,qe[tt+ut+6]=o.z,qe[tt+ut+7]=0),!0===O&&(o.fromBufferAttribute(We,wt),!0===We.normalized&&iw(o,We),qe[tt+ut+8]=o.x,qe[tt+ut+9]=o.y,qe[tt+ut+10]=o.z,qe[tt+ut+11]=4===We.itemSize?o.w:1)}}m={count:g,texture:it,size:new ht(me,xe)},s.set(u,m),u.addEventListener("dispose",et)}let _=0;for(let D=0;D<f.length;D++)_+=f[D];const w=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",w),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const p=void 0===f?0:f.length;let g=i[u.id];if(void 0===g||g.length!==p){g=[];for(let M=0;M<p;M++)g[M]=[M,0];i[u.id]=g}for(let M=0;M<p;M++){const O=g[M];O[0]=M,O[1]=f[M]}g.sort(gX);for(let M=0;M<8;M++)M<p&&g[M][1]?(a[M][0]=g[M][0],a[M][1]=g[M][1]):(a[M][0]=Number.MAX_SAFE_INTEGER,a[M][1]=0);a.sort(pX);const m=u.morphAttributes.position,_=u.morphAttributes.normal;let w=0;for(let M=0;M<8;M++){const O=a[M],q=O[0],Z=O[1];q!==Number.MAX_SAFE_INTEGER&&Z?(m&&u.getAttribute("morphTarget"+M)!==m[q]&&u.setAttribute("morphTarget"+M,m[q]),_&&u.getAttribute("morphNormal"+M)!==_[q]&&u.setAttribute("morphNormal"+M,_[q]),r[M]=Z,w+=Z):(m&&!0===u.hasAttribute("morphTarget"+M)&&u.deleteAttribute("morphTarget"+M),_&&!0===u.hasAttribute("morphNormal"+M)&&u.deleteAttribute("morphNormal"+M),r[M]=0)}const D=u.morphTargetsRelative?1:1-w;h.getUniforms().setValue(n,"morphTargetBaseInfluence",D),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function _X(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=e.get(l,l.geometry);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}const JR=new al,ZR=new R1,eN=new class DR extends al{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=vr,this.minFilter=vr,this.wrapR=ds,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},tN=new Lm,nN=[],iN=[],rN=new Float32Array(16),sN=new Float32Array(9),oN=new Float32Array(4);function _d(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=nN[r];if(void 0===s&&(s=new Float32Array(r),nN[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Jr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Zr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Um(n,e){let t=iN[e];void 0===t&&(t=new Int32Array(e),iN[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function yX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function vX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Jr(t,e))return;n.uniform2fv(this.addr,e),Zr(t,e)}}function bX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Jr(t,e))return;n.uniform3fv(this.addr,e),Zr(t,e)}}function wX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Jr(t,e))return;n.uniform4fv(this.addr,e),Zr(t,e)}}function xX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Jr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Zr(t,e)}else{if(Jr(t,i))return;oN.set(i),n.uniformMatrix2fv(this.addr,!1,oN),Zr(t,i)}}function SX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Jr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Zr(t,e)}else{if(Jr(t,i))return;sN.set(i),n.uniformMatrix3fv(this.addr,!1,sN),Zr(t,i)}}function CX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Jr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Zr(t,e)}else{if(Jr(t,i))return;rN.set(i),n.uniformMatrix4fv(this.addr,!1,rN),Zr(t,i)}}function MX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function AX(n,e){const t=this.cache;Jr(t,e)||(n.uniform2iv(this.addr,e),Zr(t,e))}function EX(n,e){const t=this.cache;Jr(t,e)||(n.uniform3iv(this.addr,e),Zr(t,e))}function TX(n,e){const t=this.cache;Jr(t,e)||(n.uniform4iv(this.addr,e),Zr(t,e))}function DX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function PX(n,e){const t=this.cache;Jr(t,e)||(n.uniform2uiv(this.addr,e),Zr(t,e))}function OX(n,e){const t=this.cache;Jr(t,e)||(n.uniform3uiv(this.addr,e),Zr(t,e))}function RX(n,e){const t=this.cache;Jr(t,e)||(n.uniform4uiv(this.addr,e),Zr(t,e))}function NX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||JR,r)}function IX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||eN,r)}function kX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||tN,r)}function FX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||ZR,r)}function BX(n,e){n.uniform1fv(this.addr,e)}function VX(n,e){const t=_d(e,this.size,2);n.uniform2fv(this.addr,t)}function UX(n,e){const t=_d(e,this.size,3);n.uniform3fv(this.addr,t)}function HX(n,e){const t=_d(e,this.size,4);n.uniform4fv(this.addr,t)}function zX(n,e){const t=_d(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function jX(n,e){const t=_d(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function GX(n,e){const t=_d(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function WX(n,e){n.uniform1iv(this.addr,e)}function $X(n,e){n.uniform2iv(this.addr,e)}function qX(n,e){n.uniform3iv(this.addr,e)}function YX(n,e){n.uniform4iv(this.addr,e)}function XX(n,e){n.uniform1uiv(this.addr,e)}function KX(n,e){n.uniform2uiv(this.addr,e)}function QX(n,e){n.uniform3uiv(this.addr,e)}function JX(n,e){n.uniform4uiv(this.addr,e)}function ZX(n,e,t){const i=e.length,r=Um(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||JR,r[s])}function eK(n,e,t){const i=e.length,r=Um(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||eN,r[s])}function tK(n,e,t){const i=e.length,r=Um(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||tN,r[s])}function nK(n,e,t){const i=e.length,r=Um(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||ZR,r[s])}class rK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function LX(n){switch(n){case 5126:return yX;case 35664:return vX;case 35665:return bX;case 35666:return wX;case 35674:return xX;case 35675:return SX;case 35676:return CX;case 5124:case 35670:return MX;case 35667:case 35671:return AX;case 35668:case 35672:return EX;case 35669:case 35673:return TX;case 5125:return DX;case 36294:return PX;case 36295:return OX;case 36296:return RX;case 35678:case 36198:case 36298:case 36306:case 35682:return NX;case 35679:case 36299:case 36307:return IX;case 35680:case 36300:case 36308:case 36293:return kX;case 36289:case 36303:case 36311:case 36292:return FX}}(t.type)}}class sK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function iK(n){switch(n){case 5126:return BX;case 35664:return VX;case 35665:return UX;case 35666:return HX;case 35674:return zX;case 35675:return jX;case 35676:return GX;case 5124:case 35670:return WX;case 35667:case 35671:return $X;case 35668:case 35672:return qX;case 35669:case 35673:return YX;case 5125:return XX;case 36294:return KX;case 36295:return QX;case 36296:return JX;case 35678:case 36198:case 36298:case 36306:case 35682:return ZX;case 35679:case 36299:case 36307:return eK;case 35680:case 36300:case 36308:case 36293:return tK;case 36289:case 36303:case 36311:case 36292:return nK}}(t.type)}}class oK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const rw=/(\w+)(\])?(\[|\.)?/g;function aN(n,e){n.seq.push(e),n.map[e.id]=e}function aK(n,e,t){const i=n.name,r=i.length;for(rw.lastIndex=0;;){const s=rw.exec(i),o=rw.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){aN(t,void 0===c?new rK(a,n,e):new sK(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new oK(a),aN(t,d)),t=d}}}class Hm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);aK(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function lN(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let lK=0;function cN(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function cK(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function dK(n,e){const t=function uK(n){switch(n){case ic:return["Linear","( value )"];case Hi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function hK(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function pf(n){return""!==n}function uN(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function dN(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const mK=/^[ \t]*#include +<([\w\d./]+)>/gm;function sw(n){return n.replace(mK,_K)}function _K(n,e){const t=qn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return sw(t)}const yK=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,vK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hN(n){return n.replace(vK,fN).replace(yK,bK)}function bK(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),fN(0,e,t,i)}function fN(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function pN(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function AK(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function wK(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function xK(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function SK(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function CK(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function MK(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function fK(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(pf).join("\n")}(t),p=function pK(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),g=r.createProgram();let m,_,w=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=[p].filter(pf).join("\n"),m.length>0&&(m+="\n"),_=[f,p].filter(pf).join("\n"),_.length>0&&(_+="\n")):(m=[pN(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(pf).join("\n"),_=[f,pN(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?qn.tonemapping_pars_fragment:"",0!==t.toneMapping?hK("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",qn.encodings_pars_fragment,dK("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(pf).join("\n")),o=sw(o),o=uN(o,t),o=dN(o,t),a=sw(a),a=uN(a,t),a=dN(a,t),o=hN(o),a=hN(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(w="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,_=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const M=w+_+a,O=lN(r,35633,w+m+o),q=lN(r,35632,M);if(r.attachShader(g,O),r.attachShader(g,q),void 0!==t.index0AttributeName?r.bindAttribLocation(g,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),n.debug.checkShaderErrors){const ee=r.getProgramInfoLog(g).trim(),me=r.getShaderInfoLog(O).trim(),xe=r.getShaderInfoLog(q).trim();let qe=!0,it=!0;if(!1===r.getProgramParameter(g,35714)){qe=!1;const ke=cN(r,O,"vertex"),et=cN(r,q,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+ee+"\n"+ke+"\n"+et)}else""!==ee?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(""===me||""===xe)&&(it=!1);it&&(this.diagnostics={runnable:qe,programLog:ee,vertexShader:{log:me,prefix:m},fragmentShader:{log:xe,prefix:_}})}let Z,B;return r.deleteShader(O),r.deleteShader(q),this.getUniforms=function(){return void 0===Z&&(Z=new Hm(r,g)),Z},this.getAttributes=function(){return void 0===B&&(B=function gK(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,g)),B},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=lK++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=O,this.fragmentShader=q,this}let EK=0;class TK{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const i=new DK(e);t.set(e,i)}return t.get(e)}}class DK{constructor(e){this.id=EK++,this.code=e,this.usedTimes=0}}function PK(n,e,t,i,r,s,o){const a=new U1,l=new TK,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function g(B,ee,me,xe,qe){const it=xe.fog,ke=qe.geometry,Ce=(B.isMeshStandardMaterial?t:e).get(B.envMap||(B.isMeshStandardMaterial?xe.environment:null)),Ue=Ce&&306===Ce.mapping?Ce.image.height:null,Xe=p[B.type];null!==B.precision&&(f=r.getMaxPrecision(B.precision),f!==B.precision&&console.warn("THREE.WebGLProgram.getParameters:",B.precision,"not supported, using",f,"instead."));const We=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,tt=void 0!==We?We.length:0;let ut,Et,ot,lt,wt=0;if(void 0!==ke.morphAttributes.position&&(wt=1),void 0!==ke.morphAttributes.normal&&(wt=2),void 0!==ke.morphAttributes.color&&(wt=3),Xe){const Wt=Yo[Xe];ut=Wt.vertexShader,Et=Wt.fragmentShader}else ut=B.vertexShader,Et=B.fragmentShader,l.update(B),ot=l.getVertexShaderID(B),lt=l.getFragmentShaderID(B);const ze=n.getRenderTarget(),rt=B.clearcoat>0,Tt=B.iridescence>0;return{isWebGL2:u,shaderID:Xe,shaderName:B.type,vertexShader:ut,fragmentShader:Et,defines:B.defines,customVertexShaderID:ot,customFragmentShaderID:lt,isRawShaderMaterial:!0===B.isRawShaderMaterial,glslVersion:B.glslVersion,precision:f,instancing:!0===qe.isInstancedMesh,instancingColor:!0===qe.isInstancedMesh&&null!==qe.instanceColor,supportsVertexTextures:h,outputEncoding:null===ze?n.outputEncoding:!0===ze.isXRRenderTarget?ze.texture.encoding:ic,map:!!B.map,matcap:!!B.matcap,envMap:!!Ce,envMapMode:Ce&&Ce.mapping,envMapCubeUVHeight:Ue,lightMap:!!B.lightMap,aoMap:!!B.aoMap,emissiveMap:!!B.emissiveMap,bumpMap:!!B.bumpMap,normalMap:!!B.normalMap,objectSpaceNormalMap:1===B.normalMapType,tangentSpaceNormalMap:0===B.normalMapType,decodeVideoTexture:!!B.map&&!0===B.map.isVideoTexture&&B.map.encoding===Hi,clearcoat:rt,clearcoatMap:rt&&!!B.clearcoatMap,clearcoatRoughnessMap:rt&&!!B.clearcoatRoughnessMap,clearcoatNormalMap:rt&&!!B.clearcoatNormalMap,iridescence:Tt,iridescenceMap:Tt&&!!B.iridescenceMap,iridescenceThicknessMap:Tt&&!!B.iridescenceThicknessMap,displacementMap:!!B.displacementMap,roughnessMap:!!B.roughnessMap,metalnessMap:!!B.metalnessMap,specularMap:!!B.specularMap,specularIntensityMap:!!B.specularIntensityMap,specularColorMap:!!B.specularColorMap,opaque:!1===B.transparent&&1===B.blending,alphaMap:!!B.alphaMap,alphaTest:B.alphaTest>0,gradientMap:!!B.gradientMap,sheen:B.sheen>0,sheenColorMap:!!B.sheenColorMap,sheenRoughnessMap:!!B.sheenRoughnessMap,transmission:B.transmission>0,transmissionMap:!!B.transmissionMap,thicknessMap:!!B.thicknessMap,combine:B.combine,vertexTangents:!!B.normalMap&&!!ke.attributes.tangent,vertexColors:B.vertexColors,vertexAlphas:!0===B.vertexColors&&!!ke.attributes.color&&4===ke.attributes.color.itemSize,vertexUvs:!!(B.map||B.bumpMap||B.normalMap||B.specularMap||B.alphaMap||B.emissiveMap||B.roughnessMap||B.metalnessMap||B.clearcoatMap||B.clearcoatRoughnessMap||B.clearcoatNormalMap||B.iridescenceMap||B.iridescenceThicknessMap||B.displacementMap||B.transmissionMap||B.thicknessMap||B.specularIntensityMap||B.specularColorMap||B.sheenColorMap||B.sheenRoughnessMap),uvsVertexOnly:!(B.map||B.bumpMap||B.normalMap||B.specularMap||B.alphaMap||B.emissiveMap||B.roughnessMap||B.metalnessMap||B.clearcoatNormalMap||B.iridescenceMap||B.iridescenceThicknessMap||B.transmission>0||B.transmissionMap||B.thicknessMap||B.specularIntensityMap||B.specularColorMap||B.sheen>0||B.sheenColorMap||B.sheenRoughnessMap||!B.displacementMap),fog:!!it,useFog:!0===B.fog,fogExp2:it&&it.isFogExp2,flatShading:!!B.flatShading,sizeAttenuation:B.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===qe.isSkinnedMesh,morphTargets:void 0!==ke.morphAttributes.position,morphNormals:void 0!==ke.morphAttributes.normal,morphColors:void 0!==ke.morphAttributes.color,morphTargetsCount:tt,morphTextureStride:wt,numDirLights:ee.directional.length,numPointLights:ee.point.length,numSpotLights:ee.spot.length,numRectAreaLights:ee.rectArea.length,numHemiLights:ee.hemi.length,numDirLightShadows:ee.directionalShadowMap.length,numPointLightShadows:ee.pointShadowMap.length,numSpotLightShadows:ee.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:B.dithering,shadowMapEnabled:n.shadowMap.enabled&&me.length>0,shadowMapType:n.shadowMap.type,toneMapping:B.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:B.premultipliedAlpha,doubleSided:2===B.side,flipSided:1===B.side,useDepthPacking:!!B.depthPacking,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionDerivatives:B.extensions&&B.extensions.derivatives,extensionFragDepth:B.extensions&&B.extensions.fragDepth,extensionDrawBuffers:B.extensions&&B.extensions.drawBuffers,extensionShaderTextureLOD:B.extensions&&B.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:B.customProgramCacheKey()}},getProgramCacheKey:function m(B){const ee=[];if(B.shaderID?ee.push(B.shaderID):(ee.push(B.customVertexShaderID),ee.push(B.customFragmentShaderID)),void 0!==B.defines)for(const me in B.defines)ee.push(me),ee.push(B.defines[me]);return!1===B.isRawShaderMaterial&&(function _(B,ee){B.push(ee.precision),B.push(ee.outputEncoding),B.push(ee.envMapMode),B.push(ee.envMapCubeUVHeight),B.push(ee.combine),B.push(ee.vertexUvs),B.push(ee.fogExp2),B.push(ee.sizeAttenuation),B.push(ee.morphTargetsCount),B.push(ee.morphAttributeCount),B.push(ee.numDirLights),B.push(ee.numPointLights),B.push(ee.numSpotLights),B.push(ee.numHemiLights),B.push(ee.numRectAreaLights),B.push(ee.numDirLightShadows),B.push(ee.numPointLightShadows),B.push(ee.numSpotLightShadows),B.push(ee.shadowMapType),B.push(ee.toneMapping),B.push(ee.numClippingPlanes),B.push(ee.numClipIntersection),B.push(ee.depthPacking)}(ee,B),function w(B,ee){a.disableAll(),ee.isWebGL2&&a.enable(0),ee.supportsVertexTextures&&a.enable(1),ee.instancing&&a.enable(2),ee.instancingColor&&a.enable(3),ee.map&&a.enable(4),ee.matcap&&a.enable(5),ee.envMap&&a.enable(6),ee.lightMap&&a.enable(7),ee.aoMap&&a.enable(8),ee.emissiveMap&&a.enable(9),ee.bumpMap&&a.enable(10),ee.normalMap&&a.enable(11),ee.objectSpaceNormalMap&&a.enable(12),ee.tangentSpaceNormalMap&&a.enable(13),ee.clearcoat&&a.enable(14),ee.clearcoatMap&&a.enable(15),ee.clearcoatRoughnessMap&&a.enable(16),ee.clearcoatNormalMap&&a.enable(17),ee.iridescence&&a.enable(18),ee.iridescenceMap&&a.enable(19),ee.iridescenceThicknessMap&&a.enable(20),ee.displacementMap&&a.enable(21),ee.specularMap&&a.enable(22),ee.roughnessMap&&a.enable(23),ee.metalnessMap&&a.enable(24),ee.gradientMap&&a.enable(25),ee.alphaMap&&a.enable(26),ee.alphaTest&&a.enable(27),ee.vertexColors&&a.enable(28),ee.vertexAlphas&&a.enable(29),ee.vertexUvs&&a.enable(30),ee.vertexTangents&&a.enable(31),ee.uvsVertexOnly&&a.enable(32),ee.fog&&a.enable(33),B.push(a.mask),a.disableAll(),ee.useFog&&a.enable(0),ee.flatShading&&a.enable(1),ee.logarithmicDepthBuffer&&a.enable(2),ee.skinning&&a.enable(3),ee.morphTargets&&a.enable(4),ee.morphNormals&&a.enable(5),ee.morphColors&&a.enable(6),ee.premultipliedAlpha&&a.enable(7),ee.shadowMapEnabled&&a.enable(8),ee.physicallyCorrectLights&&a.enable(9),ee.doubleSided&&a.enable(10),ee.flipSided&&a.enable(11),ee.useDepthPacking&&a.enable(12),ee.dithering&&a.enable(13),ee.specularIntensityMap&&a.enable(14),ee.specularColorMap&&a.enable(15),ee.transmission&&a.enable(16),ee.transmissionMap&&a.enable(17),ee.thicknessMap&&a.enable(18),ee.sheen&&a.enable(19),ee.sheenColorMap&&a.enable(20),ee.sheenRoughnessMap&&a.enable(21),ee.decodeVideoTexture&&a.enable(22),ee.opaque&&a.enable(23),B.push(a.mask)}(ee,B),ee.push(n.outputEncoding)),ee.push(B.customProgramCacheKey),ee.join()},getUniforms:function D(B){const ee=p[B.type];let me;return me=ee?jR.clone(Yo[ee].uniforms):B.uniforms,me},acquireProgram:function M(B,ee){let me;for(let xe=0,qe=c.length;xe<qe;xe++){const it=c[xe];if(it.cacheKey===ee){me=it,++me.usedTimes;break}}return void 0===me&&(me=new AK(n,ee,B,s),c.push(me)),me},releaseProgram:function O(B){if(0==--B.usedTimes){const ee=c.indexOf(B);c[ee]=c[c.length-1],c.pop(),B.destroy()}},releaseShaderCache:function q(B){l.remove(B)},programs:c,dispose:function Z(){l.dispose()}}}function OK(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function RK(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function gN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function mN(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,g,m){let _=n[e];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:g,group:m},n[e]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=d.renderOrder,_.z=g,_.group=m),e++,_}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,g,m){const _=o(d,h,f,p,g,m);f.transmission>0?i.push(_):!0===f.transparent?r.push(_):t.push(_)},unshift:function l(d,h,f,p,g,m){const _=o(d,h,f,p,g,m);f.transmission>0?i.unshift(_):!0===f.transparent?r.unshift(_):t.unshift(_)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||RK),i.length>1&&i.sort(h||gN),r.length>1&&r.sort(h||gN)}}}function NK(){let n=new WeakMap;return{get:function e(i,r){let s;return!1===n.has(i)?(s=new mN,n.set(i,[s])):r>=n.get(i).length?(s=new mN,n.get(i).push(s)):s=n.get(i)[r],s},dispose:function t(){n=new WeakMap}}}function IK(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new re,color:new Zt};break;case"SpotLight":t={position:new re,direction:new re,color:new Zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new re,color:new Zt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new re,skyColor:new Zt,groundColor:new Zt};break;case"RectAreaLight":t={color:new Zt,position:new re,halfWidth:new re,halfHeight:new re}}return n[e.id]=t,t}}}let FK=0;function LK(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function BK(n,e){const t=new IK,i=function kK(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new re);const s=new re,o=new Ln,a=new Ln;return{setup:function l(u,d){let h=0,f=0,p=0;for(let ee=0;ee<9;ee++)r.probe[ee].set(0,0,0);let g=0,m=0,_=0,w=0,D=0,M=0,O=0,q=0;u.sort(LK);const Z=!0!==d?Math.PI:1;for(let ee=0,me=u.length;ee<me;ee++){const xe=u[ee],qe=xe.color,it=xe.intensity,ke=xe.distance,et=xe.shadow&&xe.shadow.map?xe.shadow.map.texture:null;if(xe.isAmbientLight)h+=qe.r*it*Z,f+=qe.g*it*Z,p+=qe.b*it*Z;else if(xe.isLightProbe)for(let Ce=0;Ce<9;Ce++)r.probe[Ce].addScaledVector(xe.sh.coefficients[Ce],it);else if(xe.isDirectionalLight){const Ce=t.get(xe);if(Ce.color.copy(xe.color).multiplyScalar(xe.intensity*Z),xe.castShadow){const Ue=xe.shadow,Xe=i.get(xe);Xe.shadowBias=Ue.bias,Xe.shadowNormalBias=Ue.normalBias,Xe.shadowRadius=Ue.radius,Xe.shadowMapSize=Ue.mapSize,r.directionalShadow[g]=Xe,r.directionalShadowMap[g]=et,r.directionalShadowMatrix[g]=xe.shadow.matrix,M++}r.directional[g]=Ce,g++}else if(xe.isSpotLight){const Ce=t.get(xe);if(Ce.position.setFromMatrixPosition(xe.matrixWorld),Ce.color.copy(qe).multiplyScalar(it*Z),Ce.distance=ke,Ce.coneCos=Math.cos(xe.angle),Ce.penumbraCos=Math.cos(xe.angle*(1-xe.penumbra)),Ce.decay=xe.decay,xe.castShadow){const Ue=xe.shadow,Xe=i.get(xe);Xe.shadowBias=Ue.bias,Xe.shadowNormalBias=Ue.normalBias,Xe.shadowRadius=Ue.radius,Xe.shadowMapSize=Ue.mapSize,r.spotShadow[_]=Xe,r.spotShadowMap[_]=et,r.spotShadowMatrix[_]=xe.shadow.matrix,q++}r.spot[_]=Ce,_++}else if(xe.isRectAreaLight){const Ce=t.get(xe);Ce.color.copy(qe).multiplyScalar(it),Ce.halfWidth.set(.5*xe.width,0,0),Ce.halfHeight.set(0,.5*xe.height,0),r.rectArea[w]=Ce,w++}else if(xe.isPointLight){const Ce=t.get(xe);if(Ce.color.copy(xe.color).multiplyScalar(xe.intensity*Z),Ce.distance=xe.distance,Ce.decay=xe.decay,xe.castShadow){const Ue=xe.shadow,Xe=i.get(xe);Xe.shadowBias=Ue.bias,Xe.shadowNormalBias=Ue.normalBias,Xe.shadowRadius=Ue.radius,Xe.shadowMapSize=Ue.mapSize,Xe.shadowCameraNear=Ue.camera.near,Xe.shadowCameraFar=Ue.camera.far,r.pointShadow[m]=Xe,r.pointShadowMap[m]=et,r.pointShadowMatrix[m]=xe.shadow.matrix,O++}r.point[m]=Ce,m++}else if(xe.isHemisphereLight){const Ce=t.get(xe);Ce.skyColor.copy(xe.color).multiplyScalar(it*Z),Ce.groundColor.copy(xe.groundColor).multiplyScalar(it*Z),r.hemi[D]=Ce,D++}}w>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=qt.LTC_FLOAT_1,r.rectAreaLTC2=qt.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=qt.LTC_HALF_1,r.rectAreaLTC2=qt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const B=r.hash;(B.directionalLength!==g||B.pointLength!==m||B.spotLength!==_||B.rectAreaLength!==w||B.hemiLength!==D||B.numDirectionalShadows!==M||B.numPointShadows!==O||B.numSpotShadows!==q)&&(r.directional.length=g,r.spot.length=_,r.rectArea.length=w,r.point.length=m,r.hemi.length=D,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=O,r.pointShadowMap.length=O,r.spotShadow.length=q,r.spotShadowMap.length=q,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=O,r.spotShadowMatrix.length=q,B.directionalLength=g,B.pointLength=m,B.spotLength=_,B.rectAreaLength=w,B.hemiLength=D,B.numDirectionalShadows=M,B.numPointShadows=O,B.numSpotShadows=q,r.version=FK++)},setupView:function c(u,d){let h=0,f=0,p=0,g=0,m=0;const _=d.matrixWorldInverse;for(let w=0,D=u.length;w<D;w++){const M=u[w];if(M.isDirectionalLight){const O=r.directional[h];O.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),O.direction.sub(s),O.direction.transformDirection(_),h++}else if(M.isSpotLight){const O=r.spot[p];O.position.setFromMatrixPosition(M.matrixWorld),O.position.applyMatrix4(_),O.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),O.direction.sub(s),O.direction.transformDirection(_),p++}else if(M.isRectAreaLight){const O=r.rectArea[g];O.position.setFromMatrixPosition(M.matrixWorld),O.position.applyMatrix4(_),a.identity(),o.copy(M.matrixWorld),o.premultiply(_),a.extractRotation(o),O.halfWidth.set(.5*M.width,0,0),O.halfHeight.set(0,.5*M.height,0),O.halfWidth.applyMatrix4(a),O.halfHeight.applyMatrix4(a),g++}else if(M.isPointLight){const O=r.point[f];O.position.setFromMatrixPosition(M.matrixWorld),O.position.applyMatrix4(_),f++}else if(M.isHemisphereLight){const O=r.hemi[m];O.direction.setFromMatrixPosition(M.matrixWorld),O.direction.transformDirection(_),m++}}},state:r}}function _N(n,e){const t=new BK(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(d){t.setup(i,d)},setupLightsView:function c(d){t.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function VK(n,e){let t=new WeakMap;return{get:function i(s,o=0){let a;return!1===t.has(s)?(a=new _N(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new _N(n,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function r(){t=new WeakMap}}}class yN extends Rr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class vN extends Rr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new re,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function zK(n,e,t){let i=new Z1;const r=new ht,s=new ht,o=new vi,a=new yN({depthPacking:3201}),l=new vN,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new So({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ht},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Hn;p.setAttribute("position",new Sr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Vr(p,h),m=this;function _(M,O){const q=e.update(g);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,f.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(O,null,q,h,g,null),f.uniforms.shadow_pass.value=M.mapPass.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(O,null,q,f,g,null)}function w(M,O,q,Z,B,ee){let me=null;const xe=!0===q.isPointLight?M.customDistanceMaterial:M.customDepthMaterial;if(me=void 0!==xe?xe:!0===q.isPointLight?l:a,n.localClippingEnabled&&!0===O.clipShadows&&0!==O.clippingPlanes.length||O.displacementMap&&0!==O.displacementScale||O.alphaMap&&O.alphaTest>0){const qe=me.uuid,it=O.uuid;let ke=c[qe];void 0===ke&&(ke={},c[qe]=ke);let et=ke[it];void 0===et&&(et=me.clone(),ke[it]=et),me=et}return me.visible=O.visible,me.wireframe=O.wireframe,me.side=3===ee?null!==O.shadowSide?O.shadowSide:O.side:null!==O.shadowSide?O.shadowSide:d[O.side],me.alphaMap=O.alphaMap,me.alphaTest=O.alphaTest,me.clipShadows=O.clipShadows,me.clippingPlanes=O.clippingPlanes,me.clipIntersection=O.clipIntersection,me.displacementMap=O.displacementMap,me.displacementScale=O.displacementScale,me.displacementBias=O.displacementBias,me.wireframeLinewidth=O.wireframeLinewidth,me.linewidth=O.linewidth,!0===q.isPointLight&&!0===me.isMeshDistanceMaterial&&(me.referencePosition.setFromMatrixPosition(q.matrixWorld),me.nearDistance=Z,me.farDistance=B),me}function D(M,O,q,Z,B){if(!1===M.visible)return;if(M.layers.test(O.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&3===B)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,M.matrixWorld);const xe=e.update(M),qe=M.material;if(Array.isArray(qe)){const it=xe.groups;for(let ke=0,et=it.length;ke<et;ke++){const Ce=it[ke],Ue=qe[Ce.materialIndex];if(Ue&&Ue.visible){const Xe=w(M,Ue,Z,q.near,q.far,B);n.renderBufferDirect(q,null,xe,Xe,M,Ce)}}}else if(qe.visible){const it=w(M,qe,Z,q.near,q.far,B);n.renderBufferDirect(q,null,xe,it,M,null)}}const me=M.children;for(let xe=0,qe=me.length;xe<qe;xe++)D(me[xe],O,q,Z,B)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(M,O,q){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===M.length)return;const Z=n.getRenderTarget(),B=n.getActiveCubeFace(),ee=n.getActiveMipmapLevel(),me=n.state;me.setBlending(0),me.buffers.color.setClear(1,1,1,1),me.buffers.depth.setTest(!0),me.setScissorTest(!1);for(let xe=0,qe=M.length;xe<qe;xe++){const it=M[xe],ke=it.shadow;if(void 0===ke){console.warn("THREE.WebGLShadowMap:",it,"has no shadow.");continue}if(!1===ke.autoUpdate&&!1===ke.needsUpdate)continue;r.copy(ke.mapSize);const et=ke.getFrameExtents();r.multiply(et),s.copy(ke.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/et.x),r.x=s.x*et.x,ke.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/et.y),r.y=s.y*et.y,ke.mapSize.y=s.y)),null===ke.map&&!ke.isPointLightShadow&&3===this.type&&(ke.map=new Ma(r.x,r.y),ke.map.texture.name=it.name+".shadowMap",ke.mapPass=new Ma(r.x,r.y),ke.camera.updateProjectionMatrix()),null===ke.map&&(ke.map=new Ma(r.x,r.y,{minFilter:vr,magFilter:vr,format:qs}),ke.map.texture.name=it.name+".shadowMap",ke.camera.updateProjectionMatrix()),n.setRenderTarget(ke.map),n.clear();const Ce=ke.getViewportCount();for(let Ue=0;Ue<Ce;Ue++){const Xe=ke.getViewport(Ue);o.set(s.x*Xe.x,s.y*Xe.y,s.x*Xe.z,s.y*Xe.w),me.viewport(o),ke.updateMatrices(it,Ue),i=ke.getFrustum(),D(O,q,ke.camera,it,this.type)}!ke.isPointLightShadow&&3===this.type&&_(ke,q),ke.needsUpdate=!1}m.needsUpdate=!1,n.setRenderTarget(Z,B,ee)}}function jK(n,e,t){const i=t.isWebGL2,a=new function r(){let Ne=!1;const Ht=new vi;let Bt=null;const wn=new vi(0,0,0,0);return{setMask:function(Qt){Bt!==Qt&&!Ne&&(n.colorMask(Qt,Qt,Qt,Qt),Bt=Qt)},setLocked:function(Qt){Ne=Qt},setClear:function(Qt,hn,zt,Dn,ui){!0===ui&&(Qt*=Dn,hn*=Dn,zt*=Dn),Ht.set(Qt,hn,zt,Dn),!1===wn.equals(Ht)&&(n.clearColor(Qt,hn,zt,Dn),wn.copy(Ht))},reset:function(){Ne=!1,Bt=null,wn.set(-1,0,0,0)}}},l=new function s(){let Ne=!1,Ht=null,Bt=null,wn=null;return{setTest:function(Qt){Qt?lt(2929):ze(2929)},setMask:function(Qt){Ht!==Qt&&!Ne&&(n.depthMask(Qt),Ht=Qt)},setFunc:function(Qt){if(Bt!==Qt){if(Qt)switch(Qt){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Bt=Qt}},setLocked:function(Qt){Ne=Qt},setClear:function(Qt){wn!==Qt&&(n.clearDepth(Qt),wn=Qt)},reset:function(){Ne=!1,Ht=null,Bt=null,wn=null}}},c=new function o(){let Ne=!1,Ht=null,Bt=null,wn=null,Qt=null,hn=null,zt=null,Dn=null,ui=null;return{setTest:function(di){Ne||(di?lt(2960):ze(2960))},setMask:function(di){Ht!==di&&!Ne&&(n.stencilMask(di),Ht=di)},setFunc:function(di,os,ra){(Bt!==di||wn!==os||Qt!==ra)&&(n.stencilFunc(di,os,ra),Bt=di,wn=os,Qt=ra)},setOp:function(di,os,ra){(hn!==di||zt!==os||Dn!==ra)&&(n.stencilOp(di,os,ra),hn=di,zt=os,Dn=ra)},setLocked:function(di){Ne=di},setClear:function(di){ui!==di&&(n.clearStencil(di),ui=di)},reset:function(){Ne=!1,Ht=null,Bt=null,wn=null,Qt=null,hn=null,zt=null,Dn=null,ui=null}}};let u={},d={},h=new WeakMap,f=[],p=null,g=!1,m=null,_=null,w=null,D=null,M=null,O=null,q=null,Z=!1,B=null,ee=null,me=null,xe=null,qe=null;const it=n.getParameter(35661);let ke=!1,et=0;const Ce=n.getParameter(7938);-1!==Ce.indexOf("WebGL")?(et=parseFloat(/^WebGL (\d)/.exec(Ce)[1]),ke=et>=1):-1!==Ce.indexOf("OpenGL ES")&&(et=parseFloat(/^OpenGL ES (\d)/.exec(Ce)[1]),ke=et>=2);let Ue=null,Xe={};const We=n.getParameter(3088),tt=n.getParameter(2978),wt=(new vi).fromArray(We),ut=(new vi).fromArray(tt);function Et(Ne,Ht,Bt){const wn=new Uint8Array(4),Qt=n.createTexture();n.bindTexture(Ne,Qt),n.texParameteri(Ne,10241,9728),n.texParameteri(Ne,10240,9728);for(let hn=0;hn<Bt;hn++)n.texImage2D(Ht+hn,0,6408,1,1,0,6408,5121,wn);return Qt}const ot={};function lt(Ne){!0!==u[Ne]&&(n.enable(Ne),u[Ne]=!0)}function ze(Ne){!1!==u[Ne]&&(n.disable(Ne),u[Ne]=!1)}ot[3553]=Et(3553,3553,1),ot[34067]=Et(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),lt(2929),l.setFunc(3),Mt(!1),Xt(1),lt(2884),ct(0);const mt={100:32774,101:32778,102:32779};if(i)mt[103]=32775,mt[104]=32776;else{const Ne=e.get("EXT_blend_minmax");null!==Ne&&(mt[103]=Ne.MIN_EXT,mt[104]=Ne.MAX_EXT)}const Wt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ct(Ne,Ht,Bt,wn,Qt,hn,zt,Dn){if(0!==Ne){if(!1===g&&(lt(3042),g=!0),5===Ne)Qt=Qt||Ht,hn=hn||Bt,zt=zt||wn,(Ht!==_||Qt!==M)&&(n.blendEquationSeparate(mt[Ht],mt[Qt]),_=Ht,M=Qt),(Bt!==w||wn!==D||hn!==O||zt!==q)&&(n.blendFuncSeparate(Wt[Bt],Wt[wn],Wt[hn],Wt[zt]),w=Bt,D=wn,O=hn,q=zt),m=Ne,Z=null;else if(Ne!==m||Dn!==Z){if((100!==_||100!==M)&&(n.blendEquation(32774),_=100,M=100),Dn)switch(Ne){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ne)}else switch(Ne){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ne)}w=null,D=null,O=null,q=null,m=Ne,Z=Dn}}else!0===g&&(ze(3042),g=!1)}function Mt(Ne){B!==Ne&&(n.frontFace(Ne?2304:2305),B=Ne)}function Xt(Ne){0!==Ne?(lt(2884),Ne!==ee&&n.cullFace(1===Ne?1029:2===Ne?1028:1032)):ze(2884),ee=Ne}function an(Ne,Ht,Bt){Ne?(lt(32823),(xe!==Ht||qe!==Bt)&&(n.polygonOffset(Ht,Bt),xe=Ht,qe=Bt)):ze(32823)}function dn(Ne){void 0===Ne&&(Ne=33984+it-1),Ue!==Ne&&(n.activeTexture(Ne),Ue=Ne)}return{buffers:{color:a,depth:l,stencil:c},enable:lt,disable:ze,bindFramebuffer:function Ve(Ne,Ht){return d[Ne]!==Ht&&(n.bindFramebuffer(Ne,Ht),d[Ne]=Ht,i&&(36009===Ne&&(d[36160]=Ht),36160===Ne&&(d[36009]=Ht)),!0)},drawBuffers:function rt(Ne,Ht){let Bt=f,wn=!1;if(Ne)if(Bt=h.get(Ht),void 0===Bt&&(Bt=[],h.set(Ht,Bt)),Ne.isWebGLMultipleRenderTargets){const Qt=Ne.texture;if(Bt.length!==Qt.length||36064!==Bt[0]){for(let hn=0,zt=Qt.length;hn<zt;hn++)Bt[hn]=36064+hn;Bt.length=Qt.length,wn=!0}}else 36064!==Bt[0]&&(Bt[0]=36064,wn=!0);else 1029!==Bt[0]&&(Bt[0]=1029,wn=!0);wn&&(t.isWebGL2?n.drawBuffers(Bt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Bt))},useProgram:function Tt(Ne){return p!==Ne&&(n.useProgram(Ne),p=Ne,!0)},setBlending:ct,setMaterial:function _t(Ne,Ht){2===Ne.side?ze(2884):lt(2884);let Bt=1===Ne.side;Ht&&(Bt=!Bt),Mt(Bt),1===Ne.blending&&!1===Ne.transparent?ct(0):ct(Ne.blending,Ne.blendEquation,Ne.blendSrc,Ne.blendDst,Ne.blendEquationAlpha,Ne.blendSrcAlpha,Ne.blendDstAlpha,Ne.premultipliedAlpha),l.setFunc(Ne.depthFunc),l.setTest(Ne.depthTest),l.setMask(Ne.depthWrite),a.setMask(Ne.colorWrite);const wn=Ne.stencilWrite;c.setTest(wn),wn&&(c.setMask(Ne.stencilWriteMask),c.setFunc(Ne.stencilFunc,Ne.stencilRef,Ne.stencilFuncMask),c.setOp(Ne.stencilFail,Ne.stencilZFail,Ne.stencilZPass)),an(Ne.polygonOffset,Ne.polygonOffsetFactor,Ne.polygonOffsetUnits),!0===Ne.alphaToCoverage?lt(32926):ze(32926)},setFlipSided:Mt,setCullFace:Xt,setLineWidth:function It(Ne){Ne!==me&&(ke&&n.lineWidth(Ne),me=Ne)},setPolygonOffset:an,setScissorTest:function un(Ne){Ne?lt(3089):ze(3089)},activeTexture:dn,bindTexture:function Xn(Ne,Ht){null===Ue&&dn();let Bt=Xe[Ue];void 0===Bt&&(Bt={type:void 0,texture:void 0},Xe[Ue]=Bt),(Bt.type!==Ne||Bt.texture!==Ht)&&(n.bindTexture(Ne,Ht||ot[Ne]),Bt.type=Ne,Bt.texture=Ht)},unbindTexture:function Jn(){const Ne=Xe[Ue];void 0!==Ne&&void 0!==Ne.type&&(n.bindTexture(Ne.type,null),Ne.type=void 0,Ne.texture=void 0)},compressedTexImage2D:function ve(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},texImage2D:function mn(){try{n.texImage2D.apply(n,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},texImage3D:function de(){try{n.texImage3D.apply(n,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},texStorage2D:function kt(){try{n.texStorage2D.apply(n,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},texStorage3D:function $t(){try{n.texStorage3D.apply(n,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},texSubImage2D:function se(){try{n.texSubImage2D.apply(n,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},texSubImage3D:function at(){try{n.texSubImage3D.apply(n,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},compressedTexSubImage2D:function Dt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ne){console.error("THREE.WebGLState:",Ne)}},scissor:function St(Ne){!1===wt.equals(Ne)&&(n.scissor(Ne.x,Ne.y,Ne.z,Ne.w),wt.copy(Ne))},viewport:function Vt(Ne){!1===ut.equals(Ne)&&(n.viewport(Ne.x,Ne.y,Ne.z,Ne.w),ut.copy(Ne))},reset:function Ut(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},Ue=null,Xe={},d={},h=new WeakMap,f=[],p=null,g=!1,m=null,_=null,w=null,D=null,M=null,O=null,q=null,Z=!1,B=null,ee=null,me=null,xe=null,qe=null,wt.set(0,0,n.canvas.width,n.canvas.height),ut.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function GK(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let g;const m=new WeakMap;let _=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ve){}function w(ve,se){return _?new OffscreenCanvas(ve,se):lf("canvas")}function D(ve,se,at,Dt){let kt=1;if((ve.width>Dt||ve.height>Dt)&&(kt=Dt/Math.max(ve.width,ve.height)),kt<1||!0===se){if("undefined"!=typeof HTMLImageElement&&ve instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&ve instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&ve instanceof ImageBitmap){const $t=se?mm:Math.floor,mn=$t(kt*ve.width),de=$t(kt*ve.height);void 0===g&&(g=w(mn,de));const St=at?w(mn,de):g;return St.width=mn,St.height=de,St.getContext("2d").drawImage(ve,0,0,mn,de),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ve.width+"x"+ve.height+") to ("+mn+"x"+de+")."),St}return"data"in ve&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ve.width+"x"+ve.height+")."),ve}return ve}function M(ve){return T1(ve.width)&&T1(ve.height)}function q(ve,se){return ve.generateMipmaps&&se&&ve.minFilter!==vr&&ve.minFilter!==lr}function Z(ve){n.generateMipmap(ve)}function B(ve,se,at,Dt,kt=!1){if(!1===a)return se;if(null!==ve){if(void 0!==n[ve])return n[ve];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ve+"'")}let $t=se;return 6403===se&&(5126===at&&($t=33326),5131===at&&($t=33325),5121===at&&($t=33321)),33319===se&&(5126===at&&($t=33328),5131===at&&($t=33327),5121===at&&($t=33323)),6408===se&&(5126===at&&($t=34836),5131===at&&($t=34842),5121===at&&($t=Dt===Hi&&!1===kt?35907:32856),32819===at&&($t=32854),32820===at&&($t=32855)),(33325===$t||33326===$t||33327===$t||33328===$t||34842===$t||34836===$t)&&e.get("EXT_color_buffer_float"),$t}function ee(ve,se,at){return!0===q(ve,at)||ve.isFramebufferTexture&&ve.minFilter!==vr&&ve.minFilter!==lr?Math.log2(Math.max(se.width,se.height))+1:void 0!==ve.mipmaps&&ve.mipmaps.length>0?ve.mipmaps.length:ve.isCompressedTexture&&Array.isArray(ve.image)?se.mipmaps.length:1}function me(ve){return ve===vr||1004===ve||1005===ve?9728:9729}function xe(ve){const se=ve.target;se.removeEventListener("dispose",xe),function it(ve){const se=i.get(ve);if(void 0===se.__webglInit)return;const at=ve.source,Dt=m.get(at);if(Dt){const kt=Dt[se.__cacheKey];kt.usedTimes--,0===kt.usedTimes&&ke(ve),0===Object.keys(Dt).length&&m.delete(at)}i.remove(ve)}(se),se.isVideoTexture&&p.delete(se)}function qe(ve){const se=ve.target;se.removeEventListener("dispose",qe),function et(ve){const se=ve.texture,at=i.get(ve),Dt=i.get(se);if(void 0!==Dt.__webglTexture&&(n.deleteTexture(Dt.__webglTexture),o.memory.textures--),ve.depthTexture&&ve.depthTexture.dispose(),ve.isWebGLCubeRenderTarget)for(let kt=0;kt<6;kt++)n.deleteFramebuffer(at.__webglFramebuffer[kt]),at.__webglDepthbuffer&&n.deleteRenderbuffer(at.__webglDepthbuffer[kt]);else{if(n.deleteFramebuffer(at.__webglFramebuffer),at.__webglDepthbuffer&&n.deleteRenderbuffer(at.__webglDepthbuffer),at.__webglMultisampledFramebuffer&&n.deleteFramebuffer(at.__webglMultisampledFramebuffer),at.__webglColorRenderbuffer)for(let kt=0;kt<at.__webglColorRenderbuffer.length;kt++)at.__webglColorRenderbuffer[kt]&&n.deleteRenderbuffer(at.__webglColorRenderbuffer[kt]);at.__webglDepthRenderbuffer&&n.deleteRenderbuffer(at.__webglDepthRenderbuffer)}if(ve.isWebGLMultipleRenderTargets)for(let kt=0,$t=se.length;kt<$t;kt++){const mn=i.get(se[kt]);mn.__webglTexture&&(n.deleteTexture(mn.__webglTexture),o.memory.textures--),i.remove(se[kt])}i.remove(se),i.remove(ve)}(se)}function ke(ve){const se=i.get(ve);n.deleteTexture(se.__webglTexture),delete m.get(ve.source)[se.__cacheKey],o.memory.textures--}let Ce=0;function tt(ve,se){const at=i.get(ve);if(ve.isVideoTexture&&function Xn(ve){const se=o.render.frame;p.get(ve)!==se&&(p.set(ve,se),ve.update())}(ve),!1===ve.isRenderTargetTexture&&ve.version>0&&at.__version!==ve.version){const Dt=ve.image;if(null===Dt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Dt.complete)return void rt(at,ve,se);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+se),t.bindTexture(3553,at.__webglTexture)}const ot={1e3:10497,[ds]:33071,1002:33648},lt={[vr]:9728,1004:9984,1005:9986,[lr]:9729,1007:9985,1008:9987};function ze(ve,se,at){if(at?(n.texParameteri(ve,10242,ot[se.wrapS]),n.texParameteri(ve,10243,ot[se.wrapT]),(32879===ve||35866===ve)&&n.texParameteri(ve,32882,ot[se.wrapR]),n.texParameteri(ve,10240,lt[se.magFilter]),n.texParameteri(ve,10241,lt[se.minFilter])):(n.texParameteri(ve,10242,33071),n.texParameteri(ve,10243,33071),(32879===ve||35866===ve)&&n.texParameteri(ve,32882,33071),(se.wrapS!==ds||se.wrapT!==ds)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ve,10240,me(se.magFilter)),n.texParameteri(ve,10241,me(se.minFilter)),se.minFilter!==vr&&se.minFilter!==lr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Dt=e.get("EXT_texture_filter_anisotropic");if(se.type===ol&&!1===e.has("OES_texture_float_linear")||!1===a&&se.type===rf&&!1===e.has("OES_texture_half_float_linear"))return;(se.anisotropy>1||i.get(se).__currentAnisotropy)&&(n.texParameterf(ve,Dt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,r.getMaxAnisotropy())),i.get(se).__currentAnisotropy=se.anisotropy)}}function Ve(ve,se){let at=!1;void 0===ve.__webglInit&&(ve.__webglInit=!0,se.addEventListener("dispose",xe));const Dt=se.source;let kt=m.get(Dt);void 0===kt&&(kt={},m.set(Dt,kt));const $t=function We(ve){const se=[];return se.push(ve.wrapS),se.push(ve.wrapT),se.push(ve.magFilter),se.push(ve.minFilter),se.push(ve.anisotropy),se.push(ve.internalFormat),se.push(ve.format),se.push(ve.type),se.push(ve.generateMipmaps),se.push(ve.premultiplyAlpha),se.push(ve.flipY),se.push(ve.unpackAlignment),se.push(ve.encoding),se.join()}(se);if($t!==ve.__cacheKey){void 0===kt[$t]&&(kt[$t]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,at=!0),kt[$t].usedTimes++;const mn=kt[ve.__cacheKey];void 0!==mn&&(kt[ve.__cacheKey].usedTimes--,0===mn.usedTimes&&ke(se)),ve.__cacheKey=$t,ve.__webglTexture=kt[$t].texture}return at}function rt(ve,se,at){let Dt=3553;se.isDataArrayTexture&&(Dt=35866),se.isData3DTexture&&(Dt=32879);const kt=Ve(ve,se),$t=se.source;if(t.activeTexture(33984+at),t.bindTexture(Dt,ve.__webglTexture),$t.version!==$t.__currentVersion||!0===kt){n.pixelStorei(37440,se.flipY),n.pixelStorei(37441,se.premultiplyAlpha),n.pixelStorei(3317,se.unpackAlignment),n.pixelStorei(37443,0);const mn=function O(ve){return!a&&(ve.wrapS!==ds||ve.wrapT!==ds||ve.minFilter!==vr&&ve.minFilter!==lr)}(se)&&!1===M(se.image);let de=D(se.image,mn,!1,u);de=Jn(se,de);const St=M(de)||a,Vt=s.convert(se.format,se.encoding);let Ht,Ut=s.convert(se.type),Ne=B(se.internalFormat,Vt,Ut,se.encoding,se.isVideoTexture);ze(Dt,se,St);const Bt=se.mipmaps,wn=a&&!0!==se.isVideoTexture,Qt=void 0===$t.__currentVersion||!0===kt,hn=ee(se,de,St);if(se.isDepthTexture)Ne=6402,a?Ne=se.type===ol?36012:se.type===tc?33190:se.type===qu?35056:33189:se.type===ol&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),se.format===nc&&6402===Ne&&1012!==se.type&&se.type!==tc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),se.type=tc,Ut=s.convert(se.type)),se.format===Yu&&6402===Ne&&(Ne=34041,se.type!==qu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),se.type=qu,Ut=s.convert(se.type))),Qt&&(wn?t.texStorage2D(3553,1,Ne,de.width,de.height):t.texImage2D(3553,0,Ne,de.width,de.height,0,Vt,Ut,null));else if(se.isDataTexture)if(Bt.length>0&&St){wn&&Qt&&t.texStorage2D(3553,hn,Ne,Bt[0].width,Bt[0].height);for(let zt=0,Dn=Bt.length;zt<Dn;zt++)Ht=Bt[zt],wn?t.texSubImage2D(3553,zt,0,0,Ht.width,Ht.height,Vt,Ut,Ht.data):t.texImage2D(3553,zt,Ne,Ht.width,Ht.height,0,Vt,Ut,Ht.data);se.generateMipmaps=!1}else wn?(Qt&&t.texStorage2D(3553,hn,Ne,de.width,de.height),t.texSubImage2D(3553,0,0,0,de.width,de.height,Vt,Ut,de.data)):t.texImage2D(3553,0,Ne,de.width,de.height,0,Vt,Ut,de.data);else if(se.isCompressedTexture){wn&&Qt&&t.texStorage2D(3553,hn,Ne,Bt[0].width,Bt[0].height);for(let zt=0,Dn=Bt.length;zt<Dn;zt++)Ht=Bt[zt],se.format!==qs?null!==Vt?wn?t.compressedTexSubImage2D(3553,zt,0,0,Ht.width,Ht.height,Vt,Ht.data):t.compressedTexImage2D(3553,zt,Ne,Ht.width,Ht.height,0,Ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wn?t.texSubImage2D(3553,zt,0,0,Ht.width,Ht.height,Vt,Ut,Ht.data):t.texImage2D(3553,zt,Ne,Ht.width,Ht.height,0,Vt,Ut,Ht.data)}else if(se.isDataArrayTexture)wn?(Qt&&t.texStorage3D(35866,hn,Ne,de.width,de.height,de.depth),t.texSubImage3D(35866,0,0,0,0,de.width,de.height,de.depth,Vt,Ut,de.data)):t.texImage3D(35866,0,Ne,de.width,de.height,de.depth,0,Vt,Ut,de.data);else if(se.isData3DTexture)wn?(Qt&&t.texStorage3D(32879,hn,Ne,de.width,de.height,de.depth),t.texSubImage3D(32879,0,0,0,0,de.width,de.height,de.depth,Vt,Ut,de.data)):t.texImage3D(32879,0,Ne,de.width,de.height,de.depth,0,Vt,Ut,de.data);else if(se.isFramebufferTexture){if(Qt)if(wn)t.texStorage2D(3553,hn,Ne,de.width,de.height);else{let zt=de.width,Dn=de.height;for(let ui=0;ui<hn;ui++)t.texImage2D(3553,ui,Ne,zt,Dn,0,Vt,Ut,null),zt>>=1,Dn>>=1}}else if(Bt.length>0&&St){wn&&Qt&&t.texStorage2D(3553,hn,Ne,Bt[0].width,Bt[0].height);for(let zt=0,Dn=Bt.length;zt<Dn;zt++)Ht=Bt[zt],wn?t.texSubImage2D(3553,zt,0,0,Vt,Ut,Ht):t.texImage2D(3553,zt,Ne,Vt,Ut,Ht);se.generateMipmaps=!1}else wn?(Qt&&t.texStorage2D(3553,hn,Ne,de.width,de.height),t.texSubImage2D(3553,0,0,0,Vt,Ut,de)):t.texImage2D(3553,0,Ne,Vt,Ut,de);q(se,St)&&Z(Dt),$t.__currentVersion=$t.version,se.onUpdate&&se.onUpdate(se)}ve.__version=se.version}function mt(ve,se,at,Dt,kt){const $t=s.convert(at.format,at.encoding),mn=s.convert(at.type),de=B(at.internalFormat,$t,mn,at.encoding);i.get(se).__hasExternalTextures||(32879===kt||35866===kt?t.texImage3D(kt,0,de,se.width,se.height,se.depth,0,$t,mn,null):t.texImage2D(kt,0,de,se.width,se.height,0,$t,mn,null)),t.bindFramebuffer(36160,ve),dn(se)?h.framebufferTexture2DMultisampleEXT(36160,Dt,kt,i.get(at).__webglTexture,0,un(se)):n.framebufferTexture2D(36160,Dt,kt,i.get(at).__webglTexture,0),t.bindFramebuffer(36160,null)}function Wt(ve,se,at){if(n.bindRenderbuffer(36161,ve),se.depthBuffer&&!se.stencilBuffer){let Dt=33189;if(at||dn(se)){const kt=se.depthTexture;kt&&kt.isDepthTexture&&(kt.type===ol?Dt=36012:kt.type===tc&&(Dt=33190));const $t=un(se);dn(se)?h.renderbufferStorageMultisampleEXT(36161,$t,Dt,se.width,se.height):n.renderbufferStorageMultisample(36161,$t,Dt,se.width,se.height)}else n.renderbufferStorage(36161,Dt,se.width,se.height);n.framebufferRenderbuffer(36160,36096,36161,ve)}else if(se.depthBuffer&&se.stencilBuffer){const Dt=un(se);at&&!1===dn(se)?n.renderbufferStorageMultisample(36161,Dt,35056,se.width,se.height):dn(se)?h.renderbufferStorageMultisampleEXT(36161,Dt,35056,se.width,se.height):n.renderbufferStorage(36161,34041,se.width,se.height),n.framebufferRenderbuffer(36160,33306,36161,ve)}else{const Dt=!0===se.isWebGLMultipleRenderTargets?se.texture:[se.texture];for(let kt=0;kt<Dt.length;kt++){const $t=Dt[kt],mn=s.convert($t.format,$t.encoding),de=s.convert($t.type),St=B($t.internalFormat,mn,de,$t.encoding),Vt=un(se);at&&!1===dn(se)?n.renderbufferStorageMultisample(36161,Vt,St,se.width,se.height):dn(se)?h.renderbufferStorageMultisampleEXT(36161,Vt,St,se.width,se.height):n.renderbufferStorage(36161,St,se.width,se.height)}}n.bindRenderbuffer(36161,null)}function _t(ve){const se=i.get(ve),at=!0===ve.isWebGLCubeRenderTarget;if(ve.depthTexture&&!se.__autoAllocateDepthBuffer){if(at)throw new Error("target.depthTexture not supported in Cube render targets");!function ct(ve,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ve),!se.depthTexture||!se.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(se.depthTexture).__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),tt(se.depthTexture,0);const Dt=i.get(se.depthTexture).__webglTexture,kt=un(se);if(se.depthTexture.format===nc)dn(se)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Dt,0,kt):n.framebufferTexture2D(36160,36096,3553,Dt,0);else{if(se.depthTexture.format!==Yu)throw new Error("Unknown depthTexture format");dn(se)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Dt,0,kt):n.framebufferTexture2D(36160,33306,3553,Dt,0)}}(se.__webglFramebuffer,ve)}else if(at){se.__webglDepthbuffer=[];for(let Dt=0;Dt<6;Dt++)t.bindFramebuffer(36160,se.__webglFramebuffer[Dt]),se.__webglDepthbuffer[Dt]=n.createRenderbuffer(),Wt(se.__webglDepthbuffer[Dt],ve,!1)}else t.bindFramebuffer(36160,se.__webglFramebuffer),se.__webglDepthbuffer=n.createRenderbuffer(),Wt(se.__webglDepthbuffer,ve,!1);t.bindFramebuffer(36160,null)}function un(ve){return Math.min(d,ve.samples)}function dn(ve){const se=i.get(ve);return a&&ve.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==se.__useRenderToTexture}function Jn(ve,se){const at=ve.encoding,Dt=ve.format,kt=ve.type;return!0===ve.isCompressedTexture||!0===ve.isVideoTexture||1035===ve.format||at!==ic&&(at===Hi?!1===a?!0===e.has("EXT_sRGB")&&Dt===qs?(ve.format=1035,ve.minFilter=lr,ve.generateMipmaps=!1):se=TR.sRGBToLinear(se):(Dt!==qs||kt!==ec)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",at)),se}this.allocateTextureUnit=function Xe(){const ve=Ce;return ve>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ve+" texture units while this GPU supports only "+l),Ce+=1,ve},this.resetTextureUnits=function Ue(){Ce=0},this.setTexture2D=tt,this.setTexture2DArray=function wt(ve,se){const at=i.get(ve);ve.version>0&&at.__version!==ve.version?rt(at,ve,se):(t.activeTexture(33984+se),t.bindTexture(35866,at.__webglTexture))},this.setTexture3D=function ut(ve,se){const at=i.get(ve);ve.version>0&&at.__version!==ve.version?rt(at,ve,se):(t.activeTexture(33984+se),t.bindTexture(32879,at.__webglTexture))},this.setTextureCube=function Et(ve,se){const at=i.get(ve);ve.version>0&&at.__version!==ve.version?function Tt(ve,se,at){if(6!==se.image.length)return;const Dt=Ve(ve,se),kt=se.source;if(t.activeTexture(33984+at),t.bindTexture(34067,ve.__webglTexture),kt.version!==kt.__currentVersion||!0===Dt){n.pixelStorei(37440,se.flipY),n.pixelStorei(37441,se.premultiplyAlpha),n.pixelStorei(3317,se.unpackAlignment),n.pixelStorei(37443,0);const $t=se.isCompressedTexture||se.image[0].isCompressedTexture,mn=se.image[0]&&se.image[0].isDataTexture,de=[];for(let zt=0;zt<6;zt++)de[zt]=$t||mn?mn?se.image[zt].image:se.image[zt]:D(se.image[zt],!1,!0,c),de[zt]=Jn(se,de[zt]);const St=de[0],Vt=M(St)||a,Ut=s.convert(se.format,se.encoding),Ne=s.convert(se.type),Ht=B(se.internalFormat,Ut,Ne,se.encoding),Bt=a&&!0!==se.isVideoTexture,wn=void 0===kt.__currentVersion||!0===Dt;let hn,Qt=ee(se,St,Vt);if(ze(34067,se,Vt),$t){Bt&&wn&&t.texStorage2D(34067,Qt,Ht,St.width,St.height);for(let zt=0;zt<6;zt++){hn=de[zt].mipmaps;for(let Dn=0;Dn<hn.length;Dn++){const ui=hn[Dn];se.format!==qs?null!==Ut?Bt?t.compressedTexSubImage2D(34069+zt,Dn,0,0,ui.width,ui.height,Ut,ui.data):t.compressedTexImage2D(34069+zt,Dn,Ht,ui.width,ui.height,0,ui.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bt?t.texSubImage2D(34069+zt,Dn,0,0,ui.width,ui.height,Ut,Ne,ui.data):t.texImage2D(34069+zt,Dn,Ht,ui.width,ui.height,0,Ut,Ne,ui.data)}}}else{hn=se.mipmaps,Bt&&wn&&(hn.length>0&&Qt++,t.texStorage2D(34067,Qt,Ht,de[0].width,de[0].height));for(let zt=0;zt<6;zt++)if(mn){Bt?t.texSubImage2D(34069+zt,0,0,0,de[zt].width,de[zt].height,Ut,Ne,de[zt].data):t.texImage2D(34069+zt,0,Ht,de[zt].width,de[zt].height,0,Ut,Ne,de[zt].data);for(let Dn=0;Dn<hn.length;Dn++){const di=hn[Dn].image[zt].image;Bt?t.texSubImage2D(34069+zt,Dn+1,0,0,di.width,di.height,Ut,Ne,di.data):t.texImage2D(34069+zt,Dn+1,Ht,di.width,di.height,0,Ut,Ne,di.data)}}else{Bt?t.texSubImage2D(34069+zt,0,0,0,Ut,Ne,de[zt]):t.texImage2D(34069+zt,0,Ht,Ut,Ne,de[zt]);for(let Dn=0;Dn<hn.length;Dn++){const ui=hn[Dn];Bt?t.texSubImage2D(34069+zt,Dn+1,0,0,Ut,Ne,ui.image[zt]):t.texImage2D(34069+zt,Dn+1,Ht,Ut,Ne,ui.image[zt])}}}q(se,Vt)&&Z(34067),kt.__currentVersion=kt.version,se.onUpdate&&se.onUpdate(se)}ve.__version=se.version}(at,ve,se):(t.activeTexture(33984+se),t.bindTexture(34067,at.__webglTexture))},this.rebindTextures=function Mt(ve,se,at){const Dt=i.get(ve);void 0!==se&&mt(Dt.__webglFramebuffer,ve,ve.texture,36064,3553),void 0!==at&&_t(ve)},this.setupRenderTarget=function Xt(ve){const se=ve.texture,at=i.get(ve),Dt=i.get(se);ve.addEventListener("dispose",qe),!0!==ve.isWebGLMultipleRenderTargets&&(void 0===Dt.__webglTexture&&(Dt.__webglTexture=n.createTexture()),Dt.__version=se.version,o.memory.textures++);const kt=!0===ve.isWebGLCubeRenderTarget,$t=!0===ve.isWebGLMultipleRenderTargets,mn=M(ve)||a;if(kt){at.__webglFramebuffer=[];for(let de=0;de<6;de++)at.__webglFramebuffer[de]=n.createFramebuffer()}else{if(at.__webglFramebuffer=n.createFramebuffer(),$t)if(r.drawBuffers){const de=ve.texture;for(let St=0,Vt=de.length;St<Vt;St++){const Ut=i.get(de[St]);void 0===Ut.__webglTexture&&(Ut.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&ve.samples>0&&!1===dn(ve)){const de=$t?se:[se];at.__webglMultisampledFramebuffer=n.createFramebuffer(),at.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,at.__webglMultisampledFramebuffer);for(let St=0;St<de.length;St++){const Vt=de[St];at.__webglColorRenderbuffer[St]=n.createRenderbuffer(),n.bindRenderbuffer(36161,at.__webglColorRenderbuffer[St]);const Ut=s.convert(Vt.format,Vt.encoding),Ne=s.convert(Vt.type),Ht=B(Vt.internalFormat,Ut,Ne,Vt.encoding),Bt=un(ve);n.renderbufferStorageMultisample(36161,Bt,Ht,ve.width,ve.height),n.framebufferRenderbuffer(36160,36064+St,36161,at.__webglColorRenderbuffer[St])}n.bindRenderbuffer(36161,null),ve.depthBuffer&&(at.__webglDepthRenderbuffer=n.createRenderbuffer(),Wt(at.__webglDepthRenderbuffer,ve,!0)),t.bindFramebuffer(36160,null)}}if(kt){t.bindTexture(34067,Dt.__webglTexture),ze(34067,se,mn);for(let de=0;de<6;de++)mt(at.__webglFramebuffer[de],ve,se,36064,34069+de);q(se,mn)&&Z(34067),t.unbindTexture()}else if($t){const de=ve.texture;for(let St=0,Vt=de.length;St<Vt;St++){const Ut=de[St],Ne=i.get(Ut);t.bindTexture(3553,Ne.__webglTexture),ze(3553,Ut,mn),mt(at.__webglFramebuffer,ve,Ut,36064+St,3553),q(Ut,mn)&&Z(3553)}t.unbindTexture()}else{let de=3553;(ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(a?de=ve.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(de,Dt.__webglTexture),ze(de,se,mn),mt(at.__webglFramebuffer,ve,se,36064,de),q(se,mn)&&Z(de),t.unbindTexture()}ve.depthBuffer&&_t(ve)},this.updateRenderTargetMipmap=function It(ve){const se=M(ve)||a,at=!0===ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture];for(let Dt=0,kt=at.length;Dt<kt;Dt++){const $t=at[Dt];if(q($t,se)){const mn=ve.isWebGLCubeRenderTarget?34067:3553,de=i.get($t).__webglTexture;t.bindTexture(mn,de),Z(mn),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function an(ve){if(a&&ve.samples>0&&!1===dn(ve)){const se=ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture],at=ve.width,Dt=ve.height;let kt=16384;const $t=[],mn=ve.stencilBuffer?33306:36096,de=i.get(ve),St=!0===ve.isWebGLMultipleRenderTargets;if(St)for(let Vt=0;Vt<se.length;Vt++)t.bindFramebuffer(36160,de.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Vt,36161,null),t.bindFramebuffer(36160,de.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Vt,3553,null,0);t.bindFramebuffer(36008,de.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,de.__webglFramebuffer);for(let Vt=0;Vt<se.length;Vt++){$t.push(36064+Vt),ve.depthBuffer&&$t.push(mn);const Ut=void 0!==de.__ignoreDepthValues&&de.__ignoreDepthValues;if(!1===Ut&&(ve.depthBuffer&&(kt|=256),ve.stencilBuffer&&(kt|=1024)),St&&n.framebufferRenderbuffer(36008,36064,36161,de.__webglColorRenderbuffer[Vt]),!0===Ut&&(n.invalidateFramebuffer(36008,[mn]),n.invalidateFramebuffer(36009,[mn])),St){const Ne=i.get(se[Vt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Ne,0)}n.blitFramebuffer(0,0,at,Dt,0,0,at,Dt,kt,9728),f&&n.invalidateFramebuffer(36008,$t)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),St)for(let Vt=0;Vt<se.length;Vt++){t.bindFramebuffer(36160,de.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Vt,36161,de.__webglColorRenderbuffer[Vt]);const Ut=i.get(se[Vt]).__webglTexture;t.bindFramebuffer(36160,de.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Vt,3553,Ut,0)}t.bindFramebuffer(36009,de.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=_t,this.setupFrameBufferTexture=mt,this.useMultisampledRTT=dn}function WK(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===ec)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===tc)return 5125;if(s===ol)return 5126;if(s===rf)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===qs)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===nc)return 6402;if(s===Yu)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Hi){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Hi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Hi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Hi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===qu?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class $K extends Nr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class fc extends xr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qK={type:"move"};class ow{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new fc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new fc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new fc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(qK))),c&&e.hand){o=!0;for(const g of e.hand.values()){const m=t.getJointPose(g,i);if(void 0===c.joints[g.jointName]){const w=new fc;w.matrixAutoUpdate=!1,w.visible=!1,c.joints[g.jointName]=w,c.add(w)}const _=c.joints[g.jointName];null!==m&&(_.matrix.fromArray(m.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=m.radius),_.visible=null!==m}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class YK extends al{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:nc)!==nc&&u!==Yu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===nc&&(i=tc),void 0===i&&u===Yu&&(i=qu),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:vr,this.minFilter=void 0!==l?l:vr,this.flipY=!1,this.generateMipmaps=!1}}class XK extends mo{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const p=t.getContextAttributes();let g=null,m=null;const _=[],w=new Map,D=new Nr;D.layers.enable(1),D.viewport=new vi;const M=new Nr;M.layers.enable(2),M.viewport=new vi;const O=[D,M],q=new $K;q.layers.enable(1),q.layers.enable(2);let Z=null,B=null;function ee(We){const tt=w.get(We.inputSource);void 0!==tt&&tt.dispatchEvent({type:We.type,data:We.inputSource})}function me(){r.removeEventListener("select",ee),r.removeEventListener("selectstart",ee),r.removeEventListener("selectend",ee),r.removeEventListener("squeeze",ee),r.removeEventListener("squeezestart",ee),r.removeEventListener("squeezeend",ee),r.removeEventListener("end",me),r.removeEventListener("inputsourceschange",xe),w.forEach(function(We,tt){void 0!==We&&We.disconnect(tt)}),w.clear(),Z=null,B=null,e.setRenderTarget(g),h=null,d=null,u=null,r=null,m=null,Xe.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function xe(We){const tt=r.inputSources;for(let wt=0;wt<tt.length;wt++)w.set(tt[wt],_["right"===tt[wt].handedness?1:0]);for(let wt=0;wt<We.removed.length;wt++){const ut=We.removed[wt],Et=w.get(ut);Et&&(Et.dispatchEvent({type:"disconnected",data:ut}),w.delete(ut))}for(let wt=0;wt<We.added.length;wt++){const ut=We.added[wt],Et=w.get(ut);Et&&Et.dispatchEvent({type:"connected",data:ut})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(We){let tt=_[We];return void 0===tt&&(tt=new ow,_[We]=tt),tt.getTargetRaySpace()},this.getControllerGrip=function(We){let tt=_[We];return void 0===tt&&(tt=new ow,_[We]=tt),tt.getGripSpace()},this.getHand=function(We){let tt=_[We];return void 0===tt&&(tt=new ow,_[We]=tt),tt.getHandSpace()},this.setFramebufferScaleFactor=function(We){s=We,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(We){a=We,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(We){l=We},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=function(){var We=h1(function*(tt){if(r=tt,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",ee),r.addEventListener("selectstart",ee),r.addEventListener("selectend",ee),r.addEventListener("squeeze",ee),r.addEventListener("squeezestart",ee),r.addEventListener("squeezeend",ee),r.addEventListener("end",me),r.addEventListener("inputsourceschange",xe),!0!==p.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),m=new Ma(h.framebufferWidth,h.framebufferHeight,{format:qs,type:ec,encoding:e.outputEncoding});else{let wt=null,ut=null,Et=null;p.depth&&(Et=p.stencil?35056:33190,wt=p.stencil?Yu:nc,ut=p.stencil?qu:tc);const ot={colorFormat:e.outputEncoding===Hi?35907:32856,depthFormat:Et,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(ot),r.updateRenderState({layers:[d]}),m=new Ma(d.textureWidth,d.textureHeight,{format:qs,type:ec,depthTexture:new YK(d.textureWidth,d.textureHeight,ut,void 0,void 0,void 0,void 0,void 0,void 0,wt),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=yield r.requestReferenceSpace(a),Xe.setContext(r),Xe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(tt){return We.apply(this,arguments)}}();const qe=new re,it=new re;function et(We,tt){null===tt?We.matrixWorld.copy(We.matrix):We.matrixWorld.multiplyMatrices(tt.matrixWorld,We.matrix),We.matrixWorldInverse.copy(We.matrixWorld).invert()}this.updateCamera=function(We){if(null===r)return;q.near=M.near=D.near=We.near,q.far=M.far=D.far=We.far,(Z!==q.near||B!==q.far)&&(r.updateRenderState({depthNear:q.near,depthFar:q.far}),Z=q.near,B=q.far);const tt=We.parent,wt=q.cameras;et(q,tt);for(let Et=0;Et<wt.length;Et++)et(wt[Et],tt);q.matrixWorld.decompose(q.position,q.quaternion,q.scale),We.position.copy(q.position),We.quaternion.copy(q.quaternion),We.scale.copy(q.scale),We.matrix.copy(q.matrix),We.matrixWorld.copy(q.matrixWorld);const ut=We.children;for(let Et=0,ot=ut.length;Et<ot;Et++)ut[Et].updateMatrixWorld(!0);2===wt.length?function ke(We,tt,wt){qe.setFromMatrixPosition(tt.matrixWorld),it.setFromMatrixPosition(wt.matrixWorld);const ut=qe.distanceTo(it),Et=tt.projectionMatrix.elements,ot=wt.projectionMatrix.elements,lt=Et[14]/(Et[10]-1),ze=Et[14]/(Et[10]+1),Ve=(Et[9]+1)/Et[5],rt=(Et[9]-1)/Et[5],Tt=(Et[8]-1)/Et[0],mt=(ot[8]+1)/ot[0],Wt=lt*Tt,ct=lt*mt,_t=ut/(-Tt+mt),Mt=_t*-Tt;tt.matrixWorld.decompose(We.position,We.quaternion,We.scale),We.translateX(Mt),We.translateZ(_t),We.matrixWorld.compose(We.position,We.quaternion,We.scale),We.matrixWorldInverse.copy(We.matrixWorld).invert();const Xt=lt+_t,It=ze+_t;We.projectionMatrix.makePerspective(Wt-Mt,ct+(ut-Mt),Ve*ze/It*Xt,rt*ze/It*Xt,Xt,It)}(q,D,M):q.projectionMatrix.copy(D.projectionMatrix)},this.getCamera=function(){return q},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(We){null!==d&&(d.fixedFoveation=We),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=We)};let Ce=null;const Xe=new GR;Xe.setAnimationLoop(function Ue(We,tt){if(c=tt.getViewerPose(l||o),f=tt,null!==c){const ut=c.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let Et=!1;ut.length!==q.cameras.length&&(q.cameras.length=0,Et=!0);for(let ot=0;ot<ut.length;ot++){const lt=ut[ot];let ze=null;if(null!==h)ze=h.getViewport(lt);else{const rt=u.getViewSubImage(d,lt);ze=rt.viewport,0===ot&&(e.setRenderTargetTextures(m,rt.colorTexture,d.ignoreDepthValues?void 0:rt.depthStencilTexture),e.setRenderTarget(m))}let Ve=O[ot];void 0===Ve&&(Ve=new Nr,Ve.layers.enable(ot),Ve.viewport=new vi,O[ot]=Ve),Ve.matrix.fromArray(lt.transform.matrix),Ve.projectionMatrix.fromArray(lt.projectionMatrix),Ve.viewport.set(ze.x,ze.y,ze.width,ze.height),0===ot&&q.matrix.copy(Ve.matrix),!0===Et&&q.cameras.push(Ve)}}const wt=r.inputSources;for(let ut=0;ut<_.length;ut++){const Et=wt[ut],ot=w.get(Et);void 0!==ot&&ot.update(Et,tt,l||o)}Ce&&Ce(We,tt),f=null}),this.setAnimationLoop=function(We){Ce=We},this.dispose=function(){}}}function KK(n,e){function r(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,1===m.side&&(g.bumpScale.value*=-1)),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),1===m.side&&g.normalScale.value.negate()),m.specularMap&&(g.specularMap.value=m.specularMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const _=e.get(m).envMap;if(_&&(g.envMap.value=_,g.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap){g.lightMap.value=m.lightMap;const M=!0!==n.physicallyCorrectLights?Math.PI:1;g.lightMapIntensity.value=m.lightMapIntensity*M}let w,D;m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity),m.map?w=m.map:m.specularMap?w=m.specularMap:m.displacementMap?w=m.displacementMap:m.normalMap?w=m.normalMap:m.bumpMap?w=m.bumpMap:m.roughnessMap?w=m.roughnessMap:m.metalnessMap?w=m.metalnessMap:m.alphaMap?w=m.alphaMap:m.emissiveMap?w=m.emissiveMap:m.clearcoatMap?w=m.clearcoatMap:m.clearcoatNormalMap?w=m.clearcoatNormalMap:m.clearcoatRoughnessMap?w=m.clearcoatRoughnessMap:m.iridescenceMap?w=m.iridescenceMap:m.iridescenceThicknessMap?w=m.iridescenceThicknessMap:m.specularIntensityMap?w=m.specularIntensityMap:m.specularColorMap?w=m.specularColorMap:m.transmissionMap?w=m.transmissionMap:m.thicknessMap?w=m.thicknessMap:m.sheenColorMap?w=m.sheenColorMap:m.sheenRoughnessMap&&(w=m.sheenRoughnessMap),void 0!==w&&(w.isWebGLRenderTarget&&(w=w.texture),!0===w.matrixAutoUpdate&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix)),m.aoMap?D=m.aoMap:m.lightMap&&(D=m.lightMap),void 0!==D&&(D.isWebGLRenderTarget&&(D=D.texture),!0===D.matrixAutoUpdate&&D.updateMatrix(),g.uv2Transform.value.copy(D.matrix))}return{refreshFogUniforms:function t(g,m){g.fogColor.value.copy(m.color),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)},refreshMaterialUniforms:function i(g,m,_,w,D){m.isMeshBasicMaterial||m.isMeshLambertMaterial?r(g,m):m.isMeshToonMaterial?(r(g,m),function u(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}(g,m)):m.isMeshPhongMaterial?(r(g,m),function c(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}(g,m)):m.isMeshStandardMaterial?(r(g,m),function d(g,m){g.roughness.value=m.roughness,g.metalness.value=m.metalness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap),e.get(m).envMap&&(g.envMapIntensity.value=m.envMapIntensity)}(g,m),m.isMeshPhysicalMaterial&&function h(g,m,_){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),g.clearcoatNormalMap.value=m.clearcoatNormalMap,1===m.side&&g.clearcoatNormalScale.value.negate())),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=_.texture,g.transmissionSamplerSize.value.set(_.width,_.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap)}(g,m,D)):m.isMeshMatcapMaterial?(r(g,m),function f(g,m){m.matcap&&(g.matcap.value=m.matcap)}(g,m)):m.isMeshDepthMaterial?r(g,m):m.isMeshDistanceMaterial?(r(g,m),function p(g,m){g.referencePosition.value.copy(m.referencePosition),g.nearDistance.value=m.nearDistance,g.farDistance.value=m.farDistance}(g,m)):m.isMeshNormalMaterial?r(g,m):m.isLineBasicMaterial?(function s(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity}(g,m),m.isLineDashedMaterial&&function o(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}(g,m)):m.isPointsMaterial?function a(g,m,_,w){let D;g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*_,g.scale.value=.5*w,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest),m.map?D=m.map:m.alphaMap&&(D=m.alphaMap),void 0!==D&&(!0===D.matrixAutoUpdate&&D.updateMatrix(),g.uvTransform.value.copy(D.matrix))}(g,m,_,w):m.isSpriteMaterial?function l(g,m){let _;g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest),m.map?_=m.map:m.alphaMap&&(_=m.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),g.uvTransform.value.copy(_.matrix))}(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}}}function bN(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function QK(){const n=lf("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ic,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const g=this;let m=!1,_=0,w=0,D=null,M=-1,O=null;const q=new vi,Z=new vi;let B=null,ee=e.width,me=e.height,xe=1,qe=null,it=null;const ke=new vi(0,0,ee,me),et=new vi(0,0,ee,me);let Ce=!1;const Ue=new Z1;let Xe=!1,We=!1,tt=null;const wt=new Ln,ut=new ht,Et=new re,ot={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function lt(){return null===D?xe:1}let rt,Tt,mt,Wt,ct,_t,Mt,Xt,It,an,un,dn,Xn,Jn,ve,se,at,Dt,kt,$t,mn,de,St,ze=t;function Ve(pe,Je){for(let dt=0;dt<pe.length;dt++){const bt=e.getContext(pe[dt],Je);if(null!==bt)return bt}return null}try{const pe={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r141"),e.addEventListener("webglcontextlost",Ne,!1),e.addEventListener("webglcontextrestored",Ht,!1),e.addEventListener("webglcontextcreationerror",Bt,!1),null===ze){const Je=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&Je.shift(),ze=Ve(Je,pe),null===ze)throw Ve(Je)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ze.getShaderPrecisionFormat&&(ze.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}function Vt(){rt=new uX(ze),Tt=new rX(ze,rt,n),rt.init(Tt),de=new WK(ze,rt,Tt),mt=new jK(ze,rt,Tt),Wt=new fX(ze),ct=new OK,_t=new GK(ze,rt,mt,ct,Tt,de,Wt),Mt=new oX(g),Xt=new cX(g),It=new i9(ze,Tt),St=new nX(ze,rt,It,Tt),an=new dX(ze,It,Wt,St),un=new _X(ze,an,It,Wt),kt=new mX(ze,Tt,_t),se=new sX(ct),dn=new PK(g,Mt,Xt,rt,Tt,St,se),Xn=new KK(g,ct),Jn=new NK,ve=new VK(rt,Tt),Dt=new tX(g,Mt,mt,un,u,o),at=new zK(g,un,Tt),$t=new iX(ze,rt,Wt,Tt),mn=new hX(ze,rt,Wt,Tt),Wt.programs=dn.programs,g.capabilities=Tt,g.extensions=rt,g.properties=ct,g.renderLists=Jn,g.shadowMap=at,g.state=mt,g.info=Wt}Vt();const Ut=new XK(g,ze);function Ne(pe){pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Ht(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const pe=Wt.autoReset,Je=at.enabled,dt=at.autoUpdate,st=at.needsUpdate,bt=at.type;Vt(),Wt.autoReset=pe,at.enabled=Je,at.autoUpdate=dt,at.needsUpdate=st,at.type=bt}function Bt(pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pe.statusMessage)}function wn(pe){const Je=pe.target;Je.removeEventListener("dispose",wn),function Qt(pe){(function hn(pe){const Je=ct.get(pe).programs;void 0!==Je&&(Je.forEach(function(dt){dn.releaseProgram(dt)}),pe.isShaderMaterial&&dn.releaseShaderCache(pe))})(pe),ct.remove(pe)}(Je)}this.xr=Ut,this.getContext=function(){return ze},this.getContextAttributes=function(){return ze.getContextAttributes()},this.forceContextLoss=function(){const pe=rt.get("WEBGL_lose_context");pe&&pe.loseContext()},this.forceContextRestore=function(){const pe=rt.get("WEBGL_lose_context");pe&&pe.restoreContext()},this.getPixelRatio=function(){return xe},this.setPixelRatio=function(pe){void 0!==pe&&(xe=pe,this.setSize(ee,me,!1))},this.getSize=function(pe){return pe.set(ee,me)},this.setSize=function(pe,Je,dt){Ut.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ee=pe,me=Je,e.width=Math.floor(pe*xe),e.height=Math.floor(Je*xe),!1!==dt&&(e.style.width=pe+"px",e.style.height=Je+"px"),this.setViewport(0,0,pe,Je))},this.getDrawingBufferSize=function(pe){return pe.set(ee*xe,me*xe).floor()},this.setDrawingBufferSize=function(pe,Je,dt){ee=pe,me=Je,xe=dt,e.width=Math.floor(pe*dt),e.height=Math.floor(Je*dt),this.setViewport(0,0,pe,Je)},this.getCurrentViewport=function(pe){return pe.copy(q)},this.getViewport=function(pe){return pe.copy(ke)},this.setViewport=function(pe,Je,dt,st){pe.isVector4?ke.set(pe.x,pe.y,pe.z,pe.w):ke.set(pe,Je,dt,st),mt.viewport(q.copy(ke).multiplyScalar(xe).floor())},this.getScissor=function(pe){return pe.copy(et)},this.setScissor=function(pe,Je,dt,st){pe.isVector4?et.set(pe.x,pe.y,pe.z,pe.w):et.set(pe,Je,dt,st),mt.scissor(Z.copy(et).multiplyScalar(xe).floor())},this.getScissorTest=function(){return Ce},this.setScissorTest=function(pe){mt.setScissorTest(Ce=pe)},this.setOpaqueSort=function(pe){qe=pe},this.setTransparentSort=function(pe){it=pe},this.getClearColor=function(pe){return pe.copy(Dt.getClearColor())},this.setClearColor=function(){Dt.setClearColor.apply(Dt,arguments)},this.getClearAlpha=function(){return Dt.getClearAlpha()},this.setClearAlpha=function(){Dt.setClearAlpha.apply(Dt,arguments)},this.clear=function(pe=!0,Je=!0,dt=!0){let st=0;pe&&(st|=16384),Je&&(st|=256),dt&&(st|=1024),ze.clear(st)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ne,!1),e.removeEventListener("webglcontextrestored",Ht,!1),e.removeEventListener("webglcontextcreationerror",Bt,!1),Jn.dispose(),ve.dispose(),ct.dispose(),Mt.dispose(),Xt.dispose(),un.dispose(),St.dispose(),dn.dispose(),Ut.dispose(),Ut.removeEventListener("sessionstart",ui),Ut.removeEventListener("sessionend",di),tt&&(tt.dispose(),tt=null),os.stop()},this.renderBufferDirect=function(pe,Je,dt,st,bt,Mn){null===Je&&(Je=ot);const Bn=bt.isMesh&&bt.matrixWorld.determinant()<0,Wn=function ide(pe,Je,dt,st,bt){!0!==Je.isScene&&(Je=ot),_t.resetTextureUnits();const Mn=Je.fog,Wn=null===D?g.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:ic,zn=(st.isMeshStandardMaterial?Xt:Mt).get(st.envMap||(st.isMeshStandardMaterial?Je.environment:null)),hi=!0===st.vertexColors&&!!dt.attributes.color&&4===dt.attributes.color.itemSize,ri=!!st.normalMap&&!!dt.attributes.tangent,oi=!!dt.morphAttributes.position,Xi=!!dt.morphAttributes.normal,Vc=!!dt.morphAttributes.color,Wd=st.toneMapped?g.toneMapping:0,$d=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,sa=void 0!==$d?$d.length:0,ci=ct.get(st),qd=h.state.lights;!0!==Xe||!0!==We&&pe===O||se.setState(st,pe,pe===O&&st.id===M);let dr=!1;st.version===ci.__version?(ci.needsLights&&ci.lightsStateVersion!==qd.state.version||ci.outputEncoding!==Wn||bt.isInstancedMesh&&!1===ci.instancing||!bt.isInstancedMesh&&!0===ci.instancing||bt.isSkinnedMesh&&!1===ci.skinning||!bt.isSkinnedMesh&&!0===ci.skinning||ci.envMap!==zn||!0===st.fog&&ci.fog!==Mn||void 0!==ci.numClippingPlanes&&(ci.numClippingPlanes!==se.numPlanes||ci.numIntersection!==se.numIntersection)||ci.vertexAlphas!==hi||ci.vertexTangents!==ri||ci.morphTargets!==oi||ci.morphNormals!==Xi||ci.morphColors!==Vc||ci.toneMapping!==Wd||!0===Tt.isWebGL2&&ci.morphTargetsCount!==sa)&&(dr=!0):(dr=!0,ci.__version=st.version);let oa=ci.currentProgram;!0===dr&&(oa=ZS(st,Je,bt));let Ol=!1,bp=!1,eC=!1;const as=oa.getUniforms(),wp=ci.uniforms;if(mt.useProgram(oa.program)&&(Ol=!0,bp=!0,eC=!0),st.id!==M&&(M=st.id,bp=!0),Ol||O!==pe){if(as.setValue(ze,"projectionMatrix",pe.projectionMatrix),Tt.logarithmicDepthBuffer&&as.setValue(ze,"logDepthBufFC",2/(Math.log(pe.far+1)/Math.LN2)),O!==pe&&(O=pe,bp=!0,eC=!0),st.isShaderMaterial||st.isMeshPhongMaterial||st.isMeshToonMaterial||st.isMeshStandardMaterial||st.envMap){const aa=as.map.cameraPosition;void 0!==aa&&aa.setValue(ze,Et.setFromMatrixPosition(pe.matrixWorld))}(st.isMeshPhongMaterial||st.isMeshToonMaterial||st.isMeshLambertMaterial||st.isMeshBasicMaterial||st.isMeshStandardMaterial||st.isShaderMaterial)&&as.setValue(ze,"isOrthographic",!0===pe.isOrthographicCamera),(st.isMeshPhongMaterial||st.isMeshToonMaterial||st.isMeshLambertMaterial||st.isMeshBasicMaterial||st.isMeshStandardMaterial||st.isShaderMaterial||st.isShadowMaterial||bt.isSkinnedMesh)&&as.setValue(ze,"viewMatrix",pe.matrixWorldInverse)}if(bt.isSkinnedMesh){as.setOptional(ze,bt,"bindMatrix"),as.setOptional(ze,bt,"bindMatrixInverse");const aa=bt.skeleton;aa&&(Tt.floatVertexTextures?(null===aa.boneTexture&&aa.computeBoneTexture(),as.setValue(ze,"boneTexture",aa.boneTexture,_t),as.setValue(ze,"boneTextureSize",aa.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const tC=dt.morphAttributes;return(void 0!==tC.position||void 0!==tC.normal||void 0!==tC.color&&!0===Tt.isWebGL2)&&kt.update(bt,dt,st,oa),(bp||ci.receiveShadow!==bt.receiveShadow)&&(ci.receiveShadow=bt.receiveShadow,as.setValue(ze,"receiveShadow",bt.receiveShadow)),bp&&(as.setValue(ze,"toneMappingExposure",g.toneMappingExposure),ci.needsLights&&function rde(pe,Je){pe.ambientLightColor.needsUpdate=Je,pe.lightProbe.needsUpdate=Je,pe.directionalLights.needsUpdate=Je,pe.directionalLightShadows.needsUpdate=Je,pe.pointLights.needsUpdate=Je,pe.pointLightShadows.needsUpdate=Je,pe.spotLights.needsUpdate=Je,pe.spotLightShadows.needsUpdate=Je,pe.rectAreaLights.needsUpdate=Je,pe.hemisphereLights.needsUpdate=Je}(wp,eC),Mn&&!0===st.fog&&Xn.refreshFogUniforms(wp,Mn),Xn.refreshMaterialUniforms(wp,st,xe,me,tt),Hm.upload(ze,ci.uniformsList,wp,_t)),st.isShaderMaterial&&!0===st.uniformsNeedUpdate&&(Hm.upload(ze,ci.uniformsList,wp,_t),st.uniformsNeedUpdate=!1),st.isSpriteMaterial&&as.setValue(ze,"center",bt.center),as.setValue(ze,"modelViewMatrix",bt.modelViewMatrix),as.setValue(ze,"normalMatrix",bt.normalMatrix),as.setValue(ze,"modelMatrix",bt.matrixWorld),oa}(pe,Je,dt,st,bt);mt.setMaterial(st,Bn);let zn=dt.index;const hi=dt.attributes.position;if(null===zn){if(void 0===hi||0===hi.count)return}else if(0===zn.count)return;let ri=1;!0===st.wireframe&&(zn=an.getWireframeAttribute(dt),ri=2),St.setup(bt,st,Wn,dt,zn);let oi,Xi=$t;null!==zn&&(oi=It.get(zn),Xi=mn,Xi.setIndex(oi));const Vc=null!==zn?zn.count:hi.count,Wd=dt.drawRange.start*ri,$d=dt.drawRange.count*ri,sa=null!==Mn?Mn.start*ri:0,ci=null!==Mn?Mn.count*ri:1/0,qd=Math.max(Wd,sa),dr=Math.min(Vc,Wd+$d,sa+ci)-1,oa=Math.max(0,dr-qd+1);if(0!==oa){if(bt.isMesh)!0===st.wireframe?(mt.setLineWidth(st.wireframeLinewidth*lt()),Xi.setMode(1)):Xi.setMode(4);else if(bt.isLine){let Ol=st.linewidth;void 0===Ol&&(Ol=1),mt.setLineWidth(Ol*lt()),Xi.setMode(bt.isLineSegments?1:bt.isLineLoop?2:3)}else bt.isPoints?Xi.setMode(0):bt.isSprite&&Xi.setMode(4);if(bt.isInstancedMesh)Xi.renderInstances(qd,oa,bt.count);else if(dt.isInstancedBufferGeometry){const Ol=Math.min(dt.instanceCount,dt._maxInstanceCount);Xi.renderInstances(qd,oa,Ol)}else Xi.render(qd,oa)}},this.compile=function(pe,Je){h=ve.get(pe),h.init(),p.push(h),pe.traverseVisible(function(dt){dt.isLight&&dt.layers.test(Je.layers)&&(h.pushLight(dt),dt.castShadow&&h.pushShadow(dt))}),h.setupLights(g.physicallyCorrectLights),pe.traverse(function(dt){const st=dt.material;if(st)if(Array.isArray(st))for(let bt=0;bt<st.length;bt++)ZS(st[bt],pe,dt);else ZS(st,pe,dt)}),p.pop(),h=null};let zt=null;function ui(){os.stop()}function di(){os.start()}const os=new GR;function ra(pe,Je,dt,st){if(!1===pe.visible)return;if(pe.layers.test(Je.layers))if(pe.isGroup)dt=pe.renderOrder;else if(pe.isLOD)!0===pe.autoUpdate&&pe.update(Je);else if(pe.isLight)h.pushLight(pe),pe.castShadow&&h.pushShadow(pe);else if(pe.isSprite){if(!pe.frustumCulled||Ue.intersectsSprite(pe)){st&&Et.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(wt);const Bn=un.update(pe),Wn=pe.material;Wn.visible&&d.push(pe,Bn,Wn,dt,Et.z,null)}}else if((pe.isMesh||pe.isLine||pe.isPoints)&&(pe.isSkinnedMesh&&pe.skeleton.frame!==Wt.render.frame&&(pe.skeleton.update(),pe.skeleton.frame=Wt.render.frame),!pe.frustumCulled||Ue.intersectsObject(pe))){st&&Et.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(wt);const Bn=un.update(pe),Wn=pe.material;if(Array.isArray(Wn)){const zn=Bn.groups;for(let hi=0,ri=zn.length;hi<ri;hi++){const oi=zn[hi],Xi=Wn[oi.materialIndex];Xi&&Xi.visible&&d.push(pe,Bn,Xi,dt,Et.z,oi)}}else Wn.visible&&d.push(pe,Bn,Wn,dt,Et.z,null)}const Mn=pe.children;for(let Bn=0,Wn=Mn.length;Bn<Wn;Bn++)ra(Mn[Bn],Je,dt,st)}function dB(pe,Je,dt,st){const bt=pe.opaque,Mn=pe.transmissive,Bn=pe.transparent;h.setupLightsView(dt),Mn.length>0&&function tde(pe,Je,dt){const st=Tt.isWebGL2;null===tt&&(tt=new Ma(1,1,{generateMipmaps:!0,type:rt.has("EXT_color_buffer_half_float")?rf:ec,minFilter:1008,samples:st&&!0===s?4:0})),g.getDrawingBufferSize(ut),st?tt.setSize(ut.x,ut.y):tt.setSize(mm(ut.x),mm(ut.y));const bt=g.getRenderTarget();g.setRenderTarget(tt),g.clear();const Mn=g.toneMapping;g.toneMapping=0,H0(pe,Je,dt),g.toneMapping=Mn,_t.updateMultisampleRenderTarget(tt),_t.updateRenderTargetMipmap(tt),g.setRenderTarget(bt)}(bt,Je,dt),st&&mt.viewport(q.copy(st)),bt.length>0&&H0(bt,Je,dt),Mn.length>0&&H0(Mn,Je,dt),Bn.length>0&&H0(Bn,Je,dt),mt.buffers.depth.setTest(!0),mt.buffers.depth.setMask(!0),mt.buffers.color.setMask(!0),mt.setPolygonOffset(!1)}function H0(pe,Je,dt){const st=!0===Je.isScene?Je.overrideMaterial:null;for(let bt=0,Mn=pe.length;bt<Mn;bt++){const Bn=pe[bt],Wn=Bn.object,zn=Bn.geometry,hi=null===st?Bn.material:st,ri=Bn.group;Wn.layers.test(dt.layers)&&nde(Wn,Je,dt,zn,hi,ri)}}function nde(pe,Je,dt,st,bt,Mn){pe.onBeforeRender(g,Je,dt,st,bt,Mn),pe.modelViewMatrix.multiplyMatrices(dt.matrixWorldInverse,pe.matrixWorld),pe.normalMatrix.getNormalMatrix(pe.modelViewMatrix),bt.onBeforeRender(g,Je,dt,st,pe,Mn),!0===bt.transparent&&2===bt.side?(bt.side=1,bt.needsUpdate=!0,g.renderBufferDirect(dt,Je,st,bt,pe,Mn),bt.side=0,bt.needsUpdate=!0,g.renderBufferDirect(dt,Je,st,bt,pe,Mn),bt.side=2):g.renderBufferDirect(dt,Je,st,bt,pe,Mn),pe.onAfterRender(g,Je,dt,st,bt,Mn)}function ZS(pe,Je,dt){!0!==Je.isScene&&(Je=ot);const st=ct.get(pe),bt=h.state.lights,Bn=bt.state.version,Wn=dn.getParameters(pe,bt.state,h.state.shadowsArray,Je,dt),zn=dn.getProgramCacheKey(Wn);let hi=st.programs;st.environment=pe.isMeshStandardMaterial?Je.environment:null,st.fog=Je.fog,st.envMap=(pe.isMeshStandardMaterial?Xt:Mt).get(pe.envMap||st.environment),void 0===hi&&(pe.addEventListener("dispose",wn),hi=new Map,st.programs=hi);let ri=hi.get(zn);if(void 0!==ri){if(st.currentProgram===ri&&st.lightsStateVersion===Bn)return hB(pe,Wn),ri}else Wn.uniforms=dn.getUniforms(pe),pe.onBuild(dt,Wn,g),pe.onBeforeCompile(Wn,g),ri=dn.acquireProgram(Wn,zn),hi.set(zn,ri),st.uniforms=Wn.uniforms;const oi=st.uniforms;(!pe.isShaderMaterial&&!pe.isRawShaderMaterial||!0===pe.clipping)&&(oi.clippingPlanes=se.uniform),hB(pe,Wn),st.needsLights=function sde(pe){return pe.isMeshLambertMaterial||pe.isMeshToonMaterial||pe.isMeshPhongMaterial||pe.isMeshStandardMaterial||pe.isShadowMaterial||pe.isShaderMaterial&&!0===pe.lights}(pe),st.lightsStateVersion=Bn,st.needsLights&&(oi.ambientLightColor.value=bt.state.ambient,oi.lightProbe.value=bt.state.probe,oi.directionalLights.value=bt.state.directional,oi.directionalLightShadows.value=bt.state.directionalShadow,oi.spotLights.value=bt.state.spot,oi.spotLightShadows.value=bt.state.spotShadow,oi.rectAreaLights.value=bt.state.rectArea,oi.ltc_1.value=bt.state.rectAreaLTC1,oi.ltc_2.value=bt.state.rectAreaLTC2,oi.pointLights.value=bt.state.point,oi.pointLightShadows.value=bt.state.pointShadow,oi.hemisphereLights.value=bt.state.hemi,oi.directionalShadowMap.value=bt.state.directionalShadowMap,oi.directionalShadowMatrix.value=bt.state.directionalShadowMatrix,oi.spotShadowMap.value=bt.state.spotShadowMap,oi.spotShadowMatrix.value=bt.state.spotShadowMatrix,oi.pointShadowMap.value=bt.state.pointShadowMap,oi.pointShadowMatrix.value=bt.state.pointShadowMatrix);const Xi=ri.getUniforms(),Vc=Hm.seqWithValue(Xi.seq,oi);return st.currentProgram=ri,st.uniformsList=Vc,ri}function hB(pe,Je){const dt=ct.get(pe);dt.outputEncoding=Je.outputEncoding,dt.instancing=Je.instancing,dt.skinning=Je.skinning,dt.morphTargets=Je.morphTargets,dt.morphNormals=Je.morphNormals,dt.morphColors=Je.morphColors,dt.morphTargetsCount=Je.morphTargetsCount,dt.numClippingPlanes=Je.numClippingPlanes,dt.numIntersection=Je.numClipIntersection,dt.vertexAlphas=Je.vertexAlphas,dt.vertexTangents=Je.vertexTangents,dt.toneMapping=Je.toneMapping}os.setAnimationLoop(function Dn(pe){zt&&zt(pe)}),"undefined"!=typeof self&&os.setContext(self),this.setAnimationLoop=function(pe){zt=pe,Ut.setAnimationLoop(pe),null===pe?os.stop():os.start()},Ut.addEventListener("sessionstart",ui),Ut.addEventListener("sessionend",di),this.render=function(pe,Je){if(void 0===Je||!0===Je.isCamera){if(!0!==m){if(!0===pe.autoUpdate&&pe.updateMatrixWorld(),null===Je.parent&&Je.updateMatrixWorld(),!0===Ut.enabled&&!0===Ut.isPresenting&&(!0===Ut.cameraAutoUpdate&&Ut.updateCamera(Je),Je=Ut.getCamera()),!0===pe.isScene&&pe.onBeforeRender(g,pe,Je,D),h=ve.get(pe,p.length),h.init(),p.push(h),wt.multiplyMatrices(Je.projectionMatrix,Je.matrixWorldInverse),Ue.setFromProjectionMatrix(wt),We=this.localClippingEnabled,Xe=se.init(this.clippingPlanes,We,Je),d=Jn.get(pe,f.length),d.init(),f.push(d),ra(pe,Je,0,g.sortObjects),d.finish(),!0===g.sortObjects&&d.sort(qe,it),!0===Xe&&se.beginShadows(),at.render(h.state.shadowsArray,pe,Je),!0===Xe&&se.endShadows(),!0===this.info.autoReset&&this.info.reset(),Dt.render(d,pe),h.setupLights(g.physicallyCorrectLights),Je.isArrayCamera){const st=Je.cameras;for(let bt=0,Mn=st.length;bt<Mn;bt++){const Bn=st[bt];dB(d,pe,Bn,Bn.viewport)}}else dB(d,pe,Je);null!==D&&(_t.updateMultisampleRenderTarget(D),_t.updateRenderTargetMipmap(D)),!0===pe.isScene&&pe.onAfterRender(g,pe,Je),St.resetDefaultState(),M=-1,O=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(pe,Je,dt){ct.get(pe.texture).__webglTexture=Je,ct.get(pe.depthTexture).__webglTexture=dt;const st=ct.get(pe);st.__hasExternalTextures=!0,st.__hasExternalTextures&&(st.__autoAllocateDepthBuffer=void 0===dt,st.__autoAllocateDepthBuffer||!0===rt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),st.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(pe,Je){const dt=ct.get(pe);dt.__webglFramebuffer=Je,dt.__useDefaultFramebuffer=void 0===Je},this.setRenderTarget=function(pe,Je=0,dt=0){D=pe,_=Je,w=dt;let st=!0;if(pe){const zn=ct.get(pe);void 0!==zn.__useDefaultFramebuffer?(mt.bindFramebuffer(36160,null),st=!1):void 0===zn.__webglFramebuffer?_t.setupRenderTarget(pe):zn.__hasExternalTextures&&_t.rebindTextures(pe,ct.get(pe.texture).__webglTexture,ct.get(pe.depthTexture).__webglTexture)}let bt=null,Mn=!1,Bn=!1;if(pe){const zn=pe.texture;(zn.isData3DTexture||zn.isDataArrayTexture)&&(Bn=!0);const hi=ct.get(pe).__webglFramebuffer;pe.isWebGLCubeRenderTarget?(bt=hi[Je],Mn=!0):bt=Tt.isWebGL2&&pe.samples>0&&!1===_t.useMultisampledRTT(pe)?ct.get(pe).__webglMultisampledFramebuffer:hi,q.copy(pe.viewport),Z.copy(pe.scissor),B=pe.scissorTest}else q.copy(ke).multiplyScalar(xe).floor(),Z.copy(et).multiplyScalar(xe).floor(),B=Ce;if(mt.bindFramebuffer(36160,bt)&&Tt.drawBuffers&&st&&mt.drawBuffers(pe,bt),mt.viewport(q),mt.scissor(Z),mt.setScissorTest(B),Mn){const zn=ct.get(pe.texture);ze.framebufferTexture2D(36160,36064,34069+Je,zn.__webglTexture,dt)}else if(Bn){const zn=ct.get(pe.texture);ze.framebufferTextureLayer(36160,36064,zn.__webglTexture,dt||0,Je||0)}M=-1},this.readRenderTargetPixels=function(pe,Je,dt,st,bt,Mn,Bn){if(!pe||!pe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Wn=ct.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&void 0!==Bn&&(Wn=Wn[Bn]),Wn){mt.bindFramebuffer(36160,Wn);try{const zn=pe.texture,hi=zn.format,ri=zn.type;if(hi!==qs&&de.convert(hi)!==ze.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const oi=ri===rf&&(rt.has("EXT_color_buffer_half_float")||Tt.isWebGL2&&rt.has("EXT_color_buffer_float"));if(!(ri===ec||de.convert(ri)===ze.getParameter(35738)||ri===ol&&(Tt.isWebGL2||rt.has("OES_texture_float")||rt.has("WEBGL_color_buffer_float"))||oi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Je>=0&&Je<=pe.width-st&&dt>=0&&dt<=pe.height-bt&&ze.readPixels(Je,dt,st,bt,de.convert(hi),de.convert(ri),Mn)}finally{const zn=null!==D?ct.get(D).__webglFramebuffer:null;mt.bindFramebuffer(36160,zn)}}},this.copyFramebufferToTexture=function(pe,Je,dt=0){const st=Math.pow(2,-dt),bt=Math.floor(Je.image.width*st),Mn=Math.floor(Je.image.height*st);_t.setTexture2D(Je,0),ze.copyTexSubImage2D(3553,dt,0,0,pe.x,pe.y,bt,Mn),mt.unbindTexture()},this.copyTextureToTexture=function(pe,Je,dt,st=0){const bt=Je.image.width,Mn=Je.image.height,Bn=de.convert(dt.format),Wn=de.convert(dt.type);_t.setTexture2D(dt,0),ze.pixelStorei(37440,dt.flipY),ze.pixelStorei(37441,dt.premultiplyAlpha),ze.pixelStorei(3317,dt.unpackAlignment),Je.isDataTexture?ze.texSubImage2D(3553,st,pe.x,pe.y,bt,Mn,Bn,Wn,Je.image.data):Je.isCompressedTexture?ze.compressedTexSubImage2D(3553,st,pe.x,pe.y,Je.mipmaps[0].width,Je.mipmaps[0].height,Bn,Je.mipmaps[0].data):ze.texSubImage2D(3553,st,pe.x,pe.y,Bn,Wn,Je.image),0===st&&dt.generateMipmaps&&ze.generateMipmap(3553),mt.unbindTexture()},this.copyTextureToTexture3D=function(pe,Je,dt,st,bt=0){if(g.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Mn=pe.max.x-pe.min.x+1,Bn=pe.max.y-pe.min.y+1,Wn=pe.max.z-pe.min.z+1,zn=de.convert(st.format),hi=de.convert(st.type);let ri;if(st.isData3DTexture)_t.setTexture3D(st,0),ri=32879;else{if(!st.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");_t.setTexture2DArray(st,0),ri=35866}ze.pixelStorei(37440,st.flipY),ze.pixelStorei(37441,st.premultiplyAlpha),ze.pixelStorei(3317,st.unpackAlignment);const oi=ze.getParameter(3314),Xi=ze.getParameter(32878),Vc=ze.getParameter(3316),Wd=ze.getParameter(3315),$d=ze.getParameter(32877),sa=dt.isCompressedTexture?dt.mipmaps[0]:dt.image;ze.pixelStorei(3314,sa.width),ze.pixelStorei(32878,sa.height),ze.pixelStorei(3316,pe.min.x),ze.pixelStorei(3315,pe.min.y),ze.pixelStorei(32877,pe.min.z),dt.isDataTexture||dt.isData3DTexture?ze.texSubImage3D(ri,bt,Je.x,Je.y,Je.z,Mn,Bn,Wn,zn,hi,sa.data):dt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ze.compressedTexSubImage3D(ri,bt,Je.x,Je.y,Je.z,Mn,Bn,Wn,zn,sa.data)):ze.texSubImage3D(ri,bt,Je.x,Je.y,Je.z,Mn,Bn,Wn,zn,hi,sa),ze.pixelStorei(3314,oi),ze.pixelStorei(32878,Xi),ze.pixelStorei(3316,Vc),ze.pixelStorei(3315,Wd),ze.pixelStorei(32877,$d),0===bt&&st.generateMipmaps&&ze.generateMipmap(ri),mt.unbindTexture()},this.initTexture=function(pe){_t.setTexture2D(pe,0),mt.unbindTexture()},this.resetState=function(){_=0,w=0,D=null,mt.reset(),St.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class JK extends bN{}).prototype.isWebGL1Renderer=!0;class ts extends Rr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Zt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const FN=new re,LN=new re,BN=new Ln,dw=new Mm,qm=new rd;class Xo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ht:new re);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new re,r=[],s=[],o=[],a=new re,l=new Ln;for(let f=0;f<=e;f++)r[f]=this.getTangentAt(f/e,new re);s[0]=new re,o[0]=new re;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Zi(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(!0===t){let f=Math.acos(Zi(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class fw extends Xo{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new ht,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function pw(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,r(o,a,h,f)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const Km=new re,gw=new pw,mw=new pw,_w=new pw;function WN(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function xf(n,e,t,i){return function uQ(n,e){const t=1-n;return t*t*e}(n,e)+function dQ(n,e){return 2*(1-n)*n*e}(n,t)+function hQ(n,e){return n*n*e}(n,i)}function Sf(n,e,t,i,r){return function fQ(n,e){const t=1-n;return t*t*t*e}(n,e)+function pQ(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function gQ(n,e){return 3*(1-n)*n*n*e}(n,i)+function mQ(n,e){return n*n*n*e}(n,r)}class qN extends Xo{constructor(e=new re,t=new re,i=new re,r=new re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new re){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Sf(e,r.x,s.x,o.x,a.x),Sf(e,r.y,s.y,o.y,a.y),Sf(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class vw extends Xo{constructor(e=new re,t=new re,i=new re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new re){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(xf(e,r.x,s.x,o.x),xf(e,r.y,s.y,o.y),xf(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}var bw=Object.freeze({__proto__:null,ArcCurve:class lQ extends fw{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class cQ extends Xo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new re){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(Km.subVectors(r[0],r[1]).add(r[0]),c=Km);const d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Km.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Km),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(u),f);g<1e-4&&(g=1),p<1e-4&&(p=g),m<1e-4&&(m=g),gw.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,p,g,m),mw.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,p,g,m),_w.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,p,g,m)}else"catmullrom"===this.curveType&&(gw.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),mw.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),_w.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(gw.calc(l),mw.calc(l),_w.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new re).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:class $N extends Xo{constructor(e=new ht,t=new ht,i=new ht,r=new ht){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ht){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Sf(e,r.x,s.x,o.x,a.x),Sf(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},CubicBezierCurve3:qN,EllipseCurve:fw,LineCurve:class yw extends Xo{constructor(e=new ht,t=new ht){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ht){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new ht;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},LineCurve3:class _Q extends Xo{constructor(e=new re,t=new re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new re){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:class YN extends Xo{constructor(e=new ht,t=new ht,i=new ht){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ht){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(xf(e,r.x,s.x,o.x),xf(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve3:vw,SplineCurve:class XN extends Xo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ht){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(WN(a,l.x,c.x,u.x,d.x),WN(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new ht).fromArray(r))}return this}}});class pc extends Hn{constructor(e=1,t=1,i=1,r=8,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],h=[],f=[];let p=0;const g=[],m=i/2;let _=0;function D(M){const O=p,q=new ht,Z=new re;let B=0;const ee=!0===M?e:t,me=!0===M?1:-1;for(let qe=1;qe<=r;qe++)d.push(0,m*me,0),h.push(0,me,0),f.push(.5,.5),p++;const xe=p;for(let qe=0;qe<=r;qe++){const ke=qe/r*l+a,et=Math.cos(ke),Ce=Math.sin(ke);Z.x=ee*Ce,Z.y=m*me,Z.z=ee*et,d.push(Z.x,Z.y,Z.z),h.push(0,me,0),q.x=.5*et+.5,q.y=.5*Ce*me+.5,f.push(q.x,q.y),p++}for(let qe=0;qe<r;qe++){const it=O+qe,ke=xe+qe;!0===M?u.push(ke,ke+1,it):u.push(ke+1,ke,it),B+=3}c.addGroup(_,B,!0===M?1:2),_+=B}(function w(){const M=new re,O=new re;let q=0;const Z=(t-e)/i;for(let B=0;B<=s;B++){const ee=[],me=B/s,xe=me*(t-e)+e;for(let qe=0;qe<=r;qe++){const it=qe/r,ke=it*l+a,et=Math.sin(ke),Ce=Math.cos(ke);O.x=xe*et,O.y=-me*i+m,O.z=xe*Ce,d.push(O.x,O.y,O.z),M.set(et,Z,Ce).normalize(),h.push(M.x,M.y,M.z),f.push(it,1-me),ee.push(p++)}g.push(ee)}for(let B=0;B<r;B++)for(let ee=0;ee<s;ee++){const xe=g[ee+1][B],qe=g[ee+1][B+1],it=g[ee][B+1];u.push(g[ee][B],xe,it),u.push(xe,qe,it),q+=6}c.addGroup(_,q,0),_+=q})(),!1===o&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(u),this.setAttribute("position",new en(d,3)),this.setAttribute("normal",new en(h,3)),this.setAttribute("uv",new en(f,2))}static fromJSON(e){return new pc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Mf extends pc{constructor(e=1,t=1,i=8,r=1,s=!1,o=0,a=2*Math.PI){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Mf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}new re,new re,new re,new xo;class gc extends Hn{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new re,h=new re,f=[],p=[],g=[],m=[];for(let _=0;_<=i;_++){const w=[],D=_/i;let M=0;0==_&&0==o?M=.5/t:_==i&&l==Math.PI&&(M=-.5/t);for(let O=0;O<=t;O++){const q=O/t;d.x=-e*Math.cos(r+q*s)*Math.sin(o+D*a),d.y=e*Math.cos(o+D*a),d.z=e*Math.sin(r+q*s)*Math.sin(o+D*a),p.push(d.x,d.y,d.z),h.copy(d).normalize(),g.push(h.x,h.y,h.z),m.push(q+M,1-D),w.push(c++)}u.push(w)}for(let _=0;_<i;_++)for(let w=0;w<t;w++){const D=u[_][w+1],M=u[_][w],O=u[_+1][w],q=u[_+1][w+1];(0!==_||o>0)&&f.push(D,M,q),(_!==i-1||l<Math.PI)&&f.push(M,O,q)}this.setIndex(f),this.setAttribute("position",new en(p,3)),this.setAttribute("normal",new en(g,3)),this.setAttribute("uv",new en(m,2))}static fromJSON(e){return new gc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Pf extends Hn{constructor(e=new vw(new re(-1,-1,0),new re(-1,1,0),new re(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new re,l=new re,c=new ht;let u=new re;const d=[],h=[],f=[],p=[];function m(D){u=e.getPointAt(D/t,u);const M=o.normals[D],O=o.binormals[D];for(let q=0;q<=r;q++){const Z=q/r*Math.PI*2,B=Math.sin(Z),ee=-Math.cos(Z);l.x=ee*M.x+B*O.x,l.y=ee*M.y+B*O.y,l.z=ee*M.z+B*O.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,d.push(a.x,a.y,a.z)}}(function g(){for(let D=0;D<t;D++)m(D);m(!1===s?t:0),function w(){for(let D=0;D<=t;D++)for(let M=0;M<=r;M++)c.x=D/t,c.y=M/r,f.push(c.x,c.y)}(),function _(){for(let D=1;D<=t;D++)for(let M=1;M<=r;M++){const q=(r+1)*D+(M-1),Z=(r+1)*D+M,B=(r+1)*(D-1)+M;p.push((r+1)*(D-1)+(M-1),q,B),p.push(q,Z,B)}}()})(),this.setIndex(p),this.setAttribute("position",new en(d,3)),this.setAttribute("normal",new en(h,3)),this.setAttribute("uv",new en(f,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Pf((new bw[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class rI extends Rr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sI extends Rr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const XQ={ShadowMaterial:class HQ extends Rr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},SpriteMaterial:class SN extends Rr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},RawShaderMaterial:class zQ extends So{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},ShaderMaterial:So,PointsMaterial:class zN extends Rr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},MeshPhysicalMaterial:class jQ extends rI{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ht(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Zi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Zt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},MeshStandardMaterial:rI,MeshPhongMaterial:class GQ extends Rr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Zt(16777215),this.specular=new Zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},MeshToonMaterial:class WQ extends Rr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},MeshNormalMaterial:class $Q extends Rr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},MeshLambertMaterial:sI,MeshDepthMaterial:yN,MeshDistanceMaterial:vN,MeshBasicMaterial:fl,MeshMatcapMaterial:class qQ extends Rr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},LineDashedMaterial:class YQ extends ts{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}},LineBasicMaterial:ts,Material:Rr};Rr.fromType=function(n){return new XQ[n]};const ki={arraySlice:function(n,e,t){return ki.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<t||p>=i)){d.push(c.times[f]);for(let g=0;g<u;++g)h.push(c.values[f*u+g])}}0!==d.length&&(c.times=ki.convertArray(d,c.times.constructor),c.values=ki.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let g;if(s<=a.times[0])g=ki.arraySlice(a.values,u,d-u);else if(s>=a.times[p]){const _=p*d+u;g=ki.arraySlice(a.values,_,_+d-u)}else{const _=a.createInterpolant(),w=u,D=d-u;_.evaluate(s),g=ki.arraySlice(_.resultBuffer,w,D)}"quaternion"===l&&(new wr).fromArray(g).normalize().conjugate().toArray(g);const m=c.times.length;for(let _=0;_<m;++_){const w=_*f+h;if("quaternion"===l)wr.multiplyQuaternionsFlat(c.values,w,g,0,c.values,w);else{const D=f-2*h;for(let M=0;M<D;++M)c.values[w+M]-=g[M]}}}return n.blendMode=2501,n}};class p_{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class KQ extends p_{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),g=p*p,m=g*p,_=-h*m+2*h*g-h*p,w=(1+h)*m+(-1.5-2*h)*g+(-.5+h)*p+1,D=(-1-f)*m+(1.5+f)*g+.5*p,M=f*m-f*g;for(let O=0;O!==a;++O)s[O]=_*o[u+O]+w*o[c+O]+D*o[l+O]+M*o[d+O];return s}}class oI extends p_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class QQ extends p_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ko{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ki.convertArray(t,this.TimeBufferType),this.values=ki.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:ki.convertArray(e.times,Array),values:ki.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new QQ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new oI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new KQ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=ki.arraySlice(i,s,o),this.values=ki.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&ki.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ki.arraySlice(this.times),t=ki.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const g=t[d+p];if(g!==t[h+p]||g!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=ki.arraySlice(e,0,o),this.values=ki.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=ki.arraySlice(this.times,0),t=ki.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ko.prototype.TimeBufferType=Float32Array,Ko.prototype.ValueBufferType=Float32Array,Ko.prototype.DefaultInterpolation=2301;class Md extends Ko{}Md.prototype.ValueTypeName="bool",Md.prototype.ValueBufferType=Array,Md.prototype.DefaultInterpolation=2300,Md.prototype.InterpolantFactoryMethodLinear=void 0,Md.prototype.InterpolantFactoryMethodSmooth=void 0;(class aI extends Ko{}).prototype.ValueTypeName="color";(class g_ extends Ko{}).prototype.ValueTypeName="number";class JQ extends p_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)wr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Of extends Ko{InterpolantFactoryMethodLinear(e){return new JQ(this.times,this.values,this.getValueSize(),e)}}Of.prototype.ValueTypeName="quaternion",Of.prototype.DefaultInterpolation=2301,Of.prototype.InterpolantFactoryMethodSmooth=void 0;class Ad extends Ko{}Ad.prototype.ValueTypeName="string",Ad.prototype.ValueBufferType=Array,Ad.prototype.DefaultInterpolation=2300,Ad.prototype.InterpolantFactoryMethodLinear=void 0,Ad.prototype.InterpolantFactoryMethodSmooth=void 0;(class m_ extends Ko{}).prototype.ValueTypeName="vector";const Ed={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const tJ=new class lI{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}};class cI{constructor(e){this.manager=void 0!==e?e:tJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}class y_ extends cI{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ed.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=lf("img");function l(){u(),Ed.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class uI extends xr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Zt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const dI=new Ln,hI=new re,fI=new re;class cJ extends class rJ{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ht(512,512),this.map=null,this.mapPass=null,this.matrix=new Ln,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Z1,this._frameExtents=new ht(1,1),this._viewportCount=1,this._viewports=[new vi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;hI.setFromMatrixPosition(e.matrixWorld),t.position.copy(hI),fI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(fI),t.updateMatrixWorld(),dI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dI),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}{constructor(){super(new ff(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Mw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=SI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=SI();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function SI(){return("undefined"==typeof performance?Date:performance).now()}const Aw="\\[\\]\\.:\\/",bJ=new RegExp("["+Aw+"]","g"),Ew="[^"+Aw+"]",wJ="[^"+Aw.replace("\\.","")+"]",xJ=/((?:WC+[\/:])*)/.source.replace("WC",Ew),SJ=/(WCOD+)?/.source.replace("WCOD",wJ),CJ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ew),MJ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ew),AJ=new RegExp("^"+xJ+SJ+CJ+MJ+"$"),EJ=["material","materials","bones"];class TJ{constructor(e,t,i){const r=i||Di.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Di=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(bJ,"")}static parseTrackName(t){const i=AJ.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==EJ.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=TJ,n})();Di.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Di.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Di.prototype.GetterByBindingType=[Di.prototype._getValue_direct,Di.prototype._getValue_array,Di.prototype._getValue_arrayElement,Di.prototype._getValue_toArray],Di.prototype.SetterByBindingTypeAndVersioning=[[Di.prototype._setValue_direct,Di.prototype._setValue_direct_setNeedsUpdate,Di.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Di.prototype._setValue_array,Di.prototype._setValue_array_setNeedsUpdate,Di.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Di.prototype._setValue_arrayElement,Di.prototype._setValue_arrayElement_setNeedsUpdate,Di.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Di.prototype._setValue_fromArray,Di.prototype._setValue_fromArray_setNeedsUpdate,Di.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class EI{constructor(e,t,i=0,r=1/0){this.ray=new Mm(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new U1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Tw(e,this,i,t),i.sort(TI),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Tw(e[r],this,i,t);return i.sort(TI),i}}function TI(n,e){return n.distance-e.distance}function Tw(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===i){const r=n.children;for(let s=0,o=r.length;s<o;s++)Tw(r[s],e,t,!0)}}class Dw{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Zi(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const BI=new ArrayBuffer(4),Co=(new Float32Array(BI),new Uint32Array(BI),new Uint32Array(512)),Mo=new Uint32Array(512);for(let n=0;n<256;++n){const e=n-127;e<-27?(Co[n]=0,Co[256|n]=32768,Mo[n]=24,Mo[256|n]=24):e<-14?(Co[n]=1024>>-e-14,Co[256|n]=1024>>-e-14|32768,Mo[n]=-e-1,Mo[256|n]=-e-1):e<=15?(Co[n]=e+15<<10,Co[256|n]=e+15<<10|32768,Mo[n]=13,Mo[256|n]=13):e<128?(Co[n]=31744,Co[256|n]=64512,Mo[n]=24,Mo[256|n]=24):(Co[n]=31744,Co[256|n]=64512,Mo[n]=13,Mo[256|n]=13)}const Rw=new Uint32Array(2048),Td=new Uint32Array(64),HI=new Uint32Array(64);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;0==(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,Rw[n]=e|t}for(let n=1024;n<2048;++n)Rw[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)Td[n]=n<<23;Td[31]=1199570944,Td[32]=2147483648;for(let n=33;n<63;++n)Td[n]=2147483648+(n-32<<23);Td[63]=3347054592;for(let n=1;n<64;++n)32!==n&&(HI[n]=1024);"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"141"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="141");const Dd=new _l,xl=new EI,Nf=new ht,zI=new re,A_=new re,Nw=new re,jI=new Ln;class RJ extends mo{constructor(e,t,i){super(),i.style.touchAction="none";let r=null,s=null;const o=[],a=this;function l(){i.addEventListener("pointermove",f),i.addEventListener("pointerdown",p),i.addEventListener("pointerup",g),i.addEventListener("pointerleave",g)}function c(){i.removeEventListener("pointermove",f),i.removeEventListener("pointerdown",p),i.removeEventListener("pointerup",g),i.removeEventListener("pointerleave",g),i.style.cursor=""}function f(_){if(!1!==a.enabled){if(m(_),xl.setFromCamera(Nf,t),r)return xl.ray.intersectPlane(Dd,A_)&&r.position.copy(A_.sub(zI).applyMatrix4(jI)),void a.dispatchEvent({type:"drag",object:r});if("mouse"===_.pointerType||"pen"===_.pointerType)if(o.length=0,xl.setFromCamera(Nf,t),xl.intersectObjects(e,!0,o),o.length>0){const w=o[0].object;Dd.setFromNormalAndCoplanarPoint(t.getWorldDirection(Dd.normal),Nw.setFromMatrixPosition(w.matrixWorld)),s!==w&&null!==s&&(a.dispatchEvent({type:"hoveroff",object:s}),i.style.cursor="auto",s=null),s!==w&&(a.dispatchEvent({type:"hoveron",object:w}),i.style.cursor="pointer",s=w)}else null!==s&&(a.dispatchEvent({type:"hoveroff",object:s}),i.style.cursor="auto",s=null)}}function p(_){!1!==a.enabled&&(m(_),o.length=0,xl.setFromCamera(Nf,t),xl.intersectObjects(e,!0,o),o.length>0&&(r=!0===a.transformGroup?e[0]:o[0].object,Dd.setFromNormalAndCoplanarPoint(t.getWorldDirection(Dd.normal),Nw.setFromMatrixPosition(r.matrixWorld)),xl.ray.intersectPlane(Dd,A_)&&(jI.copy(r.parent.matrixWorld).invert(),zI.copy(A_).sub(Nw.setFromMatrixPosition(r.matrixWorld))),i.style.cursor="move",a.dispatchEvent({type:"dragstart",object:r})))}function g(){!1!==a.enabled&&(r&&(a.dispatchEvent({type:"dragend",object:r}),r=null),i.style.cursor=s?"pointer":"auto")}function m(_){const w=i.getBoundingClientRect();Nf.x=(_.clientX-w.left)/w.width*2-1,Nf.y=-(_.clientY-w.top)/w.height*2+1}l(),this.enabled=!0,this.transformGroup=!1,this.activate=l,this.deactivate=c,this.dispose=function u(){c()},this.getObjects=function d(){return e},this.getRaycaster=function h(){return xl}}}var NJ={value:()=>{}};function GI(){for(var i,n=0,e=arguments.length,t={};n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new E_(t)}function E_(n){this._=n}function IJ(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}function kJ(n,e){for(var r,t=0,i=n.length;t<i;++t)if((r=n[t]).name===e)return r.value}function WI(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=NJ,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=t&&n.push({name:e,value:t}),n}E_.prototype=GI.prototype={constructor:E_,on:function(n,e){var r,t=this._,i=IJ(n+"",t),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=WI(t[r],n.name,e);else if(null==e)for(r in t)t[r]=WI(t[r],n.name,null);return this}for(;++s<o;)if((r=(n=i[s]).type)&&(r=kJ(t[r],n.name)))return r},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new E_(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var r,s,t=new Array(r),i=0;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,r=(s=this._[n]).length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};const FJ=GI;var T_,Ff,Pd=0,If=0,kf=0,D_=0,wc=0,P_=0,Lf="object"==typeof performance&&performance.now?performance:Date,qI="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function YI(){return wc||(qI(LJ),wc=Lf.now()+P_)}function LJ(){wc=0}function Iw(){this._call=this._time=this._next=null}function XI(n,e,t){var i=new Iw;return i.restart(n,e,t),i}function KI(){wc=(D_=Lf.now())+P_,Pd=If=0;try{!function BJ(){YI(),++Pd;for(var e,n=T_;n;)(e=wc-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Pd}()}finally{Pd=0,function UJ(){for(var n,t,e=T_,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:T_=t);Ff=n,kw(i)}(),wc=0}}function VJ(){var n=Lf.now(),e=n-D_;e>1e3&&(P_-=e,D_=n)}function kw(n){Pd||(If&&(If=clearTimeout(If)),n-wc>24?(n<1/0&&(If=setTimeout(KI,n-Lf.now()-P_)),kf&&(kf=clearInterval(kf))):(kf||(D_=Lf.now(),kf=setInterval(VJ,1e3)),Pd=1,qI(KI)))}Iw.prototype=XI.prototype={constructor:Iw,restart:function(n,e,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?YI():+t)+(null==e?0:+e),!this._next&&Ff!==this&&(Ff?Ff._next=this:T_=this,Ff=this),this._call=n,this._time=t,kw()},stop:function(){this._call&&(this._call=null,this._time=1/0,kw())}};const QI=4294967296;function Fw(n){return n.x}function ZI(n){return n.y}function GJ(n){return n.z}var $J=Math.PI*(3-Math.sqrt(5)),qJ=20*Math.PI/(9+Math.sqrt(221));function YJ(n,e){e=e||2;var i,t=Math.min(3,Math.max(1,Math.round(e))),r=1,s=.001,o=1-Math.pow(s,1/300),a=0,l=.6,c=new Map,u=XI(f),d=FJ("tick","end"),h=function jJ(){let n=1;return()=>(n=(1664525*n+1013904223)%QI)/QI}();function f(){p(),d.call("tick",i),r<s&&(u.stop(),d.call("end",i))}function p(_){var w,M,D=n.length;void 0===_&&(_=1);for(var O=0;O<_;++O)for(r+=(a-r)*o,c.forEach(function(q){q(r)}),w=0;w<D;++w)null==(M=n[w]).fx?M.x+=M.vx*=l:(M.x=M.fx,M.vx=0),t>1&&(null==M.fy?M.y+=M.vy*=l:(M.y=M.fy,M.vy=0)),t>2&&(null==M.fz?M.z+=M.vz*=l:(M.z=M.fz,M.vz=0));return i}function g(){for(var D,_=0,w=n.length;_<w;++_){if((D=n[_]).index=_,null!=D.fx&&(D.x=D.fx),null!=D.fy&&(D.y=D.fy),null!=D.fz&&(D.z=D.fz),isNaN(D.x)||t>1&&isNaN(D.y)||t>2&&isNaN(D.z)){var M=10*(t>2?Math.cbrt(.5+_):t>1?Math.sqrt(.5+_):_),O=_*$J,q=_*qJ;1===t?D.x=M:2===t?(D.x=M*Math.cos(O),D.y=M*Math.sin(O)):(D.x=M*Math.sin(O)*Math.cos(q),D.y=M*Math.cos(O),D.z=M*Math.sin(O)*Math.sin(q))}(isNaN(D.vx)||t>1&&isNaN(D.vy)||t>2&&isNaN(D.vz))&&(D.vx=0,t>1&&(D.vy=0),t>2&&(D.vz=0))}}function m(_){return _.initialize&&_.initialize(n,h,t),_}return null==n&&(n=[]),g(),i={tick:p,restart:function(){return u.restart(f),i},stop:function(){return u.stop(),i},numDimensions:function(_){return arguments.length?(t=Math.min(3,Math.max(1,Math.round(_))),c.forEach(m),i):t},nodes:function(_){return arguments.length?(n=_,g(),c.forEach(m),i):n},alpha:function(_){return arguments.length?(r=+_,i):r},alphaMin:function(_){return arguments.length?(s=+_,i):s},alphaDecay:function(_){return arguments.length?(o=+_,i):+o},alphaTarget:function(_){return arguments.length?(a=+_,i):a},velocityDecay:function(_){return arguments.length?(l=1-_,i):1-l},randomSource:function(_){return arguments.length?(h=_,c.forEach(m),i):h},force:function(_,w){return arguments.length>1?(null==w?c.delete(_):c.set(_,m(w)),i):c.get(_)},find:function(){var B,ee,me,xe,qe,it,_=Array.prototype.slice.call(arguments),w=_.shift()||0,D=(t>1?_.shift():null)||0,M=(t>2?_.shift():null)||0,O=_.shift()||1/0,q=0,Z=n.length;for(O*=O,q=0;q<Z;++q)(xe=(B=w-(qe=n[q]).x)*B+(ee=D-(qe.y||0))*ee+(me=M-(qe.z||0))*me)<O&&(it=qe,O=xe);return it},on:function(_,w){return arguments.length>1?(d.on(_,w),i):d.on(_)}}}function Na(n){return function(){return n}}function Ia(n){return 1e-6*(n()-.5)}function XJ(n){return n.index}function ek(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function KJ(n){var i,s,o,a,l,c,u,e=XJ,t=function h(_){return 1/Math.min(l[_.source.index],l[_.target.index])},r=Na(30),d=1;function f(_){for(var w=0,D=n.length;w<d;++w)for(var O,q,Z,xe,qe,M=0,B=0,ee=0,me=0;M<D;++M)B=(Z=(O=n[M]).target).x+Z.vx-(q=O.source).x-q.vx||Ia(u),a>1&&(ee=Z.y+Z.vy-q.y-q.vy||Ia(u)),a>2&&(me=Z.z+Z.vz-q.z-q.vz||Ia(u)),ee*=xe=((xe=Math.sqrt(B*B+ee*ee+me*me))-s[M])/xe*_*i[M],me*=xe,Z.vx-=(B*=xe)*(qe=c[M]),a>1&&(Z.vy-=ee*qe),a>2&&(Z.vz-=me*qe),q.vx+=B*(qe=1-qe),a>1&&(q.vy+=ee*qe),a>2&&(q.vz+=me*qe)}function p(){if(o){var _,O,w=o.length,D=n.length,M=new Map(o.map((q,Z)=>[e(q,Z,o),q]));for(_=0,l=new Array(w);_<D;++_)(O=n[_]).index=_,"object"!=typeof O.source&&(O.source=ek(M,O.source)),"object"!=typeof O.target&&(O.target=ek(M,O.target)),l[O.source.index]=(l[O.source.index]||0)+1,l[O.target.index]=(l[O.target.index]||0)+1;for(_=0,c=new Array(D);_<D;++_)c[_]=l[(O=n[_]).source.index]/(l[O.source.index]+l[O.target.index]);i=new Array(D),g(),s=new Array(D),m()}}function g(){if(o)for(var _=0,w=n.length;_<w;++_)i[_]=+t(n[_],_,n)}function m(){if(o)for(var _=0,w=n.length;_<w;++_)s[_]=+r(n[_],_,n)}return null==n&&(n=[]),f.initialize=function(_,...w){o=_,u=w.find(D=>"function"==typeof D)||Math.random,a=w.find(D=>[1,2,3].includes(D))||2,p()},f.links=function(_){return arguments.length?(n=_,p(),f):n},f.id=function(_){return arguments.length?(e=_,f):e},f.iterations=function(_){return arguments.length?(d=+_,f):d},f.strength=function(_){return arguments.length?(t="function"==typeof _?_:Na(+_),g(),f):t},f.distance=function(_){return arguments.length?(r="function"==typeof _?_:Na(+_),m(),f):r},f}function tk(n,e,t){if(isNaN(e))return n;var i,l,c,u,d,h,r=n._root,s={data:t},o=n._x0,a=n._x1;if(!r)return n._root=s,n;for(;r.length;)if((u=e>=(l=(o+a)/2))?o=l:a=l,i=r,!(r=r[d=+u]))return i[d]=s,n;if(e===(c=+n._x.call(null,r.data)))return s.next=r,i?i[d]=s:n._root=s,n;do{i=i?i[d]=new Array(2):n._root=new Array(2),(u=e>=(l=(o+a)/2))?o=l:a=l}while((d=+u)==(h=+(c>=l)));return i[h]=r,i[d]=s,n}function ka(n,e,t){this.node=n,this.x0=e,this.x1=t}function cZ(n){return n[0]}function nk(n,e){var t=new Lw(null==e?cZ:e,NaN,NaN);return null==n?t:t.addAll(n)}function Lw(n,e,t){this._x=n,this._x0=e,this._x1=t,this._root=void 0}function ik(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var hs=nk.prototype=Lw.prototype;function rk(n,e,t,i){if(isNaN(e)||isNaN(t))return n;var r,d,h,f,p,g,m,_,w,s=n._root,o={data:i},a=n._x0,l=n._y0,c=n._x1,u=n._y1;if(!s)return n._root=o,n;for(;s.length;)if((g=e>=(d=(a+c)/2))?a=d:c=d,(m=t>=(h=(l+u)/2))?l=h:u=h,r=s,!(s=s[_=m<<1|g]))return r[_]=o,n;if(f=+n._x.call(null,s.data),p=+n._y.call(null,s.data),e===f&&t===p)return o.next=s,r?r[_]=o:n._root=o,n;do{r=r?r[_]=new Array(4):n._root=new Array(4),(g=e>=(d=(a+c)/2))?a=d:c=d,(m=t>=(h=(l+u)/2))?l=h:u=h}while((_=m<<1|g)==(w=(p>=h)<<1|f>=d));return r[w]=s,r[_]=o,n}function ns(n,e,t,i,r){this.node=n,this.x0=e,this.y0=t,this.x1=i,this.y1=r}function SZ(n){return n[0]}function MZ(n){return n[1]}function sk(n,e,t){var i=new Bw(null==e?SZ:e,null==t?MZ:t,NaN,NaN,NaN,NaN);return null==n?i:i.addAll(n)}function Bw(n,e,t,i,r,s){this._x=n,this._y=e,this._x0=t,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function ok(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}hs.copy=function(){var t,i,n=new Lw(this._x,this._x0,this._x1),e=this._root;if(!e)return n;if(!e.length)return n._root=ik(e),n;for(t=[{source:e,target:n._root=new Array(2)}];e=t.pop();)for(var r=0;r<2;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(2)}):e.target[r]=ik(i));return n},hs.add=function QJ(n){const e=+this._x.call(null,n);return tk(this.cover(e),e,n)},hs.addAll=function JJ(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e);let i=1/0,r=-1/0;for(let o,s=0;s<e;++s)isNaN(o=+this._x.call(null,n[s]))||(t[s]=o,o<i&&(i=o),o>r&&(r=o));if(i>r)return this;this.cover(i).cover(r);for(let s=0;s<e;++s)tk(this,t[s],n[s]);return this},hs.cover=function ZJ(n){if(isNaN(n=+n))return this;var e=this._x0,t=this._x1;if(isNaN(e))t=(e=Math.floor(n))+1;else{for(var s,o,i=t-e||1,r=this._root;e>n||n>=t;)switch(o=+(n<e),s=new Array(2),s[o]=r,r=s,i*=2,o){case 0:t=e+i;break;case 1:e=t-i}this._root&&this._root.length&&(this._root=r)}return this._x0=e,this._x1=t,this},hs.data=function eZ(){var n=[];return this.visit(function(e){if(!e.length)do{n.push(e.data)}while(e=e.next)}),n},hs.extent=function tZ(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},hs.find=function nZ(n,e){var t,r,s,c,u,i=this._x0,o=this._x1,a=[],l=this._root;for(l&&a.push(new ka(l,i,o)),null==e?e=1/0:(i=n-e,o=n+e);c=a.pop();)if(!(!(l=c.node)||(r=c.x0)>o||(s=c.x1)<i))if(l.length){var d=(r+s)/2;a.push(new ka(l[1],d,s),new ka(l[0],r,d)),(u=+(n>=d))&&(c=a[a.length-1],a[a.length-1]=a[a.length-1-u],a[a.length-1-u]=c)}else{var h=Math.abs(n-+this._x.call(null,l.data));h<e&&(e=h,i=n-h,o=n+h,t=l.data)}return t},hs.remove=function iZ(n){if(isNaN(l=+this._x.call(null,n)))return this;var e,i,r,s,l,c,u,d,h,t=this._root,o=this._x0,a=this._x1;if(!t)return this;if(t.length)for(;;){if((u=l>=(c=(o+a)/2))?o=c:a=c,e=t,!(t=t[d=+u]))return this;if(!t.length)break;e[d+1&1]&&(i=e,h=d)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[d]=s:delete e[d],(t=e[0]||e[1])&&t===(e[1]||e[0])&&!t.length&&(i?i[h]=t:this._root=t),this):(this._root=s,this)},hs.removeAll=function rZ(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this},hs.root=function sZ(){return this._root},hs.size=function oZ(){var n=0;return this.visit(function(e){if(!e.length)do{++n}while(e=e.next)}),n},hs.visit=function aZ(n){var t,r,s,o,e=[],i=this._root;for(i&&e.push(new ka(i,this._x0,this._x1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.x1)&&i.length){var a=(s+o)/2;(r=i[1])&&e.push(new ka(r,a,o)),(r=i[0])&&e.push(new ka(r,s,a))}return this},hs.visitAfter=function lZ(n){var i,e=[],t=[];for(this._root&&e.push(new ka(this._root,this._x0,this._x1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.x1,l=(o+a)/2;(s=r[0])&&e.push(new ka(s,o,l)),(s=r[1])&&e.push(new ka(s,l,a))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.x1);return this},hs.x=function uZ(n){return arguments.length?(this._x=n,this):this._x};var is=sk.prototype=Bw.prototype;function ak(n,e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i))return n;var s,p,g,m,_,w,D,M,O,q,Z,B,o=n._root,a={data:r},l=n._x0,c=n._y0,u=n._z0,d=n._x1,h=n._y1,f=n._z1;if(!o)return n._root=a,n;for(;o.length;)if((M=e>=(p=(l+d)/2))?l=p:d=p,(O=t>=(g=(c+h)/2))?c=g:h=g,(q=i>=(m=(u+f)/2))?u=m:f=m,s=o,!(o=o[Z=q<<2|O<<1|M]))return s[Z]=a,n;if(_=+n._x.call(null,o.data),w=+n._y.call(null,o.data),D=+n._z.call(null,o.data),e===_&&t===w&&i===D)return a.next=o,s?s[Z]=a:n._root=a,n;do{s=s?s[Z]=new Array(8):n._root=new Array(8),(M=e>=(p=(l+d)/2))?l=p:d=p,(O=t>=(g=(c+h)/2))?c=g:h=g,(q=i>=(m=(u+f)/2))?u=m:f=m}while((Z=q<<2|O<<1|M)==(B=(D>=m)<<2|(w>=g)<<1|_>=p));return s[B]=o,s[Z]=a,n}function bi(n,e,t,i,r,s,o){this.node=n,this.x0=e,this.y0=t,this.z0=i,this.x1=r,this.y1=s,this.z1=o}function VZ(n){return n[0]}function HZ(n){return n[1]}function jZ(n){return n[2]}function lk(n,e,t,i){var r=new Vw(null==e?VZ:e,null==t?HZ:t,null==i?jZ:i,NaN,NaN,NaN,NaN,NaN,NaN);return null==n?r:r.addAll(n)}function Vw(n,e,t,i,r,s,o,a,l){this._x=n,this._y=e,this._z=t,this._x0=i,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function ck(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}is.copy=function(){var t,i,n=new Bw(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root;if(!e)return n;if(!e.length)return n._root=ok(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=ok(i));return n},is.add=function dZ(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return rk(this.cover(e,t),e,t,n)},is.addAll=function hZ(n){var e,t,r,s,i=n.length,o=new Array(i),a=new Array(i),l=1/0,c=1/0,u=-1/0,d=-1/0;for(t=0;t<i;++t)isNaN(r=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(o[t]=r,a[t]=s,r<l&&(l=r),r>u&&(u=r),s<c&&(c=s),s>d&&(d=s));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),t=0;t<i;++t)rk(this,o[t],a[t],n[t]);return this},is.cover=function fZ(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(t))r=(t=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var l,c,o=r-t||1,a=this._root;t>n||n>=r||i>e||e>=s;)switch(c=(e<i)<<1|n<t,l=new Array(4),l[c]=a,a=l,o*=2,c){case 0:r=t+o,s=i+o;break;case 1:t=r-o,s=i+o;break;case 2:r=t+o,i=s-o;break;case 3:t=r-o,i=s-o}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=i,this._x1=r,this._y1=s,this},is.data=function pZ(){var n=[];return this.visit(function(e){if(!e.length)do{n.push(e.data)}while(e=e.next)}),n},is.extent=function gZ(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},is.find=function mZ(n,e,t){var i,o,a,l,c,p,g,r=this._x0,s=this._y0,u=this._x1,d=this._y1,h=[],f=this._root;for(f&&h.push(new ns(f,r,s,u,d)),null==t?t=1/0:(r=n-t,s=e-t,u=n+t,d=e+t,t*=t);p=h.pop();)if(!(!(f=p.node)||(o=p.x0)>u||(a=p.y0)>d||(l=p.x1)<r||(c=p.y1)<s))if(f.length){var m=(o+l)/2,_=(a+c)/2;h.push(new ns(f[3],m,_,l,c),new ns(f[2],o,_,m,c),new ns(f[1],m,a,l,_),new ns(f[0],o,a,m,_)),(g=(e>=_)<<1|n>=m)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-g],h[h.length-1-g]=p)}else{var w=n-+this._x.call(null,f.data),D=e-+this._y.call(null,f.data),M=w*w+D*D;if(M<t){var O=Math.sqrt(t=M);r=n-O,s=e-O,u=n+O,d=e+O,i=f.data}}return i},is.remove=function _Z(n){if(isNaN(u=+this._x.call(null,n))||isNaN(d=+this._y.call(null,n)))return this;var e,i,r,s,u,d,h,f,p,g,m,_,t=this._root,o=this._x0,a=this._y0,l=this._x1,c=this._y1;if(!t)return this;if(t.length)for(;;){if((p=u>=(h=(o+l)/2))?o=h:l=h,(g=d>=(f=(a+c)/2))?a=f:c=f,e=t,!(t=t[m=g<<1|p]))return this;if(!t.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(i=e,_=m)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[m]=s:delete e[m],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(i?i[_]=t:this._root=t),this):(this._root=s,this)},is.removeAll=function yZ(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this},is.root=function vZ(){return this._root},is.size=function bZ(){var n=0;return this.visit(function(e){if(!e.length)do{++n}while(e=e.next)}),n},is.visit=function wZ(n){var t,r,s,o,a,l,e=[],i=this._root;for(i&&e.push(new ns(i,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.y0,a=t.x1,l=t.y1)&&i.length){var c=(s+a)/2,u=(o+l)/2;(r=i[3])&&e.push(new ns(r,c,u,a,l)),(r=i[2])&&e.push(new ns(r,s,u,c,l)),(r=i[1])&&e.push(new ns(r,c,o,a,u)),(r=i[0])&&e.push(new ns(r,s,o,c,u))}return this},is.visitAfter=function xZ(n){var i,e=[],t=[];for(this._root&&e.push(new ns(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.x1,c=i.y1,u=(o+l)/2,d=(a+c)/2;(s=r[0])&&e.push(new ns(s,o,a,u,d)),(s=r[1])&&e.push(new ns(s,u,a,l,d)),(s=r[2])&&e.push(new ns(s,o,d,u,c)),(s=r[3])&&e.push(new ns(s,u,d,l,c))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this},is.x=function CZ(n){return arguments.length?(this._x=n,this):this._x},is.y=function AZ(n){return arguments.length?(this._y=n,this):this._y};var Hr=lk.prototype=Vw.prototype;function WZ(){var n,e,t,i,r,o,s=Na(-30),a=1,l=1/0,c=.81;function u(p){var g,m=n.length,_=(1===e?nk(n,Fw):2===e?sk(n,Fw,ZI):3===e?lk(n,Fw,ZI,GJ):null).visitAfter(h);for(r=p,g=0;g<m;++g)t=n[g],_.visit(f)}function d(){if(n){var p,m,g=n.length;for(o=new Array(g),p=0;p<g;++p)o[(m=n[p]).index]=+s(m,p,n)}}function h(p){var m,_,D,M,O,q,g=0,w=0,Z=p.length;if(Z){for(D=M=O=q=0;q<Z;++q)(m=p[q])&&(_=Math.abs(m.value))&&(g+=m.value,w+=_,D+=_*(m.x||0),M+=_*(m.y||0),O+=_*(m.z||0));g*=Math.sqrt(4/Z),p.x=D/w,e>1&&(p.y=M/w),e>2&&(p.z=O/w)}else{(m=p).x=m.data.x,e>1&&(m.y=m.data.y),e>2&&(m.z=m.data.z);do{g+=o[m.data.index]}while(m=m.next)}p.value=g}function f(p,g,m,_,w){if(!p.value)return!0;var M=p.x-t.x,O=e>1?p.y-t.y:0,q=e>2?p.z-t.z:0,Z=[m,_,w][e-1]-g,B=M*M+O*O+q*q;if(Z*Z/c<B)return B<l&&(0===M&&(B+=(M=Ia(i))*M),e>1&&0===O&&(B+=(O=Ia(i))*O),e>2&&0===q&&(B+=(q=Ia(i))*q),B<a&&(B=Math.sqrt(a*B)),t.vx+=M*p.value*r/B,e>1&&(t.vy+=O*p.value*r/B),e>2&&(t.vz+=q*p.value*r/B)),!0;if(!(p.length||B>=l)){(p.data!==t||p.next)&&(0===M&&(B+=(M=Ia(i))*M),e>1&&0===O&&(B+=(O=Ia(i))*O),e>2&&0===q&&(B+=(q=Ia(i))*q),B<a&&(B=Math.sqrt(a*B)));do{p.data!==t&&(t.vx+=M*(Z=o[p.data.index]*r/B),e>1&&(t.vy+=O*Z),e>2&&(t.vz+=q*Z))}while(p=p.next)}}return u.initialize=function(p,...g){n=p,i=g.find(m=>"function"==typeof m)||Math.random,e=g.find(m=>[1,2,3].includes(m))||2,d()},u.strength=function(p){return arguments.length?(s="function"==typeof p?p:Na(+p),d(),u):s},u.distanceMin=function(p){return arguments.length?(a=p*p,u):Math.sqrt(a)},u.distanceMax=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u.theta=function(p){return arguments.length?(c=p*p,u):Math.sqrt(c)},u}function $Z(n,e,t){var i,r=1;function s(){var o,l,a=i.length,c=0,u=0,d=0;for(o=0;o<a;++o)c+=(l=i[o]).x||0,u+=l.y||0,d+=l.z||0;for(c=(c/a-n)*r,u=(u/a-e)*r,d=(d/a-t)*r,o=0;o<a;++o)l=i[o],c&&(l.x-=c),u&&(l.y-=u),d&&(l.z-=d)}return null==n&&(n=0),null==e&&(e=0),null==t&&(t=0),s.initialize=function(o){i=o},s.x=function(o){return arguments.length?(n=+o,s):n},s.y=function(o){return arguments.length?(e=+o,s):e},s.z=function(o){return arguments.length?(t=+o,s):t},s.strength=function(o){return arguments.length?(r=+o,s):r},s}Hr.copy=function(){var t,i,n=new Vw(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root;if(!e)return n;if(!e.length)return n._root=ck(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var r=0;r<8;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(8)}):e.target[r]=ck(i));return n},Hr.add=function EZ(n){const e=+this._x.call(null,n),t=+this._y.call(null,n),i=+this._z.call(null,n);return ak(this.cover(e,t,i),e,t,i,n)},Hr.addAll=function TZ(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e),i=new Float64Array(e),r=new Float64Array(e);let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0;for(let h,f,p,g,d=0;d<e;++d)isNaN(f=+this._x.call(null,h=n[d]))||isNaN(p=+this._y.call(null,h))||isNaN(g=+this._z.call(null,h))||(t[d]=f,i[d]=p,r[d]=g,f<s&&(s=f),f>l&&(l=f),p<o&&(o=p),p>c&&(c=p),g<a&&(a=g),g>u&&(u=g));if(s>l||o>c||a>u)return this;this.cover(s,o,a).cover(l,c,u);for(let d=0;d<e;++d)ak(this,t[d],i[d],r[d],n[d]);return this},Hr.cover=function DZ(n,e,t){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,r=this._y0,s=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(i))o=(i=Math.floor(n))+1,a=(r=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var d,h,c=o-i||1,u=this._root;i>n||n>=o||r>e||e>=a||s>t||t>=l;)switch(h=(t<s)<<2|(e<r)<<1|n<i,d=new Array(8),d[h]=u,u=d,c*=2,h){case 0:o=i+c,a=r+c,l=s+c;break;case 1:i=o-c,a=r+c,l=s+c;break;case 2:o=i+c,r=a-c,l=s+c;break;case 3:i=o-c,r=a-c,l=s+c;break;case 4:o=i+c,a=r+c,s=l-c;break;case 5:i=o-c,a=r+c,s=l-c;break;case 6:o=i+c,r=a-c,s=l-c;break;case 7:i=o-c,r=a-c,s=l-c}this._root&&this._root.length&&(this._root=u)}return this._x0=i,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this},Hr.data=function PZ(){var n=[];return this.visit(function(e){if(!e.length)do{n.push(e.data)}while(e=e.next)}),n},Hr.extent=function OZ(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},Hr.find=function RZ(n,e,t,i){var r,l,c,u,d,h,f,D,M,s=this._x0,o=this._y0,a=this._z0,p=this._x1,g=this._y1,m=this._z1,_=[],w=this._root;for(w&&_.push(new bi(w,s,o,a,p,g,m)),null==i?i=1/0:(s=n-i,o=e-i,a=t-i,p=n+i,g=e+i,m=t+i,i*=i);D=_.pop();)if(!(!(w=D.node)||(l=D.x0)>p||(c=D.y0)>g||(u=D.z0)>m||(d=D.x1)<s||(h=D.y1)<o||(f=D.z1)<a))if(w.length){var O=(l+d)/2,q=(c+h)/2,Z=(u+f)/2;_.push(new bi(w[7],O,q,Z,d,h,f),new bi(w[6],l,q,Z,O,h,f),new bi(w[5],O,c,Z,d,q,f),new bi(w[4],l,c,Z,O,q,f),new bi(w[3],O,q,u,d,h,Z),new bi(w[2],l,q,u,O,h,Z),new bi(w[1],O,c,u,d,q,Z),new bi(w[0],l,c,u,O,q,Z)),(M=(t>=Z)<<2|(e>=q)<<1|n>=O)&&(D=_[_.length-1],_[_.length-1]=_[_.length-1-M],_[_.length-1-M]=D)}else{var B=n-+this._x.call(null,w.data),ee=e-+this._y.call(null,w.data),me=t-+this._z.call(null,w.data),xe=B*B+ee*ee+me*me;if(xe<i){var qe=Math.sqrt(i=xe);s=n-qe,o=e-qe,a=t-qe,p=n+qe,g=e+qe,m=t+qe,r=w.data}}return r},Hr.remove=function NZ(n){if(isNaN(h=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n))||isNaN(p=+this._z.call(null,n)))return this;var e,i,r,s,h,f,p,g,m,_,w,D,M,O,q,t=this._root,o=this._x0,a=this._y0,l=this._z0,c=this._x1,u=this._y1,d=this._z1;if(!t)return this;if(t.length)for(;;){if((w=h>=(g=(o+c)/2))?o=g:c=g,(D=f>=(m=(a+u)/2))?a=m:u=m,(M=p>=(_=(l+d)/2))?l=_:d=_,e=t,!(t=t[O=M<<2|D<<1|w]))return this;if(!t.length)break;(e[O+1&7]||e[O+2&7]||e[O+3&7]||e[O+4&7]||e[O+5&7]||e[O+6&7]||e[O+7&7])&&(i=e,q=O)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[O]=s:delete e[O],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(i?i[q]=t:this._root=t),this):(this._root=s,this)},Hr.removeAll=function IZ(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this},Hr.root=function kZ(){return this._root},Hr.size=function FZ(){var n=0;return this.visit(function(e){if(!e.length)do{++n}while(e=e.next)}),n},Hr.visit=function LZ(n){var t,r,s,o,a,l,c,u,e=[],i=this._root;for(i&&e.push(new bi(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.y0,a=t.z0,l=t.x1,c=t.y1,u=t.z1)&&i.length){var d=(s+l)/2,h=(o+c)/2,f=(a+u)/2;(r=i[7])&&e.push(new bi(r,d,h,f,l,c,u)),(r=i[6])&&e.push(new bi(r,s,h,f,d,c,u)),(r=i[5])&&e.push(new bi(r,d,o,f,l,h,u)),(r=i[4])&&e.push(new bi(r,s,o,f,d,h,u)),(r=i[3])&&e.push(new bi(r,d,h,a,l,c,f)),(r=i[2])&&e.push(new bi(r,s,h,a,d,c,f)),(r=i[1])&&e.push(new bi(r,d,o,a,l,h,f)),(r=i[0])&&e.push(new bi(r,s,o,a,d,h,f))}return this},Hr.visitAfter=function BZ(n){var i,e=[],t=[];for(this._root&&e.push(new bi(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.z0,c=i.x1,u=i.y1,d=i.z1,h=(o+c)/2,f=(a+u)/2,p=(l+d)/2;(s=r[0])&&e.push(new bi(s,o,a,l,h,f,p)),(s=r[1])&&e.push(new bi(s,h,a,l,c,f,p)),(s=r[2])&&e.push(new bi(s,o,f,l,h,u,p)),(s=r[3])&&e.push(new bi(s,h,f,l,c,u,p)),(s=r[4])&&e.push(new bi(s,o,a,p,h,f,d)),(s=r[5])&&e.push(new bi(s,h,a,p,c,f,d)),(s=r[6])&&e.push(new bi(s,o,f,p,h,u,d)),(s=r[7])&&e.push(new bi(s,h,f,p,c,u,d))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this},Hr.x=function UZ(n){return arguments.length?(this._x=n,this):this._x},Hr.y=function zZ(n){return arguments.length?(this._y=n,this):this._y},Hr.z=function GZ(n){return arguments.length?(this._z=n,this):this._z};var YZ=Re(553),XZ=Re(336),KZ=Re(209);function uk(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,see(i.key),i)}}function ZZ(n,e,t){return e&&uk(n.prototype,e),t&&uk(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function eee(n,e){return function tee(n){if(Array.isArray(n))return n}(n)||function QZ(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(n,e)||function nee(n,e){if(n){if("string"==typeof n)return dk(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dk(n,e)}}(n,e)||function iee(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dk(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function see(n){var e=function ree(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:String(e)}var oee=ZZ(function n(e,t){var i=t.default,r=void 0===i?null:i,s=t.triggerUpdate,o=void 0===s||s,a=t.onChange,l=void 0===a?function(c,u){}:a;(function JZ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.name=e,this.defaultVal=r,this.triggerUpdate=o,this.onChange=l});function Uw(n){var e=n.stateInit,t=void 0===e?function(){return{}}:e,i=n.props,r=void 0===i?{}:i,s=n.methods,o=void 0===s?{}:s,a=n.aliases,l=void 0===a?{}:a,c=n.init,u=void 0===c?function(){}:c,d=n.update,h=void 0===d?function(){}:d,f=Object.keys(r).map(function(p){return new oee(p,r[p])});return function(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=Object.assign({},t instanceof Function?t(p):t,{initialised:!1}),m={};function _(M){return w(M,p),D(),_}var w=function(O,q){u.call(_,O,g,q),g.initialised=!0},D=KZ(function(){!g.initialised||(h.call(_,g,m),m={})},1);return f.forEach(function(M){_[M.name]=function O(q){var Z=q.name,B=q.triggerUpdate,ee=void 0!==B&&B,me=q.onChange,xe=void 0===me?function(ke,et){}:me,qe=q.defaultVal,it=void 0===qe?null:qe;return function(ke){var et=g[Z];if(!arguments.length)return et;var Ce=void 0===ke?it:ke;return g[Z]=Ce,xe.call(_,Ce,g,et),!m.hasOwnProperty(Z)&&(m[Z]=et),ee&&D(),_}}(M)}),Object.keys(o).forEach(function(M){_[M]=function(){for(var O,q=arguments.length,Z=new Array(q),B=0;B<q;B++)Z[B]=arguments[B];return(O=o[M]).call.apply(O,[_,g].concat(Z))}}),Object.entries(l).forEach(function(M){var O=eee(M,2);return _[O[0]]=_[O[1]]}),_.resetProps=function(){return f.forEach(function(M){_[M.name](M.defaultVal)}),_},_.resetProps(),g._rerender=D,_}}var si=function(n){return n instanceof Function?n:"string"==typeof n?function(e){return e[n]}:function(e){return n}};function aee(n,e){let t;if(void 0===e)for(const i of n)null!=i&&(t>i||void 0===t&&i>=i)&&(t=i);else{let i=-1;for(let r of n)null!=(r=e(r,++i,n))&&(t>r||void 0===t&&r>=r)&&(t=r)}return t}function lee(n,e){let t;if(void 0===e)for(const i of n)null!=i&&(t<i||void 0===t&&i>=i)&&(t=i);else{let i=-1;for(let r of n)null!=(r=e(r,++i,n))&&(t<r||void 0===t&&r>=r)&&(t=r)}return t}function dee(n,e){if(null==n)return{};var i,r,t=function uee(n,e){if(null==n)return{};var r,s,t={},i=Object.keys(n);for(s=0;s<i.length;s++)!(e.indexOf(r=i[s])>=0)&&(t[r]=n[r]);return t}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)!(e.indexOf(i=s[r])>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,i)||(t[i]=n[i]))}return t}function hee(n,e){return function gee(n){if(Array.isArray(n))return n}(n)||function cee(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(n,e)||hk(n,e)||function yee(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fee(n){return function pee(n){if(Array.isArray(n))return Hw(n)}(n)||function mee(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||hk(n)||function _ee(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hk(n,e){if(n){if("string"==typeof n)return Hw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hw(n,e)}}function Hw(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function bee(n){var e=function vee(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:String(e)}var fk=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(a){return{keyAccessor:a,isProp:!(a instanceof Function)}}),s=n.reduce(function(a,l){var c=a,u=l;return r.forEach(function(d,h){var g,f=d.keyAccessor;if(d.isProp){var _=u[f],w=dee(u,[f].map(bee));g=_,u=w}else g=f(u,h);h+1<r.length?(c.hasOwnProperty(g)||(c[g]={}),c=c[g]):t?(c.hasOwnProperty(g)||(c[g]=[]),c[g].push(u)):c[g]=u}),a},{});t instanceof Function&&function a(l){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;c===r.length?Object.keys(l).forEach(function(u){return l[u]=t(l[u])}):Object.values(l).forEach(function(u){return a(u,c+1)})}(s);var o=s;return i&&(o=[],function a(l){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c.length===r.length?o.push({keys:c,vals:l}):Object.entries(l).forEach(function(u){var d=hee(u,2),h=d[0];return a(d[1],[].concat(fee(c),[h]))})}(s),e instanceof Array&&0===e.length&&1===o.length&&(o[0].keys=[])),o};function pk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function gk(n,e,t){return e=function Oee(n){var e=function Pee(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:String(e)}(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mk(n,e){return function Aee(n){if(Array.isArray(n))return n}(n)||function wee(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(n,e)||_k(n,e)||function Dee(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O_(n){return function Mee(n){if(Array.isArray(n))return zw(n)}(n)||function Eee(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||_k(n)||function Tee(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _k(n,e){if(n){if("string"==typeof n)return zw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zw(n,e)}}function zw(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var Ree=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function kee(n,e,t,i,r){var s=r.createObj,o=void 0===s?function(B){return{}}:s,a=r.updateObj,l=void 0===a?function(B,ee){}:a,c=r.exitObj,u=void 0===c?function(B){}:c,d=r.objBindAttr,h=void 0===d?"__obj":d,f=r.dataBindAttr,p=void 0===f?"__data":f,g=function Cee(n,e){if(null==n)return{};var i,r,t=function See(n,e){if(null==n)return{};var r,s,t={},i=Object.keys(n);for(s=0;s<i.length;s++)!(e.indexOf(r=i[s])>=0)&&(t[r]=n[r]);return t}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)!(e.indexOf(i=s[r])>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,i)||(t[i]=n[i]))}return t}(r,Ree),m=function Iee(n,e,t){var i=t.objBindAttr,r=void 0===i?"__obj":i,s=t.dataBindAttr,o=void 0===s?"__data":s,a=t.idAccessor,l=t.purge,c=void 0!==l&&l,u=function(m){return m.hasOwnProperty(o)},d=e.filter(function(g){return!u(g)}),h=e.filter(u).map(function(g){return g[o]}),p=c?{enter:n,exit:h,update:[]}:function Nee(n,e,t){var i={enter:[],update:[],exit:[]};if(t){var o=fk(n,t,!1),a=fk(e,t,!1),l=Object.assign({},o,a);Object.entries(l).forEach(function(c){var u=mk(c,2),d=u[0],h=u[1],f=o.hasOwnProperty(d)?a.hasOwnProperty(d)?"update":"exit":"enter";i[f].push("update"===f?[o[d],a[d]]:h)})}else{var r=new Set(n),s=new Set(e);new Set([].concat(O_(r),O_(s))).forEach(function(c){var u=r.has(c)?s.has(c)?"update":"exit":"enter";i[u].push("update"===u?[c,c]:c)})}return i}(h,n,a);return p.update=p.update.map(function(g){var m=mk(g,2),_=m[0],w=m[1];return _!==w&&(w[r]=_[r],w[r][o]=w),w}),p.exit=p.exit.concat(d.map(function(g){return gk({},r,g)})),p}(n,e,function xee(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?pk(Object(t),!0).forEach(function(i){gk(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pk(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}({objBindAttr:h,dataBindAttr:p},g)),_=m.enter,w=m.update;m.exit.forEach(function(B){var ee=B[h];delete B[h],u(ee),i(ee)});var M=function q(B){var ee=[];return B.forEach(function(me){var xe=o(me);xe&&(xe[p]=me,me[h]=xe,ee.push(xe))}),ee}(_);(function Z(B){B.forEach(function(ee){var me=ee[h];me&&(me[p]=ee,l(me,ee))})})([].concat(O_(_),O_(w))),M.forEach(t)}class yk extends Map{constructor(e,t=wk){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(jw(this,e))}has(e){return super.has(jw(this,e))}set(e,t){return super.set(function vk({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}(this,e),t)}delete(e){return super.delete(function bk({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}(this,e))}}function jw({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function wk(n){return null!==n&&"object"==typeof n?n.valueOf():n}function Fee(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n)}return this}Set;const xk=Symbol("implicit"),Bee=function Lee(n){for(var e=n.length/6|0,t=new Array(e),i=0;i<e;)t[i]="#"+n.slice(6*i,6*++i);return t}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function R_(n){return(R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}var Vee=/^\s+/,Uee=/\s+$/;function sn(n,e){if(e=e||{},(n=n||"")instanceof sn)return n;if(!(this instanceof sn))return new sn(n,e);var t=function Hee(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,o=!1,a=!1;return"string"==typeof n&&(n=function ate(n){n=n.replace(Vee,"").replace(Uee,"").toLowerCase();var t,e=!1;if(Gw[n])n=Gw[n],e=!0;else if("transparent"==n)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Eo.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=Eo.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Eo.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=Eo.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Eo.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=Eo.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Eo.hex8.exec(n))?{r:Ps(t[1]),g:Ps(t[2]),b:Ps(t[3]),a:Ok(t[4]),format:e?"name":"hex8"}:(t=Eo.hex6.exec(n))?{r:Ps(t[1]),g:Ps(t[2]),b:Ps(t[3]),format:e?"name":"hex"}:(t=Eo.hex4.exec(n))?{r:Ps(t[1]+""+t[1]),g:Ps(t[2]+""+t[2]),b:Ps(t[3]+""+t[3]),a:Ok(t[4]+""+t[4]),format:e?"name":"hex8"}:!!(t=Eo.hex3.exec(n))&&{r:Ps(t[1]+""+t[1]),g:Ps(t[2]+""+t[2]),b:Ps(t[3]+""+t[3]),format:e?"name":"hex"}}(n)),"object"==R_(n)&&(Fa(n.r)&&Fa(n.g)&&Fa(n.b)?(e=function zee(n,e,t){return{r:255*Fi(n,255),g:255*Fi(e,255),b:255*Fi(t,255)}}(n.r,n.g,n.b),o=!0,a="%"===String(n.r).substr(-1)?"prgb":"rgb"):Fa(n.h)&&Fa(n.s)&&Fa(n.v)?(i=Bf(n.s),r=Bf(n.v),e=function Gee(n,e,t){n=6*Fi(n,360),e=Fi(e,100),t=Fi(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),o=t*(1-r*e),a=t*(1-(1-r)*e),l=i%6;return{r:255*[t,o,s,s,a,t][l],g:255*[a,t,t,o,s,s][l],b:255*[s,s,a,t,t,o][l]}}(n.h,i,r),o=!0,a="hsv"):Fa(n.h)&&Fa(n.s)&&Fa(n.l)&&(i=Bf(n.s),s=Bf(n.l),e=function jee(n,e,t){var i,r,s;function o(c,u,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?c+6*(u-c)*d:d<.5?u:d<2/3?c+(u-c)*(2/3-d)*6:c}if(n=Fi(n,360),e=Fi(e,100),t=Fi(t,100),0===e)i=r=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=o(l,a,n+1/3),r=o(l,a,n),s=o(l,a,n-1/3)}return{r:255*i,g:255*r,b:255*s}}(n.h,i,s),o=!0,a="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=Dk(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}function Ck(n,e,t){n=Fi(n,255),e=Fi(e,255),t=Fi(t,255);var s,o,i=Math.max(n,e,t),r=Math.min(n,e,t),a=(i+r)/2;if(i==r)s=o=0;else{var l=i-r;switch(o=a>.5?l/(2-i-r):l/(i+r),i){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4}s/=6}return{h:s,s:o,l:a}}function Mk(n,e,t){n=Fi(n,255),e=Fi(e,255),t=Fi(t,255);var s,o,i=Math.max(n,e,t),r=Math.min(n,e,t),a=i,l=i-r;if(o=0===i?0:l/i,i==r)s=0;else{switch(i){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4}s/=6}return{h:s,s:o,v:a}}function Ak(n,e,t,i){var r=[Ao(Math.round(n).toString(16)),Ao(Math.round(e).toString(16)),Ao(Math.round(t).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Ek(n,e,t,i){return[Ao(Pk(i)),Ao(Math.round(n).toString(16)),Ao(Math.round(e).toString(16)),Ao(Math.round(t).toString(16))].join("")}function $ee(n,e){e=0===e?0:e||10;var t=sn(n).toHsl();return t.s-=e/100,t.s=N_(t.s),sn(t)}function qee(n,e){e=0===e?0:e||10;var t=sn(n).toHsl();return t.s+=e/100,t.s=N_(t.s),sn(t)}function Yee(n){return sn(n).desaturate(100)}function Xee(n,e){e=0===e?0:e||10;var t=sn(n).toHsl();return t.l+=e/100,t.l=N_(t.l),sn(t)}function Kee(n,e){e=0===e?0:e||10;var t=sn(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(-e/100*255))),t.g=Math.max(0,Math.min(255,t.g-Math.round(-e/100*255))),t.b=Math.max(0,Math.min(255,t.b-Math.round(-e/100*255))),sn(t)}function Qee(n,e){e=0===e?0:e||10;var t=sn(n).toHsl();return t.l-=e/100,t.l=N_(t.l),sn(t)}function Jee(n,e){var t=sn(n).toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,sn(t)}function Zee(n){var e=sn(n).toHsl();return e.h=(e.h+180)%360,sn(e)}function Tk(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=sn(n).toHsl(),i=[sn(n)],r=360/e,s=1;s<e;s++)i.push(sn({h:(t.h+s*r)%360,s:t.s,l:t.l}));return i}function ete(n){var e=sn(n).toHsl(),t=e.h;return[sn(n),sn({h:(t+72)%360,s:e.s,l:e.l}),sn({h:(t+216)%360,s:e.s,l:e.l})]}function tte(n,e,t){e=e||6,t=t||30;var i=sn(n).toHsl(),r=360/t,s=[sn(n)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(sn(i));return s}function nte(n,e){e=e||6;for(var t=sn(n).toHsv(),i=t.h,r=t.s,s=t.v,o=[],a=1/e;e--;)o.push(sn({h:i,s:r,v:s})),s=(s+a)%1;return o}sn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,i,r,e=this.toRgb();return i=e.g/255,r=e.b/255,.2126*((t=e.r/255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=Dk(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Mk(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Mk(this._r,this._g,this._b),t=Math.round(360*e.h),i=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+r+"%)":"hsva("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=Ck(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Ck(this._r,this._g,this._b),t=Math.round(360*e.h),i=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+r+"%)":"hsla("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return Ak(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function Wee(n,e,t,i,r){var s=[Ao(Math.round(n).toString(16)),Ao(Math.round(e).toString(16)),Ao(Math.round(t).toString(16)),Ao(Pk(i))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Fi(this._r,255))+"%",g:Math.round(100*Fi(this._g,255))+"%",b:Math.round(100*Fi(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Fi(this._r,255))+"%, "+Math.round(100*Fi(this._g,255))+"%, "+Math.round(100*Fi(this._b,255))+"%)":"rgba("+Math.round(100*Fi(this._r,255))+"%, "+Math.round(100*Fi(this._g,255))+"%, "+Math.round(100*Fi(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(ite[Ak(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+Ek(this._r,this._g,this._b,this._a),i=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=sn(e);i="#"+Ek(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1;return!t&&this._a<1&&this._a>=0&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return sn(this.toString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Xee,arguments)},brighten:function(){return this._applyModification(Kee,arguments)},darken:function(){return this._applyModification(Qee,arguments)},desaturate:function(){return this._applyModification($ee,arguments)},saturate:function(){return this._applyModification(qee,arguments)},greyscale:function(){return this._applyModification(Yee,arguments)},spin:function(){return this._applyModification(Jee,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(tte,arguments)},complement:function(){return this._applyCombination(Zee,arguments)},monochromatic:function(){return this._applyCombination(nte,arguments)},splitcomplement:function(){return this._applyCombination(ete,arguments)},triad:function(){return this._applyCombination(Tk,[3])},tetrad:function(){return this._applyCombination(Tk,[4])}},sn.fromRatio=function(n,e){if("object"==R_(n)){var t={};for(var i in n)n.hasOwnProperty(i)&&(t[i]="a"===i?n[i]:Bf(n[i]));n=t}return sn(n,e)},sn.equals=function(n,e){return!(!n||!e)&&sn(n).toRgbString()==sn(e).toRgbString()},sn.random=function(){return sn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},sn.mix=function(n,e,t){t=0===t?0:t||50;var i=sn(n).toRgb(),r=sn(e).toRgb(),s=t/100;return sn({r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a})},sn.readability=function(n,e){var t=sn(n),i=sn(e);return(Math.max(t.getLuminance(),i.getLuminance())+.05)/(Math.min(t.getLuminance(),i.getLuminance())+.05)},sn.isReadable=function(n,e,t){var r,s,i=sn.readability(n,e);switch(s=!1,r=function lte(n){var e,t;return"AA"!==(e=((n=n||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(t=(n.size||"small").toLowerCase())&&"large"!==t&&(t="small"),{level:e,size:t}}(t),r.level+r.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7}return s},sn.mostReadable=function(n,e,t){var s,o,a,l,i=null,r=0;o=(t=t||{}).includeFallbackColors,a=t.level,l=t.size;for(var c=0;c<e.length;c++)(s=sn.readability(n,e[c]))>r&&(r=s,i=sn(e[c]));return sn.isReadable(n,i,{level:a,size:l})||!o?i:(t.includeFallbackColors=!1,sn.mostReadable(n,["#fff","#000"],t))};var Gw=sn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ite=sn.hexNames=function rte(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}(Gw);function Dk(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Fi(n,e){(function ste(n){return"string"==typeof n&&-1!=n.indexOf(".")&&1===parseFloat(n)})(n)&&(n="100%");var t=function ote(n){return"string"==typeof n&&-1!=n.indexOf("%")}(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function N_(n){return Math.min(1,Math.max(0,n))}function Ps(n){return parseInt(n,16)}function Ao(n){return 1==n.length?"0"+n:""+n}function Bf(n){return n<=1&&(n=100*n+"%"),n}function Pk(n){return Math.round(255*parseFloat(n)).toString(16)}function Ok(n){return Ps(n)/255}var t,i,r,Eo=(i="[\\s|\\(]+("+(t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Fa(n){return!!Eo.CSS_UNIT.exec(n)}function Rk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Nk(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Rk(Object(t),!0).forEach(function(i){$w(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rk(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Ww(n){return(Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function ute(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ik(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Vk(i.key),i)}}function dte(n,e,t){return e&&Ik(n.prototype,e),t&&Ik(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function $w(n,e,t){return(e=Vk(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hte(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&k_(n,e)}function I_(n){return I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I_(n)}function k_(n,e){return k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},k_(n,e)}function kk(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function F_(n,e,t){return F_=kk()?Reflect.construct.bind():function(r,s,o){var a=[null];a.push.apply(a,s);var c=new(Function.bind.apply(r,a));return o&&k_(c,o.prototype),c},F_.apply(null,arguments)}function pte(n,e){if(null==n)return{};var i,r,t=function fte(n,e){if(null==n)return{};var r,s,t={},i=Object.keys(n);for(s=0;s<i.length;s++)!(e.indexOf(r=i[s])>=0)&&(t[r]=n[r]);return t}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)!(e.indexOf(i=s[r])>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,i)||(t[i]=n[i]))}return t}function Fk(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gte(n,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fk(n)}function mte(n){var e=kk();return function(){var r,i=I_(n);if(e){var s=I_(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return gte(this,r)}}function Lk(n,e){return function yte(n){if(Array.isArray(n))return n}(n)||function cte(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(n,e)||Bk(n,e)||function wte(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(n){return function _te(n){if(Array.isArray(n))return qw(n)}(n)||function vte(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Bk(n)||function bte(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bk(n,e){if(n){if("string"==typeof n)return qw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qw(n,e)}}function qw(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Vk(n){var e=function xte(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:String(e)}var Ste=function n(e){e instanceof Array?e.forEach(n):(e.map&&e.map.dispose(),e.dispose())},Cte=function n(e){e.geometry&&e.geometry.dispose(),e.material&&Ste(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(n)},Yw=function(e){for(;e.children.length;){var t=e.children[0];e.remove(t),Cte(t)}},Mte=["objFilter"];function Vf(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.objFilter,r=void 0===i?function(){return!0}:i,s=pte(t,Mte);return kee(n,e.children.filter(r),function(o){return e.add(o)},function(o){e.remove(o),Yw(o)},Nk({objBindAttr:"__threeObj"},s))}var Uf=function(e){return isNaN(e)?parseInt(sn(e).toHex(),16):e},Xw=function(e){return isNaN(e)?sn(e).getAlpha():1},Ate=function Sk(){var n=new yk,e=[],t=[],i=xk;function r(s){let o=n.get(s);if(void 0===o){if(i!==xk)return i;n.set(s,o=e.push(s)-1)}return t[o%t.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new yk;for(const o of s)n.has(o)||n.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(t=Array.from(s),r):t.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return Sk(e,t).unknown(i)},Fee.apply(r,arguments),r}(Bee);function Uk(n,e,t){!e||"string"!=typeof t||n.filter(function(i){return!i[t]}).forEach(function(i){i[t]=Ate(e(i))})}var bn=window.THREE?window.THREE:{Group:fc,Mesh:Vr,MeshLambertMaterial:sI,Color:Zt,BufferGeometry:Hn,BufferAttribute:Sr,Matrix4:Ln,Vector3:re,SphereGeometry:gc,CylinderGeometry:pc,TubeGeometry:Pf,ConeGeometry:Mf,Line:class wf extends xr{constructor(e=new Hn,t=new ts){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)FN.fromBufferAttribute(t,r-1),LN.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=FN.distanceTo(LN);e.setAttribute("lineDistance",new en(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),qm.copy(i.boundingSphere),qm.applyMatrix4(r),qm.radius+=s,!1===e.ray.intersectsSphere(qm))return;BN.copy(r).invert(),dw.copy(e.ray).applyMatrix4(BN);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new re,u=new re,d=new re,h=new re,f=this.isLineSegments?2:1,p=i.index,m=i.attributes.position;if(null!==p)for(let D=Math.max(0,o.start),M=Math.min(p.count,o.start+o.count)-1;D<M;D+=f){const O=p.getX(D),q=p.getX(D+1);if(c.fromBufferAttribute(m,O),u.fromBufferAttribute(m,q),dw.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(h);B<e.near||B>e.far||t.push({distance:B,point:d.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}else for(let D=Math.max(0,o.start),M=Math.min(m.count,o.start+o.count)-1;D<M;D+=f){if(c.fromBufferAttribute(m,D),u.fromBufferAttribute(m,D+1),dw.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const q=e.ray.origin.distanceTo(h);q<e.near||q>e.far||t.push({distance:q,point:d.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}},LineBasicMaterial:ts,QuadraticBezierCurve3:vw,CubicBezierCurve3:qN,Box3:ll},Hk={graph:YZ,forcelayout:XZ},zk=(new bn.BufferGeometry).setAttribute?"setAttribute":"addAttribute",L_=(new bn.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix",Dte=Uw({props:{jsonUrl:{onChange:function(e,t){var i=this;e&&!t.fetchingJson&&(t.fetchingJson=!0,t.onLoading(),fetch(e).then(function(r){return r.json()}).then(function(r){t.fetchingJson=!1,t.onFinishLoading(r),i.graphData(r)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){t.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,t){var i=t.d3ForceLayout.force("charge");function r(s,o){s.forEach(function(a){delete a[o],delete a["v".concat(o)]})}i&&i.strength(e>2?-60:-30),e<3&&r(t.graphData.nodes,"z"),e<2&&r(t.graphData.nodes,"y")}},dagMode:{onChange:function(e,t){!e&&"d3"===t.forceEngine&&(t.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=i.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,t,i){return void 0===i?e.d3ForceLayout.force(t):(e.d3ForceLayout.force(t,i),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var t="ngraph"!==e.forceEngine;return e.engineRunning&&function i(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||t&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[t?"tick":"step"](),e.onEngineTick());var o=si(e.nodeThreeObjectExtend);e.graphData.nodes.forEach(function(h){var f=h.__threeObj;if(f){var p=t?h:e.layout.getNodePosition(h[e.nodeId]),g=o(h);(!e.nodePositionUpdate||!e.nodePositionUpdate(g?f.children[0]:f,{x:p.x,y:p.y,z:p.z},h)||g)&&(f.position.x=p.x,f.position.y=p.y||0,f.position.z=p.z||0)}});var a=si(e.linkWidth),l=si(e.linkCurvature),c=si(e.linkCurveRotation),u=si(e.linkThreeObjectExtend);e.graphData.links.forEach(function(h){var f=h.__lineObj;if(f){var p=t?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),g=p[t?"source":"from"],m=p[t?"target":"to"];if(g&&m&&g.hasOwnProperty("x")&&m.hasOwnProperty("x")){!function d(h){var f=t?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),p=f[t?"source":"from"],g=f[t?"target":"to"];if(p&&g&&p.hasOwnProperty("x")&&g.hasOwnProperty("x")){var m=l(h);if(m){var M,_=new bn.Vector3(p.x,p.y||0,p.z||0),w=new bn.Vector3(g.x,g.y||0,g.z||0),D=_.distanceTo(w),O=c(h);if(D>0){var q=g.x-p.x,Z=g.y-p.y||0,B=(new bn.Vector3).subVectors(w,_),ee=B.clone().multiplyScalar(m).cross(0!==q||0!==Z?new bn.Vector3(0,0,1):new bn.Vector3(0,1,0)).applyAxisAngle(B.normalize(),O).add((new bn.Vector3).addVectors(_,w).divideScalar(2));M=new bn.QuadraticBezierCurve3(_,ee,w)}else{var me=70*m,xe=-O,qe=xe+Math.PI/2;M=new bn.CubicBezierCurve3(_,new bn.Vector3(me*Math.cos(qe),me*Math.sin(qe),0).add(_),new bn.Vector3(me*Math.cos(xe),me*Math.sin(xe),0).add(_),w)}h.__curve=M}else h.__curve=null}}(h);var _=u(h);if(!e.linkPositionUpdate||!e.linkPositionUpdate(_?f.children[1]:f,{start:{x:g.x,y:g.y,z:g.z},end:{x:m.x,y:m.y,z:m.z}},h)||_){var D=h.__curve,M=f.children.length?f.children[0]:f;if("Line"===M.type){if(D)M.geometry.setFromPoints(D.getPoints(30));else{var O=M.geometry.getAttribute("position");(!O||!O.array||6!==O.array.length)&&M.geometry[zk]("position",O=new bn.BufferAttribute(new Float32Array(6),3)),O.array[0]=g.x,O.array[1]=g.y||0,O.array[2]=g.z||0,O.array[3]=m.x,O.array[4]=m.y||0,O.array[5]=m.z||0,O.needsUpdate=!0}M.geometry.computeBoundingSphere()}else if("Mesh"===M.type)if(D){M.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(M.position.set(0,0,0),M.rotation.set(0,0,0),M.scale.set(1,1,1));var qe=Math.ceil(10*a(h))/10,ke=new bn.TubeGeometry(D,30,qe/2,e.linkResolution,!1);M.geometry.dispose(),M.geometry=ke}else{if(!M.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var Z=Math.ceil(10*a(h))/10/2,B=new bn.CylinderGeometry(Z,Z,1,e.linkResolution,1,!1);B[L_]((new bn.Matrix4).makeTranslation(0,.5,0)),B[L_]((new bn.Matrix4).makeRotationX(Math.PI/2)),M.geometry.dispose(),M.geometry=B}var ee=new bn.Vector3(g.x,g.y||0,g.z||0),me=new bn.Vector3(m.x,m.y||0,m.z||0),xe=ee.distanceTo(me);M.position.x=ee.x,M.position.y=ee.y,M.position.z=ee.z,M.scale.z=xe,M.parent.localToWorld(me),M.lookAt(me)}}}}})}(),function r(){var o=si(e.linkDirectionalArrowRelPos),a=si(e.linkDirectionalArrowLength),l=si(e.nodeVal);e.graphData.links.forEach(function(c){var u=c.__arrowObj;if(u){var d=t?c:e.layout.getLinkPosition(e.layout.graph.getLink(c.source,c.target).id),h=d[t?"source":"from"],f=d[t?"target":"to"];if(h&&f&&h.hasOwnProperty("x")&&f.hasOwnProperty("x")){var p=Math.cbrt(Math.max(0,l(h)||1))*e.nodeRelSize,g=Math.cbrt(Math.max(0,l(f)||1))*e.nodeRelSize,m=a(c),_=o(c),w=c.__curve?function(B){return c.__curve.getPoint(B)}:function(B){var ee=function(xe,qe,it,ke){return qe[xe]+(it[xe]-qe[xe])*ke||0};return{x:ee("x",h,f,B),y:ee("y",h,f,B),z:ee("z",h,f,B)}},D=c.__curve?c.__curve.getLength():Math.sqrt(["x","y","z"].map(function(B){return Math.pow((f[B]||0)-(h[B]||0),2)}).reduce(function(B,ee){return B+ee},0)),M=p+m+(D-p-g-m)*_,O=w(M/D),q=w((M-m)/D);["x","y","z"].forEach(function(B){return u.position[B]=q[B]});var Z=F_(bn.Vector3,To(["x","y","z"].map(function(B){return O[B]})));u.parent.localToWorld(Z),u.lookAt(Z)}}})}(),function s(){var o=si(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(a){var l=a.__photonsObj&&a.__photonsObj.children,c=a.__singleHopPhotonsObj&&a.__singleHopPhotonsObj.children;if(c&&c.length||l&&l.length){var u=t?a:e.layout.getLinkPosition(e.layout.graph.getLink(a.source,a.target).id),d=u[t?"source":"from"],h=u[t?"target":"to"];if(d&&h&&d.hasOwnProperty("x")&&h.hasOwnProperty("x")){var f=o(a),p=a.__curve?function(m){return a.__curve.getPoint(m)}:function(m){var _=function(D,M,O,q){return M[D]+(O[D]-M[D])*q||0};return{x:_("x",d,h,m),y:_("y",d,h,m),z:_("z",d,h,m)}};[].concat(To(l||[]),To(c||[])).forEach(function(m,_){var w="singleHopPhotons"===m.parent.__linkThreeObjType;if(m.hasOwnProperty("__progressRatio")||(m.__progressRatio=w?0:_/l.length),m.__progressRatio+=f,m.__progressRatio>=1){if(w)return m.parent.remove(m),void Yw(m);m.__progressRatio=m.__progressRatio%1}var M=p(m.__progressRatio);["x","y","z"].forEach(function(O){return m.position[O]=M[O]})})}}})}(),this},emitParticle:function(e,t){if(t&&e.graphData.links.includes(t)){if(!t.__singleHopPhotonsObj){var i=new bn.Group;i.__linkThreeObjType="singleHopPhotons",t.__singleHopPhotonsObj=i,e.graphScene.add(i)}var r=si(e.linkDirectionalParticleWidth),s=Math.ceil(10*r(t))/10/2,o=e.linkDirectionalParticleResolution,a=new bn.SphereGeometry(s,o,o),l=si(e.linkColor),u=si(e.linkDirectionalParticleColor)(t)||l(t)||"#f0f0f0",d=new bn.Color(Uf(u)),f=new bn.MeshLambertMaterial({color:d,transparent:!0,opacity:3*e.linkOpacity});t.__singleHopPhotonsObj.add(new bn.Mesh(a,f))}return this},getGraphBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!e.initialised)return null;var i=function r(s){var o=[];if(s.geometry){s.geometry.computeBoundingBox();var a=new bn.Box3;a.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),o.push(a)}return o.concat.apply(o,To((s.children||[]).filter(function(l){return!l.hasOwnProperty("__graphObjType")||"node"===l.__graphObjType&&t(l.__data)}).map(r)))}(e.graphScene);return i.length?Object.assign.apply(Object,To(["x","y","z"].map(function(r){return $w({},r,[aee(i,function(s){return s.min[r]}),lee(i,function(s){return s.max[r]})])}))):null}},stateInit:function(){return{d3ForceLayout:YJ().force("link",KJ()).force("charge",WZ()).force("center",$Z()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.graphScene=e},update:function(e,t){var i=function(lt){return lt.some(function(ze){return t.hasOwnProperty(ze)})};if(e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&i(["nodeAutoColorBy","graphData","nodeColor"])&&Uk(e.graphData.nodes,si(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&i(["linkAutoColorBy","graphData","linkColor"])&&Uk(e.graphData.links,si(e.linkAutoColorBy),e.linkColor),e._flushObjects||i(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var r=si(e.nodeThreeObject),s=si(e.nodeThreeObjectExtend),o=si(e.nodeVal),a=si(e.nodeColor),l=si(e.nodeVisibility),c={},u={};Vf(e.graphData.nodes.filter(l),e.graphScene,{purge:e._flushObjects||i(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(lt){return"node"===lt.__graphObjType},createObj:function(lt){var rt,ze=r(lt),Ve=s(lt);return ze&&e.nodeThreeObject===ze&&(ze=ze.clone()),ze&&!Ve?rt=ze:((rt=new bn.Mesh).__graphDefaultObj=!0,ze&&Ve&&rt.add(ze)),rt.__graphObjType="node",rt},updateObj:function(lt,ze){if(lt.__graphDefaultObj){var Ve=o(ze)||1,rt=Math.cbrt(Ve)*e.nodeRelSize,Tt=e.nodeResolution;(!lt.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||lt.geometry.parameters.radius!==rt||lt.geometry.parameters.widthSegments!==Tt)&&(c.hasOwnProperty(Ve)||(c[Ve]=new bn.SphereGeometry(rt,Tt,Tt)),lt.geometry.dispose(),lt.geometry=c[Ve]);var mt=a(ze),Wt=new bn.Color(Uf(mt||"#ffffaa")),ct=e.nodeOpacity*Xw(mt);("MeshLambertMaterial"!==lt.material.type||!lt.material.color.equals(Wt)||lt.material.opacity!==ct)&&(u.hasOwnProperty(mt)||(u[mt]=new bn.MeshLambertMaterial({color:Wt,transparent:!0,opacity:ct})),lt.material.dispose(),lt.material=u[mt])}}})}if(e._flushObjects||i(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var d=si(e.linkThreeObject),h=si(e.linkThreeObjectExtend),f=si(e.linkMaterial),p=si(e.linkVisibility),g=si(e.linkColor),m=si(e.linkWidth),_={},w={},D={},M=e.graphData.links.filter(p);if(Vf(M,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||i(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(lt){return"link"===lt.__graphObjType},exitObj:function(lt){var ze=lt.__data&&lt.__data.__singleHopPhotonsObj;ze&&(ze.parent.remove(ze),Yw(ze),delete lt.__data.__singleHopPhotonsObj)},createObj:function(lt){var rt,Wt,ze=d(lt),Ve=h(lt);if(ze&&e.linkThreeObject===ze&&(ze=ze.clone()),!ze||Ve)if(m(lt))rt=new bn.Mesh;else{var mt=new bn.BufferGeometry;mt[zk]("position",new bn.BufferAttribute(new Float32Array(6),3)),rt=new bn.Line(mt)}return ze?Ve?((Wt=new bn.Group).__graphDefaultObj=!0,Wt.add(rt),Wt.add(ze)):Wt=ze:(Wt=rt).__graphDefaultObj=!0,Wt.renderOrder=10,Wt.__graphObjType="link",Wt},updateObj:function(lt,ze){if(lt.__graphDefaultObj){var Ve=lt.children.length?lt.children[0]:lt,rt=Math.ceil(10*m(ze))/10,Tt=!!rt;if(Tt){var mt=rt/2,Wt=e.linkResolution;if(!Ve.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||Ve.geometry.parameters.radiusTop!==mt||Ve.geometry.parameters.radialSegments!==Wt){if(!_.hasOwnProperty(rt)){var ct=new bn.CylinderGeometry(mt,mt,1,Wt,1,!1);ct[L_]((new bn.Matrix4).makeTranslation(0,.5,0)),ct[L_]((new bn.Matrix4).makeRotationX(Math.PI/2)),_[rt]=ct}Ve.geometry.dispose(),Ve.geometry=_[rt]}}var _t=f(ze);if(_t)Ve.material=_t;else{var Mt=g(ze),Xt=new bn.Color(Uf(Mt||"#f0f0f0")),It=e.linkOpacity*Xw(Mt),an=Tt?"MeshLambertMaterial":"LineBasicMaterial";if(Ve.material.type!==an||!Ve.material.color.equals(Xt)||Ve.material.opacity!==It){var un=Tt?w:D;un.hasOwnProperty(Mt)||(un[Mt]=new bn[an]({color:Xt,transparent:It<1,opacity:It,depthWrite:It>=1})),Ve.material.dispose(),Ve.material=un[Mt]}}}}}),e.linkDirectionalArrowLength||t.hasOwnProperty("linkDirectionalArrowLength")){var O=si(e.linkDirectionalArrowLength),q=si(e.linkDirectionalArrowColor);Vf(M.filter(O),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(lt){return"arrow"===lt.__linkThreeObjType},createObj:function(){var lt=new bn.Mesh(void 0,new bn.MeshLambertMaterial({transparent:!0}));return lt.__linkThreeObjType="arrow",lt},updateObj:function(lt,ze){var Ve=O(ze),rt=e.linkDirectionalArrowResolution;if(!lt.geometry.type.match(/^Cone(Buffer)?Geometry$/)||lt.geometry.parameters.height!==Ve||lt.geometry.parameters.radialSegments!==rt){var Tt=new bn.ConeGeometry(.25*Ve,Ve,rt);Tt.translate(0,Ve/2,0),Tt.rotateX(Math.PI/2),lt.geometry.dispose(),lt.geometry=Tt}var mt=q(ze)||g(ze)||"#f0f0f0";lt.material.color=new bn.Color(Uf(mt)),lt.material.opacity=3*e.linkOpacity*Xw(mt)}})}if(e.linkDirectionalParticles||t.hasOwnProperty("linkDirectionalParticles")){var Z=si(e.linkDirectionalParticles),B=si(e.linkDirectionalParticleWidth),ee=si(e.linkDirectionalParticleColor),me={},xe={};Vf(M.filter(Z),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(lt){return"photons"===lt.__linkThreeObjType},createObj:function(){var lt=new bn.Group;return lt.__linkThreeObjType="photons",lt},updateObj:function(lt,ze){var Wt,Ve=Math.round(Math.abs(Z(ze))),rt=!!lt.children.length&&lt.children[0],Tt=Math.ceil(10*B(ze))/10/2,mt=e.linkDirectionalParticleResolution;rt&&rt.geometry.parameters.radius===Tt&&rt.geometry.parameters.widthSegments===mt?Wt=rt.geometry:(xe.hasOwnProperty(Tt)||(xe[Tt]=new bn.SphereGeometry(Tt,mt,mt)),Wt=xe[Tt],rt&&rt.geometry.dispose());var Xt,ct=ee(ze)||g(ze)||"#f0f0f0",_t=new bn.Color(Uf(ct)),Mt=3*e.linkOpacity;rt&&rt.material.color.equals(_t)&&rt.material.opacity===Mt?Xt=rt.material:(me.hasOwnProperty(ct)||(me[ct]=new bn.MeshLambertMaterial({color:_t,transparent:!0,opacity:Mt})),Xt=me[ct],rt&&rt.material.dispose()),Vf(To(new Array(Ve)).map(function(It,an){return{idx:an}}),lt,{idAccessor:function(an){return an.idx},createObj:function(){return new bn.Mesh(Wt,Xt)},updateObj:function(an){an.geometry=Wt,an.material=Xt}})}})}}if(e._flushObjects=!1,i(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(ot){ot.source=ot[e.linkSource],ot.target=ot[e.linkTarget]});var it,qe="ngraph"!==e.forceEngine;if(qe){(it=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var ke=e.d3ForceLayout.force("link");ke&&ke.id(function(ot){return ot[e.nodeId]}).links(e.graphData.links);var et=e.dagMode&&function Ete(n,e){var i=n.links,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=r.nodeFilter,o=void 0===s?function(){return!0}:s,a=r.onLoopError,l=void 0===a?function(f){throw"Invalid DAG structure! Found cycle in node path: ".concat(f.join(" -> "),".")}:a,c={};n.nodes.forEach(function(f){return c[e(f)]={data:f,out:[],depth:-1,skip:!o(f)}}),i.forEach(function(f){var g=f.target,m=M(f.source),_=M(g);if(!c.hasOwnProperty(m))throw"Missing source node with id: ".concat(m);if(!c.hasOwnProperty(_))throw"Missing target node with id: ".concat(_);function M(O){return"object"===Ww(O)?e(O):O}c[m].out.push(c[_])});var u=[];h(Object.values(c));var d=Object.assign.apply(Object,[{}].concat(To(Object.entries(c).filter(function(f){return!Lk(f,2)[1].skip}).map(function(f){var p=Lk(f,2);return $w({},p[0],p[1].depth)}))));return d;function h(f){for(var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m=function(){var O=f[_];if(-1!==p.indexOf(O)){var q=[].concat(To(p.slice(p.indexOf(O))),[O]).map(function(Z){return e(Z.data)});return u.some(function(Z){return Z.length===q.length&&Z.every(function(B,ee){return B===q[ee]})})||(u.push(q),l(q)),"continue"}g>O.depth&&(O.depth=g,h(O.out,[].concat(To(p),[O]),g+(O.skip?0:1)))},_=0,w=f.length;_<w;_++)m()}}(e.graphData,function(ot){return ot[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),Ce=Math.max.apply(Math,To(Object.values(et||[]))),Ue=e.dagLevelDistance||e.graphData.nodes.length/(Ce||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(e.dagMode){var Xe=function(lt,ze){return function(Ve){return lt?(et[Ve[e.nodeId]]-Ce/2)*Ue*(ze?-1:1):void 0}},We=Xe(-1!==["lr","rl"].indexOf(e.dagMode),"rl"===e.dagMode),tt=Xe(-1!==["td","bu"].indexOf(e.dagMode),"td"===e.dagMode),wt=Xe(-1!==["zin","zout"].indexOf(e.dagMode),"zout"===e.dagMode);e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(ot){ot.fx=We(ot),ot.fy=tt(ot),ot.fz=wt(ot)})}e.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?function qZ(n,e,t,i){var r,s,a,l,o=Na(.1);function c(d){for(var h=0,f=r.length;h<f;++h){var p=r[h],g=p.x-e||1e-6,m=(p.y||0)-t||1e-6,_=(p.z||0)-i||1e-6,w=Math.sqrt(g*g+m*m+_*_),D=(l[h]-w)*a[h]*d/w;p.vx+=g*D,s>1&&(p.vy+=m*D),s>2&&(p.vz+=_*D)}}function u(){if(r){var d,h=r.length;for(a=new Array(h),l=new Array(h),d=0;d<h;++d)l[d]=+n(r[d],d,r),a[d]=isNaN(l[d])?0:+o(r[d],d,r)}}return"function"!=typeof n&&(n=Na(+n)),null==e&&(e=0),null==t&&(t=0),null==i&&(i=0),c.initialize=function(d,...h){r=d,s=h.find(f=>[1,2,3].includes(f))||2,u()},c.strength=function(d){return arguments.length?(o="function"==typeof d?d:Na(+d),u(),c):o},c.radius=function(d){return arguments.length?(n="function"==typeof d?d:Na(+d),u(),c):n},c.x=function(d){return arguments.length?(e=+d,c):e},c.y=function(d){return arguments.length?(t=+d,c):t},c.z=function(d){return arguments.length?(i=+d,c):i},c}(function(ot){var lt=et[ot[e.nodeId]]||-1;return("radialin"===e.dagMode?Ce-lt:lt)*Ue}).strength(function(ot){return e.dagNodeFilter(ot)?1:0}):null)}else{var ut=Hk.graph();e.graphData.nodes.forEach(function(ot){ut.addNode(ot[e.nodeId])}),e.graphData.links.forEach(function(ot){ut.addLink(ot.source,ot.target)}),(it=Hk.forcelayout(ut,Nk({dimensions:e.numDimensions},e.ngraphPhysics))).graph=ut}for(var Et=0;Et<e.warmupTicks&&!(qe&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);Et++)it[qe?"tick":"step"]();e.layout=it,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}}),jk=function Pte(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(r){hte(o,r);var s=mte(o);function o(){var a;ute(this,o);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return(a=s.call.apply(s,[this].concat(c))).__kapsuleInstance=n().apply(void 0,[].concat(To(t?[Fk(a)]:[]),c)),a}return dte(o)}(e);return Object.keys(n()).forEach(function(r){return i.prototype[r]=function(){var s,o=(s=this.__kapsuleInstance)[r].apply(s,arguments);return o===this.__kapsuleInstance?this:o}}),i}(Dte,(window.THREE?window.THREE:{Group:fc}).Group,!0);const Kw={type:"change"},Qw={type:"start"},Jw={type:"end"};class Rte extends mo{constructor(e,t){super(),void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const i=this;this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:qo.ROTATE,MIDDLE:qo.DOLLY,RIGHT:qo.PAN},this.target=new re;const s=1e-6,o=new re;let a=1,l=-1,c=-1,u=0,d=0,h=0;const f=new re,p=new ht,g=new ht,m=new re,_=new ht,w=new ht,D=new ht,M=new ht,O=[],q={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const Ve=i.domElement.getBoundingClientRect(),rt=i.domElement.ownerDocument.documentElement;i.screen.left=Ve.left+window.pageXOffset-rt.clientLeft,i.screen.top=Ve.top+window.pageYOffset-rt.clientTop,i.screen.width=Ve.width,i.screen.height=Ve.height};const Z=function(){const Ve=new ht;return function(Tt,mt){return Ve.set((Tt-i.screen.left)/i.screen.width,(mt-i.screen.top)/i.screen.height),Ve}}(),B=function(){const Ve=new ht;return function(Tt,mt){return Ve.set((Tt-.5*i.screen.width-i.screen.left)/(.5*i.screen.width),(i.screen.height+2*(i.screen.top-mt))/i.screen.width),Ve}}();function ee(Ve){!1!==i.enabled&&(0===O.length&&(i.domElement.setPointerCapture(Ve.pointerId),i.domElement.addEventListener("pointermove",me),i.domElement.addEventListener("pointerup",xe)),function Et(Ve){O.push(Ve)}(Ve),"touch"===Ve.pointerType?function We(Ve){if(1===(lt(Ve),O.length))l=3,g.copy(B(O[0].pageX,O[0].pageY)),p.copy(g);else{l=4;const rt=O[0].pageX-O[1].pageX,Tt=O[0].pageY-O[1].pageY;d=u=Math.sqrt(rt*rt+Tt*Tt),D.copy(Z((O[0].pageX+O[1].pageX)/2,(O[0].pageY+O[1].pageY)/2)),M.copy(D)}i.dispatchEvent(Qw)}(Ve):function et(Ve){if(-1===l)switch(Ve.button){case i.mouseButtons.LEFT:l=0;break;case i.mouseButtons.MIDDLE:l=1;break;case i.mouseButtons.RIGHT:l=2}const rt=-1!==c?c:l;0!==rt||i.noRotate?1!==rt||i.noZoom?2===rt&&!i.noPan&&(D.copy(Z(Ve.pageX,Ve.pageY)),M.copy(D)):(_.copy(Z(Ve.pageX,Ve.pageY)),w.copy(_)):(g.copy(B(Ve.pageX,Ve.pageY)),p.copy(g)),i.dispatchEvent(Qw)}(Ve))}function me(Ve){!1!==i.enabled&&("touch"===Ve.pointerType?function tt(Ve){if(1===(lt(Ve),O.length))p.copy(g),g.copy(B(Ve.pageX,Ve.pageY));else{const rt=function ze(Ve){return q[(Ve.pointerId===O[0].pointerId?O[1]:O[0]).pointerId]}(Ve),Tt=Ve.pageX-rt.x,mt=Ve.pageY-rt.y;d=Math.sqrt(Tt*Tt+mt*mt),M.copy(Z((Ve.pageX+rt.x)/2,(Ve.pageY+rt.y)/2))}}(Ve):function Ce(Ve){const rt=-1!==c?c:l;0!==rt||i.noRotate?1!==rt||i.noZoom?2===rt&&!i.noPan&&M.copy(Z(Ve.pageX,Ve.pageY)):w.copy(Z(Ve.pageX,Ve.pageY)):(p.copy(g),g.copy(B(Ve.pageX,Ve.pageY)))}(Ve))}function xe(Ve){!1!==i.enabled&&("touch"===Ve.pointerType?function wt(Ve){switch(O.length){case 0:l=-1;break;case 1:l=3,g.copy(B(Ve.pageX,Ve.pageY)),p.copy(g);break;case 2:l=4,g.copy(B(Ve.pageX-p.x,Ve.pageY-p.y)),p.copy(g)}i.dispatchEvent(Jw)}(Ve):function Ue(){l=-1,i.dispatchEvent(Jw)}(),ot(Ve),0===O.length&&(i.domElement.releasePointerCapture(Ve.pointerId),i.domElement.removeEventListener("pointermove",me),i.domElement.removeEventListener("pointerup",xe)))}function qe(Ve){ot(Ve)}function it(Ve){!1!==i.enabled&&(window.removeEventListener("keydown",it),-1===c&&(Ve.code!==i.keys[0]||i.noRotate?Ve.code!==i.keys[1]||i.noZoom?Ve.code===i.keys[2]&&!i.noPan&&(c=2):c=1:c=0))}function ke(){!1!==i.enabled&&(c=-1,window.addEventListener("keydown",it))}function Xe(Ve){if(!1!==i.enabled&&!0!==i.noZoom){switch(Ve.preventDefault(),Ve.deltaMode){case 2:_.y-=.025*Ve.deltaY;break;case 1:_.y-=.01*Ve.deltaY;break;default:_.y-=25e-5*Ve.deltaY}i.dispatchEvent(Qw),i.dispatchEvent(Jw)}}function ut(Ve){!1!==i.enabled&&Ve.preventDefault()}function ot(Ve){delete q[Ve.pointerId];for(let rt=0;rt<O.length;rt++)if(O[rt].pointerId==Ve.pointerId)return void O.splice(rt,1)}function lt(Ve){let rt=q[Ve.pointerId];void 0===rt&&(rt=new ht,q[Ve.pointerId]=rt),rt.set(Ve.pageX,Ve.pageY)}this.rotateCamera=function(){const Ve=new re,rt=new wr,Tt=new re,mt=new re,Wt=new re,ct=new re;return function(){ct.set(g.x-p.x,g.y-p.y,0);let Mt=ct.length();Mt?(f.copy(i.object.position).sub(i.target),Tt.copy(f).normalize(),mt.copy(i.object.up).normalize(),Wt.crossVectors(mt,Tt).normalize(),mt.setLength(g.y-p.y),Wt.setLength(g.x-p.x),ct.copy(mt.add(Wt)),Ve.crossVectors(ct,f).normalize(),Mt*=i.rotateSpeed,rt.setFromAxisAngle(Ve,Mt),f.applyQuaternion(rt),i.object.up.applyQuaternion(rt),m.copy(Ve),h=Mt):!i.staticMoving&&h&&(h*=Math.sqrt(1-i.dynamicDampingFactor),f.copy(i.object.position).sub(i.target),rt.setFromAxisAngle(m,h),f.applyQuaternion(rt),i.object.up.applyQuaternion(rt)),p.copy(g)}}(),this.zoomCamera=function(){let Ve;4===l?(Ve=u/d,u=d,i.object.isPerspectiveCamera?f.multiplyScalar(Ve):i.object.isOrthographicCamera?(i.object.zoom/=Ve,i.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(Ve=1+(w.y-_.y)*i.zoomSpeed,1!==Ve&&Ve>0&&(i.object.isPerspectiveCamera?f.multiplyScalar(Ve):i.object.isOrthographicCamera?(i.object.zoom/=Ve,i.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),i.staticMoving?_.copy(w):_.y+=(w.y-_.y)*this.dynamicDampingFactor)},this.panCamera=function(){const Ve=new ht,rt=new re,Tt=new re;return function(){if(Ve.copy(M).sub(D),Ve.lengthSq()){if(i.object.isOrthographicCamera){const ct=(i.object.top-i.object.bottom)/i.object.zoom/i.domElement.clientWidth;Ve.x*=(i.object.right-i.object.left)/i.object.zoom/i.domElement.clientWidth,Ve.y*=ct}Ve.multiplyScalar(f.length()*i.panSpeed),Tt.copy(f).cross(i.object.up).setLength(Ve.x),Tt.add(rt.copy(i.object.up).setLength(Ve.y)),i.object.position.add(Tt),i.target.add(Tt),i.staticMoving?D.copy(M):D.add(Ve.subVectors(M,D).multiplyScalar(i.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!i.noZoom||!i.noPan)&&(f.lengthSq()>i.maxDistance*i.maxDistance&&(i.object.position.addVectors(i.target,f.setLength(i.maxDistance)),_.copy(w)),f.lengthSq()<i.minDistance*i.minDistance&&(i.object.position.addVectors(i.target,f.setLength(i.minDistance)),_.copy(w)))},this.update=function(){f.subVectors(i.object.position,i.target),i.noRotate||i.rotateCamera(),i.noZoom||i.zoomCamera(),i.noPan||i.panCamera(),i.object.position.addVectors(i.target,f),i.object.isPerspectiveCamera?(i.checkDistances(),i.object.lookAt(i.target),o.distanceToSquared(i.object.position)>s&&(i.dispatchEvent(Kw),o.copy(i.object.position))):i.object.isOrthographicCamera?(i.object.lookAt(i.target),(o.distanceToSquared(i.object.position)>s||a!==i.object.zoom)&&(i.dispatchEvent(Kw),o.copy(i.object.position),a=i.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=-1,c=-1,i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.up.copy(i.up0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),f.subVectors(i.object.position,i.target),i.object.lookAt(i.target),i.dispatchEvent(Kw),o.copy(i.object.position),a=i.object.zoom},this.dispose=function(){i.domElement.removeEventListener("contextmenu",ut),i.domElement.removeEventListener("pointerdown",ee),i.domElement.removeEventListener("pointercancel",qe),i.domElement.removeEventListener("wheel",Xe),i.domElement.removeEventListener("pointermove",me),i.domElement.removeEventListener("pointerup",xe),window.removeEventListener("keydown",it),window.removeEventListener("keyup",ke)},this.domElement.addEventListener("contextmenu",ut),this.domElement.addEventListener("pointerdown",ee),this.domElement.addEventListener("pointercancel",qe),this.domElement.addEventListener("wheel",Xe,{passive:!1}),window.addEventListener("keydown",it),window.addEventListener("keyup",ke),this.handleResize(),this.update()}}const Gk={type:"change"},Zw={type:"start"},Wk={type:"end"};class Nte extends mo{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new re,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:qo.ROTATE,MIDDLE:qo.DOLLY,RIGHT:qo.PAN},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(de){de.addEventListener("keydown",Jn),this._domElementKeyEvents=de},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Gk),i.update(),s=r.NONE},this.update=function(){const de=new re,St=(new wr).setFromUnitVectors(e.up,new re(0,1,0)),Vt=St.clone().invert(),Ut=new re,Ne=new wr,Ht=2*Math.PI;return function(){const wn=i.object.position;de.copy(wn).sub(i.target),de.applyQuaternion(St),a.setFromVector3(de),i.autoRotate&&s===r.NONE&&ee(function Z(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Qt=i.minAzimuthAngle,hn=i.maxAzimuthAngle;return isFinite(Qt)&&isFinite(hn)&&(Qt<-Math.PI?Qt+=Ht:Qt>Math.PI&&(Qt-=Ht),hn<-Math.PI?hn+=Ht:hn>Math.PI&&(hn-=Ht),a.theta=Qt<=hn?Math.max(Qt,Math.min(hn,a.theta)):a.theta>(Qt+hn)/2?Math.max(Qt,a.theta):Math.min(hn,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),de.setFromSpherical(a),de.applyQuaternion(Vt),wn.copy(i.target).add(de),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(d||Ut.distanceToSquared(i.object.position)>o||8*(1-Ne.dot(i.object.quaternion))>o)&&(i.dispatchEvent(Gk),Ut.copy(i.object.position),Ne.copy(i.object.quaternion),d=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",at),i.domElement.removeEventListener("pointerdown",Mt),i.domElement.removeEventListener("pointercancel",an),i.domElement.removeEventListener("wheel",Xn),i.domElement.removeEventListener("pointermove",Xt),i.domElement.removeEventListener("pointerup",It),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",Jn)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new Dw,l=new Dw;let c=1;const u=new re;let d=!1;const h=new ht,f=new ht,p=new ht,g=new ht,m=new ht,_=new ht,w=new ht,D=new ht,M=new ht,O=[],q={};function B(){return Math.pow(.95,i.zoomSpeed)}function ee(de){l.theta-=de}function me(de){l.phi-=de}const xe=function(){const de=new re;return function(Vt,Ut){de.setFromMatrixColumn(Ut,0),de.multiplyScalar(-Vt),u.add(de)}}(),qe=function(){const de=new re;return function(Vt,Ut){!0===i.screenSpacePanning?de.setFromMatrixColumn(Ut,1):(de.setFromMatrixColumn(Ut,0),de.crossVectors(i.object.up,de)),de.multiplyScalar(Vt),u.add(de)}}(),it=function(){const de=new re;return function(Vt,Ut){const Ne=i.domElement;if(i.object.isPerspectiveCamera){de.copy(i.object.position).sub(i.target);let Bt=de.length();Bt*=Math.tan(i.object.fov/2*Math.PI/180),xe(2*Vt*Bt/Ne.clientHeight,i.object.matrix),qe(2*Ut*Bt/Ne.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(xe(Vt*(i.object.right-i.object.left)/i.object.zoom/Ne.clientWidth,i.object.matrix),qe(Ut*(i.object.top-i.object.bottom)/i.object.zoom/Ne.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function ke(de){i.object.isPerspectiveCamera?c/=de:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*de)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function et(de){i.object.isPerspectiveCamera?c*=de:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/de)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Ce(de){h.set(de.clientX,de.clientY)}function Xe(de){g.set(de.clientX,de.clientY)}function ot(){1===O.length?h.set(O[0].pageX,O[0].pageY):h.set(.5*(O[0].pageX+O[1].pageX),.5*(O[0].pageY+O[1].pageY))}function lt(){1===O.length?g.set(O[0].pageX,O[0].pageY):g.set(.5*(O[0].pageX+O[1].pageX),.5*(O[0].pageY+O[1].pageY))}function ze(){const de=O[0].pageX-O[1].pageX,St=O[0].pageY-O[1].pageY,Vt=Math.sqrt(de*de+St*St);w.set(0,Vt)}function Tt(de){if(1==O.length)f.set(de.pageX,de.pageY);else{const Vt=mn(de);f.set(.5*(de.pageX+Vt.x),.5*(de.pageY+Vt.y))}p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const St=i.domElement;ee(2*Math.PI*p.x/St.clientHeight),me(2*Math.PI*p.y/St.clientHeight),h.copy(f)}function mt(de){if(1===O.length)m.set(de.pageX,de.pageY);else{const St=mn(de);m.set(.5*(de.pageX+St.x),.5*(de.pageY+St.y))}_.subVectors(m,g).multiplyScalar(i.panSpeed),it(_.x,_.y),g.copy(m)}function Wt(de){const St=mn(de),Vt=de.pageX-St.x,Ut=de.pageY-St.y,Ne=Math.sqrt(Vt*Vt+Ut*Ut);D.set(0,Ne),M.set(0,Math.pow(D.y/w.y,i.zoomSpeed)),ke(M.y),w.copy(D)}function Mt(de){!1!==i.enabled&&(0===O.length&&(i.domElement.setPointerCapture(de.pointerId),i.domElement.addEventListener("pointermove",Xt),i.domElement.addEventListener("pointerup",It)),function Dt(de){O.push(de)}(de),"touch"===de.pointerType?function ve(de){switch($t(de),O.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;ot(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;lt(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Ve(){i.enableZoom&&ze(),i.enablePan&&lt()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function rt(){i.enableZoom&&ze(),i.enableRotate&&ot()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Zw)}(de):function un(de){let St;switch(de.button){case 0:St=i.mouseButtons.LEFT;break;case 1:St=i.mouseButtons.MIDDLE;break;case 2:St=i.mouseButtons.RIGHT;break;default:St=-1}switch(St){case qo.DOLLY:if(!1===i.enableZoom)return;(function Ue(de){w.set(de.clientX,de.clientY)})(de),s=r.DOLLY;break;case qo.ROTATE:if(de.ctrlKey||de.metaKey||de.shiftKey){if(!1===i.enablePan)return;Xe(de),s=r.PAN}else{if(!1===i.enableRotate)return;Ce(de),s=r.ROTATE}break;case qo.PAN:if(de.ctrlKey||de.metaKey||de.shiftKey){if(!1===i.enableRotate)return;Ce(de),s=r.ROTATE}else{if(!1===i.enablePan)return;Xe(de),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Zw)}(de))}function Xt(de){!1!==i.enabled&&("touch"===de.pointerType?function se(de){switch($t(de),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Tt(de),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;mt(de),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function ct(de){i.enableZoom&&Wt(de),i.enablePan&&mt(de)})(de),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function _t(de){i.enableZoom&&Wt(de),i.enableRotate&&Tt(de)})(de),i.update();break;default:s=r.NONE}}(de):function dn(de){if(!1!==i.enabled)switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function We(de){f.set(de.clientX,de.clientY),p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const St=i.domElement;ee(2*Math.PI*p.x/St.clientHeight),me(2*Math.PI*p.y/St.clientHeight),h.copy(f),i.update()}(de);break;case r.DOLLY:if(!1===i.enableZoom)return;!function tt(de){D.set(de.clientX,de.clientY),M.subVectors(D,w),M.y>0?ke(B()):M.y<0&&et(B()),w.copy(D),i.update()}(de);break;case r.PAN:if(!1===i.enablePan)return;!function wt(de){m.set(de.clientX,de.clientY),_.subVectors(m,g).multiplyScalar(i.panSpeed),it(_.x,_.y),g.copy(m),i.update()}(de)}}(de))}function It(de){kt(de),0===O.length&&(i.domElement.releasePointerCapture(de.pointerId),i.domElement.removeEventListener("pointermove",Xt),i.domElement.removeEventListener("pointerup",It)),i.dispatchEvent(Wk),s=r.NONE}function an(de){kt(de)}function Xn(de){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(de.preventDefault(),i.dispatchEvent(Zw),function ut(de){de.deltaY<0?et(B()):de.deltaY>0&&ke(B()),i.update()}(de),i.dispatchEvent(Wk))}function Jn(de){!1===i.enabled||!1===i.enablePan||function Et(de){let St=!1;switch(de.code){case i.keys.UP:it(0,i.keyPanSpeed),St=!0;break;case i.keys.BOTTOM:it(0,-i.keyPanSpeed),St=!0;break;case i.keys.LEFT:it(i.keyPanSpeed,0),St=!0;break;case i.keys.RIGHT:it(-i.keyPanSpeed,0),St=!0}St&&(de.preventDefault(),i.update())}(de)}function at(de){!1!==i.enabled&&de.preventDefault()}function kt(de){delete q[de.pointerId];for(let St=0;St<O.length;St++)if(O[St].pointerId==de.pointerId)return void O.splice(St,1)}function $t(de){let St=q[de.pointerId];void 0===St&&(St=new ht,q[de.pointerId]=St),St.set(de.pageX,de.pageY)}function mn(de){return q[(de.pointerId===O[0].pointerId?O[1]:O[0]).pointerId]}i.domElement.addEventListener("contextmenu",at),i.domElement.addEventListener("pointerdown",Mt),i.domElement.addEventListener("pointercancel",an),i.domElement.addEventListener("wheel",Xn,{passive:!1}),this.update()}}const Ite={type:"change"};class kte extends mo{constructor(e,t){super(),void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const i=this,r=1e-6,s=new wr,o=new re;this.tmpQuaternion=new wr,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new re(0,0,0),this.rotationVector=new re(0,0,0),this.keydown=function(h){if(!h.altKey){switch(h.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(h){switch(h.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(h){if(this.dragToLook)this.mouseStatus++;else{switch(h.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(h){if(!this.dragToLook||this.mouseStatus>0){const f=this.getContainerDimensions(),p=f.size[0]/2,g=f.size[1]/2;this.moveState.yawLeft=-(h.pageX-f.offset[0]-p)/p,this.moveState.pitchDown=(h.pageY-f.offset[1]-g)/g,this.updateRotationVector()}},this.mouseup=function(h){if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(h.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(h){const f=h*i.movementSpeed,p=h*i.rollSpeed;i.object.translateX(i.moveVector.x*f),i.object.translateY(i.moveVector.y*f),i.object.translateZ(i.moveVector.z*f),i.tmpQuaternion.set(i.rotationVector.x*p,i.rotationVector.y*p,i.rotationVector.z*p,1).normalize(),i.object.quaternion.multiply(i.tmpQuaternion),(o.distanceToSquared(i.object.position)>r||8*(1-s.dot(i.object.quaternion))>r)&&(i.dispatchEvent(Ite),s.copy(i.object.quaternion),o.copy(i.object.position))},this.updateMovementVector=function(){const h=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-h+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",$k),this.domElement.removeEventListener("mousedown",l),this.domElement.removeEventListener("mousemove",a),this.domElement.removeEventListener("mouseup",c),window.removeEventListener("keydown",u),window.removeEventListener("keyup",d)};const a=this.mousemove.bind(this),l=this.mousedown.bind(this),c=this.mouseup.bind(this),u=this.keydown.bind(this),d=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",$k),this.domElement.addEventListener("mousemove",a),this.domElement.addEventListener("mousedown",l),this.domElement.addEventListener("mouseup",c),window.addEventListener("keydown",u),window.addEventListener("keyup",d),this.updateMovementVector(),this.updateRotationVector()}}function $k(n){n.preventDefault()}const qk={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class B_{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const Fte=new ff(-1,1,1,-1,0,1),ex=new Hn;ex.setAttribute("position",new en([-1,3,0,-1,-1,0,3,-1,0],3)),ex.setAttribute("uv",new en([0,2,0,0,2,0],2));class Lte{constructor(e){this._mesh=new Vr(ex,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Fte)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Yk extends B_{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof So?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=jR.clone(e.uniforms),this.material=new So({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Lte(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class Xk extends B_{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),s=e.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class Bte extends B_{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Vte{constructor(e,t){if(this.renderer=e,void 0===t){const i=e.getSize(new ht);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new Ma(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===qk&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Yk&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Yk(qk),this.clock=new Mw}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Xk&&(o instanceof Xk?i=!0:o instanceof Bte&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new ht);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new ff(-1,1,1,-1,0,1);const tx=new Hn;tx.setAttribute("position",new en([-1,3,0,-1,-1,0,3,-1,0],3)),tx.setAttribute("uv",new en([0,2,0,0,2,0],2));class Hte extends B_{constructor(e,t,i,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=void 0!==s?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Zt}render(e,t,i){const r=e.autoClear;let s,o;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=r}}function nx(){return nx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nx.apply(this,arguments)}function Hf(n,e){return Hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Hf(n,e)}function ix(n){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ix(n)}function Wte(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function V_(n,e,t){return V_=Wte()?Reflect.construct.bind():function(r,s,o){var a=[null];a.push.apply(a,s);var c=new(Function.bind.apply(r,a));return o&&Hf(c,o.prototype),c},V_.apply(null,arguments)}function rx(n){var e="function"==typeof Map?new Map:void 0;return rx=function(i){if(null===i||!function Gte(n){return-1!==Function.toString.call(n).indexOf("[native code]")}(i))return i;if("function"!=typeof i)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return V_(i,arguments,ix(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Hf(r,i)},rx(n)}var pn=function(n){function e(t){return function zte(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return function jte(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Hf(n,e)}(e,n),e}(rx(Error));function ax(n){return Math.round(255*n)}function Ene(n,e,t){return ax(n)+","+ax(e)+","+ax(t)}function jf(n,e,t,i){if(void 0===i&&(i=Ene),0===e)return i(t,t,t);var r=(n%360+360)%360/60,s=(1-Math.abs(2*t-1))*e,o=s*(1-Math.abs(r%2-1)),a=0,l=0,c=0;r>=0&&r<1?(a=s,l=o):r>=1&&r<2?(a=o,l=s):r>=2&&r<3?(l=s,c=o):r>=3&&r<4?(l=o,c=s):r>=4&&r<5?(a=o,c=s):r>=5&&r<6&&(a=s,c=o);var u=t-s/2;return i(a+u,l+u,c+u)}var uF={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Dne=/^#[a-fA-F0-9]{6}$/,Pne=/^#[a-fA-F0-9]{8}$/,One=/^#[a-fA-F0-9]{3}$/,Rne=/^#[a-fA-F0-9]{4}$/,lx=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,Nne=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Ine=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,kne=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Ba(n){if("string"!=typeof n)throw new pn(3);var e=function Tne(n){if("string"!=typeof n)return n;var e=n.toLowerCase();return uF[e]?"#"+uF[e]:n}(n);if(e.match(Dne))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(Pne)){var t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t}}if(e.match(One))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(Rne)){var i=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:i}}var r=lx.exec(e);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10)};var s=Nne.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var o=Ine.exec(e);if(o){var u="rgb("+jf(parseInt(""+o[1],10),parseInt(""+o[2],10)/100,parseInt(""+o[3],10)/100)+")",d=lx.exec(u);if(!d)throw new pn(4,e,u);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)}}var h=kne.exec(e.substring(0,50));if(h){var m="rgb("+jf(parseInt(""+h[1],10),parseInt(""+h[2],10)/100,parseInt(""+h[3],10)/100)+")",_=lx.exec(m);if(!_)throw new pn(4,e,m);return{red:parseInt(""+_[1],10),green:parseInt(""+_[2],10),blue:parseInt(""+_[3],10),alpha:parseFloat(""+h[4])>1?parseFloat(""+h[4])/100:parseFloat(""+h[4])}}throw new pn(5)}var cx=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function Sc(n){var e=n.toString(16);return 1===e.length?"0"+e:e}function H_(n,e,t){if("number"==typeof n&&"number"==typeof e&&"number"==typeof t)return cx("#"+Sc(n)+Sc(e)+Sc(t));if("object"==typeof n&&void 0===e&&void 0===t)return cx("#"+Sc(n.red)+Sc(n.green)+Sc(n.blue));throw new pn(6)}function fF(n,e,t){return function(){var r=t.concat(Array.prototype.slice.call(arguments));return r.length>=e?n.apply(this,r):fF(n,e,r)}}function jne(n){return fF(n,n.length,[])}function Od(n,e,t){return Math.max(n,Math.min(e,t))}function Gne(n,e){if("transparent"===e)return e;var t=Ba(e);return function Gf(n,e,t,i){if("string"==typeof n&&"number"==typeof e){var r=Ba(n);return"rgba("+r.red+","+r.green+","+r.blue+","+e+")"}if("number"==typeof n&&"number"==typeof e&&"number"==typeof t&&"number"==typeof i)return i>=1?H_(n,e,t):"rgba("+n+","+e+","+t+","+i+")";if("object"==typeof n&&void 0===e&&void 0===t&&void 0===i)return n.alpha>=1?H_(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")";throw new pn(7)}(nx({},t,{alpha:Od(0,1,(100*("number"==typeof t.alpha?t.alpha:1)+100*parseFloat(n))/100)}))}var $f,$ne=jne(Gne),Wf={Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return.5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return 0===n?0:Math.pow(1024,n-1)},Out:function(n){return 1===n?1:1-Math.pow(2,-10*n)},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(2-Math.pow(2,-10*(n-1)))}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){return 0===n?0:1===n?1:-Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)},Out:function(n){return 0===n?0:1===n?1:Math.pow(2,-10*n)*Math.sin(5*(n-.1)*Math.PI)+1},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?-.5*Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)+1}},Back:{In:function(n){var e=1.70158;return n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?n*n*((e+1)*n-e)*.5:.5*((n-=2)*n*((e+1)*n+e)+2)}},Bounce:{In:function(n){return 1-Wf.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?.5*Wf.Bounce.In(2*n):.5*Wf.Bounce.Out(2*n-1)+.5}}};$f="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var n,Cc=$f,bF=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},n.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},n.prototype.update=function(e,t){void 0===e&&(e=Cc()),void 0===t&&(t=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var s=this._tweens[i[r]];s&&!1===s.update(e,!t)&&!t&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),Rd={Linear:function(n,e){var t=n.length-1,i=t*e,r=Math.floor(i),s=Rd.Utils.Linear;return e<0?s(n[0],n[1],i):e>1?s(n[t],n[t-1],t-i):s(n[r],n[r+1>t?t:r+1],i-r)},Bezier:function(n,e){for(var t=0,i=n.length-1,r=Math.pow,s=Rd.Utils.Bernstein,o=0;o<=i;o++)t+=r(1-e,i-o)*r(e,o)*n[o]*s(i,o);return t},CatmullRom:function(n,e){var t=n.length-1,i=t*e,r=Math.floor(i),s=Rd.Utils.CatmullRom;return n[0]===n[t]?(e<0&&(r=Math.floor(i=t*(1+e))),s(n[(r-1+t)%t],n[r],n[(r+1)%t],n[(r+2)%t],i-r)):e<0?n[0]-(s(n[0],n[0],n[1],n[1],-i)-n[0]):e>1?n[t]-(s(n[t],n[t],n[t-1],n[t-1],i-t)-n[t]):s(n[r?r-1:0],n[r],n[t<r+1?t:r+1],n[t<r+2?t:r+2],i-r)},Utils:{Linear:function(n,e,t){return(e-n)*t+n},Bernstein:function(n,e){var t=Rd.Utils.Factorial;return t(n)/t(e)/t(n-e)},Factorial:(n=[1],function(e){var t=1;if(n[e])return n[e];for(var i=e;i>1;i--)t*=i;return n[e]=t,t}),CatmullRom:function(n,e,t,i,r){var s=.5*(t-n),o=.5*(i-e),a=r*r;return(2*e-2*t+s+o)*(r*a)+(-3*e+3*t-2*s-o)*a+s*r+e}}},hx=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),wF=new bF,Zne=function(){function n(e,t){void 0===t&&(t=wF),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Wf.Linear.None,this._interpolationFunction=Rd.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=hx.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},n.prototype.duration=function(e){return this._duration=e,this},n.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?Cc()+parseFloat(e):e:Cc(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},n.prototype._setupProperties=function(e,t,i,r){for(var s in i){var o=e[s],a=Array.isArray(o),l=a?"array":typeof o,c=!a&&Array.isArray(i[s]);if("undefined"!==l&&"function"!==l){if(c){var u=i[s];if(0===u.length)continue;u=u.map(this._handleRelativeValue.bind(this,o)),i[s]=[o].concat(u)}if("object"!==l&&!a||!o||c)void 0===t[s]&&(t[s]=o),a||(t[s]*=1),r[s]=c?i[s].slice().reverse():t[s]||0;else{for(var d in t[s]=a?[]:{},o)t[s][d]=o[d];r[s]=a?[]:{},this._setupProperties(o,t[s],i[s],r[s])}}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(e){return void 0===e&&(e=Cc()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},n.prototype.resume=function(e){return void 0===e&&(e=Cc()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},n.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return this._group=e,this},n.prototype.delay=function(e){return this._delayTime=e,this},n.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return this._yoyo=e,this},n.prototype.easing=function(e){return this._easingFunction=e,this},n.prototype.interpolation=function(e){return this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,t){if(void 0===e&&(e=Cc()),void 0===t&&(t=!0),this._isPaused)return!0;var i,r;if(!this._goToEnd&&!this._isPlaying){if(e>this._startTime+this._duration)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration;var o=this._easingFunction(r=0===this._duration||r>1?1:r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)!this._yoyo&&"string"==typeof this._valuesEnd[i]&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?e+this._repeatDelayTime:e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,l=this._chainedTweens.length;a<l;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,t,i,r){for(var s in i)if(void 0!==t[s]){var o=t[s]||0,a=i[s],l=Array.isArray(e[s]),c=Array.isArray(a);!l&&c?e[s]=this._interpolationFunction(a,r):"object"==typeof a&&a?this._updateProperties(e[s],o,a,r):"number"==typeof(a=this._handleRelativeValue(o,a))&&(e[s]=o+(a-o)*r)}},n.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},n.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof i?this._valuesStartRepeat[e]+parseFloat(i):this._valuesEnd[e],this._valuesEnd[e]=t},n}(),tie=hx.nextId,Jo=wF,nie=Jo.getAll.bind(Jo),iie=Jo.removeAll.bind(Jo),rie=Jo.add.bind(Jo),sie=Jo.remove.bind(Jo),oie=Jo.update.bind(Jo);const qf={Easing:Wf,Group:bF,Interpolation:Rd,now:Cc,Sequence:hx,nextId:tie,Tween:Zne,VERSION:"18.6.4",getAll:nie,removeAll:iie,add:rie,remove:sie,update:oie};function die(n,e,t){return e=function vie(n){var e=function yie(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:String(e)}(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hie(n,e){return function pie(n){if(Array.isArray(n))return n}(n)||function uie(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(n,e)||xF(n,e)||function _ie(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yf(n){return function fie(n){if(Array.isArray(n))return fx(n)}(n)||function gie(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||xF(n)||function mie(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xF(n,e){if(n){if("string"==typeof n)return fx(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fx(n,e)}}function fx(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}!function lie(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}}(".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  top: 0;\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}");var ji=window.THREE?window.THREE:{WebGLRenderer:bN,Scene:class wN extends xr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}},PerspectiveCamera:Nr,Raycaster:EI,TextureLoader:class nJ extends cI{constructor(e){super(e)}load(e,t,i,r){const s=new al,o=new y_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}},Vector2:ht,Vector3:re,Box3:ll,Color:Zt,Mesh:Vr,SphereGeometry:gc,MeshBasicMaterial:fl,BackSide:1,EventDispatcher:mo,MOUSE:qo,Quaternion:wr,Spherical:Dw,Clock:Mw},SF=Uw({props:{width:{default:window.innerWidth,onChange:function(e,t,i){isNaN(e)&&(t.width=i)}},height:{default:window.innerHeight,onChange:function(e,t,i){isNaN(e)&&(t.height=i)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.toolTipElem&&(t.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(e.clock.getDelta()),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)}),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var i=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(s){return e.hoverFilter(s.object)}).sort(function(s,o){return e.hoverOrderComparator(s.object,o.object)}),r=i.length?i[0]:null;t=r?r.object:null,e.intersectionPoint=r?r.point:null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj),e.toolTipElem.innerHTML=t&&si(e.tooltipContent)(t)||"",e.hoverObj=t)}qf.update()}return this},getPointerPos:function(e){var t=e.pointerPos;return{x:t.x,y:t.y}},cameraPosition:function(e,t,i,r){var s=e.camera;if(t&&e.initialised){var o=t,a=i||{x:0,y:0,z:0};if(r){var l=Object.assign({},s.position),c=h();new qf.Tween(l).to(o,r).easing(qf.Easing.Quadratic.Out).onUpdate(u).start(),new qf.Tween(c).to(a,r/3).easing(qf.Easing.Quadratic.Out).onUpdate(d).start()}else u(o),d(a);return this}return Object.assign({},s.position,{lookAt:h()});function u(f){var p=f.x,g=f.y,m=f.z;void 0!==p&&(s.position.x=p),void 0!==g&&(s.position.y=g),void 0!==m&&(s.position.z=m)}function d(f){var p=new ji.Vector3(f.x,f.y,f.z);e.controls.target?e.controls.target=p:s.lookAt(p)}function h(){return Object.assign(new ji.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,s=new Array(r>3?r-3:0),o=3;o<r;o++)s[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,s),t,i)},fitToBbox:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,s=e.camera;if(t){var o=new ji.Vector3(0,0,0),a=2*Math.max.apply(Math,Yf(Object.entries(t).map(function(f){var p=hie(f,2),g=p[0];return Math.max.apply(Math,Yf(p[1].map(function(_){return Math.abs(o[g]-_)})))}))),l=(1-2*r/e.height)*s.fov,c=a/Math.atan(l*Math.PI/180),u=c/s.aspect,d=Math.max(c,u);if(d>0){var h=o.clone().sub(s.position).normalize().multiplyScalar(-d);this.cameraPosition(h,o,i)}}return this},getBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},i=new ji.Box3(new ji.Vector3(0,0,0),new ji.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach(function(s){return i.expandByObject(s)}),Object.assign.apply(Object,Yf(["x","y","z"].map(function(s){return die({},s,[i.min[s],i.max[s]])})))):null},getScreenCoords:function(e,t,i,r){var s=new ji.Vector3(t,i,r);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=new ji.Vector2(t/e.width*2-1,-i/e.height*2+1),o=new ji.Raycaster;return o.setFromCamera(s,e.camera),Object.assign({},o.ray.at(r,new ji.Vector3))},intersectingObjects:function(e,t,i){var r=new ji.Vector2(t/e.width*2-1,-i/e.height*2+1),s=new ji.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.setFromCamera(r,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new ji.Scene,camera:new ji.PerspectiveCamera,clock:new ji.Clock}},init:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.controlType,s=void 0===r?"trackball":r,o=i.rendererConfig,a=void 0===o?{}:o,l=i.extraRenderers,c=void 0===l?[]:l,u=i.waitForLoadComplete,d=void 0===u||u;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.toolTipElem=document.createElement("div"),t.toolTipElem.classList.add("scene-tooltip"),t.container.appendChild(t.toolTipElem),t.pointerPos=new ji.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(h){return t.container.addEventListener(h,function(f){if("pointerdown"===h&&(t.isPointerPressed=!0),!t.isPointerDragging&&"pointermove"===f.type&&(f.pressure>0||t.isPointerPressed)&&("touch"!==f.pointerType||void 0===f.movementX||[f.movementX,f.movementY].some(function(m){return Math.abs(m)>1}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var p=function g(m){var _=m.getBoundingClientRect(),w=window.pageXOffset||document.documentElement.scrollLeft,D=window.pageYOffset||document.documentElement.scrollTop;return{top:_.top+D,left:_.left+w}}(t.container);t.pointerPos.x=f.pageX-p.left,t.pointerPos.y=f.pageY-p.top,t.toolTipElem.style.top="".concat(t.pointerPos.y,"px"),t.toolTipElem.style.left="".concat(t.pointerPos.x,"px"),t.toolTipElem.style.transform="translate(-".concat(t.pointerPos.x/t.width*100,"%, ").concat(t.height-t.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}},{passive:!0})}),t.container.addEventListener("pointerup",function(h){t.isPointerPressed=!1,(!t.isPointerDragging||(t.isPointerDragging=!1,t.clickAfterDrag))&&requestAnimationFrame(function(){0===h.button&&t.onClick(t.hoverObj||null,h,t.intersectionPoint),2===h.button&&t.onRightClick&&t.onRightClick(t.hoverObj||null,h,t.intersectionPoint)})},{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",function(h){t.onRightClick&&h.preventDefault()}),t.renderer=new ji.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},a)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=c,t.extraRenderers.forEach(function(h){h.domElement.style.position="absolute",h.domElement.style.top="0px",h.domElement.style.pointerEvents="none",t.container.appendChild(h.domElement)}),t.postProcessingComposer=new Vte(t.renderer),t.postProcessingComposer.addPass(new Hte(t.scene,t.camera)),t.controls=new{trackball:Rte,orbit:Nte,fly:kte}[s](t.camera,t.renderer.domElement),"fly"===s&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),("trackball"===s||"orbit"===s)&&(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",function(){t.controlsEngaged=!0}),t.controls.addEventListener("change",function(){t.controlsEngaged&&(t.controlsDragging=!0)}),t.controls.addEventListener("end",function(){t.controlsEngaged=!1,t.controlsDragging=!1})),[t.renderer,t.postProcessingComposer].concat(Yf(t.extraRenderers)).forEach(function(h){return h.setSize(t.width,t.height)}),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new ji.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!d,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(Yf(e.extraRenderers)).forEach(function(s){return s.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=2.5*e.skyRadius,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new ji.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var i=Ba(e.backgroundColor).alpha;void 0===i&&(i=1),e.renderer.setClearColor(new ji.Color($ne(1,e.backgroundColor)),i)}function r(){e.loadComplete=e.scene.visible=!0}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?(new ji.TextureLoader).load(e.backgroundImageUrl,function(s){e.skysphere.material=new ji.MeshBasicMaterial({map:s,side:ji.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&r()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&r())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("objects")&&((t.objects||[]).forEach(function(s){return e.scene.remove(s)}),e.objects.forEach(function(s){return e.scene.add(s)}))}});function CF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function z_(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?CF(Object(t),!0).forEach(function(i){Xf(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):CF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Xf(n,e,t){return e=function Eie(n){var e=function Aie(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:String(e)}(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j_(n){return function xie(n){if(Array.isArray(n))return px(n)}(n)||function Sie(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function Cie(n,e){if(n){if("string"==typeof n)return px(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return px(n,e)}}(n)||function Mie(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function px(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function MF(n,e){var t=new e;return{linkProp:function(r){return{default:t[r](),onChange:function(o,a){a[n][r](o)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var o=s[n],a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];var u=o[r].apply(o,l);return u===o?this:u}}}}!function bie(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}}(".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}");var AF=window.THREE?window.THREE:{AmbientLight:class mI extends uI{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}},DirectionalLight:class gI extends uI{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xr.DefaultUp),this.updateMatrix(),this.target=new xr,this.shadow=new cJ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Vector3:re},EF=MF("forceGraph",jk),Die=Object.assign.apply(Object,j_(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Xf({},n,EF.linkProp(n))}))),Pie=Object.assign.apply(Object,j_(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Xf({},n,EF.linkMethod(n))}))),G_=MF("renderObjs",SF),Oie=Object.assign.apply(Object,j_(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return Xf({},n,G_.linkProp(n))}))),Rie=Object.assign.apply(Object,j_(["cameraPosition","postProcessingComposer"].map(function(n){return Xf({},n,G_.linkMethod(n))})).concat([{graph2ScreenCoords:G_.linkMethod("getScreenCoords"),screen2GraphCoords:G_.linkMethod("getSceneCoords")}])),Nie=Uw({props:z_(z_({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,t){return t.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,t){var i=t.renderObjs.controls();i&&(i.enabled=e,e&&i.domElement&&i.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},Die),Oie),methods:z_(z_({zoomToFit:function(e,t,i){for(var r,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return e.renderObjs.fitToBbox((r=e.forceGraph).getGraphBbox.apply(r,o),t,i),this},pauseAnimation:function(e){return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return null===e.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Pie),Rie),stateInit:function(e){var t=e.controlType,i=e.rendererConfig,r=e.extraRenderers;return{forceGraph:new jk,renderObjs:SF({controlType:t,rendererConfig:i,extraRenderers:r})}},init:function(e,t){e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var i=document.createElement("div");t.container.appendChild(i),t.renderObjs(i);var a,r=t.renderObjs.camera(),s=t.renderObjs.renderer(),o=t.renderObjs.controls();o.enabled=!!t.enableNavigationControls,t.lastSetCameraZ=r.position.z,t.container.appendChild(a=document.createElement("div")),a.className="graph-info-msg",a.textContent="",t.forceGraph.onLoading(function(){a.textContent="Loading..."}).onFinishLoading(function(){a.textContent=""}).onUpdate(function(){t.graphData=t.forceGraph.graphData(),0===r.position.x&&0===r.position.y&&r.position.z===t.lastSetCameraZ&&t.graphData.nodes.length&&(r.lookAt(t.forceGraph.position),t.lastSetCameraZ=r.position.z=170*Math.cbrt(t.graphData.nodes.length))}).onFinishUpdate(function(){if(t._dragControls){var l=t.graphData.nodes.find(function(u){return u.__initialFixedPos&&!u.__disposeControlsAfterDrag});l?l.__disposeControlsAfterDrag=!0:t._dragControls.dispose(),t._dragControls=void 0}if(t.enableNodeDrag&&t.enablePointerInteraction&&"d3"===t.forceEngine){var c=t._dragControls=new RJ(t.graphData.nodes.map(function(u){return u.__threeObj}).filter(function(u){return u}),r,s.domElement);c.addEventListener("dragstart",function(u){o.enabled=!1,u.object.__initialPos=u.object.position.clone(),u.object.__prevPos=u.object.position.clone();var d=Va(u.object).__data;!d.__initialFixedPos&&(d.__initialFixedPos={fx:d.fx,fy:d.fy,fz:d.fz}),!d.__initialPos&&(d.__initialPos={x:d.x,y:d.y,z:d.z}),["x","y","z"].forEach(function(h){return d["f".concat(h)]=d[h]}),s.domElement.classList.add("grabbable")}),c.addEventListener("drag",function(u){var d=Va(u.object);if(!u.object.hasOwnProperty("__graphObjType")){var h=u.object.__initialPos,f=u.object.__prevPos,p=u.object.position;d.position.add(p.clone().sub(f)),f.copy(p),p.copy(h)}var g=d.__data,m=d.position,_={x:m.x-g.x,y:m.y-g.y,z:m.z-g.z};["x","y","z"].forEach(function(w){return g["f".concat(w)]=g[w]=m[w]}),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),g.__dragged=!0,t.onNodeDrag(g,_)}),c.addEventListener("dragend",function(u){delete u.object.__initialPos,delete u.object.__prevPos;var d=Va(u.object).__data;d.__disposeControlsAfterDrag&&(c.dispose(),delete d.__disposeControlsAfterDrag);var h=d.__initialFixedPos,f=d.__initialPos,p={x:f.x-d.x,y:f.y-d.y,z:f.z-d.z};h&&(["x","y","z"].forEach(function(g){var m="f".concat(g);void 0===h[m]&&delete d[m]}),delete d.__initialFixedPos,delete d.__initialPos,d.__dragged&&(delete d.__dragged,t.onNodeDragEnd(d,p))),t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.enableNavigationControls&&(o.enabled=!0,o.domElement&&o.domElement.ownerDocument&&o.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),s.domElement.classList.remove("grabbable")})}}),t.renderObjs.objects([new AF.AmbientLight(12303291),new AF.DirectionalLight(16777215,.6),t.forceGraph]).hoverOrderComparator(function(l,c){var u=Va(l);if(!u)return 1;var d=Va(c);if(!d)return-1;var h=function(p){return"node"===p.__graphObjType};return h(d)-h(u)}).tooltipContent(function(l){var c=Va(l);return c&&si(t["".concat(c.__graphObjType,"Label")])(c.__data)||""}).hoverDuringDrag(!1).onHover(function(l){var c=Va(l);if(c!==t.hoverObj){var u=t.hoverObj?t.hoverObj.__graphObjType:null,d=t.hoverObj?t.hoverObj.__data:null,h=c?c.__graphObjType:null,f=c?c.__data:null;if(u&&u!==h){var p=t["on".concat("node"===u?"Node":"Link","Hover")];p&&p(null,d)}if(h){var g=t["on".concat("node"===h?"Node":"Link","Hover")];g&&g(f,u===h?d:null)}s.domElement.classList[c&&t["on".concat("node"===h?"Node":"Link","Click")]||!c&&t.onBackgroundClick?"add":"remove"]("clickable"),t.hoverObj=c}}).clickAfterDrag(!1).onClick(function(l,c){var u=Va(l);if(u){var d=t["on".concat("node"===u.__graphObjType?"Node":"Link","Click")];d&&d(u.__data,c)}else t.onBackgroundClick&&t.onBackgroundClick(c)}).onRightClick(function(l,c){var u=Va(l);if(u){var d=t["on".concat("node"===u.__graphObjType?"Node":"Link","RightClick")];d&&d(u.__data,c)}else t.onBackgroundRightClick&&t.onBackgroundRightClick(c)}),this._animationCycle()}});function Va(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}const Iie=["panel"];let kie=(()=>{class n{constructor(t){this.elementRef=t,this.samples=100,this.nodes=Array.from(Array(this.samples)).map((i,r)=>({id:r})),this.links=this.nodes.filter(({id:i})=>i>0).map(({id:i})=>({source:i,target:Math.round(i-1),group:i%2})),this.gData={nodes:this.nodes,links:this.links},console.log(this.gData)}ngAfterContentInit(){console.log(this.panel)}ngAfterViewInit(){this.graph=Nie()(this.htmlPanel),this.graph.linkDirectionalArrowColor(()=>"black").linkColor(()=>"black").nodeColor(()=>"green").backgroundColor("#FFFFFF").linkDirectionalArrowLength(3.5).linkDirectionalArrowRelPos(1).linkCurvature(.1).graphData(this.gData),this.windowResize()}windowResize(){var t,i,r;const s=this.htmlPanel.getBoundingClientRect();null===(t=this.graph)||void 0===t||t.width(s.width),null===(i=this.graph)||void 0===i||i.height(s.height),null===(r=this.graph)||void 0===r||r.controls().handleResize()}get htmlPanel(){return this.panel.nativeElement}get htmlElement(){return this.elementRef.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(Ge(ai))},n.\u0275cmp=Wr({type:n,selectors:[["app-stn-realtime"]],viewQuery:function(t,i){if(1&t&&Pu(Iie,5),2&t){let r;Ci(r=Mi())&&(i.panel=r.first)}},hostBindings:function(t,i){1&t&&fn("resize",function(){return i.windowResize()},!1,FM)},decls:22,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-3"],[1,"form-group","row","top-buffer"],["for","inputPassword3",1,"col-sm","col-form-label"],[1,"col-sm-12"],["type","text","id","inputPassword3","placeholder","",1,"form-control"],[1,"col-md-1"],["type","color","value","#ff0000","id","inputPassword3","placeholder","",1,"form-control"],["type","file","accept",".csv, .txt, .tar.gz, .tar.xz",1,"form-control","form-control","top-buffer"],[2,"width","100%","height","100%"],["panel",""]],template:function(t,i){1&t&&(ce(0,"div",0),ce(1,"div",1),ce(2,"div",2),ce(3,"div",3),ce(4,"label",4),Lt(5,"Name "),ue(),ce(6,"div",5),on(7,"input",6),ue(),ue(),ue(),ce(8,"div",7),ce(9,"div",3),ce(10,"label",4),Lt(11,"Color"),ue(),ce(12,"div",5),on(13,"input",8),ue(),ue(),ue(),ce(14,"div",2),ce(15,"div",3),ce(16,"label",4),Lt(17,"Load "),ue(),ce(18,"div",5),on(19,"input",9),ue(),ue(),ue(),ue(),ue(),on(20,"div",10,11))},styles:[""]}),n})(),TF=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(Ge(Hs),Ge(ai))},n.\u0275dir=Gt({type:n}),n})(),Mc=(()=>{class n extends TF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=bs(n)))(i||n)}}(),n.\u0275dir=Gt({type:n,features:[_i]}),n})();const Xs=new On("NgValueAccessor"),Lie={provide:Xs,useExisting:ii(()=>gx),multi:!0};let gx=(()=>{class n extends Mc{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=bs(n)))(i||n)}}(),n.\u0275dir=Gt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,i){1&t&&fn("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[yi([Lie]),_i]}),n})();const Bie={provide:Xs,useExisting:ii(()=>W_),multi:!0},Uie=new On("CompositionEventMode");let W_=(()=>{class n extends TF{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Vie(){const n=Go()?Go().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(Ge(Hs),Ge(ai),Ge(Uie,8))},n.\u0275dir=Gt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&fn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[yi([Bie]),_i]}),n})();function Sl(n){return null==n||0===n.length}function DF(n){return null!=n&&"number"==typeof n.length}const zr=new On("NgValidators"),Cl=new On("NgAsyncValidators"),Hie=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mx{static min(e){return PF(e)}static max(e){return function OF(n){return e=>{if(Sl(e.value)||Sl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return RF(e)}static requiredTrue(e){return function NF(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function IF(n){return Sl(n.value)||Hie.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function kF(n){return e=>Sl(e.value)||!DF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function FF(n){return e=>DF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return LF(e)}static nullValidator(e){return null}static compose(e){return jF(e)}static composeAsync(e){return GF(e)}}function PF(n){return e=>{if(Sl(e.value)||Sl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function RF(n){return Sl(n.value)?{required:!0}:null}function LF(n){if(!n)return Kf;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Sl(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function Kf(n){return null}function BF(n){return null!=n}function VF(n){const e=Sh(n)?ir(n):n;return kv(e),e}function UF(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function HF(n,e){return e.map(t=>t(n))}function zF(n){return n.map(e=>function zie(n){return!n.validate}(e)?e:t=>e.validate(t))}function jF(n){if(!n)return null;const e=n.filter(BF);return 0==e.length?null:function(t){return UF(HF(t,e))}}function _x(n){return null!=n?jF(zF(n)):null}function GF(n){if(!n)return null;const e=n.filter(BF);return 0==e.length?null:function(t){return function Fie(...n){const e=Sp(n),{args:t,keys:i}=FP(n),r=new Pe(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;_n(t[u]).subscribe(new v(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?LP(i,a):a),s.complete())}))}});return e?r.pipe(zb(e)):r}(HF(t,e).map(VF)).pipe(T(UF))}}function yx(n){return null!=n?GF(zF(n)):null}function WF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $F(n){return n._rawValidators}function qF(n){return n._rawAsyncValidators}function vx(n){return n?Array.isArray(n)?n:[n]:[]}function $_(n,e){return Array.isArray(n)?n.includes(e):n===e}function YF(n,e){const t=vx(e);return vx(n).forEach(r=>{$_(t,r)||t.push(r)}),t}function XF(n,e){return vx(e).filter(t=>!$_(n,t))}class KF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_x(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ml extends KF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rs extends KF{get formDirective(){return null}get path(){return null}}class QF{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let JF=(()=>{class n extends QF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(Ge(Ml,2))},n.\u0275dir=Gt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Ii("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[_i]}),n})(),bx=(()=>{class n extends QF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(Ge(rs,10))},n.\u0275dir=Gt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&Ii("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[_i]}),n})();function Y_(n,e){return[...e.path,n]}function Qf(n,e){Sx(n,e),e.valueAccessor.writeValue(n.value),function qie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ZF(n,e)})}(n,e),function Xie(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Yie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ZF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function $ie(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function X_(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Q_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function K_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Sx(n,e){const t=$F(n);null!==e.validator?n.setValidators(WF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=qF(n);null!==e.asyncValidator?n.setAsyncValidators(WF(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();K_(e._rawValidators,r),K_(e._rawAsyncValidators,r)}function Q_(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=$F(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=qF(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return K_(e._rawValidators,i),K_(e._rawAsyncValidators,i),t}function ZF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function eL(n,e){Sx(n,e)}function tL(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function J_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Jf="VALID",Z_="INVALID",Nd="PENDING",Zf="DISABLED";function Ax(n){return(Tx(n)?n.validators:n)||null}function nL(n){return Array.isArray(n)?_x(n):n||null}function Ex(n,e){return(Tx(e)?e.asyncValidators:n)||null}function iL(n){return Array.isArray(n)?yx(n):n||null}function Tx(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Dx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=nL(this._rawValidators),this._composedAsyncValidatorFn=iL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Jf}get invalid(){return this.status===Z_}get pending(){return this.status==Nd}get disabled(){return this.status===Zf}get enabled(){return this.status!==Zf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=nL(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=iL(e)}addValidators(e){this.setValidators(YF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(YF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XF(e,this._rawAsyncValidators))}hasValidator(e){return $_(this._rawValidators,e)}hasAsyncValidator(e){return $_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Nd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zf,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jf,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jf||this.status===Nd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zf:Jf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Nd,this._hasOwnPendingAsyncValidator=!0;const t=VF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Zie(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=i instanceof ep?i.controls.hasOwnProperty(r)?i.controls[r]:null:i instanceof Px&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new yn,this.statusChanges=new yn}_calculateStatus(){return this._allControlsDisabled()?Zf:this.errors?Z_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nd)?Nd:this._anyControlsHaveStatus(Z_)?Z_:Jf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tx(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Id extends Dx{constructor(e=null,t,i){super(Ax(t),Ex(i,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){J_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){J_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ep extends Dx{constructor(e,t,i){super(Ax(t),Ex(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t instanceof Id?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class Px extends Dx{constructor(e,t,i){super(Ax(t),Ex(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((i,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Id?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const ere={provide:rs,useExisting:ii(()=>e0)},tp=(()=>Promise.resolve(null))();let e0=(()=>{class n extends rs{constructor(t,i){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new yn,this.form=new ep({},_x(t),yx(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){tp.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Qf(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){tp.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),J_(this._directives,t)})}addFormGroup(t){tp.then(()=>{const i=this._findContainer(t.path),r=new ep({});eL(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){tp.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){tp.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,tL(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(Ge(zr,10),Ge(Cl,10))},n.\u0275dir=Gt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&fn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yi([ere]),_i]}),n})(),rL=(()=>{class n extends rs{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Y_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=bs(n)))(i||n)}}(),n.\u0275dir=Gt({type:n,features:[_i]}),n})(),Ox=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Gt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const ire={provide:Xs,useExisting:ii(()=>Rx),multi:!0};let Rx=(()=>{class n extends Mc{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=bs(n)))(i||n)}}(),n.\u0275dir=Gt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&fn("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[yi([ire]),_i]}),n})(),lL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({}),n})();const ore={provide:Xs,useExisting:ii(()=>Nx),multi:!0};let Nx=(()=>{class n extends Mc{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=bs(n)))(i||n)}}(),n.\u0275dir=Gt({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,i){1&t&&fn("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[yi([ore]),_i]}),n})();const Ix=new On("NgModelWithFormControlWarning"),lre={provide:rs,useExisting:ii(()=>t0)};let t0=(()=>{class n extends rs{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new yn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Q_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Qf(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){X_(t.control||null,t,!1),J_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,tL(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(X_(i||null,t),r instanceof Id&&(Qf(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);eL(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function Kie(n,e){return Q_(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Sx(this.form,this),this._oldForm&&Q_(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(Ge(zr,10),Ge(Cl,10))},n.\u0275dir=Gt({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&fn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yi([lre]),_i,hr]}),n})();const cre={provide:rs,useExisting:ii(()=>n0)};let n0=(()=>{class n extends rL{constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){dL(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(Ge(rs,13),Ge(zr,10),Ge(Cl,10))},n.\u0275dir=Gt({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[yi([cre]),_i]}),n})();const ure={provide:rs,useExisting:ii(()=>r0)};let r0=(()=>{class n extends rs{constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Y_(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){dL(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(Ge(rs,13),Ge(zr,10),Ge(Cl,10))},n.\u0275dir=Gt({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[yi([ure]),_i]}),n})();function dL(n){return!(n instanceof n0||n instanceof t0||n instanceof r0)}const dre={provide:Ml,useExisting:ii(()=>kx)};let kx=(()=>{class n extends Ml{constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new yn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Mx(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===W_?t=s:function Jie(n){return Object.getPrototypeOf(n.constructor)===Mc}(s)?i=s:r=s}),r||i||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Cx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Y_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(Ge(rs,13),Ge(zr,10),Ge(Cl,10),Ge(Xs,10),Ge(Ix,8))},n.\u0275dir=Gt({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[yi([dre]),_i,hr]}),n})();const hre={provide:Xs,useExisting:ii(()=>Fx),multi:!0};function hL(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Fx=(()=>{class n extends Mc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=this._getOptionId(t);null==i&&this.setProperty("selectedIndex",-1);const r=hL(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function fre(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=bs(n)))(i||n)}}(),n.\u0275dir=Gt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&fn("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[yi([hre]),_i]}),n})(),fL=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(hL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(Ge(ai),Ge(Hs),Ge(Fx,9))},n.\u0275dir=Gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const pre={provide:Xs,useExisting:ii(()=>Lx),multi:!0};function pL(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Lx=(()=>{class n extends Mc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);r.push(c)}}else{const o=i.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function gre(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=bs(n)))(i||n)}}(),n.\u0275dir=Gt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&fn("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[yi([pre]),_i]}),n})(),gL=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(pL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(pL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(Ge(ai),Ge(Hs),Ge(Lx,9))},n.\u0275dir=Gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let s0=(()=>{class n{constructor(){this._validator=Kf}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.enabled()?this.createValidator(i):Kf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(){return null!=this[this.inputName]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Gt({type:n,features:[hr]}),n})();const _re={provide:zr,useExisting:ii(()=>Bx),multi:!0};let Bx=(()=>{class n extends s0{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function _L(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>PF(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=bs(n)))(i||n)}}(),n.\u0275dir=Gt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&ni("min",i.enabled()?i.min:null)},inputs:{min:"min"},features:[yi([_re]),_i]}),n})();const yre={provide:zr,useExisting:ii(()=>o0),multi:!0};let o0=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?RF(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Gt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&ni("required",i.required?"":null)},inputs:{required:"required"},features:[yi([yre])]}),n})();const Sre={provide:zr,useExisting:ii(()=>Vx),multi:!0};let Vx=(()=>{class n{constructor(){this._validator=Kf}ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=LF(this.pattern)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Gt({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&ni("pattern",i.pattern?i.pattern:null)},inputs:{pattern:"pattern"},features:[yi([Sre]),hr]}),n})(),SL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[lL]]}),n})(),CL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[SL]}),n})(),ML=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ix,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[SL]}),n})(),Mre=(()=>{class n{group(t,i=null){const r=this._reduceControls(t);let a,s=null,o=null;return null!=i&&(function Cre(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(i)?(s=null!=i.validators?i.validators:null,o=null!=i.asyncValidators?i.asyncValidators:null,a=null!=i.updateOn?i.updateOn:void 0):(s=null!=i.validator?i.validator:null,o=null!=i.asyncValidator?i.asyncValidator:null)),new ep(r,{asyncValidators:o,updateOn:a,validators:s})}control(t,i,r){return new Id(t,i,r)}array(t,i,r){const s=t.map(o=>this._createControl(o));return new Px(s,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Id||t instanceof ep||t instanceof Px?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:ML}),n})();class AL{}class EL{}class Ua{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ua?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ua;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ua?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Are{encodeKey(e){return TL(e)}encodeValue(e){return TL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Tre=/%(\d[a-f0-9])/gi,Dre={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function TL(n){return encodeURIComponent(n).replace(Tre,(e,t)=>{var i;return null!==(i=Dre[t])&&void 0!==i?i:e})}function DL(n){return`${n}`}class Al{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Are,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ere(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Al({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(DL(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(DL(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Pre{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function PL(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function OL(n){return"undefined"!=typeof Blob&&n instanceof Blob}function RL(n){return"undefined"!=typeof FormData&&n instanceof FormData}class np{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Ore(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ua),this.context||(this.context=new Pre),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Al,this.urlWithParams=t}serializeBody(){return null===this.body?null:PL(this.body)||OL(this.body)||RL(this.body)||function Rre(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Al?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||RL(this.body)?null:OL(this.body)?this.body.type||null:PL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Al?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new np(i,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var ur=(()=>((ur=ur||{})[ur.Sent=0]="Sent",ur[ur.UploadProgress=1]="UploadProgress",ur[ur.ResponseHeader=2]="ResponseHeader",ur[ur.DownloadProgress=3]="DownloadProgress",ur[ur.Response=4]="Response",ur[ur.User=5]="User",ur))();class Ux{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ua,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Hx extends Ux{constructor(e={}){super(e),this.type=ur.ResponseHeader}clone(e={}){return new Hx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class a0 extends Ux{constructor(e={}){super(e),this.type=ur.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new a0({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class NL extends Ux{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function zx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let IL=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof np)s=t;else{let l,c;l=r.headers instanceof Ua?r.headers:new Ua(r.headers),r.params&&(c=r.params instanceof Al?r.params:new Al({fromObject:r.params})),s=new np(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Sn(s).pipe(ku(l=>this.handler.handle(l)));if(t instanceof np||"events"===r.observe)return o;const a=o.pipe(ar(l=>l instanceof a0));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(T(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(T(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(T(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(T(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Al).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,zx(r,i))}post(t,i,r={}){return this.request("POST",t,zx(r,i))}put(t,i,r={}){return this.request("PUT",t,zx(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Ft(AL))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class kL{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const FL=new On("HTTP_INTERCEPTORS");let Nre=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const Ire=/^\)\]\}',?\n/;let LL=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Pe(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((f,p)=>r.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=1223===r.status?204:r.status,p=r.statusText||"OK",g=new Ua(r.getAllResponseHeaders()),m=function kre(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new Hx({headers:g,status:f,statusText:p,url:m}),o},l=()=>{let{headers:f,status:p,statusText:g,url:m}=a(),_=null;204!==p&&(_=void 0===r.response?r.responseText:r.response),0===p&&(p=_?200:0);let w=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof _){const D=_;_=_.replace(Ire,"");try{_=""!==_?JSON.parse(_):null}catch(M){_=D,w&&(w=!1,_={error:M,text:_})}}w?(i.next(new a0({body:_,headers:f,status:p,statusText:g,url:m||void 0})),i.complete()):i.error(new NL({error:_,headers:f,status:p,statusText:g,url:m||void 0}))},c=f=>{const{url:p}=a(),g=new NL({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(g)};let u=!1;const d=f=>{u||(i.next(a()),u=!0);let p={type:ur.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!r.responseText&&(p.partialText=r.responseText),i.next(p)},h=f=>{let p={type:ur.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",d),null!==s&&r.upload&&r.upload.addEventListener("progress",h)),r.send(s),i.next({type:ur.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",d),null!==s&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Ft(bP))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const jx=new On("XSRF_COOKIE_NAME"),Gx=new On("XSRF_HEADER_NAME");class BL{}let Fre=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=fP(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Ft(Vi),Ft(Fh),Ft(jx))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),Wx=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Ft(BL),Ft(Gx))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),Lre=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(FL,[]);this.chain=i.reduceRight((r,s)=>new kL(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Ft(EL),Ft($i))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),Bre=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Wx,useClass:Nre}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:jx,useValue:t.cookieName}:[],t.headerName?{provide:Gx,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({providers:[Wx,{provide:FL,useExisting:Wx,multi:!0},{provide:BL,useClass:Fre},{provide:jx,useValue:"XSRF-TOKEN"},{provide:Gx,useValue:"X-XSRF-TOKEN"}]}),n})(),Vre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({providers:[IL,{provide:AL,useClass:Lre},LL,{provide:EL,useExisting:LL}],imports:[[Bre.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function Rn(n){return R((e,t)=>{_n(n).subscribe(new v(t,()=>t.complete(),A)),!t.closed&&e.subscribe(t)})}class VL{}const Ha="*";function Hre(n,e){return{type:7,name:n,definitions:e,options:{}}}function UL(n,e=null){return{type:4,styles:e,timings:n}}function HL(n,e=null){return{type:2,steps:n,options:e}}function ip(n){return{type:6,styles:n,offset:null}}function zre(n,e,t){return{type:0,name:n,styles:e,options:t}}function zL(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function jL(n){Promise.resolve(null).then(n)}class kd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){jL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class GL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?jL(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const jre=["overlay"];function Gre(n,e){1&n&&on(0,"div")}function Wre(n,e){if(1&n&&(ce(0,"div"),rn(1,Gre,1,0,"div",6),ue()),2&n){const t=cn(2);ga(t.spinner.class),Cu("color",t.spinner.color),Nt(1),jt("ngForOf",t.spinner.divArray)}}function $re(n,e){1&n&&(on(0,"div",7),function tD(n,e){const t=ti();let i;const r=n+20;t.firstCreatePass?(i=function M4(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Fl(i.type)),o=Wa(Ge);try{const a=zp(!1),l=s();return zp(a),function Kz(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,xt(),r,l),l}finally{Wa(o)}}(1,"safeHtml")),2&n&&jt("innerHTML",nD(1,1,cn(2).template),EM)}function qre(n,e){if(1&n&&(ce(0,"div",1,2),rn(2,Wre,2,5,"div",3),rn(3,$re,2,3,"div",4),ce(4,"div",5),hg(5),ue(),ue()),2&n){const t=cn();Cu("background-color",t.spinner.bdColor)("z-index",t.spinner.zIndex)("position",t.spinner.fullScreen?"fixed":"absolute"),jt("@.disabled",t.disableAnimation)("@fadeIn","in"),Nt(2),jt("ngIf",!t.template),Nt(1),jt("ngIf",t.template),Nt(1),Cu("z-index",t.spinner.zIndex)}}const Yre=["*"],Xre={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},Yx="primary";class Ac{constructor(e){Object.assign(this,e)}static create(e){return(null==(null==e?void 0:e.type)||0===e.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new Ac(e)}}let WL=(()=>{class n{constructor(){this.spinnerObservable=new yr(null)}getSpinner(t){return this.spinnerObservable.asObservable().pipe(ar(i=>i&&i.name===t))}show(t=Yx,i){return new Promise((r,s)=>{setTimeout(()=>{i&&Object.keys(i).length?(i.name=t,this.spinnerObservable.next(new Ac(Object.assign(Object.assign({},i),{show:!0}))),r(!0)):(this.spinnerObservable.next(new Ac({name:t,show:!0})),r(!0))},10)})}hide(t=Yx,i=10){return new Promise((r,s)=>{setTimeout(()=>{this.spinnerObservable.next(new Ac({name:t,show:!1})),r(!0)},i)})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kre=(()=>{class n{constructor(t){this._sanitizer=t}transform(t){if(t)return this._sanitizer.bypassSecurityTrustHtml(t)}}return n.\u0275fac=function(t){return new(t||n)(Ge(IP,16))},n.\u0275pipe=$r({name:"safeHtml",type:n,pure:!0}),n})(),Qre=(()=>{class n{constructor(t,i,r){this.spinnerService=t,this.changeDetector=i,this.elementRef=r,this.disableAnimation=!1,this.spinner=new Ac,this.ngUnsubscribe=new De,this.setDefaultOptions=()=>{this.spinner=Ac.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=Yx,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}handleKeyboardEvent(t){this.spinnerDOM&&this.spinnerDOM.nativeElement&&(this.fullScreen||!this.fullScreen&&this.isSpinnerZone(t.target))&&(t.returnValue=!1,t.preventDefault())}initObservable(){this.spinnerService.getSpinner(this.name).pipe(Rn(this.ngUnsubscribe)).subscribe(t=>{this.setDefaultOptions(),Object.assign(this.spinner,t),t.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(t){return t===this.elementRef.nativeElement.parentElement||t.parentNode&&this.isSpinnerZone(t.parentNode)}ngOnChanges(t){for(const i in t)if(i){const r=t[i];if(r.isFirstChange())return;void 0!==r.currentValue&&r.currentValue!==r.previousValue&&""!==r.currentValue&&(this.spinner[i]=r.currentValue,"showSpinner"===i&&(r.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===i&&this.initObservable())}}getClass(t,i){this.spinner.divCount=Xre[t],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((s,o)=>o);let r="";switch(i.toLowerCase()){case"small":r="la-sm";break;case"medium":r="la-2x";break;case"large":r="la-3x"}return"la-"+t+" "+r}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return n.\u0275fac=function(t){return new(t||n)(Ge(WL),Ge(js),Ge(ai))},n.\u0275cmp=Wr({type:n,selectors:[["ngx-spinner"]],viewQuery:function(t,i){if(1&t&&Pu(jre,5),2&t){let r;Ci(r=Mi())&&(i.spinnerDOM=r.first)}},hostBindings:function(t,i){1&t&&fn("keydown",function(s){return i.handleKeyboardEvent(s)},!1,LM)},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[hr],ngContentSelectors:Yre,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(t,i){1&t&&(dg(),rn(0,qre,6,12,"div",0)),2&t&&jt("ngIf",i.spinner.show)},directives:[ql,$l],pipes:[Kre],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[Hre("fadeIn",[zre("in",ip({opacity:1})),zL(":enter",[ip({opacity:0}),UL(300)]),zL(":leave",UL(200,ip({opacity:0})))])]},changeDetection:0}),n})(),Jre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})();const Zre=["addListener","removeListener"],ese=["addEventListener","removeEventListener"],tse=["on","off"];function Qn(n,e,t,i){if(N(t)&&(i=t,t=void 0),i)return Qn(n,e,t).pipe(zb(i));const[r,s]=function rse(n){return N(n.addEventListener)&&N(n.removeEventListener)}(n)?ese.map(o=>a=>n[o](e,a,t)):function nse(n){return N(n.addListener)&&N(n.removeListener)}(n)?Zre.map($L(n,e)):function ise(n){return N(n.on)&&N(n.off)}(n)?tse.map($L(n,e)):[];if(!r&&Ye(n))return Un(o=>Qn(o,e,t))(_n(n));if(!r)throw new TypeError("Invalid event target");return new Pe(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function $L(n,e){return t=>i=>n[t](e,i)}class sse extends ge{constructor(e,t){super()}schedule(e,t=0){return this}}const l0={setInterval(...n){const{delegate:e}=l0;return((null==e?void 0:e.setInterval)||setInterval)(...n)},clearInterval(n){const{delegate:e}=l0;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0},qL={now:()=>(qL.delegate||Date).now(),delegate:void 0};class rp{constructor(e,t=rp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}rp.now=qL.now;const Xx=new class ase extends rp{constructor(e,t=rp.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}(class ose extends sse{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return l0.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;l0.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,be(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}),lse=Xx;function Kx(n=0,e,t=lse){let i=-1;return null!=e&&(cC(e)?t=e:i=e),new Pe(r=>{let s=function cse(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:use}=Array;function YL(n){return 1===n.length&&use(n[0])?n[0]:n}function XL(...n){return 1===(n=YL(n)).length?_n(n[0]):new Pe(function dse(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push(_n(n[i]).subscribe(new v(e,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}e.next(r)})))}}(n))}function c0(...n){const e=Sp(n),t=YL(n);return t.length?new Pe(i=>{let r=t.map(()=>[]),s=t.map(()=>!1);i.add(()=>{r=s=null});for(let o=0;!i.closed&&o<t.length;o++)_n(t[o]).subscribe(new v(i,a=>{if(r[o].push(a),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(e?e(...l):l),r.some((c,u)=>!c.length&&s[u])&&i.complete()}},()=>{s[o]=!0,!r[o].length&&i.complete()}));return()=>{r=s=null}}):jr}function Jx(...n){const e=Sp(n);return R((t,i)=>{const r=n.length,s=new Array(r);let o=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)_n(n[l]).subscribe(new v(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(_e))&&(o=null))},A));t.subscribe(new v(i,l=>{if(a){const c=[l,...s];i.next(e?e(...c):c)}}))})}function QL(n,e){return e?t=>jh(e.pipe(Ar(1),function pse(){return R((n,e)=>{n.subscribe(new v(e,A))})}()),t.pipe(QL(n))):Un((t,i)=>n(t,i).pipe(Ar(1),function gse(n){return T(()=>n)}(t)))}function JL(n,e=Xx){const t=Kx(n,e);return QL(()=>t)}new Pe(A);var _se={left:"right",right:"left",bottom:"top",top:"bottom"};function u0(n){return n.replace(/left|right|bottom|top/g,function(e){return _se[e]})}function za(n){return n.split("-")[0]}var yse={start:"end",end:"start"};function ZL(n){return n.replace(/start|end/g,function(e){return yse[e]})}var Ks="top",Po="bottom",Zo="right",Oo="left",Zx="auto",sp=[Ks,Po,Zo,Oo],Fd="start",op="end",e2="viewport",ap="popper",t2=sp.reduce(function(n,e){return n.concat([e+"-"+Fd,e+"-"+op])},[]),wse=[].concat(sp,[Zx]).reduce(function(n,e){return n.concat([e,e+"-"+Fd,e+"-"+op])},[]),Ose=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Qs(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ec(n){return n instanceof Qs(n).Element||n instanceof Element}function Js(n){return n instanceof Qs(n).HTMLElement||n instanceof HTMLElement}function eS(n){return"undefined"!=typeof ShadowRoot&&(n instanceof Qs(n).ShadowRoot||n instanceof ShadowRoot)}function El(n){return((Ec(n)?n.ownerDocument:n.document)||window.document).documentElement}var Tc=Math.max,d0=Math.min,Ld=Math.round;function tS(){var n=navigator.userAgentData;return null!=n&&n.brands?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function n2(){return!/^((?!chrome|android).)*safari/i.test(tS())}function Bd(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=n.getBoundingClientRect(),r=1,s=1;e&&Js(n)&&(r=n.offsetWidth>0&&Ld(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Ld(i.height)/n.offsetHeight||1);var a=(Ec(n)?Qs(n):window).visualViewport,l=!n2()&&t,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function nS(n){var e=Qs(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function iS(n){return Bd(El(n)).left+nS(n).scrollLeft}function ja(n){return Qs(n).getComputedStyle(n)}function ea(n){return n?(n.nodeName||"").toLowerCase():null}function h0(n){return"html"===ea(n)?n:n.assignedSlot||n.parentNode||(eS(n)?n.host:null)||El(n)}function rS(n){var e=ja(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function r2(n){return["html","body","#document"].indexOf(ea(n))>=0?n.ownerDocument.body:Js(n)&&rS(n)?n:r2(h0(n))}function lp(n,e){var t;void 0===e&&(e=[]);var i=r2(n),r=i===(null==(t=n.ownerDocument)?void 0:t.body),s=Qs(i),o=r?[s].concat(s.visualViewport||[],rS(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(lp(h0(o)))}function Ise(n){return["table","td","th"].indexOf(ea(n))>=0}function s2(n){return Js(n)&&"fixed"!==ja(n).position?n.offsetParent:null}function cp(n){for(var e=Qs(n),t=s2(n);t&&Ise(t)&&"static"===ja(t).position;)t=s2(t);return t&&("html"===ea(t)||"body"===ea(t)&&"static"===ja(t).position)?e:t||function kse(n){var e=/firefox/i.test(tS());if(/Trident/i.test(tS())&&Js(n)&&"fixed"===ja(n).position)return null;var r=h0(n);for(eS(r)&&(r=r.host);Js(r)&&["html","body"].indexOf(ea(r))<0;){var s=ja(r);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return r;r=r.parentNode}return null}(n)||e}function o2(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&eS(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function sS(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function a2(n,e,t){return e===e2?sS(function Rse(n,e){var t=Qs(n),i=El(n),r=t.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=n2();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+iS(n),y:l}}(n,t)):Ec(e)?function Fse(n,e){var t=Bd(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):sS(function Nse(n){var e,t=El(n),i=nS(n),r=null==(e=n.ownerDocument)?void 0:e.body,s=Tc(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Tc(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+iS(n),l=-i.scrollTop;return"rtl"===ja(r||t).direction&&(a+=Tc(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(El(n)))}function Vd(n){return n.split("-")[1]}function oS(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function l2(n){var l,e=n.reference,t=n.element,i=n.placement,r=i?za(i):null,s=i?Vd(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2;switch(r){case Ks:l={x:o,y:e.y-t.height};break;case Po:l={x:o,y:e.y+e.height};break;case Zo:l={x:e.x+e.width,y:a};break;case Oo:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?oS(r):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case Fd:l[c]=l[c]-(e[u]/2-t[u]/2);break;case op:l[c]=l[c]+(e[u]/2-t[u]/2)}}return l}function u2(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function d2(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}function aS(n,e){void 0===e&&(e={});var i=e.placement,r=void 0===i?n.placement:i,s=e.strategy,o=void 0===s?n.strategy:s,a=e.boundary,l=void 0===a?"clippingParents":a,c=e.rootBoundary,u=void 0===c?e2:c,d=e.elementContext,h=void 0===d?ap:d,f=e.altBoundary,p=void 0!==f&&f,g=e.padding,m=void 0===g?0:g,_=u2("number"!=typeof m?m:d2(m,sp)),D=n.rects.popper,M=n.elements[p?h===ap?"reference":ap:h],O=function Bse(n,e,t,i){var r="clippingParents"===e?function Lse(n){var e=lp(h0(n)),i=["absolute","fixed"].indexOf(ja(n).position)>=0&&Js(n)?cp(n):n;return Ec(i)?e.filter(function(r){return Ec(r)&&o2(r,i)&&"body"!==ea(r)}):[]}(n):[].concat(e),s=[].concat(r,[t]),a=s.reduce(function(l,c){var u=a2(n,c,i);return l.top=Tc(u.top,l.top),l.right=d0(u.right,l.right),l.bottom=d0(u.bottom,l.bottom),l.left=Tc(u.left,l.left),l},a2(n,s[0],i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Ec(M)?M:M.contextElement||El(n.elements.popper),l,u,o),q=Bd(n.elements.reference),Z=l2({reference:q,element:D,strategy:"absolute",placement:r}),B=sS(Object.assign({},D,Z)),ee=h===ap?B:q,me={top:O.top-ee.top+_.top,bottom:ee.bottom-O.bottom+_.bottom,left:O.left-ee.left+_.left,right:ee.right-O.right+_.right},xe=n.modifiersData.offset;if(h===ap&&xe){var qe=xe[r];Object.keys(me).forEach(function(it){var ke=[Zo,Po].indexOf(it)>=0?1:-1,et=[Ks,Po].indexOf(it)>=0?"y":"x";me[it]+=qe[et]*ke})}return me}const zse={name:"flip",enabled:!0,phase:"main",fn:function Hse(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=void 0===r||r,o=t.altAxis,a=void 0===o||o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,f=t.flipVariations,p=void 0===f||f,g=t.allowedAutoPlacements,m=e.options.placement,_=za(m),D=l||(_!==m&&p?function Use(n){if(za(n)===Zx)return[];var e=u0(n);return[ZL(n),e,ZL(e)]}(m):[u0(m)]),M=[m].concat(D).reduce(function(ot,lt){return ot.concat(za(lt)===Zx?function Vse(n,e){void 0===e&&(e={});var r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=void 0===l?wse:l,u=Vd(e.placement),d=u?a?t2:t2.filter(function(p){return Vd(p)===u}):sp,h=d.filter(function(p){return c.indexOf(p)>=0});0===h.length&&(h=d);var f=h.reduce(function(p,g){return p[g]=aS(n,{placement:g,boundary:r,rootBoundary:s,padding:o})[za(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}(e,{placement:lt,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):lt)},[]),O=e.rects.reference,q=e.rects.popper,Z=new Map,B=!0,ee=M[0],me=0;me<M.length;me++){var xe=M[me],qe=za(xe),it=Vd(xe)===Fd,ke=[Ks,Po].indexOf(qe)>=0,et=ke?"width":"height",Ce=aS(e,{placement:xe,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),Ue=ke?it?Zo:Oo:it?Po:Ks;O[et]>q[et]&&(Ue=u0(Ue));var Xe=u0(Ue),We=[];if(s&&We.push(Ce[qe]<=0),a&&We.push(Ce[Ue]<=0,Ce[Xe]<=0),We.every(function(ot){return ot})){ee=xe,B=!1;break}Z.set(xe,We)}if(B)for(var wt=function(lt){var ze=M.find(function(Ve){var rt=Z.get(Ve);if(rt)return rt.slice(0,lt).every(function(Tt){return Tt})});if(ze)return ee=ze,"break"},ut=p?3:1;ut>0&&"break"!==wt(ut);ut--);e.placement!==ee&&(e.modifiersData[i]._skip=!0,e.placement=ee,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function up(n,e,t){return Tc(n,d0(e,t))}function lS(n){var e=Bd(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}const $se={name:"preventOverflow",enabled:!0,phase:"main",fn:function Wse(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=void 0===r||r,o=t.altAxis,a=void 0!==o&&o,h=t.tether,f=void 0===h||h,p=t.tetherOffset,g=void 0===p?0:p,m=aS(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),_=za(e.placement),w=Vd(e.placement),D=!w,M=oS(_),O=function jse(n){return"x"===n?"y":"x"}(M),q=e.modifiersData.popperOffsets,Z=e.rects.reference,B=e.rects.popper,ee="function"==typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,me="number"==typeof ee?{mainAxis:ee,altAxis:ee}:Object.assign({mainAxis:0,altAxis:0},ee),xe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,qe={x:0,y:0};if(q){if(s){var it,ke="y"===M?Ks:Oo,et="y"===M?Po:Zo,Ce="y"===M?"height":"width",Ue=q[M],Xe=Ue+m[ke],We=Ue-m[et],tt=f?-B[Ce]/2:0,wt=w===Fd?Z[Ce]:B[Ce],ut=w===Fd?-B[Ce]:-Z[Ce],Et=e.elements.arrow,ot=f&&Et?lS(Et):{width:0,height:0},lt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ze=lt[ke],Ve=lt[et],rt=up(0,Z[Ce],ot[Ce]),Tt=D?Z[Ce]/2-tt-rt-ze-me.mainAxis:wt-rt-ze-me.mainAxis,mt=D?-Z[Ce]/2+tt+rt+Ve+me.mainAxis:ut+rt+Ve+me.mainAxis,Wt=e.elements.arrow&&cp(e.elements.arrow),_t=null!=(it=null==xe?void 0:xe[M])?it:0,Xt=Ue+mt-_t,It=up(f?d0(Xe,Ue+Tt-_t-(Wt?"y"===M?Wt.clientTop||0:Wt.clientLeft||0:0)):Xe,Ue,f?Tc(We,Xt):We);q[M]=It,qe[M]=It-Ue}if(a){var an,Xn=q[O],Jn="y"===O?"height":"width",ve=Xn+m["x"===M?Ks:Oo],se=Xn-m["x"===M?Po:Zo],at=-1!==[Ks,Oo].indexOf(_),Dt=null!=(an=null==xe?void 0:xe[O])?an:0,kt=at?ve:Xn-Z[Jn]-B[Jn]-Dt+me.altAxis,$t=at?Xn+Z[Jn]+B[Jn]-Dt-me.altAxis:se,mn=f&&at?function Gse(n,e,t){var i=up(n,e,t);return i>t?t:i}(kt,Xn,$t):up(f?kt:ve,Xn,f?$t:se);q[O]=mn,qe[O]=mn-Xn}e.modifiersData[i]=qe}},requiresIfExists:["offset"]},Kse={name:"arrow",enabled:!0,phase:"main",fn:function Yse(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=za(t.placement),l=oS(a),u=[Oo,Zo].indexOf(a)>=0?"height":"width";if(s&&o){var d=function(e,t){return u2("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:d2(e,sp))}(r.padding,t),h=lS(s),f="y"===l?Ks:Oo,p="y"===l?Po:Zo,g=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],m=o[l]-t.rects.reference[l],_=cp(s),w=_?"y"===l?_.clientHeight||0:_.clientWidth||0:0,q=w/2-h[u]/2+(g/2-m/2),Z=up(d[f],q,w-h[u]-d[p]);t.modifiersData[i]=((e={})[l]=Z,e.centerOffset=Z-q,e)}},effect:function Xse(n){var e=n.state,i=n.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=e.elements.popper.querySelector(r))||!o2(e.elements.popper,r)||(e.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function eoe(n,e,t){void 0===t&&(t=!1);var i=Js(e),r=Js(e)&&function Zse(n){var e=n.getBoundingClientRect(),t=Ld(e.width)/n.offsetWidth||1,i=Ld(e.height)/n.offsetHeight||1;return 1!==t||1!==i}(e),s=El(e),o=Bd(n,r,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&(("body"!==ea(e)||rS(s))&&(a=function Jse(n){return n!==Qs(n)&&Js(n)?function Qse(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):nS(n)}(e)),Js(e)?((l=Bd(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=iS(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function toe(n){var e=new Map,t=new Set,i=[];function r(s){t.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return n.forEach(function(s){e.set(s.name,s)}),n.forEach(function(s){t.has(s.name)||r(s)}),i}function ioe(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var h2={placement:"bottom",modifiers:[],strategy:"absolute"};function f2(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function soe(n){void 0===n&&(n={});var t=n.defaultModifiers,i=void 0===t?[]:t,r=n.defaultOptions,s=void 0===r?h2:r;return function(a,l,c){void 0===c&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},h2,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(_){var w="function"==typeof _?_(u.options):_;g(),u.options=Object.assign({},s,u.options,w),u.scrollParents={reference:Ec(a)?lp(a):a.contextElement?lp(a.contextElement):[],popper:lp(l)};var D=function noe(n){var e=toe(n);return Ose.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}(function roe(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(i,u.options.modifiers)));return u.orderedModifiers=D.filter(function(xe){return xe.enabled}),function p(){u.orderedModifiers.forEach(function(m){var w=m.options,M=m.effect;if("function"==typeof M){var O=M({state:u,name:m.name,instance:f,options:void 0===w?{}:w});d.push(O||function(){})}})}(),f.update()},forceUpdate:function(){if(!h){var _=u.elements,w=_.reference,D=_.popper;if(f2(w,D)){u.rects={reference:eoe(w,cp(D),"fixed"===u.options.strategy),popper:lS(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(xe){return u.modifiersData[xe.name]=Object.assign({},xe.data)});for(var O=0;O<u.orderedModifiers.length;O++)if(!0!==u.reset){var q=u.orderedModifiers[O],Z=q.fn,B=q.options;"function"==typeof Z&&(u=Z({state:u,options:void 0===B?{}:B,name:q.name,instance:f})||u)}else u.reset=!1,O=-1}}},update:ioe(function(){return new Promise(function(m){f.forceUpdate(),m(u)})}),destroy:function(){g(),h=!0}};if(!f2(a,l))return f;function g(){d.forEach(function(m){return m()}),d=[]}return f.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)}),f}}var f0={passive:!0};const aoe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function ooe(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,l=Qs(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,f0)}),a&&l.addEventListener("resize",t.update,f0),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,f0)}),a&&l.removeEventListener("resize",t.update,f0)}},data:{}},coe={name:"popperOffsets",enabled:!0,phase:"read",fn:function loe(n){var e=n.state;e.modifiersData[n.name]=l2({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var uoe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function p2(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,f=void 0===h?0:h,p=o.y,g=void 0===p?0:p,m="function"==typeof u?u({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var _=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),D=Oo,M=Ks,O=window;if(c){var q=cp(t),Z="clientHeight",B="clientWidth";q===Qs(t)&&"static"!==ja(q=El(t)).position&&"absolute"===a&&(Z="scrollHeight",B="scrollWidth"),(r===Ks||(r===Oo||r===Zo)&&s===op)&&(M=Po,g-=(d&&q===O&&O.visualViewport?O.visualViewport.height:q[Z])-i.height,g*=l?1:-1),r!==Oo&&(r!==Ks&&r!==Po||s!==op)||(D=Zo,f-=(d&&q===O&&O.visualViewport?O.visualViewport.width:q[B])-i.width,f*=l?1:-1)}var it,xe=Object.assign({position:a},c&&uoe),qe=!0===u?function doe(n){var t=n.y,r=window.devicePixelRatio||1;return{x:Ld(n.x*r)/r||0,y:Ld(t*r)/r||0}}({x:f,y:g}):{x:f,y:g};return f=qe.x,g=qe.y,Object.assign({},xe,l?((it={})[M]=w?"0":"",it[D]=_?"0":"",it.transform=(O.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",it):((e={})[M]=w?g+"px":"",e[D]=_?f+"px":"",e.transform="",e))}const foe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function hoe(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=void 0===i||i,s=t.adaptive,o=void 0===s||s,a=t.roundOffsets,l=void 0===a||a,u={placement:za(e.placement),variation:Vd(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,p2(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,p2(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var moe=[aoe,coe,foe,{name:"applyStyles",enabled:!0,phase:"write",fn:function poe(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!Js(s)||!ea(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];!1===a?s.removeAttribute(o):s.setAttribute(o,!0===a?"":a)}))})},effect:function goe(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]).reduce(function(l,c){return l[c]="",l},{});!Js(r)||!ea(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}],_oe=soe({defaultModifiers:moe});const g2=["*"],zoe=["dialog"];function Dc(n){return null!=n}function Ud(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const _2={animation:!0,transitionTimerDelayMs:5},Lae=()=>{},{transitionTimerDelayMs:Bae}=_2,dp=new Map,ss=(n,e,t,i)=>{let r=i.context||{};const s=dp.get(e);if(s)switch(i.runningTransition){case"continue":return jr;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),dp.delete(e)}const o=t(e,i.animation,r)||Lae;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>o()),Sn(void 0).pipe(function kae(n){return e=>new Pe(t=>e.subscribe({next:o=>n.run(()=>t.next(o)),error:o=>n.run(()=>t.error(o)),complete:()=>n.run(()=>t.complete())}))}(n));const a=new De,l=new De,c=a.pipe(function hse(...n){return e=>jh(e,Sn(...n))}(!0));dp.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const u=function Fae(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const d=Qn(e,"transitionend").pipe(Rn(c),ar(({target:f})=>f===e));XL(Kx(u+Bae).pipe(Rn(c)),d,l).pipe(Rn(c)).subscribe(()=>{dp.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let hp=(()=>{class n{constructor(){this.animation=_2.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),C2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),A2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({}),n})(),D2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),P2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({}),n})();var Cr=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Cr||(Cr={})),Cr))();const m0=(n,e)=>!!e&&e.some(t=>t.contains(n)),O2=(n,e)=>!e||null!=function Iae(n,e){return e&&void 0!==n.closest?n.closest(e):null}(n,e),nle="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const N2=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function I2(n){const e=Array.from(n.querySelectorAll(N2)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const sle=/\s+/,ole=/  +/gi,ale=/^start/,lle=/^end/,cle=/-(top|left)$/,ule=/-(bottom|right)$/,hle=/^left/,fle=/^right/,ple=/^start/,gle=/^end/;function k2({placement:n,baseClass:e}){let t=Array.isArray(n)?n:n.split(sle),r=t.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==t.find(c=>-1!==c.search("^"+l))&&t.splice(r++,1,l)});const s=t.map(l=>function dle(n){return n.replace(ale,"left").replace(lle,"right").replace(cle,"-start").replace(ule,"-end")}(l));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:l}){const c=new RegExp(e+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let h=u.className;h=h.replace(c,""),h+=` ${function mle(n,e){let[t,i]=e.split("-");const r=t.replace(hle,"start").replace(fle,"end");let s=[r];if(i){let o=i;("left"===t||"right"===t)&&(o=o.replace(ple,"top").replace(gle,"bottom")),s.push(`${r}-${o}`)}return n&&(s=s.map(o=>`${n}-${o}`)),s.join(" ")}(e,d)}`,h=h.trim().replace(ole," "),u.className=h}},zse,$se,Kse,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function F2(n){return n}new Date(1882,10,12),new Date(2174,10,25);let j2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us,CL]]}),n})(),_S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Gt({type:n,selectors:[["",8,"navbar"]]}),n})(),$2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({}),n})();class Nc{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}class Ele{constructor(e,t,i,r,s,o){this._type=e,this._injector=t,this._viewContainerRef=i,this._renderer=r,this._ngZone=s,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(e,t,i=!1){this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,s=this._ngZone.onStable.pipe(Ar(1),Un(()=>ss(this._ngZone,r,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(e=!1){return this._windowRef?ss(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:e,runningTransition:"stop"}).pipe(Br(()=>{var t;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(t=this._contentRef)||void 0===t?void 0:t.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Sn(void 0)}_getContentRef(e,t){if(e){if(e instanceof Bi){const i=e.createEmbeddedView(t);return this._applicationRef.attachView(i),new Nc([i.rootNodes],i)}return new Nc([[this._renderer.createText(`${e}`)]])}return new Nc([])}}let Tle=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Ar(1)).subscribe(()=>{ss(this._zone,this._el.nativeElement,(t,i)=>{i&&Ud(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ss(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(Ge(ai),Ge(li))},n.\u0275cmp=Wr({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){2&t&&(ga("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Ii("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();class q2{close(e){}dismiss(e){}}class Dle{constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new De,this._dismissed=new De,this._hidden=new De,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Rn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Rn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function Nae(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Sn(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),c0(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var mp=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(mp||(mp={})),mp))();let Ple=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new De,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new yn,this.shown=new De,this.hidden=new De}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Ar(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=c0(ss(this._zone,t,()=>t.classList.remove("show"),i),ss(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};c0(ss(this._zone,this._elRef.nativeElement,(s,o)=>{o&&Ud(s),s.classList.add("show")},t),ss(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Qn(t,"keydown").pipe(Rn(this._closed$),ar(r=>r.which===Cr.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(mp.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Qn(this._dialogEl.nativeElement,"mousedown").pipe(Rn(this._closed$),Br(()=>i=!1),ba(()=>Qn(t,"mouseup").pipe(Rn(this._closed$),Ar(1))),ar(({target:r})=>t===r)).subscribe(()=>{i=!0}),Qn(t,"click").pipe(Rn(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(mp.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=I2(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ss(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(Ge(Vi),Ge(ai),Ge(li))},n.\u0275cmp=Wr({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&Pu(zoe,7),2&t){let r;Ci(r=Mi())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(ni("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),ga("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Ii("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:g2,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(dg(),ce(0,"div",0,1),ce(2,"div",2),hg(3),ue(),ue()),2&t&&ga("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),Ole=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:o}=r;if(t>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=o),r.overflow=s}}}return n.\u0275fac=function(t){return new(t||n)(Ft(Vi))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rle=(()=>{class n{constructor(t,i,r,s,o,a){this._applicationRef=t,this._injector=i,this._document=r,this._scrollBar=s,this._rendererFactory=o,this._ngZone=a,this._activeWindowCmptHasChanged=new De,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new yn,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Qn(e,"focusin").pipe(Rn(t),T(s=>s.target));Qn(e,"keydown").pipe(Rn(t),ar(s=>s.which===Cr.Tab),Jx(r)).subscribe(([s,o])=>{const[a,l]=I2(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&Qn(e,"click").pipe(Rn(t),Jx(r),T(s=>s[1])).subscribe(s=>s.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(t,i,r,s){const o=s.container instanceof HTMLElement?s.container:Dc(s.container)?this._document.querySelector(s.container):this._document.body,a=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(a.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);const u=new q2,d=this._getContentRef(t,s.injector||i,r,u,s);let h=!1!==s.backdrop?this._attachBackdrop(t,o):void 0,f=this._attachWindowComponent(t,o,d),p=new Dle(f,d,h,s.beforeDismiss);return this._registerModalRef(p),this._registerWindowCmpt(f),p.result.then(l,l),p.result.then(c,c),u.close=g=>{p.close(g)},u.dismiss=g=>{p.dismiss(g)},this._applyWindowOptions(f.instance,s),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),h&&h.instance&&(this._applyBackdropOptions(h.instance,s),h.changeDetectorRef.detectChanges()),f.changeDetectorRef.detectChanges(),p}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,i){let s=t.resolveComponentFactory(Tle).create(this._injector);return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(t,i,r){let o=t.resolveComponentFactory(Ple).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_applyWindowOptions(t,i){this._windowAttributes.forEach(r=>{Dc(i[r])&&(t[r]=i[r])})}_applyBackdropOptions(t,i){this._backdropAttributes.forEach(r=>{Dc(i[r])&&(t[r]=i[r])})}_getContentRef(t,i,r,s,o){return r?r instanceof Bi?this._createFromTemplateRef(r,s):function m2(n){return"string"==typeof n}(r)?this._createFromString(r):this._createFromComponent(t,i,r,s,o):new Nc([])}_createFromTemplateRef(t,i){const s=t.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new Nc([s.rootNodes],s)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new Nc([[i]])}_createFromComponent(t,i,r,s,o){const a=t.resolveComponentFactory(r),l=$i.create({providers:[{provide:q2,useValue:s}],parent:i}),c=a.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new Nc([[u]],c.hostView,c)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(Ft(jl),Ft($i),Ft(Vi),Ft(Ole),Ft(Tu),Ft(li))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nle=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(Ft(hp))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ile=(()=>{class n{constructor(t,i,r,s){this._moduleCFR=t,this._injector=i,this._modalStack=r,this._config=s}open(t,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(Ft(zl),Ft($i),Ft(Rle),Ft(Nle))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({providers:[Ile]}),n})(),J2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),a3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})();class Ule{constructor(e,t){this.open=e,this.close=t,t||(this.close=e)}isManual(){return"manual"===this.open||"manual"===this.close}}const Hle={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},l3=n=>n>0?JL(n):e=>e;let c3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),u3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),d3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),h3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),f3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})(),Yle=(()=>{class n{constructor(t){this._ngbConfig=t,this.autoClose=!0,this.placement="auto",this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(Ft(hp))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xle=0,Kle=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wr({type:n,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(t,i){2&t&&(Za("id",i.id),ga("tooltip"+(i.tooltipClass?" "+i.tooltipClass:"")),Ii("fade",i.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:g2,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(t,i){1&t&&(dg(),on(0,"div",0),ce(1,"div",1),hg(2),ue())},encapsulation:2,changeDetection:0}),n})(),Qle=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u){this._elementRef=t,this._renderer=i,this._ngZone=a,this._document=l,this._changeDetector=c,this.shown=new yn,this.hidden=new yn,this._ngbTooltipWindowId="ngb-tooltip-"+Xle++,this._windowRef=null,this._positioning=function L2(){let n=null;return{createPopper(e){if(!n){let i=(e.updatePopperOptions||F2)(k2(e));n=_oe(e.hostElement,e.targetElement,i)}},update(){n&&n.update()},setOptions(e){if(n){let i=(e.updatePopperOptions||F2)(k2(e));n.setOptions(i)}},destroy(){n&&(n.destroy(),n=null)}}}(),this.animation=o.animation,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disableTooltip=o.disableTooltip,this.tooltipClass=o.tooltipClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new Ele(Kle,r,s,i,this._ngZone,u),this._zoneSubscription=a.onStable.subscribe(()=>{this._positioning.update()})}set ngbTooltip(t){this._ngbTooltip=t,!t&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(t){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:i,transition$:r}=this._popupService.open(this._ngbTooltip,t,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.tooltipClass=this.tooltipClass,this._windowRef.instance.id=this._ngbTooltipWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(Ar(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-tooltip"})}),function R2(n,e,t,i,r,s,o,a){t&&n.runOutsideAngular((n=>nle?()=>setTimeout(()=>n(),100):n)(()=>{const c=Qn(e,"keydown").pipe(Rn(r),ar(h=>h.which===Cr.Escape),Br(h=>h.preventDefault())),u=Qn(e,"mousedown").pipe(T(h=>{const f=h.target;return 2!==h.button&&!m0(f,o)&&("inside"===t?m0(f,s)&&O2(f,a):"outside"===t?!m0(f,s):O2(f,a)||!m0(f,s))}),Rn(r)),d=Qn(e,"mouseup").pipe(Jx(u),ar(([h,f])=>f),JL(0),Rn(r));XL([c.pipe(T(h=>0)),d.pipe(T(h=>1))]).subscribe(h=>n.run(()=>i(h)))}))}(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function Wle(n,e,t,i,r,s,o=0,a=0){const l=function zle(n,e=Hle){const t=(n||"").trim();if(0===t.length)return[];const i=t.split(/\s+/).map(s=>s.split(":")).map(s=>{let o=e[s[0]]||s;return new Ule(o[0],o[1])}),r=i.filter(s=>s.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(t);if(1===l.length&&l[0].isManual())return()=>{};const c=function jle(n,e,t,i){return new Pe(r=>{const s=[],o=()=>r.next(!0),a=()=>r.next(!1),l=()=>r.next(!i());return t.forEach(c=>{c.open===c.close?s.push(n.listen(e,c.open,l)):s.push(n.listen(e,c.open,o),n.listen(e,c.close,a))}),()=>{s.forEach(c=>c())}})}(n,e,l,i).pipe(function Gle(n,e,t){return i=>{let r=null;const s=i.pipe(T(l=>({open:l})),ar(l=>{const c=t();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),pC());return fC(s.pipe(ar(l=>l.open),l3(n)),s.pipe(ar(l=>!l.open),l3(e))).pipe(ar(l=>l===r&&(r=null,l.open!==t())),T(l=>l.open))}}(o,a,i)).subscribe(u=>u?r():s());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:t}){t&&this.isOpen()&&(this._windowRef.instance.tooltipClass=t.currentValue)}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(Ge(ai),Ge(Hs),Ge($i),Ge(zs),Ge(Yle),Ge(li),Ge(Vi),Ge(js),Ge(jl))},n.\u0275dir=Gt({type:n,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[hr]}),n})(),wS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({}),n})();new On("live announcer delay",{providedIn:"root",factory:function Jle(){return 100}});let p3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[us]]}),n})();const Zle=[S2,C2,A2,D2,P2,j2,$2,Y2,J2,a3,c3,u3,d3,h3,f3,wS,p3];let ece=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[Zle,S2,C2,A2,D2,P2,j2,$2,Y2,J2,a3,c3,u3,d3,h3,f3,wS,p3]}),n})();var Ic=Re(36),x0=Re.t(Ic,2),na=Re(813),nce=Re.t(na,2);const ice=["pdfViewerContainer"];function xS(n,e,t){n[e]=t}function _p(){return"undefined"==typeof window}_p()||xS(x0,"verbosity",Ic.VerbosityLevel.INFOS);var zd=(()=>(function(n){n[n.DISABLED=0]="DISABLED",n[n.ENABLED=1]="ENABLED",n[n.ENHANCED=2]="ENHANCED"}(zd||(zd={})),zd))();let oce=(()=>{class n{constructor(t,i){if(this.element=t,this.ngZone=i,this.isVisible=!1,this._cMapsUrl=void 0!==x0?`https://unpkg.com/pdfjs-dist@${Ic.version}/cmaps/`:null,this._imageResourcesPath=void 0!==x0?`https://unpkg.com/pdfjs-dist@${Ic.version}/web/images/`:null,this._renderText=!0,this._renderTextMode=zd.ENABLED,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._zoomScale="page-width",this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this._showBorders=!1,this.resizeTimeout=null,this.pageScrollTimeout=null,this.isInitialized=!1,this.destroy$=new De,this.afterLoadComplete=new yn,this.pageRendered=new yn,this.pageInitialized=new yn,this.textLayerRendered=new yn,this.onError=new yn,this.onProgress=new yn,this.pageChange=new yn(!0),_p())return;let r;const s=Ic.version;r=window[`pdfWorkerSrc${s}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${s}/legacy/build/pdf.worker.min.js`),xS(Ic.GlobalWorkerOptions,"workerSrc",r)}set cMapsUrl(t){this._cMapsUrl=t}set page(t){const i=t=parseInt(t,10)||1;this._pdf&&(t=this.getValidPageNumber(t)),this._page=t,i!==t&&this.pageChange.emit(t)}set renderText(t){this._renderText=t}set renderTextMode(t){this._renderTextMode=t}set originalSize(t){this._originalSize=t}set showAll(t){this._showAll=t}set stickToPage(t){this._stickToPage=t}set zoom(t){t<=0||(this._zoom=t)}get zoom(){return this._zoom}set zoomScale(t){this._zoomScale=t}get zoomScale(){return this._zoomScale}set rotation(t){"number"==typeof t&&t%90==0?this._rotation=t:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(t){this._externalLinkTarget=t}set autoresize(t){this._canAutoResize=Boolean(t)}set fitToPage(t){this._fitToPage=Boolean(t)}set showBorders(t){this._showBorders=Boolean(t)}static getLinkTarget(t){switch(t){case"blank":return na.LinkTarget.BLANK;case"none":return na.LinkTarget.NONE;case"self":return na.LinkTarget.SELF;case"parent":return na.LinkTarget.PARENT;case"top":return na.LinkTarget.TOP}return null}ngAfterViewChecked(){if(this.isInitialized)return;const t=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=t?!1===this.isVisible&&null!=t&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(t){if(!_p()&&this.isVisible)if("src"in t)this.loadPDF();else if(this._pdf){if("renderText"in t?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:zd.DISABLED,this.resetPdfDocument()):"showAll"in t&&(this.setupViewer(),this.resetPdfDocument()),"page"in t){const{page:i}=t;if(i.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){ir(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(Rn(this.destroy$)).subscribe({next:t=>{const i=this._rotation||t.rotate,r=t.getViewport({scale:this._zoom,rotation:i}).width*n.CSS_UNITS;let s=this._zoom,o=!0;if(!this._originalSize||this._fitToPage&&r>this.pdfViewerContainer.nativeElement.clientWidth){const a=t.getViewport({scale:1,rotation:i});s=this.getScale(a.width,a.height),o=!this._stickToPage}this.pdfViewer._setScale(s,o)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfFindController.setDocument(null))}getPDFLinkServiceConfig(){const t=n.getLinkTarget(this._externalLinkTarget);return t?{externalLinkTarget:t}:{}}initEventBus(){this.eventBus=function rce(n,e){const t=new n.EventBus;return function sce(n,e){Qn(n,"documentload").pipe(Rn(e)).subscribe(()=>{const t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),Qn(n,"pagerendered").pipe(Rn(e)).subscribe(({pageNumber:t,cssTransform:i,source:r})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("pagerendered",!0,!0,{pageNumber:t,cssTransform:i}),r.div.dispatchEvent(s)}),Qn(n,"textlayerrendered").pipe(Rn(e)).subscribe(({pageNumber:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t}),i.textLayerDiv.dispatchEvent(r)}),Qn(n,"pagechanging").pipe(Rn(e)).subscribe(({pageNumber:t,source:i})=>{const r=document.createEvent("UIEvents");r.initEvent("pagechanging",!0,!0),r.pageNumber=t,i.container.dispatchEvent(r)}),Qn(n,"pagesinit").pipe(Rn(e)).subscribe(({source:t})=>{const i=document.createEvent("CustomEvent");i.initCustomEvent("pagesinit",!0,!0,null),t.container.dispatchEvent(i)}),Qn(n,"pagesloaded").pipe(Rn(e)).subscribe(({pagesCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t}),i.container.dispatchEvent(r)}),Qn(n,"scalechange").pipe(Rn(e)).subscribe(({scale:t,presetValue:i,source:r})=>{const s=document.createEvent("UIEvents");s.initEvent("scalechange",!0,!0),s.scale=t,s.presetValue=i,r.container.dispatchEvent(s)}),Qn(n,"updateviewarea").pipe(Rn(e)).subscribe(({location:t,source:i})=>{const r=document.createEvent("UIEvents");r.initEvent("updateviewarea",!0,!0),r.location=t,i.container.dispatchEvent(r)}),Qn(n,"find").pipe(Rn(e)).subscribe(({source:t,type:i,query:r,phraseSearch:s,caseSensitive:o,highlightAll:a,findPrevious:l})=>{if(t===window)return;const c=document.createEvent("CustomEvent");c.initCustomEvent("find"+i,!0,!0,{query:r,phraseSearch:s,caseSensitive:o,highlightAll:a,findPrevious:l}),window.dispatchEvent(c)}),Qn(n,"attachmentsloaded").pipe(Rn(e)).subscribe(({attachmentsCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t}),i.container.dispatchEvent(r)}),Qn(n,"sidebarviewchanged").pipe(Rn(e)).subscribe(({view:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("sidebarviewchanged",!0,!0,{view:t}),i.outerContainer.dispatchEvent(r)}),Qn(n,"pagemode").pipe(Rn(e)).subscribe(({mode:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagemode",!0,!0,{mode:t}),i.pdfViewer.container.dispatchEvent(r)}),Qn(n,"namedaction").pipe(Rn(e)).subscribe(({action:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("namedaction",!0,!0,{action:t}),i.pdfViewer.container.dispatchEvent(r)}),Qn(n,"presentationmodechanged").pipe(Rn(e)).subscribe(({active:t,switchInProgress:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("presentationmodechanged",!0,!0,{active:t,switchInProgress:i}),window.dispatchEvent(r)}),Qn(n,"outlineloaded").pipe(Rn(e)).subscribe(({outlineCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t}),i.container.dispatchEvent(r)})}(t,e),t}(nce,this.destroy$),Qn(this.eventBus,"pagerendered").pipe(Rn(this.destroy$)).subscribe(t=>{this.pageRendered.emit(t)}),Qn(this.eventBus,"pagesinit").pipe(Rn(this.destroy$)).subscribe(t=>{this.pageInitialized.emit(t)}),Qn(this.eventBus,"pagechanging").pipe(Rn(this.destroy$)).subscribe(({pageNumber:t})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=t,this.pageChange.emit(t)},100)}),Qn(this.eventBus,"textlayerrendered").pipe(Rn(this.destroy$)).subscribe(t=>{this.textLayerRendered.emit(t)})}initPDFServices(){this.pdfLinkService=new na.PDFLinkService(Object.assign({eventBus:this.eventBus},this.getPDFLinkServiceConfig())),this.pdfFindController=new na.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:zd.DISABLED,findController:this.pdfFindController,renderer:"canvas",l10n:void 0,imageResourcesPath:this._imageResourcesPath}}setupViewer(){xS(x0,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new na.PDFViewer(this.getPDFOptions()):new na.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(t){return t<1?1:t>this._pdf.numPages?this._pdf.numPages:t}getDocumentParams(){const t=typeof this.src;if(!this._cMapsUrl)return this.src;const i={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===t?i.url=this.src:"object"===t&&(void 0!==this.src.byteLength?i.data=this.src:Object.assign(i,this.src)),i}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=Ic.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=i=>{this.onProgress.emit(i)};const t=this.src;ir(this.loadingTask.promise).pipe(Rn(this.destroy$)).subscribe({next:i=>{this._pdf=i,this.lastLoaded=t,this.afterLoadComplete.emit(i),this.resetPdfDocument(),this.update()},error:i=>{this.lastLoaded=null,this.onError.emit(i)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(t,i){const r=this._showBorders?2*n.BORDER_WIDTH:0,s=this.pdfViewerContainer.nativeElement.clientWidth-r,o=this.pdfViewerContainer.nativeElement.clientHeight-r;if(0===o||0===i||0===s||0===t)return 1;let a=1;switch(this._zoomScale){case"page-fit":a=Math.min(o/i,s/t);break;case"page-height":a=o/i;break;default:a=s/t}return this._zoom*a/n.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){_p()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){_p()||this.ngZone.runOutsideAngular(()=>{Qn(window,"resize").pipe(function tce(n,e=Xx){return R((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(new v(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(100),ar(()=>this._canAutoResize&&!!this._pdf),Rn(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return n.CSS_UNITS=96/72,n.BORDER_WIDTH=9,n.\u0275fac=function(t){return new(t||n)(Ge(ai),Ge(li))},n.\u0275cmp=Wr({type:n,selectors:[["pdf-viewer"]],viewQuery:function(t,i){if(1&t&&Pu(ice,5),2&t){let r;Ci(r=Mi())&&(i.pdfViewerContainer=r.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[hr],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(t,i){1&t&&(ce(0,"div",0,1),on(2,"div",2),ue())},styles:[".ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1;--viewport-scale-factor: 1;--shadow: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=);--viewer-container-height: 0;--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\")}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:blue}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:yellow;box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid black}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:\"\";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;width:20em}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:9px}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:5px}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid #333333;margin-top:2px;padding-top:2px}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:blue}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-feature-settings:\"kern\" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:\"\"}}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;border-image:var(--shadow) 9 9 repeat;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}"]}),n})(),ace=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({}),n})();function lce(n,e){1&n&&(ce(0,"div",74),ce(1,"label",75),Lt(2,"Strategy "),on(3,"i",76),ue(),ue())}function cce(n,e){if(1&n&&(ce(0,"option",80),Lt(1),ue()),2&n){const t=e.$implicit;jt("value",t.value),Nt(1),Us(" ",t.name," ")}}function uce(n,e){if(1&n){const t=gr();ce(0,"div",77),ce(1,"select",78),fn("change",function(r){return Ni(t),cn().changeStrategyPartition(r)}),rn(2,cce,2,2,"option",79),ue(),ue()}if(2&n){const t=cn();Nt(2),jt("ngForOf",t.discrete_algorithms)}}function dce(n,e){1&n&&(ce(0,"div",74),ce(1,"label",75),Lt(2,"Strategy "),on(3,"i",81),ue(),ue())}function hce(n,e){if(1&n&&(ce(0,"option",80),Lt(1),ue()),2&n){const t=e.$implicit;jt("value",t.value),Nt(1),Us(" ",t.name," ")}}function fce(n,e){if(1&n){const t=gr();ce(0,"div",77),ce(1,"select",78),fn("change",function(r){return Ni(t),cn().changeStrategyPartition(r)}),rn(2,hce,2,2,"option",79),ue(),ue()}if(2&n){const t=cn();Nt(2),jt("ngForOf",t.continuous_algorithms)}}function pce(n,e){if(1&n){const t=gr();ce(0,"div"),ce(1,"div",0),ce(2,"div",74),ce(3,"label",82),Lt(4,"Partitioning "),on(5,"i",83),ue(),ue(),ce(6,"div",84),ce(7,"input",85),fn("change",function(r){return Ni(t),cn().onChangePartition(r)}),ue(),ue(),ce(8,"div",86),ce(9,"input",87),fn("change",function(r){return Ni(t),cn().onChangePartition(r)}),ue(),ue(),ue(),ce(10,"div",0),ce(11,"div",88),ce(12,"p",41),Lt(13," (0% = no partitioning)"),ue(),ue(),ue(),ue()}if(2&n){const t=cn();Nt(7),jt("value",t.standard_configurations.partition_percen),Nt(2),jt("value",t.standard_configurations.partition_percen)}}function gce(n,e){if(1&n){const t=gr();ce(0,"div"),ce(1,"div",0),ce(2,"div",74),ce(3,"label",82),Lt(4,"Hypercube "),on(5,"i",89),ue(),ue(),ce(6,"div",90),ce(7,"input",91),fn("change",function(r){return Ni(t),cn().changePF(r)}),ue(),ue(),ce(8,"div",92),ce(9,"p",41),Lt(10),ue(),ue(),ue(),ce(11,"div",0),ce(12,"div",29),ce(13,"div",37),ce(14,"label",93),Lt(15,"Min. bound "),on(16,"i",94),ue(),ue(),ce(17,"div",39),on(18,"input",95),ue(),ue(),ce(19,"div",29),ce(20,"div",37),ce(21,"label",93),Lt(22,"Max. bound "),on(23,"i",96),ue(),ue(),ce(24,"div",39),on(25,"input",95),ue(),ue(),ue(),ue()}if(2&n){const t=cn();Nt(7),jt("value",t.standard_configurations.partition_factor),Nt(3),Us("",t.standard_configurations.partition_factor," "),Nt(8),jt("value",t.standard_configurations.min_bound),Nt(7),jt("value",t.standard_configurations.max_bound)}}function mce(n,e){if(1&n&&(ce(0,"option",80),Lt(1),ue()),2&n){const t=e.$implicit;jt("value",t),Nt(1),Us(" ",t," ")}}function _ce(n,e){if(1&n){const t=gr();ce(0,"div",103),ce(1,"div",39),ce(2,"label",82),Lt(3,"Number of clusters "),on(4,"i",104),ue(),ue(),ce(5,"div",84),ce(6,"input",105),fn("change",function(r){return Ni(t),cn(2).changeNumberClusterSizeContinuousParams(r)}),ue(),ue(),ce(7,"div",92),ce(8,"p",41),Lt(9),ue(),ue(),ue()}if(2&n){const t=cn(2);Nt(6),jt("min",t.agglomerative_configuration.limits_cluster[0])("max",t.agglomerative_configuration.limits_cluster[1])("value",t.agglomerative_configuration.number_of_cluster),ni("disabled",t.agglomerative_configuration.limits_cluster[0]==t.agglomerative_configuration.limits_cluster[1]||null),Nt(3),Vv(t.agglomerative_configuration.number_of_cluster)}}function yce(n,e){if(1&n){const t=gr();ce(0,"div"),ce(1,"div",0),ce(2,"div",74),ce(3,"label",82),Lt(4,"Cluster size "),on(5,"i",97),ue(),ue(),ce(6,"div",84),ce(7,"input",98),fn("change",function(r){return Ni(t),cn().changeClusterSizeContinuousParams(r)}),ue(),ue(),ce(8,"div",86),ce(9,"input",87),fn("change",function(r){return Ni(t),cn().changeClusterSizeContinuousParams(r)}),ue(),ue(),ue(),ce(10,"div",0),ce(11,"div",74),ce(12,"label",82),Lt(13,"Volume size "),on(14,"i",99),ue(),ue(),ce(15,"div",84),ce(16,"input",98),fn("change",function(r){return Ni(t),cn().changeVolumenSizeContinuousParams(r)}),ue(),ue(),ce(17,"div",86),ce(18,"input",87),fn("change",function(r){return Ni(t),cn().changeVolumenSizeContinuousParams(r)}),ue(),ue(),ue(),ce(19,"div",100),ce(20,"div",74),ce(21,"label",75),Lt(22,"Distance "),on(23,"i",101),ue(),ue(),ce(24,"div",77),ce(25,"select",78),fn("change",function(r){return Ni(t),cn().changeDistanceMethod(r)}),rn(26,mce,2,2,"option",79),ue(),ue(),ue(),rn(27,_ce,10,5,"div",102),ce(28,"div",0),on(29,"div",88),ue(),ue()}if(2&n){const t=cn();Nt(7),jt("value",t.agglomerative_configuration.cluster_size),Nt(2),jt("value",t.agglomerative_configuration.cluster_size),Nt(7),jt("value",t.agglomerative_configuration.volumen_size),Nt(2),jt("value",t.agglomerative_configuration.volumen_size),Nt(8),jt("ngForOf",t.getDistance()),Nt(1),jt("ngIf","agglomerative"==t.strategy_partition&&t.agglomerative_configuration.success_request)}}function vce(n,e){if(1&n){const t=gr();ce(0,"div",115),ce(1,"button",116),fn("click",function(){Ni(t);const r=cn().index;return cn().onRemoveFile(r)}),Lt(2," Remove "),on(3,"i",117),ue(),ue()}if(2&n){const t=cn(2);Nt(1),ni("disabled",!!t.agglomerative_configuration.success_request||null)}}function bce(n,e){1&n&&(ce(0,"p"),Lt(1," The file size exceed the limit allowed (10 mb)."),ue())}function wce(n,e){if(1&n){const t=gr();ce(0,"div",106),ce(1,"div",107),ce(2,"div",29),ce(3,"label",108),Lt(4),ue(),ce(5,"div",109),on(6,"input",110),ue(),ue(),ce(7,"div",29),ce(8,"label",108),Lt(9,"Color"),ue(),ce(10,"div",109),on(11,"input",111),ue(),ue(),ce(12,"input",112),fn("change",function(r){const o=Ni(t).index;return cn().onAddFile(r,o)}),ue(),ce(13,"div",113),ce(14,"p"),Lt(15," Allowed file extensions: .csv, .txt, .tar.*"),ue(),ue(),ce(16,"div",0),rn(17,vce,4,1,"div",52),ue(),ce(18,"div",114),rn(19,bce,2,0,"p",23),ue(),ue(),ue()}if(2&n){const t=e.index,i=cn();Nt(1),jt("formGroupName",t),Nt(3),Us("Name #",t+1,""),Nt(2),ni("disabled",!!i.agglomerative_configuration.success_request||null),Nt(5),ni("disabled",!!i.agglomerative_configuration.success_request||null),Nt(1),ni("disabled",!!i.agglomerative_configuration.success_request||null),Nt(5),jt("ngIf",i.algorithms.controls.length>1),Nt(2),jt("ngIf",1==i.warningExceedFileSize)}}function xce(n,e){if(1&n&&(ce(0,"div",115),ce(1,"button",118),Lt(2,"Generate "),on(3,"i",5),ue(),ue()),2&n){const t=cn();Nt(1),jt("disabled",!t.generatingForm.valid)}}function Sce(n,e){if(1&n&&(ce(0,"div",115),ce(1,"button",119),Lt(2,"Update "),on(3,"i",5),ue(),ue()),2&n){const t=cn();Nt(1),jt("disabled",!t.generatingForm.valid)}}function Cce(n,e){if(1&n){const t=gr();ce(0,"button",120),fn("click",function(){return Ni(t),cn().downloadPdf()}),Lt(1,"PDF "),on(2,"i",121),ue()}}function Mce(n,e){if(1&n){const t=gr();ce(0,"button",120),fn("click",function(){return Ni(t),cn().downloadMetrics()}),Lt(1,"Metrics "),on(2,"i",121),ue()}}const Ace=[{path:"stn-realtime",component:kie},{path:"",component:(()=>{class n{constructor(t,i,r){this.fb=t,this.http=i,this.spinnerService=r,this.config={url:""},this.title="web",this.typeproblem="discrete",this.strategy_partition="standard",this.success_request=!1,this.discrete_algorithms=[{name:"Shannon Entropy",value:"standard"},{name:"Agglomerative Clustering",value:"agglomerative"}],this.continuous_algorithms=[{name:"Standard Partitioning",value:"standard"},{name:"Agglomerative Clustering",value:"agglomerative"}],this.standard_configurations={partition_percen:0,partition_factor:0,min_bound:-100,max_bound:100},this.agglomerative_configuration={cluster_size:50,volumen_size:25,number_of_cluster:0,limits_cluster:[0,0],success_request:!1,distances_continuous:["euclidean","manhattan"],distances_discrete:["hamming","euclidean","manhattan"],distance_selected:"euclidean"},this.default_colors=["#f542e9","#37c418","#18b3c4","#a86f32","#bcbf02"],this.pdfFilePath="",this.files=new Array,this.totalFiles=1,this.warningExceedFileSize=!1,this.hashfile="",this.generatingForm=this.fb.group({best:[0],nruns:[0],bmin:["min"],zvalue:[0],nodesize:[1],arrowsize:[.15],treelayout:[!1],algorithms:this.fb.array([this.initAlgorithms()])}),this.typeSelected="pacman",h1(function*(){return yield(yield fetch("./assets/configuration/config.json")).json()})().then(s=>this.config=s)}ngOnInit(){this.formModal=new window.bootstrap.Modal(document.getElementById("myModal"))}showSpinner(){}initAlgorithms(){return this.fb.group({name:["",mx.required],color:[null==this.generatingForm?this.default_colors[0]:this.default_colors[this.algorithms.length],mx.required],file:["",mx.required]})}get algorithms(){return this.generatingForm.get("algorithms")}addAlgorithm(){this.algorithms.push(this.initAlgorithms())}counter(){return new Array(this.totalFiles)}getDistance(){return"discrete"==this.typeproblem?this.agglomerative_configuration.distances_discrete:this.agglomerative_configuration.distances_continuous}changePF(t){this.standard_configurations.partition_factor=parseInt(t.target.value)}changeClusterSizeContinuousParams(t){this.agglomerative_configuration.cluster_size=parseFloat(t.target.value),this.agglomerative_configuration.success_request=!1,this.agglomerative_configuration.number_of_cluster=0}changeVolumenSizeContinuousParams(t){this.agglomerative_configuration.volumen_size=parseFloat(t.target.value),this.agglomerative_configuration.success_request=!1,this.agglomerative_configuration.number_of_cluster=0}changeNumberClusterSizeContinuousParams(t){this.agglomerative_configuration.number_of_cluster=parseInt(t.target.value)}changeDistanceMethod(t){this.agglomerative_configuration.distance_selected=t.target.value.toString(),console.log(this.agglomerative_configuration.distance_selected),this.agglomerative_configuration.success_request=!1,this.agglomerative_configuration.number_of_cluster=0}clickBmin(t){var i;null===(i=this.generatingForm.get("bmin"))||void 0===i||i.setValue(t.target.value)}clickTypeProblem(t){this.typeproblem=t.target.value,"discrete"==this.typeproblem?(this.agglomerative_configuration.cluster_size=50,this.agglomerative_configuration.volumen_size=25,this.agglomerative_configuration.distance_selected=this.agglomerative_configuration.distances_discrete[0]):(this.agglomerative_configuration.cluster_size=50,this.agglomerative_configuration.volumen_size=50,this.agglomerative_configuration.distance_selected=this.agglomerative_configuration.distances_continuous[0]),this.strategy_partition="standard",this.standard_configurations.partition_factor=0,this.agglomerative_configuration.success_request=!1,this.agglomerative_configuration.number_of_cluster=0}changeStrategyPartition(t){this.strategy_partition=t.target.value,this.agglomerative_configuration.success_request=!1,this.agglomerative_configuration.number_of_cluster=0}onAddFile(t,i){this.warningExceedFileSize=t.target.files[0].size>1024e4,!this.warningExceedFileSize&&(this.files[i]?this.files[i]=t.target.files[0]:this.files.push(t.target.files[0]),this.agglomerative_configuration.success_request=!1,this.agglomerative_configuration.number_of_cluster=0)}onRemoveFile(t){this.algorithms.removeAt(t)}downloadPdf(){window.open(this.pdfFilePath,"_blank")}onChangePartition(t){this.standard_configurations.partition_percen=parseFloat(t.target.value)}openFormModal(){this.formModal.show()}delay(t){return new Promise(i=>setTimeout(i,t))}getTotalPossibleCluster(t){const i=new FormData;i.append("hash_file",t),this.http.post(`${this.config.url}/agglomerative-info`,i,{responseType:"json",reportProgress:!0}).subscribe(r=>{this.agglomerative_configuration.limits_cluster=[r.limit_init,r.limit_end],0==this.agglomerative_configuration.number_of_cluster&&(this.agglomerative_configuration.number_of_cluster=parseInt(r.limit_init))},r=>{alert("Problem while downloading the file."),this.spinnerService.hide(),console.error(r)})}downloadMetrics(){this.showSpinner();const t=new FormData;t.append("hash_file",this.files.length>1?`${this.hashfile}-stn-merged-metrics.csv`:`${this.hashfile}-stn-metrics.csv`),this.http.post(`${this.config.url}/stn-metrics`,t,{responseType:"blob",reportProgress:!0}).subscribe(i=>{let r=new Blob([i],{type:"text/csv"}),s=window.URL.createObjectURL(r);var o=document.createElement("a");o.download=`${this.hashfile}-stn-metrics.csv`,o.href=s,o.click(),this.spinnerService.hide()},i=>{alert("Problem while downloading the file."),this.spinnerService.hide(),console.error(i)})}onSubmit(){var i,r,s,o,a,l,c,u,d,h,t=this;if(this.generatingForm.valid){this.showSpinner();const f=new FormData;for(let p of this.files)f.append("file",p,p.name);return Object.values(this.algorithms.controls).forEach(p=>{f.append("name[]",p.value.name),f.append("color[]",p.value.color)}),this.agglomerative_configuration.success_request||(this.hashfile=Array.from(Array(20),()=>Math.floor(36*Math.random()).toString(36)).join("").toUpperCase()),f.append("hash_file",this.hashfile),f.append("best",0==(null===(i=this.generatingForm.get("best"))||void 0===i?void 0:i.value)?"":null===(r=this.generatingForm.get("best"))||void 0===r?void 0:r.value.toString()),f.append("nruns",0==(null===(s=this.generatingForm.get("nruns"))||void 0===s?void 0:s.value)?"":null===(o=this.generatingForm.get("nruns"))||void 0===o?void 0:o.value.toString()),f.append("zvalue",this.standard_configurations.partition_percen.toString()),f.append("nodesize",0==(null===(a=this.generatingForm.get("nodesize"))||void 0===a?void 0:a.value)?"1":null===(l=this.generatingForm.get("nodesize"))||void 0===l?void 0:l.value.toString()),f.append("arrowsize",.15==(null===(c=this.generatingForm.get("arrowsize"))||void 0===c?void 0:c.value)?"0.15":null===(u=this.generatingForm.get("arrowsize"))||void 0===u?void 0:u.value.toString()),f.append("bmin","min"==(null===(d=this.generatingForm.get("bmin"))||void 0===d?void 0:d.value)?"1":"0"),f.append("treelayout",null===(h=this.generatingForm.get("treelayout"))||void 0===h?void 0:h.value),f.append("typeproblem",this.typeproblem),f.append("strategy_partition",this.strategy_partition),"continuous"==this.typeproblem&&"standard"==this.strategy_partition?(f.append("standard_configuration_partition_factor",this.standard_configurations.partition_factor.toString()),f.append("standard_configuration_min_bound",this.standard_configurations.min_bound.toString()),f.append("standard_configuration_max_bound",this.standard_configurations.max_bound.toString())):"agglomerative"==this.strategy_partition&&(f.append("agglomerative_configuration_cluster_size",this.agglomerative_configuration.cluster_size.toString()),f.append("agglomerative_configuration_volumen_size",this.agglomerative_configuration.volumen_size.toString()),f.append("agglomerative_configuration_distance_method",this.agglomerative_configuration.distance_selected.toString()),this.agglomerative_configuration.success_request&&f.append("agglomerative_configuration_number_of_cluster",this.agglomerative_configuration.number_of_cluster.toString())),this.spinnerService.show(),this.http.post(`${this.config.url}/stn`,f,{responseType:"blob",reportProgress:!0}).subscribe(function(){var p=h1(function*(g){"agglomerative"==t.strategy_partition&&(t.getTotalPossibleCluster(t.hashfile),t.agglomerative_configuration.success_request=!0);let m=new Blob([g],{type:"application/pdf"}),_=window.URL.createObjectURL(m);t.pdfFilePath=_,t.spinnerService.hide()});return function(g){return p.apply(this,arguments)}}(),p=>{alert("There a problem in the input file."),this.spinnerService.hide(),console.error(p)}),!0}return alert("Please fill all the required fields!"),!1}}return n.\u0275fac=function(t){return new(t||n)(Ge(Mre),Ge(IL),Ge(WL))},n.\u0275cmp=Wr({type:n,selectors:[["app-stn-v1"]],decls:165,vars:31,consts:[[1,"row"],[1,"col-md-3"],[1,"col-md-8",2,"margin-left","2.6em"],["href","./assets/tutorial_stnweb_v1_1.pdf","target","_blank"],[1,"btn","btn-warning","btn-lg","float-end"],[1,"bi","bi-filetype-pdf"],[1,"col-xl-4"],[3,"formGroup","ngSubmit"],[1,"row","form-group","p-2","border","bg-light","top-buffer","d-flex","justify-content-center"],[1,"col-sm-4","top-buffer"],["role","group","aria-label","Basic radio toggle button group",1,"btn-group-vertical"],["type","radio","value","min","name","bmin","id","btnradio1","autocomplete","off","checked","",1,"btn-check",3,"click"],["for","btnradio1",1,"btn","btn-outline-primary"],["type","radio","value","max","name","bmin","id","btnradio2","autocomplete","off",1,"btn-check",3,"click"],["for","btnradio2",1,"btn","btn-outline-primary"],[1,"col-sm-6","top-buffer"],["type","radio","value","discrete","name","typeproblem","id","btnradio-discrete","autocomplete","off","checked","",1,"btn-check",3,"click"],["for","btnradio-discrete",1,"btn","btn-outline-primary"],["type","radio","value","continuous","name","typeproblem","id","btnradio-continuous","autocomplete","off",1,"btn-check",3,"click"],["for","btnradio-continuous",1,"btn","btn-outline-primary"],[1,"top-buffer","d-flex","justify-content-center"],["class","col-sm-4",4,"ngIf"],["class","col-sm-8",4,"ngIf"],[4,"ngIf"],["id","accordionFlushExample",1,"accordion","accordion-flush"],[1,"accordion-item","bg-light"],["id","flush-headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseOne","aria-expanded","false","aria-controls","flush-collapseOne",1,"accordion-button","collapsed","bg-light","p-2"],["id","flush-collapseOne","aria-labelledby","flush-headingOne","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse"],[1,"form-group","row","top-buffer"],[1,"col-sm-9"],["for","inputPassword3",1,"col-sm-6","col-form-label"],["placement","end","ngbTooltip","Value of the best-known solution for the analyzed problem instance (not necessarily to be found in the analyzed trajectories).",1,"bi","bi-info-circle"],[1,"col-sm-3"],["type","number","formControlName","best","id","inputPassword3","placeholder","best",1,"form-control"],["placement","end","ngbTooltip","Number of trajectories to be utilized from each input file.",1,"bi","bi-info-circle"],["type","number","formControlName","nruns","min","0","id","inputPassword3","placeholder","nruns",1,"form-control"],[1,"col-sm-7"],["placement","end","ngbTooltip","Weighting factor for the relative size of solutions (search space locations) in the STNs to be generated.",1,"bi","bi-info-circle"],[1,"col-sm-5"],["type","range","formControlName","nodesize","min","0.5","max","4","step","0.1","placeholder","nodesize",1,"form-range",3,"value"],[2,"text-align","center"],["type","range","formControlName","arrowsize","min","0.15","max","0.80","step","0.05","placeholder","arrowsize",1,"form-range",3,"value"],["placement","end","ngbTooltip","Do you want to generate the STNs in tree layout?",1,"bi","bi-info-circle"],["type","checkbox","value","","id","flexCheckDefault","formControlName","treelayout",1,"form-check-input"],[1,"row","top-buffer","d-flex","justify-content-center"],["formArrayName","algorithms"],["class","form-group row top-buffer p-2 border bg-light",4,"ngFor","ngForOf"],[1,"p-2"],["type","button",1,"btn","iiia-orange",3,"click"],[1,"bi","bi-plus-circle"],[1,"form-group","row","top-buffer","text-center"],["class","p-1",4,"ngIf"],[1,"col-sm-7","bg-light","top-buffer","border","text-center",2,"margin-top","1.2em","margin-left","2em"],[1,"col","px-md-6"],[1,"p-3"],["type","button","class","btn iiia-blue","style","color:white",3,"click",4,"ngIf"],[1,"container-fluid","px-0"],[2,"width","100vh","height","100vh","display","block","margin","0 auto","padding","0 auto",3,"original-size","render-text","rotation","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","external-link-target","autoresize","show-borders","src"],["id","myModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"col-md-12"],[1,"col-6","mx-auto","text-center"],["src","https://github.com/gabro8a/STNs/raw/main/images/STN.png",1,"img-fluid"],[1,"col-12","mx-auto"],["href","https://github.com/gabro8a/STNs#part1","target","_blank"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["size","medium",3,"type"],[1,"col-sm-4"],[1,"col-form-label"],["placement","end","ngbTooltip","Method for the partitioning of the search space.",1,"bi","bi-info-circle"],[1,"col-sm-8"],["aria-label","Default select example",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placement","end","ngbTooltip","Type of algorithm to perform partitioning in the continuous case.",1,"bi","bi-info-circle"],[1,"col-form-label",2,"margin-top","0.6em"],["placement","end","ngbTooltip","The percentage of variables to be removed after ordering them (ascending) with respect to their Shannon Entropy.",1,"bi","bi-info-circle"],[1,"col-sm-5",2,"margin-top","1em"],["type","range","min","0.0","max","100.0 ","step","0.01",1,"align-middle",3,"value","change"],[1,"col-sm-3",2,"margin-top","0.5em"],["type","number",1,"form-control",3,"value","change"],[1,"col-sm-12"],["placement","end","ngbTooltip","The partitioning factor to create the cells in the hypercube (lower factor equals less partitioning).",1,"bi","bi-info-circle"],[1,"col-sm-6",2,"margin-top","1em"],["type","range","min","-3","max","3","step","1","id","myRange",1,"align-middle",2,"width","100%",3,"value","change"],[1,"col-sm-2",2,"margin-top","1em"],[1,"col-sm-6","col-form-label"],["placement","end","ngbTooltip","Minimum limit for the function used in the continuous case.",1,"bi","bi-info-circle"],["type","number",1,"form-control",3,"value"],["placement","end","ngbTooltip","Maximum limit for the function used in the continuous case.",1,"bi","bi-info-circle"],["placement","end","ngbTooltip","Maximal cluster size in terms of the percentage of all solutions a cluster contains.",1,"bi","bi-info-circle"],["type","range","min","0","max","100","step","0.1",1,"align-middle",2,"width","100%",3,"value","change"],["placement","end","ngbTooltip","Maximal cluster size in terms of the percentage of the covered search space volume spanned by the solutions a cluster contains.",1,"bi","bi-info-circle"],[1,"row","top-buffer","d-flex","justify-content-center",2,"padding-bottom","5px"],["placement","end","ngbTooltip","Metric for the calculation of cluster distances.",1,"bi","bi-info-circle"],["class","row border border-success","style","padding-bottom: 5px",4,"ngIf"],[1,"row","border","border-success",2,"padding-bottom","5px"],["placement","end","ngbTooltip","Number of clusters obtained for these solutions (from lowest to highest partitioning).",1,"bi","bi-info-circle"],["type","range","step","1",1,"align-middle",3,"min","max","value","change"],[1,"form-group","row","top-buffer","p-2","border","bg-light"],[3,"formGroupName"],["for","inputPassword3",1,"col-sm-4","col-form-label"],[1,"col-sm-6"],["type","text","formControlName","name","required","","pattern",".*\\S+.*",1,"form-control"],["type","color","formControlName","color","value","#ff0000","id","inputPassword3","placeholder","",1,"form-control"],["type","file","formControlName","file","accept",".csv, .txt, .tar.gz, .tar.xz",1,"form-control","form-control","top-buffer",3,"change"],[1,"row","p-1"],[1,"row","p-1","text-danger"],[1,"p-1"],["type","button",1,"btn","btn-danger","float-end",3,"click"],[1,"bi","bi-trash"],["type","submit",1,"btn","iiia-blue","btn-lg",2,"color","white",3,"disabled"],["type","submit",1,"btn","btn-success","btn-lg",3,"disabled"],["type","button",1,"btn","iiia-blue",2,"color","white",3,"click"],[1,"bi","bi-download"]],template:function(t,i){if(1&t&&(ce(0,"div",0),ce(1,"div",1),ce(2,"h6"),Lt(3,"Configuration"),ue(),ue(),ce(4,"div",2),ce(5,"a",3),ce(6,"button",4),Lt(7,"Tutorial "),on(8,"i",5),ue(),ue(),ue(),ue(),ce(9,"div",0),ce(10,"div",6),ce(11,"form",7),fn("ngSubmit",function(){return i.onSubmit()}),ce(12,"div",8),ce(13,"div",9),ce(14,"div",10),ce(15,"input",11),fn("click",function(s){return i.clickBmin(s)}),ue(),ce(16,"label",12),Lt(17,"Minimization"),ue(),ce(18,"input",13),fn("click",function(s){return i.clickBmin(s)}),ue(),ce(19,"label",14),Lt(20,"Maximization"),ue(),ue(),ue(),ce(21,"div",15),ce(22,"div",10),ce(23,"input",16),fn("click",function(s){return i.clickTypeProblem(s)}),ue(),ce(24,"label",17),Lt(25,"Discrete Problem"),ue(),ce(26,"input",18),fn("click",function(s){return i.clickTypeProblem(s)}),ue(),ce(27,"label",19),Lt(28,"Continuous Problem"),ue(),ue(),ue(),ce(29,"div",20),rn(30,lce,4,0,"div",21),rn(31,uce,3,1,"div",22),rn(32,dce,4,0,"div",21),rn(33,fce,3,1,"div",22),ue(),rn(34,pce,14,2,"div",23),rn(35,gce,26,4,"div",23),rn(36,yce,30,6,"div",23),ce(37,"div",24),ce(38,"div",25),ce(39,"h2",26),ce(40,"button",27),Lt(41," Advanced options "),ue(),ue(),ce(42,"div",28),ce(43,"div",29),ce(44,"div",30),ce(45,"label",31),Lt(46,"Value best-known solution (if any) "),on(47,"i",32),ue(),ue(),ce(48,"div",33),on(49,"input",34),ue(),ue(),ce(50,"div",29),ce(51,"div",30),ce(52,"label",31),Lt(53,"Number of runs "),on(54,"i",35),ue(),ue(),ce(55,"div",33),on(56,"input",36),ue(),ue(),ce(57,"div",29),ce(58,"div",37),ce(59,"label",31),Lt(60,"Vertex size "),on(61,"i",38),ue(),ue(),ce(62,"div",39),on(63,"input",40),ce(64,"p",41),Lt(65),ue(),ue(),ue(),ce(66,"div",29),ce(67,"div",37),ce(68,"label",31),Lt(69,"Arrow size "),on(70,"i",35),ue(),ue(),ce(71,"div",39),on(72,"input",42),ce(73,"p",41),Lt(74),ue(),ue(),ue(),ce(75,"div",29),ce(76,"div",30),ce(77,"label",31),Lt(78,"Tree layout? "),on(79,"i",43),ue(),ue(),ce(80,"div",33),on(81,"input",44),ue(),ue(),ue(),ue(),ue(),ue(),ce(82,"div",45),ce(83,"h6"),Lt(84,"Input files (algorithms)"),ue(),ue(),ce(85,"div",46),rn(86,wce,20,7,"div",47),ue(),ce(87,"div",48),ce(88,"button",49),fn("click",function(){return i.addAlgorithm()}),Lt(89,"Add New Algorithm "),on(90,"i",50),ue(),ue(),ce(91,"div",51),rn(92,xce,4,1,"div",52),rn(93,Sce,4,1,"div",52),ue(),ue(),ue(),ce(94,"div",53),ce(95,"div",0),ce(96,"div",54),ce(97,"div",55),rn(98,Cce,3,0,"button",56),ue(),ue(),ce(99,"div",54),ce(100,"div",55),rn(101,Mce,3,0,"button",56),ue(),ue(),ue(),ce(102,"div",0),ce(103,"div",57),Lt(104,"PDF Viewer"),ue(),ue(),ce(105,"div",0),on(106,"pdf-viewer",58),ue(),on(107,"div",0),ue(),ue(),ce(108,"div",59),ce(109,"div",60),ce(110,"div",61),ce(111,"div",62),ce(112,"h5",63),Lt(113,"Search Trajectory Networks (STNs) - Help"),ue(),on(114,"button",64),ue(),ce(115,"div",65),ce(116,"div",66),ce(117,"div",0),ce(118,"div",67),on(119,"img",68),ue(),ue(),ce(120,"div",0),ce(121,"div",69),Lt(122," Details on each of the parameters: "),ce(123,"ul"),ce(124,"li"),ce(125,"strong"),Lt(126,"Value best-known solution (if any):"),ue(),Lt(127," the best evaluation in the set of input files is used. If no argument is given, the best evaluation in the set of input files is used."),ue(),ce(128,"li"),ce(129,"strong"),Lt(130,"Number of runs:"),ue(),Lt(131," the number of runs from the data files to be used. This should be a number between 1 up to total number of runs within in the raw data files. If no argument is given, the largest run number in the input files is used. "),ue(),ce(132,"li"),ce(133,"strong"),Lt(134,"Vertex size:"),ue(),Lt(135," size of the vertex. By default is 1. "),ue(),ce(136,"li"),ce(137,"strong"),Lt(138,"Tree layout:"),ue(),Lt(139," change the standard layout. By default is unselected."),ue(),ce(140,"li"),ce(141,"strong"),Lt(142,"Partition (percentage):"),ue(),Lt(143," different partition levels in the input file."),ue(),ue(),ce(144,"p"),Lt(145,"Input file restriction:"),ue(),ce(146,"ul"),ce(147,"li"),Lt(148,"The only file formats that allowed are .txt and .csv. "),ce(149,"strong"),Lt(150,"If the file size is larger than 10MB, then you should compress this file and upload it in .tar.* format."),ue(),ue(),ue(),ce(151,"p"),Lt(152,"An example of an input format (you can use the "),ce(153,"strong"),Lt(154,"comma or space"),ue(),Lt(155," for as a separator):"),ue(),ce(156,"pre"),Lt(157,"            Run,Fitness,Solution\n            1,100,0101100011\n            1,60,0101100010\n            1,10,0101100111\n            ...\n            10,1,1101111011\n          "),ue(),ce(158,"p"),ce(159,"a",70),Lt(160,"More information"),ue(),ue(),ue(),ue(),ue(),ue(),ce(161,"div",71),ce(162,"button",72),Lt(163," Close "),ue(),ue(),ue(),ue(),ue(),on(164,"ngx-spinner",73)),2&t){let r,s;Nt(11),jt("formGroup",i.generatingForm),Nt(19),jt("ngIf","discrete"==i.typeproblem),Nt(1),jt("ngIf","discrete"==i.typeproblem),Nt(1),jt("ngIf","continuous"==i.typeproblem),Nt(1),jt("ngIf","continuous"==i.typeproblem),Nt(1),jt("ngIf","discrete"==i.typeproblem&&"standard"==i.strategy_partition),Nt(1),jt("ngIf","continuous"==i.typeproblem&&"standard"==i.strategy_partition),Nt(1),jt("ngIf","agglomerative"==i.strategy_partition),Nt(27),jt("value",.2),Nt(2),Us("",null==(r=i.generatingForm.get("nodesize"))?null:r.value," "),Nt(7),jt("value",.2),Nt(2),Us("",null==(s=i.generatingForm.get("arrowsize"))?null:s.value," "),Nt(12),jt("ngForOf",i.algorithms.controls),Nt(2),ni("disabled",!!i.agglomerative_configuration.success_request||null),Nt(4),jt("ngIf",!i.agglomerative_configuration.success_request),Nt(1),jt("ngIf",i.agglomerative_configuration.success_request),Nt(5),jt("ngIf",""!=i.pdfFilePath),Nt(3),jt("ngIf",""!=i.pdfFilePath),Nt(5),jt("original-size",!0)("render-text",!0)("rotation",0)("show-all",!0)("fit-to-page",!1)("zoom",1)("zoom-scale","page-width")("stick-to-page",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1)("src",i.pdfFilePath),Nt(58),jt("type",i.typeSelected)}},directives:[Ox,bx,t0,ql,Qle,Rx,W_,JF,kx,Bx,Nx,gx,r0,$l,oce,Qre,fL,gL,n0,o0,Vx],styles:['@import"https://fonts.googleapis.com/css2?family=Lustria&display=swap";[_nghost-%COMP%]{font-family:Lustria,serif;font-size:16px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}h6[_ngcontent-%COMP%]{font-weight:700}.\\a[_ngcontent-%COMP%]   \\ \\ [_ngcontent-%COMP%]     .tooltip-inner{width:400px;background-color:#fde6af;color:#000}.tooltip[_ngcontent-%COMP%] > .tooltip-inner[_ngcontent-%COMP%]{background-color:#f49c12}.tooltip.bottom[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{top:0;left:50%;margin-left:-5px;background-color:#f49c12;border-bottom-color:#f49c12;border-width:0 5px 5px}.btn-check[_ngcontent-%COMP%]:checked + .btn[_ngcontent-%COMP%], [_ngcontent-%COMP%]:not(.btn-check) + .btn[_ngcontent-%COMP%]:active, .btn[_ngcontent-%COMP%]:first-child:active, .btn.active[_ngcontent-%COMP%], .btn.show[_ngcontent-%COMP%]{background-color:#306f8c;border-color:#306f8c}.btn-outline-primary[_ngcontent-%COMP%]{--bs-btn-color: #306f8c;--bs-btn-border-color: #306f8c;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #306f8c;--bs-btn-hover-border-color: #306f8c;--bs-btn-focus-shadow-rgb: 13, 110, 253;--bs-btn-active-color: #fff;--bs-btn-active-bg: #306f8c;--bs-btn-active-border-color: #306f8c;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);--bs-btn-disabled-color: #306f8c;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #306f8c;--bs-gradient: none}.section[_ngcontent-%COMP%]{width:100%;border:1px solid #2d2d2d;display:flex;justify-content:center;align-items:center}.nopadding[_ngcontent-%COMP%]{padding:0!important;margin:0!important}.iiia-blue[_ngcontent-%COMP%]{background-color:#306f8c}.iiia-orange[_ngcontent-%COMP%]{background-color:#f49c12}.navbar-custom[_ngcontent-%COMP%]{background-color:#f8f8ff;height:100px;font-weight:700}.navbar-custom[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#306f8c;font-size:30px}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#000;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}svg.material-icons[_ngcontent-%COMP%]{height:24px;width:auto}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px}.card[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;display:flex;flex-direction:row;justify-content:center;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:rgb(58,58,58);color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}.footer[_ngcontent-%COMP%]{position:absolute;display:flex;top:0;left:0;right:0;height:50px;background-color:#000;align-items:center;width:100%}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:#1b1f2359;background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width: 767px){.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width: 575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}.top-buffer[_ngcontent-%COMP%]{margin-top:20px}']}),n})()}];let Ece=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({imports:[[UO.forRoot(Ace)],UO]}),n})(),Tce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wr({type:n,selectors:[["app-root"]],decls:52,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-custom"],[1,"text-left"],["src","assets/iiia.png","width","160",1,"img-fluid"],["src","assets/csic.png","width","160",1,"img-fluid"],[1,"text-center","col-sm-7"],["href","#",1,"navbar-brand","p-2",2,"text-align","center"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"form-inline","my-2","my-lg-3",2,"margin-right","1%"],[1,"text-right"],["src","assets/stirling.png","width","160",1,"img-fluid"],[1,"navbar-nav","ml-auto","mb-2","mb-lg-0"],[1,"nav-item","active"],["role","main",1,"container-fluid","m-5"],[1,"text-center","text-lg-start","bg-light","text-muted"],[1,"d-flex","justify-content-center","justify-content-lg-between","p-4","border-bottom"],[1,""],[1,"container","text-center","text-md-start","mt-5"],[1,"row","mt-4"],[1,"col-md-3","col-lg-3","col-xl-3","mx-auto","mb-4"],[1,"text-uppercase","fw-bold","mb-4"],["href","https://www.stir.ac.uk/people/257336","target","_blank",1,"text-reset"],["href","http://www.kmalan.co.za","target","_blank",1,"text-reset"],["href","https://www.iiia.csic.es/~christian.blum/","target","_blank",1,"text-reset"],["href","https://camilochs.github.io/web/","target","_blank",1,"text-reset"],[1,"col-md-2","col-lg-2","col-xl-2","mx-auto","mb-4"],["href","https://github.com/gabro8a/STNs#part1","target","_blank",1,"text-reset"],["href","https://doi.org/10.1016/j.asoc.2021.107492","target","_blank",1,"text-reset"],[1,"col-md-2","col-lg-2","col-xl-2","mx-auto","mb-md-0","mb-4"],["src","/assets/micin-aei.png",1,"img-fluid"],[1,"text-center","p-4",2,"background-color","rgba(0, 0, 0, 0.05)"]],template:function(t,i){1&t&&(ce(0,"nav",0),ce(1,"div",1),on(2,"img",2),on(3,"img",3),ue(),ce(4,"div",4),ce(5,"a",5),Lt(6,"Search Trajectory Networks"),ue(),ue(),on(7,"div",6),ce(8,"form",7),ce(9,"div",8),on(10,"img",9),ue(),ce(11,"ul",10),on(12,"li",11),ue(),ue(),ue(),ce(13,"div",12),on(14,"router-outlet"),ue(),ce(15,"footer",13),on(16,"section",14),ce(17,"section",15),ce(18,"div",16),ce(19,"div",17),ce(20,"div",18),ce(21,"h6",19),Lt(22," Authors "),ue(),ce(23,"p"),ce(24,"a",20),Lt(25,"Gabriela Ochoa "),ue(),ue(),ce(26,"p"),ce(27,"a",21),Lt(28,"Katherine Malan"),ue(),ue(),ce(29,"p"),ce(30,"a",22),Lt(31,"Christian Blum"),ue(),ue(),ce(32,"p"),ce(33,"a",23),Lt(34,"Camilo Chac\xf3n Sartori (web app)"),ue(),ue(),ue(),ce(35,"div",24),ce(36,"h6",19),Lt(37," Useful links "),ue(),ce(38,"p"),ce(39,"a",25),Lt(40,"Repository (GitHub) "),ue(),ue(),ce(41,"p"),ce(42,"a",26),Lt(43,"Paper"),ue(),ue(),ue(),ce(44,"div",27),ce(45,"h6",19),Lt(46," Contact "),ue(),Lt(47," cchacon@iiia.csic.es "),ue(),ce(48,"div",27),on(49,"img",28),ue(),ue(),ue(),ue(),ce(50,"div",29),Lt(51," \xa9 2023 Copyright. Version 1.1. "),ue(),ue())},directives:[_S,Ox,bx,e0,i1],styles:['@import"https://fonts.googleapis.com/css2?family=Lustria&display=swap";[_nghost-%COMP%]{font-family:Lustria,serif;font-size:16px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}h6[_ngcontent-%COMP%]{font-weight:700}.\\a[_ngcontent-%COMP%]   \\ \\ [_ngcontent-%COMP%]     .tooltip-inner{width:400px;background-color:#fde6af;color:#000}.tooltip[_ngcontent-%COMP%] > .tooltip-inner[_ngcontent-%COMP%]{background-color:#f49c12}.tooltip.bottom[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{top:0;left:50%;margin-left:-5px;background-color:#f49c12;border-bottom-color:#f49c12;border-width:0 5px 5px}.btn-check[_ngcontent-%COMP%]:checked + .btn[_ngcontent-%COMP%], [_ngcontent-%COMP%]:not(.btn-check) + .btn[_ngcontent-%COMP%]:active, .btn[_ngcontent-%COMP%]:first-child:active, .btn.active[_ngcontent-%COMP%], .btn.show[_ngcontent-%COMP%]{background-color:#306f8c;border-color:#306f8c}.btn-outline-primary[_ngcontent-%COMP%]{--bs-btn-color: #306f8c;--bs-btn-border-color: #306f8c;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #306f8c;--bs-btn-hover-border-color: #306f8c;--bs-btn-focus-shadow-rgb: 13, 110, 253;--bs-btn-active-color: #fff;--bs-btn-active-bg: #306f8c;--bs-btn-active-border-color: #306f8c;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);--bs-btn-disabled-color: #306f8c;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #306f8c;--bs-gradient: none}.section[_ngcontent-%COMP%]{width:100%;border:1px solid #2d2d2d;display:flex;justify-content:center;align-items:center}.nopadding[_ngcontent-%COMP%]{padding:0!important;margin:0!important}.iiia-blue[_ngcontent-%COMP%]{background-color:#306f8c}.iiia-orange[_ngcontent-%COMP%]{background-color:#f49c12}.navbar-custom[_ngcontent-%COMP%]{background-color:#f8f8ff;height:100px;font-weight:700}.navbar-custom[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#306f8c;font-size:30px}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#000;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}svg.material-icons[_ngcontent-%COMP%]{height:24px;width:auto}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px}.card[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;display:flex;flex-direction:row;justify-content:center;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:rgb(58,58,58);color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}.footer[_ngcontent-%COMP%]{position:absolute;display:flex;top:0;left:0;right:0;height:50px;background-color:#000;align-items:center;width:100%}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:#1b1f2359;background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width: 767px){.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width: 575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}.top-buffer[_ngcontent-%COMP%]{margin-top:20px}']}),n})();function g3(){return"undefined"!=typeof window&&void 0!==window.document}function SS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Dl(n){switch(n.length){case 0:return new kd;case 1:return n[0];default:return new GL(n)}}function m3(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let g=p,m=u[p];if("offset"!==p)switch(g=e.normalizePropertyName(g,o),m){case"!":m=r[p];break;case Ha:m=s[p];break;default:m=e.normalizeStyleValue(p,g,m,o)}f[g]=m}),h||a.push(f),c=f,l=d}),o.length){const u="\n - ";throw new Error(`Unable to animate due to the following errors:${u}${o.join(u)}`)}return a}function CS(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&MS(t,"start",n)));break;case"done":n.onDone(()=>i(t&&MS(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&MS(t,"destroy",n)))}}function MS(n,e,t){const i=t.totalTime,s=AS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function AS(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Os(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function _3(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let ES=(n,e)=>!1,TS=(n,e)=>!1,y3=(n,e,t)=>[];const v3=SS();(v3||"undefined"!=typeof Element)&&(ES=g3()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),TS=(()=>{if(v3||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):TS}})(),y3=(n,e,t)=>{let i=[];if(t){const r=n.querySelectorAll(e);for(let s=0;s<r.length;s++)i.push(r[s])}else{const r=n.querySelector(e);r&&i.push(r)}return i});let kc=null,b3=!1;function DS(n){kc||(kc=function Pce(){return"undefined"!=typeof document?document.body:null}()||{},b3=!!kc.style&&"WebkitAppearance"in kc.style);let e=!0;return kc.style&&!function Dce(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in kc.style,!e&&b3&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in kc.style)),e}const PS=TS,OS=ES,RS=y3;function w3(n){const e={};return Object.keys(n).forEach(t=>{const i=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=n[t]}),e}let x3=(()=>{class n{validateStyleProperty(t){return DS(t)}matchesElement(t,i){return PS(t,i)}containsElement(t,i){return OS(t,i)}query(t,i,r){return RS(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new kd(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),NS=(()=>{class n{}return n.NOOP=new x3,n})();const IS="ng-enter",S0="ng-leave",C0="ng-trigger",M0=".ng-trigger",C3="ng-animating",kS=".ng-animating";function Fc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:FS(parseFloat(e[1]),e[2])}function FS(n,e){return"s"===e?1e3*n:n}function A0(n,e,t){return n.hasOwnProperty("duration")?n:function Nce(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};r=FS(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=FS(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&e.splice(l,0,`The provided timing value "${n}" is invalid.`)}return{duration:r,delay:s,easing:o}}(n,e,t)}function jd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Pl(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else jd(n,t);return t}function A3(n,e,t){return t?e+":"+t+";":""}function E3(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=A3(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=A3(0,Fce(t),n.style[t]));n.setAttribute("style",e)}function ia(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=BS(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),SS()&&E3(n))}function Lc(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=BS(t);n.style[i]=""}),SS()&&E3(n))}function yp(n){return Array.isArray(n)?1==n.length?n[0]:HL(n):n}const LS=new RegExp("{{\\s*(.+?)\\s*}}","g");function T3(n){let e=[];if("string"==typeof n){let t;for(;t=LS.exec(n);)e.push(t[1]);LS.lastIndex=0}return e}function E0(n,e,t){const i=n.toString(),r=i.replace(LS,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return r==i?n:r}function T0(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const kce=/-+([a-z0-9])/g;function BS(n){return n.replace(kce,(...e)=>e[1].toUpperCase())}function Fce(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function D3(n,e){return 0===n||0===e}function P3(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=VS(n,l)})}}return e}function Rs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function VS(n,e){return window.getComputedStyle(n)[e]}function Lce(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Bce(n,e,t){if(":"==n[0]){const l=function Vce(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(O3(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(O3(o,r))}(i,t,e)):t.push(n),t}const P0=new Set(["true","1"]),O0=new Set(["false","0"]);function O3(n,e){const t=P0.has(n)||O0.has(n),i=P0.has(e)||O0.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?P0.has(n):O0.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?P0.has(e):O0.has(e)),o&&a}}const Uce=new RegExp("s*:selfs*,?","g");function US(n,e,t){return new Hce(n).build(e,t)}class Hce{constructor(e){this._driver=e}build(e,t){const i=new Gce(t);return this._resetContextStyleTimingState(i),Rs(this,yp(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};if(i.styles.forEach(a=>{if(R0(a)){const l=a;Object.keys(l).forEach(c=>{T3(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size){const a=T0(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Rs(this,yp(e.animation),t);return{type:1,matchers:Lce(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Bc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Rs(this,i,t)),options:Bc(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Rs(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Bc(e.options)}}visitAnimate(e,t){const i=function $ce(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return HS(A0(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=HS(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||A0(i,e),HS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:ip({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=ip(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==Ha?i.push(o):t.errors.push(`The provided style string value ${o} is not allowed.`):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(R0(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),t.options&&function Ice(n,e,t){const i=e.params||{},r=T3(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(_=>{const w=this._makeStyleAst(_,t);let D=null!=w.offset?w.offset:function Wce(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(R0(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(R0(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(w.styles),M=0;return null!=D&&(s++,M=w.offset=D),l=l||M<0||M>1,a=a||M<c,c=M,o.push(M),w});l&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((_,w)=>{const D=h>0?w==f?1:h*w:o[w],M=D*m;t.currentTime=p+g.delay+M,g.duration=M,this._validateStyleAst(_,t),_.offset=D,i.styles.push(_)}),i}visitReference(e,t){return{type:8,animation:Rs(this,yp(e.animation),t),options:Bc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Bc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Bc(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function zce(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Uce,"")),n=n.replace(/@\*/g,M0).replace(/@\w+/g,t=>M0+"-"+t.substr(1)).replace(/:animating/g,kS),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Os(t.collectedStyles,t.currentQuerySelector,{});const a=Rs(this,yp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Bc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:A0(e.timings,t.errors,!0);return{type:12,animation:Rs(this,yp(e.animation),t),timings:i,options:null}}}class Gce{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function R0(n){return!Array.isArray(n)&&"object"==typeof n}function Bc(n){return n?(n=jd(n)).params&&(n.params=function jce(n){return n?jd(n):null}(n.params)):n={},n}function HS(n,e,t){return{duration:n,delay:e,easing:t}}function zS(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class N0{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Xce=new RegExp(":enter","g"),Qce=new RegExp(":leave","g");function jS(n,e,t,i,r,s={},o={},a,l,c=[]){return(new Jce).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class Jce{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new N0;const d=new GS(e,t,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),Rs(this,i,d);const h=d.timelines.filter(f=>f.containsAnimation());if(h.length&&Object.keys(a).length){const f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[zS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.consume(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Fc(i.duration):null,a=null!=i.delay?Fc(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Rs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=I0);const o=Fc(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Rs(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Fc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Rs(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return A0(t.params?E0(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Fc(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=I0);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Rs(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Rs(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const I0={};class GS{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=I0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new k0(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Fc(i.duration)),null!=i.delay&&(r.delay=Fc(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=E0(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new GS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=I0,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new Zce(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Xce,"."+this._enterClassName)).replace(Qce,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),a}}class k0{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new k0(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Ha,this._currentKeyframe[t]=Ha}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function eue(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=Ha})):Pl(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=E0(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Ha),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Pl(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==Ha&&t.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?T0(e.values()):[],o=t.size?T0(t.values()):[];if(i){const a=r[0],l=jd(a);a.offset=0,l.offset=1,r=[a,l]}return zS(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Zce extends k0{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Pl(e[0],!1);l.offset=0,s.push(l);const c=Pl(e[0],!1);c.offset=I3(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=Pl(e[d],!1);h.offset=I3((t+h.offset*i)/o),s.push(h)}i=o,t=0,r="",e=s}return zS(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function I3(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class WS{}class tue extends WS{normalizePropertyName(e,t){return BS(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(nue[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(`Please provide a CSS unit value for ${e}:${i}`)}return o+s}}const nue=(()=>function iue(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function k3(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const $S={};class F3{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function rue(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||$S,p=this.buildStyles(i,a&&a.params||$S,d),g=l&&l.params||$S,m=this.buildStyles(r,g,d),_=new Set,w=new Map,D=new Map,M="void"===r,O={params:Object.assign(Object.assign({},h),g)},q=u?[]:jS(e,t,this.ast.animation,s,o,p,m,O,c,d);let Z=0;if(q.forEach(ee=>{Z=Math.max(ee.duration+ee.delay,Z)}),d.length)return k3(t,this._triggerName,i,r,M,p,m,[],[],w,D,Z,d);q.forEach(ee=>{const me=ee.element,xe=Os(w,me,{});ee.preStyleProps.forEach(it=>xe[it]=!0);const qe=Os(D,me,{});ee.postStyleProps.forEach(it=>qe[it]=!0),me!==t&&_.add(me)});const B=T0(_.values());return k3(t,this._triggerName,i,r,M,p,m,q,B,w,D,Z)}}class sue{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=jd(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=E0(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class aue{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new sue(r.style,r.options&&r.options.params||{},i)}),L3(this.states,"true","1"),L3(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new F3(e,r,this.states))}),this.fallbackTransition=function lue(n,e,t){return new F3(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function L3(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const cue=new N0;class uue{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=US(this._driver,t,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,i){const r=e.element,s=m3(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=jS(this._driver,t,s,IS,S0,{},{},i,cue,r),o.forEach(u=>{const d=Os(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,Ha)})});const c=Dl(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,i,r){const s=AS(t,"","","");return CS(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const B3="ng-animate-queued",V3="ng-animate-disabled",U3=".ng-animate-disabled",pue=[],H3={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Zs="__ng_removed";class qS{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function vue(n){return null!=n?n:null}(i?e.value:e),i){const s=jd(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const vp="void",YS=new qS(vp);class mue{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,eo(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${t}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function bue(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${t}" is not supported!`);const s=Os(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Os(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(eo(e,C0),eo(e,C0+"-"+t),a[t]=YS),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new XS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(eo(e,C0),eo(e,C0+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new qS(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=YS),c.value!==vp&&l.value===c.value){if(!function Sue(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const g=[],m=s.matchStyles(l.value,l.params,g),_=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Lc(e,m),ia(e,_)})}return}const h=Os(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(eo(e,B3),o.onStart(()=>{Gd(e,B3)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(e);if(m){let _=m.indexOf(o);_>=0&&m.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,M0,!0);i.forEach(r=>{if(r[Zs])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e);if(s){const o=[];if(Object.keys(s).forEach(a=>{if(this._triggers[a]){const l=this.trigger(e,a,vp,r);l&&o.push(l)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),i&&Dl(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||YS,u=new qS(vp),d=new XS(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Zs];(!s||s===H3)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){eo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=AS(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,CS(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class _ue{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new mue(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(F0(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!F0(t))return;const s=t[Zs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),eo(e,V3)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Gd(e,V3))}removeNode(e,t,i,r){if(F0(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r){this.collectedLeaveElements.push(t),t[Zs]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1}}listen(e,t,i,r,s){return F0(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,M0,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,kS,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Dl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Zs];if(t&&t.setForRemoval){if(e[Zs]=H3,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,U3)&&this.markElementAsDisabled(e,!1),this.driver.query(e,U3,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)eo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Dl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const i=new N0,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Ce=>{u.add(Ce);const Ue=this.driver.query(Ce,".ng-animate-queued",!0);for(let Xe=0;Xe<Ue.length;Xe++)u.add(Ue[Xe])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=G3(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((Ce,Ue)=>{const Xe=IS+g++;p.set(Ue,Xe),Ce.forEach(We=>eo(We,Xe))});const m=[],_=new Set,w=new Set;for(let Ce=0;Ce<this.collectedLeaveElements.length;Ce++){const Ue=this.collectedLeaveElements[Ce],Xe=Ue[Zs];Xe&&Xe.setForRemoval&&(m.push(Ue),_.add(Ue),Xe.hasAnimation?this.driver.query(Ue,".ng-star-inserted",!0).forEach(We=>_.add(We)):w.add(Ue))}const D=new Map,M=G3(h,Array.from(_));M.forEach((Ce,Ue)=>{const Xe=S0+g++;D.set(Ue,Xe),Ce.forEach(We=>eo(We,Xe))}),e.push(()=>{f.forEach((Ce,Ue)=>{const Xe=p.get(Ue);Ce.forEach(We=>Gd(We,Xe))}),M.forEach((Ce,Ue)=>{const Xe=D.get(Ue);Ce.forEach(We=>Gd(We,Xe))}),m.forEach(Ce=>{this.processLeaveNode(Ce)})});const O=[],q=[];for(let Ce=this._namespaceList.length-1;Ce>=0;Ce--)this._namespaceList[Ce].drainQueuedTransitions(t).forEach(Xe=>{const We=Xe.player,tt=Xe.element;if(O.push(We),this.collectedEnterElements.length){const ze=tt[Zs];if(ze&&ze.setForMove)return void We.destroy()}const wt=!d||!this.driver.containsElement(d,tt),ut=D.get(tt),Et=p.get(tt),ot=this._buildInstruction(Xe,i,Et,ut,wt);if(ot.errors&&ot.errors.length)q.push(ot);else{if(wt)return We.onStart(()=>Lc(tt,ot.fromStyles)),We.onDestroy(()=>ia(tt,ot.toStyles)),void r.push(We);if(Xe.isFallbackTransition)return We.onStart(()=>Lc(tt,ot.fromStyles)),We.onDestroy(()=>ia(tt,ot.toStyles)),void r.push(We);ot.timelines.forEach(ze=>ze.stretchStartingKeyframe=!0),i.append(tt,ot.timelines),o.push({instruction:ot,player:We,element:tt}),ot.queriedElements.forEach(ze=>Os(a,ze,[]).push(We)),ot.preStyleProps.forEach((ze,Ve)=>{const rt=Object.keys(ze);if(rt.length){let Tt=l.get(Ve);Tt||l.set(Ve,Tt=new Set),rt.forEach(mt=>Tt.add(mt))}}),ot.postStyleProps.forEach((ze,Ve)=>{const rt=Object.keys(ze);let Tt=c.get(Ve);Tt||c.set(Ve,Tt=new Set),rt.forEach(mt=>Tt.add(mt))})}});if(q.length){const Ce=[];q.forEach(Ue=>{Ce.push(`@${Ue.triggerName} has failed due to:\n`),Ue.errors.forEach(Xe=>Ce.push(`- ${Xe}\n`))}),O.forEach(Ue=>Ue.destroy()),this.reportError(Ce)}const Z=new Map,B=new Map;o.forEach(Ce=>{const Ue=Ce.element;i.has(Ue)&&(B.set(Ue,Ue),this._beforeAnimationBuild(Ce.player.namespaceId,Ce.instruction,Z))}),r.forEach(Ce=>{const Ue=Ce.element;this._getPreviousPlayers(Ue,!1,Ce.namespaceId,Ce.triggerName,null).forEach(We=>{Os(Z,Ue,[]).push(We),We.destroy()})});const ee=m.filter(Ce=>$3(Ce,l,c)),me=new Map;j3(me,this.driver,w,c,Ha).forEach(Ce=>{$3(Ce,l,c)&&ee.push(Ce)});const qe=new Map;f.forEach((Ce,Ue)=>{j3(qe,this.driver,new Set(Ce),l,"!")}),ee.forEach(Ce=>{const Ue=me.get(Ce),Xe=qe.get(Ce);me.set(Ce,Object.assign(Object.assign({},Ue),Xe))});const it=[],ke=[],et={};o.forEach(Ce=>{const{element:Ue,player:Xe,instruction:We}=Ce;if(i.has(Ue)){if(u.has(Ue))return Xe.onDestroy(()=>ia(Ue,We.toStyles)),Xe.disabled=!0,Xe.overrideTotalTime(We.totalTime),void r.push(Xe);let tt=et;if(B.size>1){let ut=Ue;const Et=[];for(;ut=ut.parentNode;){const ot=B.get(ut);if(ot){tt=ot;break}Et.push(ut)}Et.forEach(ot=>B.set(ot,tt))}const wt=this._buildAnimation(Xe.namespaceId,We,Z,s,qe,me);if(Xe.setRealPlayer(wt),tt===et)it.push(Xe);else{const ut=this.playersByElement.get(tt);ut&&ut.length&&(Xe.parentPlayer=Dl(ut)),r.push(Xe)}}else Lc(Ue,We.fromStyles),Xe.onDestroy(()=>ia(Ue,We.toStyles)),ke.push(Xe),u.has(Ue)&&r.push(Xe)}),ke.forEach(Ce=>{const Ue=s.get(Ce.element);if(Ue&&Ue.length){const Xe=Dl(Ue);Ce.setRealPlayer(Xe)}}),r.forEach(Ce=>{Ce.parentPlayer?Ce.syncPlayerEvents(Ce.parentPlayer):Ce.destroy()});for(let Ce=0;Ce<m.length;Ce++){const Ue=m[Ce],Xe=Ue[Zs];if(Gd(Ue,S0),Xe&&Xe.hasAnimation)continue;let We=[];if(a.size){let wt=a.get(Ue);wt&&wt.length&&We.push(...wt);let ut=this.driver.query(Ue,kS,!0);for(let Et=0;Et<ut.length;Et++){let ot=a.get(ut[Et]);ot&&ot.length&&We.push(...ot)}}const tt=We.filter(wt=>!wt.destroyed);tt.length?wue(this,Ue,tt):this.processLeaveNode(Ue)}return m.length=0,it.forEach(Ce=>{this.players.push(Ce),Ce.onDone(()=>{Ce.destroy();const Ue=this.players.indexOf(Ce);this.players.splice(Ue,1)}),Ce.play()}),it}elementContainsData(e,t){let i=!1;const r=t[Zs];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==vp;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Os(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Lc(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;u.add(g);const m=g[Zs];if(m&&m.removedBeforeQueried)return new kd(p.duration,p.delay);const _=g!==l,w=function xue(n){const e=[];return W3(n,e),e}((i.get(g)||pue).map(Z=>Z.getRealPlayer())).filter(Z=>!!Z.element&&Z.element===g),D=s.get(g),M=o.get(g),O=m3(0,this._normalizer,0,p.keyframes,D,M),q=this._buildPlayer(p,O,w);if(p.subTimeline&&r&&d.add(g),_){const Z=new XS(e,a,g);Z.setRealPlayer(q),c.push(Z)}return q});c.forEach(p=>{Os(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function yue(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>eo(p,C3));const f=Dl(h);return f.onDestroy(()=>{u.forEach(p=>Gd(p,C3)),ia(l,t.toStyles)}),d.forEach(p=>{Os(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new kd(e.duration,e.delay)}}class XS{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new kd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>CS(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Os(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function F0(n){return n&&1===n.nodeType}function z3(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function j3(n,e,t,i,r){const s=[];t.forEach(l=>s.push(z3(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,r);(!h||0==h.length)&&(c[Zs]=gue,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>z3(l,s[a++])),o}function G3(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}const L0="$$classes";function eo(n,e){if(n.classList)n.classList.add(e);else{let t=n[L0];t||(t=n[L0]={}),t[e]=!0}}function Gd(n,e){if(n.classList)n.classList.remove(e);else{let t=n[L0];t&&delete t[e]}}function wue(n,e,t){Dl(t).onDone(()=>n.processLeaveNode(e))}function W3(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof GL?W3(i.players,e):e.push(i)}}function $3(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class B0{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new _ue(e,t,i),this._timelineEngine=new uue(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=US(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function oue(n,e,t){return new aue(n,e,t)}(r,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=_3(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=_3(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function q3(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=KS(e[0]),e.length>1&&(i=KS(e[e.length-1]))):e&&(t=KS(e)),t||i?new Cue(n,t,i):null}let Cue=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ia(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ia(this._element,this._initialStyles),this._endStyles&&(ia(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Lc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Lc(this._element,this._endStyles),this._endStyles=null),ia(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function KS(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];Mue(r)&&(e=e||{},e[r]=n[r])}return e}function Mue(n){return"display"===n||"position"===n}const Y3="animation",X3="animationend";class Tue{constructor(e,t,i,r,s,o,a){this._element=e,this._name=t,this._duration=i,this._delay=r,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function Due(n,e){const t=JS(n,"").trim();let i=0;t.length&&(i=function Oue(n,e){let t=0;for(let i=0;i<n.length;i++)n.charAt(i)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),V0(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),J3(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){K3(this._element,this._name,"paused")}resume(){K3(this._element,this._name,"running")}setPosition(e){const t=Q3(this._element,this._name);this._position=e*this._duration,V0(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),J3(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function Pue(n,e){const i=JS(n,"").split(","),r=QS(i,e);r>=0&&(i.splice(r,1),V0(n,"",i.join(",")))}(this._element,this._name))}}function K3(n,e,t){V0(n,"PlayState",t,Q3(n,e))}function Q3(n,e){const t=JS(n,"");return t.indexOf(",")>0?QS(t.split(","),e):QS([t],e)}function QS(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function J3(n,e,t){t?n.removeEventListener(X3,e):n.addEventListener(X3,e)}function V0(n,e,t,i){const r=Y3+e;if(null!=i){const s=n.style[r];if(s.length){const o=s.split(",");o[i]=t,t=o.join(",")}}n.style[r]=t}function JS(n,e){return n.style[Y3+e]||""}class Z3{constructor(e,t,i,r,s,o,a,l){this.element=e,this.keyframes=t,this.animationName=i,this._duration=r,this._delay=s,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Tue(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(e[i]=t?this._finalStyles[i]:VS(this.element,i))})}this.currentSnapshot=e}}class Iue extends kd{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=w3(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class tB{constructor(){this._count=0}validateStyleProperty(e){return DS(e)}matchesElement(e,t){return PS(e,t)}containsElement(e,t){return OS(e,t)}query(e,t,i){return RS(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,i){i=i.map(a=>w3(a));let r=`@keyframes ${t} {\n`,s="";i.forEach(a=>{s=" ";const l=parseFloat(a.offset);r+=`${s}${100*l}% {\n`,s+=" ",Object.keys(a).forEach(c=>{const u=a[c];switch(c){case"offset":return;case"easing":return void(u&&(r+=`${s}animation-timing-function: ${u};\n`));default:return void(r+=`${s}${c}: ${u};\n`)}}),r+=`${s}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(e,t,i,r,s,o=[],a){const l=o.filter(m=>m instanceof Z3),c={};D3(i,r)&&l.forEach(m=>{let _=m.currentSnapshot;Object.keys(_).forEach(w=>c[w]=_[w])});const u=function Lue(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(e[r]=i[r])})}),e}(t=P3(e,t,c));if(0==i)return new Iue(e,u);const d="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,d,t);(function Fue(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(h);const p=q3(e,t),g=new Z3(e,t,d,i,r,s,u,p);return g.onDestroy(()=>function Bue(n){n.parentNode.removeChild(n)}(h)),g}}class iB{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:VS(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Vue{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(rB().toString()),this._cssKeyframesDriver=new tB}validateStyleProperty(e){return DS(e)}matchesElement(e,t){return PS(e,t)}containsElement(e,t){return OS(e,t)}query(e,t,i){return RS(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,i,r,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,r,s,o);const u={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const d={},h=o.filter(p=>p instanceof iB);D3(i,r)&&h.forEach(p=>{let g=p.currentSnapshot;Object.keys(g).forEach(m=>d[m]=g[m])});const f=q3(e,t=P3(e,t=t.map(p=>Pl(p,!1)),d));return new iB(e,t,u,f)}}function rB(){return g3()&&Element.prototype.animate||{}}let Hue=(()=>{class n extends VL{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:io.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?HL(t):t;return sB(this._renderer,null,i,"register",[r]),new zue(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Ft(Tu),Ft(Vi))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class zue extends class Ure{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new jue(this._id,e,t||{},this._renderer)}}class jue{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return sB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function sB(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const oB="@.disabled";let Gue=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new aB("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new Wue(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Ft(Tu),Ft(B0),Ft(li))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class aB{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==oB?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Wue extends aB{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==oB?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function $ue(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function que(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let Yue=(()=>{class n extends B0{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Ft(Vi),Ft(NS),Ft(WS))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const lB=new On("AnimationModuleType"),cB=[{provide:VL,useClass:Hue},{provide:WS,useFactory:function Kue(){return new tue}},{provide:B0,useClass:Yue},{provide:Tu,useFactory:function Que(n,e,t){return new Gue(n,e,t)},deps:[Gg,B0,li]}],uB=[{provide:NS,useFactory:function Xue(){return function Uue(){return"function"==typeof rB()}()?new Vue:new tB}},{provide:lB,useValue:"BrowserAnimations"},...cB],Jue=[{provide:NS,useClass:x3},{provide:lB,useValue:"NoopAnimations"},...cB];let Zue=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Jue:uB}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=Kn({providers:uB,imports:[OP]}),n})(),ede=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n,bootstrap:[Tce]}),n.\u0275inj=Kn({providers:[],imports:[[OP,Zue,Ece,ace,ML,CL,Jre,wS,Vre,ece]]}),n})();(function AG(){HD=!1})(),XW().bootstrapModule(ede).catch(n=>console.error(n))},209:Ke=>{function J(Re,N,He){var Ae,be,ge,ne,C;function Y(){var z=Date.now()-ne;z<N&&z>=0?Ae=setTimeout(Y,N-z):(Ae=null,He||(C=Re.apply(ge,be),ge=be=null))}null==N&&(N=100);var V=function(){ge=this,be=arguments,ne=Date.now();var z=He&&!Ae;return Ae||(Ae=setTimeout(Y,N)),z&&(C=Re.apply(ge,be),ge=be=null),C};return V.clear=function(){Ae&&(clearTimeout(Ae),Ae=null)},V.flush=function(){Ae&&(C=Re.apply(ge,be),ge=be=null,clearTimeout(Ae),Ae=null)},V}J.debounce=J,Ke.exports=J},105:Ke=>{Ke.exports=function(He){!function Re(N){if(!N)throw new Error("Eventify cannot use falsy object as events subject");for(var He=["on","fire","off"],Ae=0;Ae<He.length;++Ae)if(N.hasOwnProperty(He[Ae]))throw new Error("Subject cannot be eventified, since it already has property '"+He[Ae]+"'")}(He);var Ae=function J(N){var He=Object.create(null);return{on:function(Ae,be,ge){if("function"!=typeof be)throw new Error("callback is expected to be a function");var ne=He[Ae];return ne||(ne=He[Ae]=[]),ne.push({callback:be,ctx:ge}),N},off:function(Ae,be){if(void 0===Ae)return He=Object.create(null),N;if(He[Ae])if("function"!=typeof be)delete He[Ae];else for(var C=He[Ae],Y=0;Y<C.length;++Y)C[Y].callback===be&&C.splice(Y,1);return N},fire:function(Ae){var ge,be=He[Ae];if(!be)return N;arguments.length>1&&(ge=Array.prototype.splice.call(arguments,1));for(var ne=0;ne<be.length;++ne){var C=be[ne];C.callback.apply(C.ctx,ge)}return N}}}(He);return He.on=Ae.on,He.off=Ae.off,He.fire=Ae.fire,He}},336:(Ke,J,Re)=>{Ke.exports=function He(be,ge){if(!be)throw new Error("Graph structure cannot be undefined");var C=(ge&&ge.createSimulator||Re(600))(ge);if(Array.isArray(ge))throw new Error("Physics settings is expected to be an object");var Y=be.version>19?function Be(we){var De=be.getLinks(we);return De?1+De.size/3:1}:function Ie(we){var De=be.getLinks(we);return De?1+De.length/3:1};ge&&"function"==typeof ge.nodeMass&&(Y=ge.nodeMass);var V=new Map,z={},L=0,A=C.settings.springTransform||Ae;(function $(){L=0,be.forEachNode(function(we){te(we.id),L+=1}),be.forEachLink(ae)})(),function x(){be.on("changed",j)}();var S=!1,b={step:function(){if(0===L)return P(!0),!0;var we=C.step();b.lastMove=we,b.fire("step");var Q=we/L<=.01;return P(Q),Q},getNodePosition:function(we){return ye(we).pos},setNodePosition:function(we){var De=ye(we);De.setPosition.apply(De,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(we){var De=z[we];if(De)return{from:De.from.pos,to:De.to.pos}},getGraphRect:function(){return C.getBBox()},forEachBody:W,pinNode:function(we,De){ye(we.id).isPinned=!!De},isNodePinned:function(we){return ye(we.id).isPinned},dispose:function(){be.off("changed",j),b.fire("disposed")},getBody:function y(we){return V.get(we)},getSpring:function U(we,De){var Q;if(void 0===De)Q="object"!=typeof we?we:we.id;else{var E=be.hasLink(we,De);if(!E)return;Q=E.id}return z[Q]},getForceVectorLength:function F(){var we=0,De=0;return W(function(Q){we+=Math.abs(Q.force.x),De+=Math.abs(Q.force.y)}),Math.sqrt(we*we+De*De)},simulator:C,graph:be,lastMove:0};return N(b),b;function P(we){S!==we&&(S=we,function G(we){b.fire("stable",we)}(we))}function W(we){V.forEach(we)}function j(we){for(var De=0;De<we.length;++De){var Q=we[De];"add"===Q.changeType?(Q.node&&te(Q.node.id),Q.link&&ae(Q.link)):"remove"===Q.changeType&&(Q.node&&ie(Q.node),Q.link&&_e(Q.link))}L=be.getNodesCount()}function te(we){var De=V.get(we);if(!De){var Q=be.getNode(we);if(!Q)throw new Error("initBody() was called with unknown node id");var E=Q.position;if(!E){var R=function Te(we){var De=[];if(!we.links)return De;for(var Q=Math.min(we.links.length,2),E=0;E<Q;++E){var R=we.links[E],v=V.get(R.fromId!==we.id?R.fromId:R.toId);v&&v.pos&&De.push(v)}return De}(Q);E=C.getBestNewBodyPosition(R)}(De=C.addBodyAt(E)).id=we,V.set(we,De),Oe(we),function Pe(we){return we&&(we.isPinned||we.data&&we.data.isPinned)}(Q)&&(De.isPinned=!0)}}function ie(we){var De=we.id,Q=V.get(De);Q&&(V.delete(De),C.removeBody(Q))}function ae(we){Oe(we.fromId),Oe(we.toId);var De=V.get(we.fromId),Q=V.get(we.toId),E=C.addSpring(De,Q,we.length);A(we,E),z[we.id]=E}function _e(we){var De=z[we.id];if(De){var Q=be.getNode(we.fromId),E=be.getNode(we.toId);Q&&Oe(Q.id),E&&Oe(E.id),delete z[we.id],C.removeSpring(De)}}function Oe(we){var De=V.get(we);if(De.mass=Y(we),Number.isNaN(De.mass))throw new Error("Node mass should be a number")}function ye(we){var De=V.get(we);return De||(te(we),De=V.get(we)),De}},Ke.exports.simulator=Re(600);var N=Re(105);function Ae(){}},51:(Ke,J,Re)=>{const N=Re(821);Ke.exports=function(Ae){return function be(ge,ne){let Y=ne&&void 0!==ne.join?ne.join:"\n",V=Array((ne&&ne.indent||0)+1).join(" "),z=[];for(let L=0;L<Ae;++L){let A=N(L);z.push((0===L?"":V)+ge.replace(/{var}/g,A))}return z.join(Y)}}},381:(Ke,J,Re)=>{Ke.exports=function He(be){let ge=Ae(be);return new Function("bodies","settings","random",ge)},Ke.exports.generateFunctionBody=Ae;const N=Re(51);function Ae(be){let ge=N(be);return`\n  var boundingBox = {\n    ${ge("min_{var}: 0, max_{var}: 0,",{indent:4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${ge("base_{var} = 0",{join:", "})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${ge("base_{var} += neighborPos.{var};",{indent:10})}\n        }\n\n        ${ge("base_{var} /= neighbors.length;",{indent:8})}\n      } else {\n        ${ge("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${ge("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${ge("var max_{var} = -Infinity;",{indent:4})}\n    ${ge("var min_{var} = Infinity;",{indent:4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${ge("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}\n      ${ge("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}\n    }\n\n    ${ge("boundingBox.min_{var} = min_{var};",{indent:4})}\n    ${ge("boundingBox.max_{var} = max_{var};",{indent:4})}\n  }\n\n  function resetBoundingBox() {\n    ${ge("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}\n  }\n`}},979:(Ke,J,Re)=>{const N=Re(51);function Ae(ne,C){return`\n${ge(ne,C)}\n${be(ne)}\nreturn {Body: Body, Vector: Vector};\n`}function be(ne){let C=N(ne),Y=C("{var}",{join:", "});return`\nfunction Body(${Y}) {\n  this.isPinned = false;\n  this.pos = new Vector(${Y});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${Y}) {\n  ${C("this.pos.{var} = {var} || 0;",{indent:2})}\n};`}function ge(ne,C){let Y=N(ne),V="";return C&&(V=`${Y("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`),`function Vector(${Y("{var}",{join:", "})}) {\n  ${V}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${Y('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}\n      ${Y("this.{var} = v.{var};",{indent:4})}\n    } else {\n      ${Y('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${Y("this.{var} = ",{join:""})}0;\n  };`}Ke.exports=function He(ne,C){let Y=Ae(ne,C),{Body:V}=new Function(Y)();return V},Ke.exports.generateCreateBodyFunctionBody=Ae,Ke.exports.getVectorCode=ge,Ke.exports.getBodyCode=be},793:(Ke,J,Re)=>{const N=Re(51);function Ae(be){return`\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${N(be)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}\n    }\n  };\n`}Ke.exports=function He(be){let ge=Ae(be);return new Function("options",ge)},Ke.exports.generateCreateDragForceFunctionBody=Ae},836:(Ke,J,Re)=>{const N=Re(51);function Ae(be){let ge=N(be);return`\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${ge("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}\n      var r = Math.sqrt(${ge("d{var} * d{var}",{join:" + "})});\n\n      if (r === 0) {\n        ${ge("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}\n        r = Math.sqrt(${ge("d{var} * d{var}",{join:" + "})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${ge("body1.force.{var} += coefficient * d{var}",{indent:6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${ge("body2.force.{var} -= coefficient * d{var}",{indent:6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`}Ke.exports=function He(be){let ge=Ae(be);return new Function("options","random",ge)},Ke.exports.generateCreateSpringForceFunctionBody=Ae},202:(Ke,J,Re)=>{const N=Re(51);function Ae(be){let ge=N(be);return`\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${ge("var d{var} = 0, t{var} = 0;",{indent:2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${ge("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}\n    ${ge("var v{var} = body.velocity.{var};",{indent:4})}\n    var v = Math.sqrt(${ge("v{var} * v{var}",{join:" + "})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${ge("body.velocity.{var} = v{var} / v;",{indent:6})}\n    }\n\n    ${ge("d{var} = timeStep * body.velocity.{var};",{indent:4})}\n\n    ${ge("body.pos.{var} += d{var};",{indent:4})}\n\n    ${ge("t{var} += Math.abs(d{var});",{indent:4})}\n  }\n\n  return (${ge("t{var} * t{var}",{join:" + "})})/length;\n`}Ke.exports=function He(be){let ge=Ae(be);return new Function("bodies","timeStep","adaptiveTimeStepWeight",ge)},Ke.exports.generateIntegratorFunctionBody=Ae},479:(Ke,J,Re)=>{const N=Re(51),He=Re(821);function be(z){let L=N(z),A=Math.pow(2,z);return`\n\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n\n${Y(z)}\n${ge(z)}\n${C(z)}\n${ne(z)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${function W(F){let U=[];for(let y=0;y<A;++y)U.push(`${F}quad${y} = null;`);return U.join("\n")}("      node.")}\n      node.body = null;\n      node.mass = ${L("node.mass_{var} = ",{join:""})}0;\n      ${L("node.min_{var} = node.max_{var} = ",{join:""})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${L("var d{var};",{indent:4})}\n    var r; \n    ${L("var f{var} = 0;",{indent:4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${L("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${L("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${L("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${L("d{var} * d{var}",{join:" + "})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${L("f{var} += v * d{var};",{indent:8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${L("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${L("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${L("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${L("d{var} * d{var}",{join:" + "})});\n        }\n        // If s / r < \u03b8, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${He(0)} - node.min_${He(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${L("f{var} += v * d{var};",{indent:10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${function P(){let F=Array(11).join(" "),U=[];for(let y=0;y<A;++y)U.push(F+`if (node.quad${y}) {`),U.push(F+`  queue[pushIdx] = node.quad${y};`),U.push(F+"  queueLength += 1;"),U.push(F+"  pushIdx += 1;"),U.push(F+"}");return U.join("\n")}()}\n        }\n      }\n    }\n\n    ${L("sourceBody.force.{var} += f{var};",{indent:4})}\n  }\n\n  function insertBodies(bodies) {\n    ${L("var {var}min = Number.MAX_VALUE;",{indent:4})}\n    ${L("var {var}max = Number.MIN_VALUE;",{indent:4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${L("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}\n      ${L("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${L("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${L("root.min_{var} = {var}min;",{indent:4})}\n    ${L("root.max_{var} = {var}min + maxSideLength;",{indent:4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${L("var {var} = body.pos.{var};",{indent:8})}\n        node.mass += body.mass;\n        ${L("node.mass_{var} += body.mass * {var};",{indent:8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${L("var min_{var} = node.min_{var};",{indent:8})}\n        ${L("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}\n\n${function b(F){let U=[],y=Array(F+1).join(" ");for(let x=0;x<z;++x)U.push(y+`if (${He(x)} > max_${He(x)}) {`),U.push(y+`  quadIdx = quadIdx + ${Math.pow(2,x)};`),U.push(y+`  min_${He(x)} = max_${He(x)};`),U.push(y+`  max_${He(x)} = node.max_${He(x)};`),U.push(y+"}");return U.join("\n")}(8)}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${L("child.min_{var} = min_{var};",{indent:10})}\n          ${L("child.max_{var} = max_{var};",{indent:10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${L("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}\n\n            ${L("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`}function ge(z){let L=N(z);return`\n  function isSamePosition(point1, point2) {\n    ${L("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}\n  \n    return ${L("d{var} < 1e-8",{join:" && "})};\n  }  \n`}function ne(z){var L=Math.pow(2,z);return`\nfunction setChild(node, idx, child) {\n  ${function A(){let S=[];for(let b=0;b<L;++b)S.push(`${0===b?"  ":"  else "}if (idx === ${b}) node.quad${b} = child;`);return S.join("\n")}()}\n}`}function C(z){return`function getChild(node, idx) {\n${function L(){let A=[],S=Math.pow(2,z);for(let b=0;b<S;++b)A.push(`  if (idx === ${b}) return node.quad${b};`);return A.join("\n")}()}\n  return null;\n}`}function Y(z){let L=N(z),A=Math.pow(2,z);return`\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${function b(P){let W=[];for(let F=0;F<A;++F)W.push(`${P}quad${F} = null;`);return W.join("\n")}("  this.")}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${L("this.mass_{var} = 0;",{indent:2})}\n\n  // bounding box coordinates\n  ${L("this.min_{var} = 0;",{indent:2})}\n  ${L("this.max_{var} = 0;",{indent:2})}\n}\n`}function V(){return"\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"}Ke.exports=function Ae(z){let L=be(z);return new Function(L)()},Ke.exports.generateQuadTreeFunctionBody=be,Ke.exports.getInsertStackCode=V,Ke.exports.getQuadNodeCode=Y,Ke.exports.isSamePosition=ge,Ke.exports.getChildBodyCode=C,Ke.exports.setChildBodyCode=ne},821:Ke=>{Ke.exports=function(Re){return 0===Re?"x":1===Re?"y":2===Re?"z":"c"+(Re+1)}},600:(Ke,J,Re)=>{Ke.exports=function Y(L){var A=Re(572),S=Re(465),b=Re(105);if(L){if(void 0!==L.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==L.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}L=S(L,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var P=C[L.dimensions];if(!P){var W=L.dimensions;P={Body:N(W,L.debug),createQuadTree:He(W),createBounds:Ae(W),createDragForce:be(W),createSpringForce:ge(W),integrate:ne(W)},C[W]=P}var F=P.Body,U=P.createQuadTree,y=P.createBounds,x=P.createDragForce,G=P.createSpringForce,j=P.integrate,te=Re(410).random(42),ie=[],ae=[],_e=U(L,te),Te=y(ie,L,te),Oe=G(L,te),Pe=x(L),Ie=[],Be=new Map,we=0;E("nbody",function T(){if(0!==ie.length){_e.insertBodies(ie);for(var H=ie.length;H--;){var k=ie[H];k.isPinned||(k.reset(),_e.updateBodyForce(k),Pe.update(k))}}}),E("spring",function I(){for(var H=ae.length;H--;)Oe.update(ae[H])});var De={bodies:ie,quadTree:_e,springs:ae,settings:L,addForce:E,removeForce:function R(H){var k=Ie.indexOf(Be.get(H));k<0||(Ie.splice(k,1),Be.delete(H))},getForces:function v(){return Be},step:function(){for(var H=0;H<Ie.length;++H)Ie[H](we);var k=j(ie,L.timeStep,L.adaptiveTimeStepWeight);return we+=1,k},addBody:function(H){if(!H)throw new Error("Body is required");return ie.push(H),H},addBodyAt:function(H){if(!H)throw new Error("Body position is required");var k=(H=>new F(H))(H);return ie.push(k),k},removeBody:function(H){if(H){var k=ie.indexOf(H);if(!(k<0))return ie.splice(k,1),0===ie.length&&Te.reset(),!0}},addSpring:function(H,k,X,fe){if(!H||!k)throw new Error("Cannot add null spring to force simulator");"number"!=typeof X&&(X=-1);var Se=new A(H,k,X,fe>=0?fe:-1);return ae.push(Se),Se},getTotalMovement:function(){return 0},removeSpring:function(H){if(H){var k=ae.indexOf(H);if(k>-1)return ae.splice(k,1),!0}},getBestNewBodyPosition:function(H){return Te.getBestNewPosition(H)},getBBox:Q,getBoundingBox:Q,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(H){return void 0!==H?(L.gravity=H,_e.options({gravity:H}),this):L.gravity},theta:function(H){return void 0!==H?(L.theta=H,_e.options({theta:H}),this):L.theta},random:te};return function V(L,A){for(var S in L)z(L,A,S)}(L,De),b(De),De;function Q(){return Te.update(),Te.box}function E(H,k){if(Be.has(H))throw new Error("Force "+H+" is already added");Be.set(H,k),Ie.push(k)}};var N=Re(979),He=Re(479),Ae=Re(381),be=Re(793),ge=Re(836),ne=Re(202),C={};function z(L,A,S){if(L.hasOwnProperty(S)&&"function"!=typeof A[S]){var b=Number.isFinite(L[S]);A[S]=b?function(P){if(void 0!==P){if(!Number.isFinite(P))throw new Error("Value of "+S+" should be a valid number.");return L[S]=P,A}return L[S]}:function(P){return void 0!==P?(L[S]=P,A):L[S]}}}},572:Ke=>{Ke.exports=function J(Re,N,He,Ae){this.from=Re,this.to=N,this.length=He,this.coefficient=Ae}},553:(Ke,J,Re)=>{Ke.exports=function He(C){if("uniqueLinkId"in(C=C||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),C.multigraph=C.uniqueLinkId),void 0===C.multigraph&&(C.multigraph=!1),"function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var Y=new Map,V=new Map,z={},L=0,A=C.multigraph?function _e(k,X,fe){var Se=ne(k,X),Me=z.hasOwnProperty(Se);if(Me||Be(k,X)){Me||(z[Se]=0);var Ee="@"+ ++z[Se];Se=ne(k+Ee,X+Ee)}return new ge(k,X,fe,Se)}:function ae(k,X,fe){var Se=ne(k,X),Me=V.get(Se);return Me?(Me.data=fe,Me):new ge(k,X,fe,Se)},S=[],b=v,P=v,W=v,F=v,U={version:20,addNode:j,addLink:function ie(k,X,fe){W();var Se=$(k)||j(k),Me=$(X)||j(X),Ee=A(k,X,fe),Le=V.has(Ee.id);return V.set(Ee.id,Ee),be(Se,Ee),k!==X&&be(Me,Ee),b(Ee,Le?"update":"add"),F(),Ee},removeLink:function ye(k,X){return void 0!==X&&(k=Be(k,X)),Ie(k)},removeNode:te,getNode:$,getNodeCount:Te,getLinkCount:Oe,getEdgeCount:Oe,getLinksCount:Oe,getNodesCount:Te,getLinks:function Pe(k){var X=$(k);return X?X.links:null},forEachNode:H,forEachLinkedNode:function Q(k,X,fe){var Se=$(k);if(Se&&Se.links&&"function"==typeof X)return fe?function R(k,X,fe){for(var Me=k.values(),Ee=Me.next();!Ee.done;){var Le=Ee.value;if(Le.fromId===X&&fe(Y.get(Le.toId),Le))return!0;Ee=Me.next()}}(Se.links,k,X):function E(k,X,fe){for(var Me=k.values(),Ee=Me.next();!Ee.done;){var Le=Ee.value;if(fe(Y.get(Le.fromId===X?Le.toId:Le.fromId),Le))return!0;Ee=Me.next()}}(Se.links,k,X)},forEachLink:function De(k){if("function"==typeof k)for(var X=V.values(),fe=X.next();!fe.done;){if(k(fe.value))return!0;fe=X.next()}},beginUpdate:W,endUpdate:F,clear:function we(){W(),H(function(k){te(k.id)}),F()},hasLink:Be,hasNode:$,getLink:Be};return N(U),function y(){var k=U.on;U.on=function X(){return U.beginUpdate=W=T,U.endUpdate=F=I,b=x,P=G,U.on=k,k.apply(U,arguments)}}(),U;function x(k,X){S.push({link:k,changeType:X})}function G(k,X){S.push({node:k,changeType:X})}function j(k,X){if(void 0===k)throw new Error("Invalid node identifier");W();var fe=$(k);return fe?(fe.data=X,P(fe,"update")):(fe=new Ae(k,X),P(fe,"add")),Y.set(k,fe),F(),fe}function $(k){return Y.get(k)}function te(k){var X=$(k);if(!X)return!1;W();var fe=X.links;return fe&&(fe.forEach(Ie),X.links=null),Y.delete(k),P(X,"remove"),F(),!0}function Te(){return Y.size}function Oe(){return V.size}function Ie(k){if(!k||!V.get(k.id))return!1;W(),V.delete(k.id);var X=$(k.fromId),fe=$(k.toId);return X&&X.links.delete(k),fe&&fe.links.delete(k),b(k,"remove"),F(),!0}function Be(k,X){if(void 0!==k&&void 0!==X)return V.get(ne(k,X))}function v(){}function T(){L+=1}function I(){0==(L-=1)&&S.length>0&&(U.fire("changed",S),S.length=0)}function H(k){if("function"!=typeof k)throw new Error("Function is expected to iterate over graph nodes. You passed "+k);for(var X=Y.values(),fe=X.next();!fe.done;){if(k(fe.value))return!0;fe=X.next()}}};var N=Re(105);function Ae(C,Y){this.id=C,this.links=null,this.data=Y}function be(C,Y){C.links?C.links.add(Y):C.links=new Set([Y])}function ge(C,Y,V,z){this.fromId=C,this.toId=Y,this.data=V,this.id=z}function ne(C,Y){return C.toString()+"\u{1f449} "+Y.toString()}},465:Ke=>{Ke.exports=function J(Re,N){var He;if(Re||(Re={}),N)for(He in N)if(N.hasOwnProperty(He)){var Ae=Re.hasOwnProperty(He),be=typeof N[He];Ae&&typeof Re[He]===be?"object"===be&&(Re[He]=J(Re[He],N[He])):Re[He]=N[He]}return Re}},410:Ke=>{function J(C){return new Re("number"==typeof C?C:+new Date)}function Re(C){this.seed=C}function Ae(C){return Math.sqrt(2*Math.PI/C)*Math.pow(1/Math.E*(C+1/(12*C-1/(10*C))),C)}function be(){var C=this.seed;return this.seed=C=4294967295&(3042594569^(C=4251993797+(C=4294967295&(3550635116+(C=374761393+(C=4294967295&(3345072700^(C=C+2127912214+(C<<12)&4294967295)^C>>>19))+(C<<5)&4294967295)^C<<9))+(C<<3)&4294967295)^C>>>16),(268435455&C)/268435456}Ke.exports=J,Ke.exports.random=J,Ke.exports.randomIterator=function ne(C,Y){var V=Y||J();if("function"!=typeof V.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function L(A){var S,b,P;for(S=C.length-1;S>0;--S)b=V.next(S+1),P=C[b],C[b]=C[S],C[S]=P,A(P);C.length&&A(C[0])},shuffle:function z(){var A,S,b;for(A=C.length-1;A>0;--A)S=V.next(A+1),b=C[S],C[S]=C[A],C[A]=b;return C}}},Re.prototype.next=function ge(C){return Math.floor(this.nextDouble()*C)},Re.prototype.nextDouble=be,Re.prototype.uniform=be,Re.prototype.gaussian=function N(){var C,Y,V;do{C=(Y=2*this.nextDouble()-1)*Y+(V=2*this.nextDouble()-1)*V}while(C>=1||0===C);return Y*Math.sqrt(-2*Math.log(C)/C)},Re.prototype.levy=function He(){var C=1.5,Y=Math.pow(Ae(2.5)*Math.sin(Math.PI*C/2)/(Ae(1.25)*C*Math.pow(2,.25)),1/C);return this.gaussian()*Y/Math.pow(Math.abs(this.gaussian()),1/C)}},36:function(module,__unused_webpack_exports,__webpack_require__){var _asyncToGenerator=__webpack_require__(926).default,Re;Re=()=>(()=>{"use strict";var __webpack_modules__=[,(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.VerbosityLevel=J.Util=J.UnknownErrorException=J.UnexpectedResponseException=J.UNSUPPORTED_FEATURES=J.TextRenderingMode=J.StreamType=J.RenderingIntentFlag=J.PermissionFlag=J.PasswordResponses=J.PasswordException=J.PageActionEventType=J.OPS=J.MissingPDFException=J.InvalidPDFException=J.ImageKind=J.IDENTITY_MATRIX=J.FormatError=J.FontType=J.FeatureTest=J.FONT_IDENTITY_MATRIX=J.DocumentActionEventType=J.CMapCompressionType=J.BaseException=J.AnnotationType=J.AnnotationStateModelType=J.AnnotationReviewState=J.AnnotationReplyType=J.AnnotationMode=J.AnnotationMarkedState=J.AnnotationFlag=J.AnnotationFieldFlag=J.AnnotationBorderStyleType=J.AnnotationActionEventType=J.AbortException=void 0,J.arrayByteLength=Se,J.arraysToBytes=function Me(Ye){const oe=Ye.length;if(1===oe&&Ye[0]instanceof Uint8Array)return Ye[0];let le=0;for(let Ct=0;Ct<oe;Ct++)le+=Se(Ye[Ct]);let nt=0;const pt=new Uint8Array(le);for(let Ct=0;Ct<oe;Ct++){let At=Ye[Ct];At instanceof Uint8Array||(At="string"==typeof At?fe(At):new Uint8Array(At));const An=At.byteLength;pt.set(At,nt),nt+=An}return pt},J.assert=function Ie(Ye,oe){Ye||ye(oe)},J.bytesToString=function X(Ye){("object"!=typeof Ye||null===Ye||void 0===Ye.length)&&ye("Invalid argument for bytesToString");const oe=Ye.length;if(oe<8192)return String.fromCharCode.apply(null,Ye);const nt=[];for(let pt=0;pt<oe;pt+=8192){const Ct=Math.min(pt+8192,oe),At=Ye.subarray(pt,Ct);nt.push(String.fromCharCode.apply(null,At))}return nt.join("")},J.createPromiseCapability=function fi(){const Ye=Object.create(null);let oe=!1;return Object.defineProperty(Ye,"settled",{get:()=>oe}),Ye.promise=new Promise(function(le,nt){Ye.resolve=function(pt){oe=!0,le(pt)},Ye.reject=function(pt){oe=!0,nt(pt)}}),Ye},J.createValidAbsoluteUrl=function we(Ye,oe=null,le=null){if(!Ye)return null;try{if(le&&"string"==typeof Ye){if(le.addDefaultProtocol&&Ye.startsWith("www.")){const pt=Ye.match(/\./g);pt&&pt.length>=2&&(Ye=`http://${Ye}`)}if(le.tryConvertEncoding)try{Ye=vt(Ye)}catch(pt){}}const nt=oe?new URL(Ye,oe):new URL(Ye);if(function Be(Ye){if(!Ye)return!1;switch(Ye.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(nt))return nt}catch(nt){}return null},J.escapeString=function Fe(Ye){return Ye.replace(/([()\\\n\r])/g,oe=>"\n"===oe?"\\n":"\r"===oe?"\\r":`\\${oe}`)},J.getModificationDate=function Nn(Ye=new Date){return[Ye.getUTCFullYear().toString(),(Ye.getUTCMonth()+1).toString().padStart(2,"0"),Ye.getUTCDate().toString().padStart(2,"0"),Ye.getUTCHours().toString().padStart(2,"0"),Ye.getUTCMinutes().toString().padStart(2,"0"),Ye.getUTCSeconds().toString().padStart(2,"0")].join("")},J.getVerbosityLevel=function Te(){return ae},J.info=function Oe(Ye){ae>=G.INFOS&&console.log(`Info: ${Ye}`)},J.isArrayBuffer=function Rt(Ye){return"object"==typeof Ye&&null!==Ye&&void 0!==Ye.byteLength},J.isArrayEqual=function Cn(Ye,oe){if(Ye.length!==oe.length)return!1;for(let le=0,nt=Ye.length;le<nt;le++)if(Ye[le]!==oe[le])return!1;return!0},J.isAscii=function yt(Ye){return/^[\x00-\x7F]*$/.test(Ye)},J.objectFromMap=function je(Ye){const oe=Object.create(null);for(const[le,nt]of Ye)oe[le]=nt;return oe},J.objectSize=function Le(Ye){return Object.keys(Ye).length},J.setVerbosityLevel=function _e(Ye){Number.isInteger(Ye)&&(ae=Ye)},J.shadow=De,J.string32=function Ee(Ye){return String.fromCharCode(Ye>>24&255,Ye>>16&255,Ye>>8&255,255&Ye)},J.stringToBytes=fe,J.stringToPDFString=function he(Ye){if(Ye[0]>="\xef"){let le;if("\xfe"===Ye[0]&&"\xff"===Ye[1]?le="utf-16be":"\xff"===Ye[0]&&"\xfe"===Ye[1]?le="utf-16le":"\xef"===Ye[0]&&"\xbb"===Ye[1]&&"\xbf"===Ye[2]&&(le="utf-8"),le)try{const nt=new TextDecoder(le,{fatal:!0}),pt=fe(Ye);return nt.decode(pt)}catch(nt){Pe(`stringToPDFString: "${nt}".`)}}const oe=[];for(let le=0,nt=Ye.length;le<nt;le++){const pt=K[Ye.charCodeAt(le)];oe.push(pt?String.fromCharCode(pt):Ye.charAt(le))}return oe.join("")},J.stringToUTF16BEString=function gt(Ye){const oe=["\xfe\xff"];for(let le=0,nt=Ye.length;le<nt;le++){const pt=Ye.charCodeAt(le);oe.push(String.fromCharCode(pt>>8&255),String.fromCharCode(255&pt))}return oe.join("")},J.stringToUTF8String=vt,J.unreachable=ye,J.utf8StringToString=function Ot(Ye){return unescape(encodeURIComponent(Ye))},J.warn=Pe,Re(2),J.IDENTITY_MATRIX=[1,0,0,1,0,0],J.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],J.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},J.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},J.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},J.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},J.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},J.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},J.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},J.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},J.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},J.AnnotationReplyType={GROUP:"Group",REPLY:"R"},J.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},J.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},J.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},J.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},J.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},J.PageActionEventType={O:"PageOpen",C:"PageClose"},J.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},J.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const G={ERRORS:0,WARNINGS:1,INFOS:5};J.VerbosityLevel=G,J.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},J.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},J.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},J.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ae=G.WARNINGS;function Pe(Ye){ae>=G.WARNINGS&&console.log(`Warning: ${Ye}`)}function ye(Ye){throw new Error(Ye)}function De(Ye,oe,le){return Object.defineProperty(Ye,oe,{value:le,enumerable:!0,configurable:!0,writable:!1}),le}const Q=function(){function oe(le,nt){this.constructor===oe&&ye("Cannot initialize BaseException."),this.message=le,this.name=nt}return oe.prototype=new Error,oe.constructor=oe,oe}();function fe(Ye){"string"!=typeof Ye&&ye("Invalid argument for stringToBytes");const oe=Ye.length,le=new Uint8Array(oe);for(let nt=0;nt<oe;++nt)le[nt]=255&Ye.charCodeAt(nt);return le}function Se(Ye){return void 0!==Ye.length?Ye.length:void 0!==Ye.byteLength?Ye.byteLength:void ye("Invalid argument for arrayByteLength")}J.BaseException=Q,J.PasswordException=class E extends Q{constructor(oe,le){super(oe,"PasswordException"),this.code=le}},J.UnknownErrorException=class R extends Q{constructor(oe,le){super(oe,"UnknownErrorException"),this.details=le}},J.InvalidPDFException=class v extends Q{constructor(oe){super(oe,"InvalidPDFException")}},J.MissingPDFException=class T extends Q{constructor(oe){super(oe,"MissingPDFException")}},J.UnexpectedResponseException=class I extends Q{constructor(oe,le){super(oe,"UnexpectedResponseException"),this.status=le}},J.FormatError=class H extends Q{constructor(oe){super(oe,"FormatError")}},J.AbortException=class k extends Q{constructor(oe){super(oe,"AbortException")}},J.FeatureTest=class $e{static get isLittleEndian(){return De(this,"isLittleEndian",function ft(){const Ye=new Uint8Array(4);return Ye[0]=1,1===new Uint32Array(Ye.buffer,0,1)[0]}())}static get isEvalSupported(){return De(this,"isEvalSupported",function Pt(){try{return new Function(""),!0}catch(Ye){return!1}}())}static get isOffscreenCanvasSupported(){return De(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const Ze=[...Array(256).keys()].map(Ye=>Ye.toString(16).padStart(2,"0"));class Qe{static makeHexColor(oe,le,nt){return`#${Ze[oe]}${Ze[le]}${Ze[nt]}`}static scaleMinMax(oe,le){let nt;oe[0]?(oe[0]<0&&(nt=le[0],le[0]=le[1],le[1]=nt),le[0]*=oe[0],le[1]*=oe[0],oe[3]<0&&(nt=le[2],le[2]=le[3],le[3]=nt),le[2]*=oe[3],le[3]*=oe[3]):(nt=le[0],le[0]=le[2],le[2]=nt,nt=le[1],le[1]=le[3],le[3]=nt,oe[1]<0&&(nt=le[2],le[2]=le[3],le[3]=nt),le[2]*=oe[1],le[3]*=oe[1],oe[2]<0&&(nt=le[0],le[0]=le[1],le[1]=nt),le[0]*=oe[2],le[1]*=oe[2]),le[0]+=oe[4],le[1]+=oe[4],le[2]+=oe[5],le[3]+=oe[5]}static transform(oe,le){return[oe[0]*le[0]+oe[2]*le[1],oe[1]*le[0]+oe[3]*le[1],oe[0]*le[2]+oe[2]*le[3],oe[1]*le[2]+oe[3]*le[3],oe[0]*le[4]+oe[2]*le[5]+oe[4],oe[1]*le[4]+oe[3]*le[5]+oe[5]]}static applyTransform(oe,le){return[oe[0]*le[0]+oe[1]*le[2]+le[4],oe[0]*le[1]+oe[1]*le[3]+le[5]]}static applyInverseTransform(oe,le){const nt=le[0]*le[3]-le[1]*le[2];return[(oe[0]*le[3]-oe[1]*le[2]+le[2]*le[5]-le[4]*le[3])/nt,(-oe[0]*le[1]+oe[1]*le[0]+le[4]*le[1]-le[5]*le[0])/nt]}static getAxialAlignedBoundingBox(oe,le){const nt=Qe.applyTransform(oe,le),pt=Qe.applyTransform(oe.slice(2,4),le),Ct=Qe.applyTransform([oe[0],oe[3]],le),At=Qe.applyTransform([oe[2],oe[1]],le);return[Math.min(nt[0],pt[0],Ct[0],At[0]),Math.min(nt[1],pt[1],Ct[1],At[1]),Math.max(nt[0],pt[0],Ct[0],At[0]),Math.max(nt[1],pt[1],Ct[1],At[1])]}static inverseTransform(oe){const le=oe[0]*oe[3]-oe[1]*oe[2];return[oe[3]/le,-oe[1]/le,-oe[2]/le,oe[0]/le,(oe[2]*oe[5]-oe[4]*oe[3])/le,(oe[4]*oe[1]-oe[5]*oe[0])/le]}static apply3dTransform(oe,le){return[oe[0]*le[0]+oe[1]*le[1]+oe[2]*le[2],oe[3]*le[0]+oe[4]*le[1]+oe[5]*le[2],oe[6]*le[0]+oe[7]*le[1]+oe[8]*le[2]]}static singularValueDecompose2dScale(oe){const le=[oe[0],oe[2],oe[1],oe[3]],nt=oe[0]*le[0]+oe[1]*le[2],At=oe[2]*le[1]+oe[3]*le[3],An=(nt+At)/2,Vn=Math.sqrt((nt+At)**2-4*(nt*At-(oe[2]*le[0]+oe[3]*le[2])*(oe[0]*le[1]+oe[1]*le[3])))/2,_n=An-Vn||1;return[Math.sqrt(An+Vn||1),Math.sqrt(_n)]}static normalizeRect(oe){const le=oe.slice(0);return oe[0]>oe[2]&&(le[0]=oe[2],le[2]=oe[0]),oe[1]>oe[3]&&(le[1]=oe[3],le[3]=oe[1]),le}static intersect(oe,le){const nt=Math.max(Math.min(oe[0],oe[2]),Math.min(le[0],le[2])),pt=Math.min(Math.max(oe[0],oe[2]),Math.max(le[0],le[2]));if(nt>pt)return null;const Ct=Math.max(Math.min(oe[1],oe[3]),Math.min(le[1],le[3])),At=Math.min(Math.max(oe[1],oe[3]),Math.max(le[1],le[3]));return Ct>At?null:[nt,Ct,pt,At]}static bezierBoundingBox(oe,le,nt,pt,Ct,At,An,Vn){const wi=[],_n=[[],[]];let tr,Oi,fs,Ei,Mr,Ns,ps,nr;for(let jr=0;jr<2;++jr)if(0===jr?(Oi=6*oe-12*nt+6*Ct,tr=-3*oe+9*nt-9*Ct+3*An,fs=3*nt-3*oe):(Oi=6*le-12*pt+6*At,tr=-3*le+9*pt-9*At+3*Vn,fs=3*pt-3*le),Math.abs(tr)<1e-12){if(Math.abs(Oi)<1e-12)continue;Ei=-fs/Oi,0<Ei&&Ei<1&&wi.push(Ei)}else ps=Oi*Oi-4*fs*tr,nr=Math.sqrt(ps),!(ps<0)&&(Mr=(-Oi+nr)/(2*tr),0<Mr&&Mr<1&&wi.push(Mr),Ns=(-Oi-nr)/(2*tr),0<Ns&&Ns<1&&wi.push(Ns));let Un,Dr=wi.length;const to=Dr;for(;Dr--;)Ei=wi[Dr],Un=1-Ei,_n[0][Dr]=Un*Un*Un*oe+3*Un*Un*Ei*nt+3*Un*Ei*Ei*Ct+Ei*Ei*Ei*An,_n[1][Dr]=Un*Un*Un*le+3*Un*Un*Ei*pt+3*Un*Ei*Ei*At+Ei*Ei*Ei*Vn;return _n[0][to]=oe,_n[1][to]=le,_n[0][to+1]=An,_n[1][to+1]=Vn,_n[0].length=_n[1].length=to+2,[Math.min(..._n[0]),Math.min(..._n[1]),Math.max(..._n[0]),Math.max(..._n[1])]}}J.Util=Qe;const K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function vt(Ye){return decodeURIComponent(escape(Ye))}},(Ke,J,Re)=>{Re(3)},(Ke,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.isNodeJS=void 0;const Re=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);J.isNodeJS=Re},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var Ke,Re,N,He,Ae,be,ge,ne,C,gB,V;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:L,NodeCMapReaderFactory:A,NodeStandardFontDataFactory:S}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=L,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=A,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=S}function setPDFNetworkStreamFactory(L){createPDFNetworkStream=L}function getDocument(L){const A=new PDFDocumentLoadingTask;let S;if("string"==typeof L||L instanceof URL)S={url:L};else if((0,_util.isArrayBuffer)(L))S={data:L};else if(L instanceof PDFDataRangeTransport)S={range:L};else{if("object"!=typeof L)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!L.url&&!L.data&&!L.range)throw new Error("Invalid parameter object: need either .data, .range or .url");S=L}const b=Object.create(null);let P=null,W=null;for(const U in S){const y=S[U];switch(U){case"url":if("undefined"!=typeof window)try{b[U]=new URL(y,window.location).href;continue}catch(x){(0,_util.warn)(`Cannot create valid URL: "${x}".`)}else if("string"==typeof y||y instanceof URL){b[U]=y.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":P=y;continue;case"worker":W=y;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&y instanceof Buffer)b[U]=new Uint8Array(y);else{if(y instanceof Uint8Array)break;if("string"==typeof y)b[U]=(0,_util.stringToBytes)(y);else if("object"!=typeof y||null===y||isNaN(y.length)){if(!(0,_util.isArrayBuffer)(y))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");b[U]=new Uint8Array(y)}else b[U]=new Uint8Array(y)}continue}b[U]=y}if(b.CMapReaderFactory=b.CMapReaderFactory||DefaultCMapReaderFactory,b.StandardFontDataFactory=b.StandardFontDataFactory||DefaultStandardFontDataFactory,b.ignoreErrors=!0!==b.stopAtErrors,b.fontExtraProperties=!0===b.fontExtraProperties,b.pdfBug=!0===b.pdfBug,b.enableXfa=!0===b.enableXfa,(!Number.isInteger(b.rangeChunkSize)||b.rangeChunkSize<1)&&(b.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof b.docBaseUrl||(0,_display_utils.isDataScheme)(b.docBaseUrl))&&(b.docBaseUrl=null),(!Number.isInteger(b.maxImageSize)||b.maxImageSize<-1)&&(b.maxImageSize=-1),"string"!=typeof b.cMapUrl&&(b.cMapUrl=null),"string"!=typeof b.standardFontDataUrl&&(b.standardFontDataUrl=null),"boolean"!=typeof b.useWorkerFetch&&(b.useWorkerFetch=b.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&b.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof b.isEvalSupported&&(b.isEvalSupported=!0),"boolean"!=typeof b.disableFontFace&&(b.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof b.useSystemFonts&&(b.useSystemFonts=!_is_node.isNodeJS&&!b.disableFontFace),("object"!=typeof b.ownerDocument||null===b.ownerDocument)&&(b.ownerDocument=globalThis.document),"boolean"!=typeof b.disableRange&&(b.disableRange=!1),"boolean"!=typeof b.disableStream&&(b.disableStream=!1),"boolean"!=typeof b.disableAutoFetch&&(b.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(b.verbosity),!W){const U={verbosity:b.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};W=U.port?PDFWorker.fromPort(U):new PDFWorker(U),A._worker=W}const F=A.docId;return W.promise.then(function(){if(A.destroyed)throw new Error("Loading aborted");const U=_fetchDocument(W,b,P,F),y=new Promise(function(x){let G;P?G=new _transport_stream.PDFDataTransportStream({length:b.length,initialData:b.initialData,progressiveDone:b.progressiveDone,contentDispositionFilename:b.contentDispositionFilename,disableRange:b.disableRange,disableStream:b.disableStream},P):b.data||(G=createPDFNetworkStream({url:b.url,length:b.length,httpHeaders:b.httpHeaders,withCredentials:b.withCredentials,rangeChunkSize:b.rangeChunkSize,disableRange:b.disableRange,disableStream:b.disableStream})),x(G)});return Promise.all([U,y]).then(function([x,G]){if(A.destroyed)throw new Error("Loading aborted");const j=new _message_handler.MessageHandler(F,x,W.port),$=new WorkerTransport(j,A,G,b);A._transport=$,j.send("Ready",null)})}).catch(A._capability.reject),A}function _fetchDocument(L,A,S,b){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(L,A,S,b){if(L.destroyed)throw new Error("Worker was destroyed");S&&(A.length=S.length,A.initialData=S.initialData,A.progressiveDone=S.progressiveDone,A.contentDispositionFilename=S.contentDispositionFilename);const P=yield L.messageHandler.sendWithPromise("GetDocRequest",{docId:b,apiVersion:"2.14.305",source:{data:A.data,url:A.url,password:A.password,disableAutoFetch:A.disableAutoFetch,rangeChunkSize:A.rangeChunkSize,length:A.length},maxImageSize:A.maxImageSize,disableFontFace:A.disableFontFace,docBaseUrl:A.docBaseUrl,ignoreErrors:A.ignoreErrors,isEvalSupported:A.isEvalSupported,fontExtraProperties:A.fontExtraProperties,enableXfa:A.enableXfa,useSystemFonts:A.useSystemFonts,cMapUrl:A.useWorkerFetch?A.cMapUrl:null,standardFontDataUrl:A.useWorkerFetch?A.standardFontDataUrl:null});if(L.destroyed)throw new Error("Worker was destroyed");return P})).apply(this,arguments)}const J=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+pB(J,Ke)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var A=this;return _asyncToGenerator(function*(){var S;A.destroyed=!0,yield null==(S=A._transport)?void 0:S.destroy(),A._transport=null,A._worker&&(A._worker.destroy(),A._worker=null)})()}};let PDFDocumentLoadingTask=J;Ke=new WeakMap,ln(PDFDocumentLoadingTask,Ke,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(A,S,b=!1,P=null){this.length=A,this.initialData=S,this.progressiveDone=b,this.contentDispositionFilename=P,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(A){this._rangeListeners.push(A)}addProgressListener(A){this._progressListeners.push(A)}addProgressiveReadListener(A){this._progressiveReadListeners.push(A)}addProgressiveDoneListener(A){this._progressiveDoneListeners.push(A)}onDataRange(A,S){for(const b of this._rangeListeners)b(A,S)}onDataProgress(A,S){this._readyCapability.promise.then(()=>{for(const b of this._progressListeners)b(A,S)})}onDataProgressiveRead(A){this._readyCapability.promise.then(()=>{for(const S of this._progressiveReadListeners)S(A)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const A of this._progressiveDoneListeners)A()})}transportReady(){this._readyCapability.resolve()}requestDataRange(A,S){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(A,S){var P,b=this;this._pdfInfo=A,this._transport=S,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(P=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),b.stats||{streamTypes:{},fontTypes:{}}}),function(){return P.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(A){return this._transport.getPage(A)}getPageIndex(A){return this._transport.getPageIndex(A)}getDestinations(){return this._transport.getDestinations()}getDestination(A){return this._transport.getDestination(A)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(A=!1){return this._transport.startCleanup(A||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(A,S,b,P,W=!1){this._pageIndex=A,this._pageInfo=S,this._ownerDocument=P,this._transport=b,this._stats=W?new _display_utils.StatTimer:null,this._pdfBug=W,this.commonObjs=b.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:A,rotation:S=this.rotate,offsetX:b=0,offsetY:P=0,dontFlip:W=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:A,rotation:S,offsetX:b,offsetY:P,dontFlip:W})}getAnnotations({intent:A="display"}={}){const S=this._transport.getRenderingIntent(A);let b=this._annotationPromises.get(S.cacheKey);return b||(b=this._transport.getAnnotations(this._pageIndex,S.renderingIntent),this._annotationPromises.set(S.cacheKey,b),b=b.then(P=>{for(const W of P)void 0!==W.titleObj&&Object.defineProperty(W,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),W.titleObj.str)}),void 0!==W.contentsObj&&Object.defineProperty(W,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),W.contentsObj.str)});return P})),b}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var A=this;return _asyncToGenerator(function*(){var S;return(null==(S=A._transport._htmlForXfa)?void 0:S.children[A._pageIndex])||null})()}render({canvasContext:A,viewport:S,intent:b="display",annotationMode:P=_util.AnnotationMode.ENABLE,transform:W=null,imageLayer:F=null,canvasFactory:U=null,background:y=null,optionalContentConfigPromise:x=null,annotationCanvasMap:G=null,pageColors:j=null}){var Pe,ye;void 0!==(null==(Pe=arguments[0])?void 0:Pe.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&P===_util.AnnotationMode.ENABLE&&(P=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null==(ye=arguments[0])?void 0:ye.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&P===_util.AnnotationMode.ENABLE&&(P=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const $=this._transport.getRenderingIntent(b,P);this.pendingCleanup=!1,x||(x=this._transport.getOptionalContentConfig());let te=this._intentStates.get($.cacheKey);te||(te=Object.create(null),this._intentStates.set($.cacheKey,te)),te.streamReaderCancelTimeout&&(clearTimeout(te.streamReaderCancelTimeout),te.streamReaderCancelTimeout=null);const ie=U||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ae=!!($.renderingIntent&_util.RenderingIntentFlag.PRINT);te.displayReadyCapability||(te.displayReadyCapability=(0,_util.createPromiseCapability)(),te.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList($));const _e=Ie=>{te.renderTasks.delete(Te),(this.cleanupAfterRender||ae)&&(this.pendingCleanup=!0),this._tryCleanup(),Ie?(Te.capability.reject(Ie),this._abortOperatorList({intentState:te,reason:Ie instanceof Error?Ie:new Error(Ie)})):Te.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},Te=new InternalRenderTask({callback:_e,params:{canvasContext:A,viewport:S,transform:W,imageLayer:F,background:y},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:te.operatorList,pageIndex:this._pageIndex,canvasFactory:ie,useRequestAnimationFrame:!ae,pdfBug:this._pdfBug,pageColors:j});(te.renderTasks||(te.renderTasks=new Set)).add(Te);const Oe=Te.task;return Promise.all([te.displayReadyCapability.promise,x]).then(([Ie,Be])=>{this.pendingCleanup?_e():(this._stats&&this._stats.time("Rendering"),Te.initializeGraphics({transparency:Ie,optionalContentConfig:Be}),Te.operatorListChanged())}).catch(_e),Oe}getOperatorList({intent:A="display",annotationMode:S=_util.AnnotationMode.ENABLE}={}){const P=this._transport.getRenderingIntent(A,S,!0);let F,W=this._intentStates.get(P.cacheKey);return W||(W=Object.create(null),this._intentStates.set(P.cacheKey,W)),W.opListReadCapability||(F=Object.create(null),F.operatorListChanged=function b(){W.operatorList.lastChunk&&(W.opListReadCapability.resolve(W.operatorList),W.renderTasks.delete(F))},W.opListReadCapability=(0,_util.createPromiseCapability)(),(W.renderTasks||(W.renderTasks=new Set)).add(F),W.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(P)),W.opListReadCapability.promise}streamTextContent({disableCombineTextItems:A=!1,includeMarkedContent:S=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==A,includeMarkedContent:!0===S},{highWaterMark:100,size:P=>P.items.length})}getTextContent(A={}){if(this._transport._htmlForXfa)return this.getXfa().then(b=>_xfa_text.XfaText.textContent(b));const S=this.streamTextContent(A);return new Promise(function(b,P){const F=S.getReader(),U={items:[],styles:Object.create(null)};!function W(){F.read().then(function({value:y,done:x}){x?b(U):(Object.assign(U.styles,y.styles),U.items.push(...y.items),W())},P)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const A=[];for(const S of this._intentStates.values())if(this._abortOperatorList({intentState:S,reason:new Error("Page was destroyed."),force:!0}),!S.opListReadCapability)for(const b of S.renderTasks)A.push(b.completed),b.cancel();this.objs.clear();for(const S of this._bitmaps)S.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(A)}cleanup(A=!1){return this.pendingCleanup=!0,this._tryCleanup(A)}_tryCleanup(A=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:S,operatorList:b}of this._intentStates.values())if(S.size>0||!b.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,A&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const S of this._bitmaps)S.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(A,S){const b=this._intentStates.get(S);!b||(this._stats&&this._stats.timeEnd("Page Request"),b.displayReadyCapability&&b.displayReadyCapability.resolve(A))}_renderPageChunk(A,S){for(let b=0,P=A.length;b<P;b++)S.operatorList.fnArray.push(A.fnArray[b]),S.operatorList.argsArray.push(A.argsArray[b]);S.operatorList.lastChunk=A.lastChunk;for(const b of S.renderTasks)b.operatorListChanged();A.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:A,cacheKey:S}){const P=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:A,cacheKey:S,annotationStorage:A&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),W=this._intentStates.get(S);W.streamReader=P;const F=()=>{P.read().then(({value:U,done:y})=>{y?W.streamReader=null:this._transport.destroyed||(this._renderPageChunk(U,W),F())},U=>{if(W.streamReader=null,!this._transport.destroyed){if(W.operatorList){W.operatorList.lastChunk=!0;for(const y of W.renderTasks)y.operatorListChanged();this._tryCleanup()}if(W.displayReadyCapability)W.displayReadyCapability.reject(U);else{if(!W.opListReadCapability)throw U;W.opListReadCapability.reject(U)}}})};F()}_abortOperatorList({intentState:A,reason:S,force:b=!1}){if(A.streamReader){if(!b){if(A.renderTasks.size>0)return;if(S instanceof _display_utils.RenderingCancelledException)return void(A.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:A,reason:S,force:!0}),A.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(A.streamReader.cancel(new _util.AbortException(S.message)).catch(()=>{}),A.streamReader=null,!this._transport.destroyed){for(const[P,W]of this._intentStates)if(W===A){this._intentStates.delete(P);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(A,S){const b={data:structuredClone(A,S)};this._deferred.then(()=>{for(const P of this._listeners)P.call(this,b)})}addEventListener(A,S){this._listeners.push(S)}removeEventListener(A,S){const b=this._listeners.indexOf(S);this._listeners.splice(b,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const L=null==(Re=null==document?void 0:document.currentScript)?void 0:Re.src;L&&(PDFWorkerUtil.fallbackWorkerSrc=L.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(L,A){let S;try{if(S=new URL(L),!S.origin||"null"===S.origin)return!1}catch(P){return!1}const b=new URL(A,S);return S.origin===b.origin},PDFWorkerUtil.createCDNWrapper=function(L){return URL.createObjectURL(new Blob([`importScripts("${L}");`]))};const _PDFWorker=class{constructor({name:L=null,port:A=null,verbosity:S=(0,_util.getVerbosityLevel)()}={}){if(A&&Jt(_PDFWorker,N).has(A))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=L,this.destroyed=!1,this.verbosity=S,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,A)return Jt(_PDFWorker,N).set(A,this),void this._initializeFromPort(A);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(L){this._port=L,this._messageHandler=new _message_handler.MessageHandler("main","worker",L),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let L=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,L)||(L=PDFWorkerUtil.createCDNWrapper(new URL(L,window.location).href));const A=new Worker(L),S=new _message_handler.MessageHandler("main","worker",A),b=()=>{A.removeEventListener("error",P),S.destroy(),A.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},P=()=>{this._webWorker||b()};A.addEventListener("error",P),S.on("test",F=>{A.removeEventListener("error",P),this.destroyed?b():F?(this._messageHandler=S,this._port=A,this._webWorker=A,this._readyCapability.resolve(),S.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),S.destroy(),A.terminate())}),S.on("ready",F=>{if(A.removeEventListener("error",P),this.destroyed)b();else try{W()}catch(U){this._setupFakeWorker()}});const W=()=>{const F=new Uint8Array;S.send("test",F,[F.buffer])};return void W()}catch(A){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(L=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const A=new LoopbackPort;this._port=A;const S="fake"+PDFWorkerUtil.fakeWorkerId++,b=new _message_handler.MessageHandler(S+"_worker",S,A);L.setup(b,A);const P=new _message_handler.MessageHandler(S,S+"_worker",A);this._messageHandler=P,this._readyCapability.resolve(),P.send("configure",{verbosity:this.verbosity})}).catch(L=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${L.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Jt(_PDFWorker,N).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(L){if(!(null==L?void 0:L.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Jt(this,N).has(L.port)?Jt(this,N).get(L.port):new _PDFWorker(L)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var L;try{return(null==(L=globalThis.pdfjsWorker)?void 0:L.WorkerMessageHandler)||null}catch(A){return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function L(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;N=new WeakMap,ln(PDFWorker,N,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(A,S,b,P){ln(this,He,null),ln(this,Ae,new Map),ln(this,be,new Map),ln(this,ge,null),this.messageHandler=A,this.loadingTask=S,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:S.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:P.ownerDocument,styleElement:P.styleElement}),this._params=P,P.useWorkerFetch||(this.CMapReaderFactory=new P.CMapReaderFactory({baseUrl:P.cMapUrl,isCompressed:P.cMapPacked}),this.StandardFontDataFactory=new P.StandardFontDataFactory({baseUrl:P.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=b,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return Jt(this,He)}getRenderingIntent(A,S=_util.AnnotationMode.ENABLE,b=!1){let P=_util.RenderingIntentFlag.DISPLAY,W="";switch(A){case"any":P=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":P=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${A}`)}switch(S){case _util.AnnotationMode.DISABLE:P+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:P+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:P+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,W=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${S}`)}return b&&(P+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:P,cacheKey:`${P}_${W}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const A=[];for(const b of Jt(this,Ae).values())A.push(b._destroy());Jt(this,Ae).clear(),Jt(this,be).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const S=this.messageHandler.sendWithPromise("Terminate",null);return A.push(S),Promise.all(A).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Pi(this,ge,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:A,loadingTask:S}=this;A.on("GetReader",(b,P)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=W=>{this._lastProgress={loaded:W.loaded,total:W.total}},P.onPull=()=>{this._fullReader.read().then(function({value:W,done:F}){F?P.close():((0,_util.assert)((0,_util.isArrayBuffer)(W),"GetReader - expected an ArrayBuffer."),P.enqueue(new Uint8Array(W),1,[W]))}).catch(W=>{P.error(W)})},P.onCancel=W=>{this._fullReader.cancel(W),P.ready.catch(F=>{if(!this.destroyed)throw F})}}),A.on("ReaderHeadersReady",b=>{const P=(0,_util.createPromiseCapability)(),W=this._fullReader;return W.headersReady.then(()=>{var F;(!W.isStreamingSupported||!W.isRangeSupported)&&(this._lastProgress&&(null==(F=S.onProgress)||F.call(S,this._lastProgress)),W.onProgress=U=>{var y;null==(y=S.onProgress)||y.call(S,{loaded:U.loaded,total:U.total})}),P.resolve({isStreamingSupported:W.isStreamingSupported,isRangeSupported:W.isRangeSupported,contentLength:W.contentLength})},P.reject),P.promise}),A.on("GetRangeReader",(b,P)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const W=this._networkStream.getRangeReader(b.begin,b.end);W?(P.onPull=()=>{W.read().then(function({value:F,done:U}){U?P.close():((0,_util.assert)((0,_util.isArrayBuffer)(F),"GetRangeReader - expected an ArrayBuffer."),P.enqueue(new Uint8Array(F),1,[F]))}).catch(F=>{P.error(F)})},P.onCancel=F=>{W.cancel(F),P.ready.catch(U=>{if(!this.destroyed)throw U})}):P.close()}),A.on("GetDoc",({pdfInfo:b})=>{this._numPages=b.numPages,this._htmlForXfa=b.htmlForXfa,delete b.htmlForXfa,S._capability.resolve(new PDFDocumentProxy(b,this))}),A.on("DocException",function(b){let P;switch(b.name){case"PasswordException":P=new _util.PasswordException(b.message,b.code);break;case"InvalidPDFException":P=new _util.InvalidPDFException(b.message);break;case"MissingPDFException":P=new _util.MissingPDFException(b.message);break;case"UnexpectedResponseException":P=new _util.UnexpectedResponseException(b.message,b.status);break;case"UnknownErrorException":P=new _util.UnknownErrorException(b.message,b.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}S._capability.reject(P)}),A.on("PasswordRequest",b=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),S.onPassword){const P=W=>{W instanceof Error?this._passwordCapability.reject(W):this._passwordCapability.resolve({password:W})};try{S.onPassword(P,b.code)}catch(W){this._passwordCapability.reject(W)}}else this._passwordCapability.reject(new _util.PasswordException(b.message,b.code));return this._passwordCapability.promise}),A.on("DataLoaded",b=>{var P;null==(P=S.onProgress)||P.call(S,{loaded:b.length,total:b.length}),this.downloadInfoCapability.resolve(b)}),A.on("StartRenderPage",b=>{this.destroyed||Jt(this,Ae).get(b.pageIndex)._startRenderPage(b.transparency,b.cacheKey)}),A.on("commonobj",([b,P,W])=>{var F;if(!this.destroyed&&!this.commonObjs.has(b))switch(P){case"Font":const U=this._params;if("error"in W){const G=W.error;(0,_util.warn)(`Error during font loading: ${G}`),this.commonObjs.resolve(b,G);break}let y=null;U.pdfBug&&(null==(F=globalThis.FontInspector)?void 0:F.enabled)&&(y={registerFont(G,j){globalThis.FontInspector.fontAdded(G,j)}});const x=new _font_loader.FontFaceObject(W,{isEvalSupported:U.isEvalSupported,disableFontFace:U.disableFontFace,ignoreErrors:U.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:y});this.fontLoader.bind(x).catch(G=>A.sendWithPromise("FontFallback",{id:b})).finally(()=>{!U.fontExtraProperties&&x.data&&(x.data=null),this.commonObjs.resolve(b,x)});break;case"FontPath":case"Image":this.commonObjs.resolve(b,W);break;default:throw new Error(`Got unknown common object type ${P}`)}}),A.on("obj",([b,P,W,F])=>{var y;if(this.destroyed)return;const U=Jt(this,Ae).get(P);if(!U.objs.has(b))switch(W){case"Image":U.objs.resolve(b,F);const x=8e6;if(F){let G;if(F.bitmap){const{bitmap:j,width:$,height:te}=F;G=$*te*4,U._bitmaps.add(j)}else G=(null==(y=F.data)?void 0:y.length)||0;G>x&&(U.cleanupAfterRender=!0)}break;case"Pattern":U.objs.resolve(b,F);break;default:throw new Error(`Got unknown object type ${W}`)}}),A.on("DocProgress",b=>{var P;this.destroyed||null==(P=S.onProgress)||P.call(S,{loaded:b.loaded,total:b.total})}),A.on("DocStats",b=>{this.destroyed||Pi(this,He,Object.freeze({streamTypes:Object.freeze(b.streamTypes),fontTypes:Object.freeze(b.fontTypes)}))}),A.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),A.on("FetchBuiltInCMap",b=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(b):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),A.on("FetchStandardFontData",b=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(b):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:A}){var S,b;this.destroyed||null==(b=(S=this.loadingTask).onUnsupportedFeature)||b.call(S,A)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(A){if(!Number.isInteger(A)||A<=0||A>this._numPages)return Promise.reject(new Error("Invalid page request."));const S=A-1,b=Jt(this,be).get(S);if(b)return b;const P=this.messageHandler.sendWithPromise("GetPage",{pageIndex:S}).then(W=>{if(this.destroyed)throw new Error("Transport destroyed");const F=new PDFPageProxy(S,W,this,this._params.ownerDocument,this._params.pdfBug);return Jt(this,Ae).set(S,F),F});return Jt(this,be).set(S,P),P}getPageIndex(A){return"object"!=typeof A||null===A||!Number.isInteger(A.num)||A.num<0||!Number.isInteger(A.gen)||A.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:A.num,gen:A.gen})}getAnnotations(A,S){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:A,intent:S})}saveDocument(){var A,S;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(S=null==(A=this._fullReader)?void 0:A.filename)?S:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(A){return"string"!=typeof A?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:A})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(A){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:A})}getStructTree(A){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:A})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(A=>new _optional_content_config.OptionalContentConfig(A))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return Jt(this,ge)||Pi(this,ge,this.messageHandler.sendWithPromise("GetMetadata",null).then(A=>{var S,b,P,W;return{info:A[0],metadata:A[1]?new _metadata.Metadata(A[1]):null,contentDispositionFilename:null!=(b=null==(S=this._fullReader)?void 0:S.filename)?b:null,contentLength:null!=(W=null==(P=this._fullReader)?void 0:P.contentLength)?W:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(A=!1){var S=this;return _asyncToGenerator(function*(){if(yield S.messageHandler.sendWithPromise("Cleanup",null),!S.destroyed){for(const b of Jt(S,Ae).values())if(!b.cleanup())throw new Error(`startCleanup: Page ${b.pageNumber} is currently rendering.`);S.commonObjs.clear(),A||S.fontLoader.clear(),Pi(S,ge,null),S._getFieldObjectsPromise=null,S._hasJSActionsPromise=null}})()}get loadingParams(){const A=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:A.disableAutoFetch,enableXfa:A.enableXfa})}}He=new WeakMap,Ae=new WeakMap,be=new WeakMap,ge=new WeakMap;class PDFObjects{constructor(){ln(this,C),ln(this,ne,Object.create(null))}get(A,S=null){if(S){const P=tn(this,C,gB).call(this,A);return P.capability.promise.then(()=>S(P.data)),null}const b=Jt(this,ne)[A];if(!(null==b?void 0:b.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${A}.`);return b.data}has(A){const S=Jt(this,ne)[A];return(null==S?void 0:S.capability.settled)||!1}resolve(A,S=null){const b=tn(this,C,gB).call(this,A);b.data=S,b.capability.resolve()}clear(){Pi(this,ne,Object.create(null))}}ne=new WeakMap,C=new WeakSet,gB=function(A){return Jt(this,ne)[A]||(Jt(this,ne)[A]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(A){this._internalRenderTask=A,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const z=class{constructor({callback:A,params:S,objs:b,commonObjs:P,annotationCanvasMap:W,operatorList:F,pageIndex:U,canvasFactory:y,useRequestAnimationFrame:x=!1,pdfBug:G=!1,pageColors:j=null}){this.callback=A,this.params=S,this.objs=b,this.commonObjs=P,this.annotationCanvasMap=W,this.operatorListIdx=null,this.operatorList=F,this._pageIndex=U,this.canvasFactory=y,this._pdfBug=G,this.pageColors=j,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===x&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=S.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:A=!1,optionalContentConfig:S}){var y;if(this.cancelled)return;if(this._canvas){if(Jt(z,V).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Jt(z,V).add(this._canvas)}this._pdfBug&&(null==(y=globalThis.StepperManager)?void 0:y.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:b,viewport:P,transform:W,imageLayer:F,background:U}=this.params;this.gfx=new _canvas.CanvasGraphics(b,this.commonObjs,this.objs,this.canvasFactory,F,S,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:W,viewport:P,transparency:A,background:U}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(A=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&Jt(z,V).delete(this._canvas),this.callback(A||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var A=this;return _asyncToGenerator(function*(){A.cancelled||(A.operatorListIdx=A.gfx.executeOperatorList(A.operatorList,A.operatorListIdx,A._continueBound,A.stepper),A.operatorListIdx===A.operatorList.argsArray.length&&(A.running=!1,A.operatorList.lastChunk&&(A.gfx.endDrawing(),A._canvas&&Jt(z,V).delete(A._canvas),A.callback())))})()}};let InternalRenderTask=z;V=new WeakMap,ln(InternalRenderTask,V,new WeakSet);const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.StatTimer=J.RenderingCancelledException=J.PixelsPerInch=J.PageViewport=J.PDFDateString=J.DOMStandardFontDataFactory=J.DOMSVGFactory=J.DOMCanvasFactory=J.DOMCMapReaderFactory=void 0,J.deprecated=function x(ie){console.log("Deprecated API usage: "+ie)},J.getFilenameFromUrl=function P(ie){const ae=ie.indexOf("#"),_e=ie.indexOf("?"),Te=Math.min(ae>0?ae:ie.length,_e>0?_e:ie.length);return ie.substring(ie.lastIndexOf("/",Te)+1,Te)},J.getPdfFilenameFromUrl=function W(ie,ae="document.pdf"){if("string"!=typeof ie)return ae;if(S(ie))return(0,He.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ae;const Te=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Oe=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(ie);let Pe=Te.exec(Oe[1])||Te.exec(Oe[2])||Te.exec(Oe[3]);if(Pe&&(Pe=Pe[0],Pe.includes("%")))try{Pe=Te.exec(decodeURIComponent(Pe))[0]}catch(ye){}return Pe||ae},J.getXfaPageViewport=function $(ie,{scale:ae=1,rotation:_e=0}){const{width:Te,height:Oe}=ie.attributes.style,Pe=[0,0,parseInt(Te),parseInt(Oe)];return new L({viewBox:Pe,scale:ae,rotation:_e})},J.isDataScheme=S,J.isPdfFile=function b(ie){return"string"==typeof ie&&/\.pdf$/i.test(ie)},J.isValidFetchUrl=U,J.loadScript=function y(ie,ae=!1){return new Promise((_e,Te)=>{const Oe=document.createElement("script");Oe.src=ie,Oe.onload=function(Pe){ae&&Oe.remove(),_e(Pe)},Oe.onerror=function(){Te(new Error(`Cannot load script at: ${Oe.src}`))},(document.head||document.documentElement).appendChild(Oe)})};var N=Re(6),He=Re(1);const te=class{};let G,be=te;function ne(ie){return C.apply(this,arguments)}function C(){return(C=_asyncToGenerator(function*(ie,ae=!1){if(U(ie,document.baseURI)){const _e=yield fetch(ie);if(!_e.ok)throw new Error(_e.statusText);return ae?new Uint8Array(yield _e.arrayBuffer()):(0,He.stringToBytes)(yield _e.text())}return new Promise((_e,Te)=>{const Oe=new XMLHttpRequest;Oe.open("GET",ie,!0),ae&&(Oe.responseType="arraybuffer"),Oe.onreadystatechange=()=>{if(Oe.readyState===XMLHttpRequest.DONE){if(200===Oe.status||0===Oe.status){let Pe;if(ae&&Oe.response?Pe=new Uint8Array(Oe.response):!ae&&Oe.responseText&&(Pe=(0,He.stringToBytes)(Oe.responseText)),Pe)return void _e(Pe)}Te(new Error(Oe.statusText))}},Oe.send(null)})})).apply(this,arguments)}z0(be,"CSS",96),z0(be,"PDF",72),z0(be,"PDF_TO_CSS_UNITS",te.CSS/te.PDF),J.PixelsPerInch=be,J.DOMCanvasFactory=class ge extends N.BaseCanvasFactory{constructor({ownerDocument:ae=globalThis.document}={}){super(),this._document=ae}_createCanvas(ae,_e){const Te=this._document.createElement("canvas");return Te.width=ae,Te.height=_e,Te}},J.DOMCMapReaderFactory=class Y extends N.BaseCMapReaderFactory{_fetchData(ae,_e){return ne(ae,this.isCompressed).then(Te=>({cMapData:Te,compressionType:_e}))}},J.DOMStandardFontDataFactory=class V extends N.BaseStandardFontDataFactory{_fetchData(ae){return ne(ae,!0)}},J.DOMSVGFactory=class z extends N.BaseSVGFactory{_createSVG(ae){return document.createElementNS("http://www.w3.org/2000/svg",ae)}};class L{constructor({viewBox:ae,scale:_e,rotation:Te,offsetX:Oe=0,offsetY:Pe=0,dontFlip:ye=!1}){this.viewBox=ae,this.scale=_e,this.rotation=Te,this.offsetX=Oe,this.offsetY=Pe;const Ie=(ae[2]+ae[0])/2,Be=(ae[3]+ae[1])/2;let we,De,Q,E,R,v,T,I;switch((Te%=360)<0&&(Te+=360),Te){case 180:we=-1,De=0,Q=0,E=1;break;case 90:we=0,De=1,Q=1,E=0;break;case 270:we=0,De=-1,Q=-1,E=0;break;case 0:we=1,De=0,Q=0,E=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ye&&(Q=-Q,E=-E),0===we?(R=Math.abs(Be-ae[1])*_e+Oe,v=Math.abs(Ie-ae[0])*_e+Pe,T=Math.abs(ae[3]-ae[1])*_e,I=Math.abs(ae[2]-ae[0])*_e):(R=Math.abs(Ie-ae[0])*_e+Oe,v=Math.abs(Be-ae[1])*_e+Pe,T=Math.abs(ae[2]-ae[0])*_e,I=Math.abs(ae[3]-ae[1])*_e),this.transform=[we*_e,De*_e,Q*_e,E*_e,R-we*_e*Ie-Q*_e*Be,v-De*_e*Ie-E*_e*Be],this.width=T,this.height=I}clone({scale:ae=this.scale,rotation:_e=this.rotation,offsetX:Te=this.offsetX,offsetY:Oe=this.offsetY,dontFlip:Pe=!1}={}){return new L({viewBox:this.viewBox.slice(),scale:ae,rotation:_e,offsetX:Te,offsetY:Oe,dontFlip:Pe})}convertToViewportPoint(ae,_e){return He.Util.applyTransform([ae,_e],this.transform)}convertToViewportRectangle(ae){const _e=He.Util.applyTransform([ae[0],ae[1]],this.transform),Te=He.Util.applyTransform([ae[2],ae[3]],this.transform);return[_e[0],_e[1],Te[0],Te[1]]}convertToPdfPoint(ae,_e){return He.Util.applyInverseTransform([ae,_e],this.transform)}}function S(ie){const ae=ie.length;let _e=0;for(;_e<ae&&""===ie[_e].trim();)_e++;return"data:"===ie.substring(_e,_e+5).toLowerCase()}function U(ie,ae){try{const{protocol:_e}=ae?new URL(ie,ae):new URL(ie);return"http:"===_e||"https:"===_e}catch(_e){return!1}}J.PageViewport=L,J.RenderingCancelledException=class A extends He.BaseException{constructor(ae,_e){super(ae,"RenderingCancelledException"),this.type=_e}},J.StatTimer=class F{constructor(){this.started=Object.create(null),this.times=[]}time(ae){ae in this.started&&(0,He.warn)(`Timer is already running for ${ae}`),this.started[ae]=Date.now()}timeEnd(ae){ae in this.started||(0,He.warn)(`Timer has not been started for ${ae}`),this.times.push({name:ae,start:this.started[ae],end:Date.now()}),delete this.started[ae]}toString(){const ae=[];let _e=0;for(const Te of this.times){const Oe=Te.name;Oe.length>_e&&(_e=Oe.length)}for(const Te of this.times){const Oe=Te.end-Te.start;ae.push(`${Te.name.padEnd(_e)} ${Oe}ms\n`)}return ae.join("")}},J.PDFDateString=class j{static toDateObject(ae){if(!ae||"string"!=typeof ae)return null;G||(G=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const _e=G.exec(ae);if(!_e)return null;const Te=parseInt(_e[1],10);let Oe=parseInt(_e[2],10);Oe=Oe>=1&&Oe<=12?Oe-1:0;let Pe=parseInt(_e[3],10);Pe=Pe>=1&&Pe<=31?Pe:1;let ye=parseInt(_e[4],10);ye=ye>=0&&ye<=23?ye:0;let Ie=parseInt(_e[5],10);Ie=Ie>=0&&Ie<=59?Ie:0;let Be=parseInt(_e[6],10);Be=Be>=0&&Be<=59?Be:0;const we=_e[7]||"Z";let De=parseInt(_e[8],10);De=De>=0&&De<=23?De:0;let Q=parseInt(_e[9],10)||0;return Q=Q>=0&&Q<=59?Q:0,"-"===we?(ye+=De,Ie+=Q):"+"===we&&(ye-=De,Ie-=Q),new Date(Date.UTC(Te,Oe,Pe,ye,Ie,Be))}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.BaseStandardFontDataFactory=J.BaseSVGFactory=J.BaseCanvasFactory=J.BaseCMapReaderFactory=void 0;var N=Re(1);class He{constructor(){this.constructor===He&&(0,N.unreachable)("Cannot initialize BaseCanvasFactory.")}create(C,Y){if(C<=0||Y<=0)throw new Error("Invalid canvas size");const V=this._createCanvas(C,Y);return{canvas:V,context:V.getContext("2d")}}reset(C,Y,V){if(!C.canvas)throw new Error("Canvas is not specified");if(Y<=0||V<=0)throw new Error("Invalid canvas size");C.canvas.width=Y,C.canvas.height=V}destroy(C){if(!C.canvas)throw new Error("Canvas is not specified");C.canvas.width=0,C.canvas.height=0,C.canvas=null,C.context=null}_createCanvas(C,Y){(0,N.unreachable)("Abstract method `_createCanvas` called.")}}J.BaseCanvasFactory=He;class Ae{constructor({baseUrl:C=null,isCompressed:Y=!1}){this.constructor===Ae&&(0,N.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=C,this.isCompressed=Y}fetch({name:C}){var Y=this;return _asyncToGenerator(function*(){if(!Y.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!C)throw new Error("CMap name must be specified.");const V=Y.baseUrl+C+(Y.isCompressed?".bcmap":"");return Y._fetchData(V,Y.isCompressed?N.CMapCompressionType.BINARY:N.CMapCompressionType.NONE).catch(L=>{throw new Error(`Unable to load ${Y.isCompressed?"binary ":""}CMap at: ${V}`)})})()}_fetchData(C,Y){(0,N.unreachable)("Abstract method `_fetchData` called.")}}J.BaseCMapReaderFactory=Ae;class be{constructor({baseUrl:C=null}){this.constructor===be&&(0,N.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=C}fetch({filename:C}){var Y=this;return _asyncToGenerator(function*(){if(!Y.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!C)throw new Error("Font filename must be specified.");const V=`${Y.baseUrl}${C}`;return Y._fetchData(V).catch(z=>{throw new Error(`Unable to load font data at: ${V}`)})})()}_fetchData(C){(0,N.unreachable)("Abstract method `_fetchData` called.")}}J.BaseStandardFontDataFactory=be;class ge{constructor(){this.constructor===ge&&(0,N.unreachable)("Cannot initialize BaseSVGFactory.")}create(C,Y){if(C<=0||Y<=0)throw new Error("Invalid SVG dimensions");const V=this._createSVG("svg:svg");return V.setAttribute("version","1.1"),V.setAttribute("width",`${C}px`),V.setAttribute("height",`${Y}px`),V.setAttribute("preserveAspectRatio","none"),V.setAttribute("viewBox",`0 0 ${C} ${Y}`),V}createElement(C){if("string"!=typeof C)throw new Error("Invalid SVG element type");return this._createSVG(C)}_createSVG(C){(0,N.unreachable)("Abstract method `_createSVG` called.")}}J.BaseSVGFactory=ge},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.FontLoader=J.FontFaceObject=void 0;var N=Re(1);class He{constructor({docId:ne,onUnsupportedFeature:C,ownerDocument:Y=globalThis.document,styleElement:V=null}){this.constructor===He&&(0,N.unreachable)("Cannot initialize BaseFontLoader."),this.docId=ne,this._onUnsupportedFeature=C,this._document=Y,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(ne){this.nativeFontFaces.push(ne),this._document.fonts.add(ne)}insertRule(ne){let C=this.styleElement;C||(C=this.styleElement=this._document.createElement("style"),C.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(C));const Y=C.sheet;Y.insertRule(ne,Y.cssRules.length)}clear(){for(const ne of this.nativeFontFaces)this._document.fonts.delete(ne);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(ne){var C=this;return _asyncToGenerator(function*(){if(ne.attached||ne.missingFile)return;if(ne.attached=!0,C.isFontLoadingAPISupported){const V=ne.createNativeFontFace();if(V){C.addNativeFontFace(V);try{yield V.loaded}catch(z){throw C._onUnsupportedFeature({featureId:N.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,N.warn)(`Failed to load font '${V.family}': '${z}'.`),ne.disableFontFace=!0,z}}return}const Y=ne.createFontFaceRule();if(Y){if(C.insertRule(Y),C.isSyncFontLoadingSupported)return;yield new Promise(V=>{const z=C._queueLoadingCallback(V);C._prepareFontLoadEvent([Y],[ne],z)})}})()}_queueLoadingCallback(ne){(0,N.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var C;const ne=!!(null==(C=this._document)?void 0:C.fonts);return(0,N.shadow)(this,"isFontLoadingAPISupported",ne)}get isSyncFontLoadingSupported(){(0,N.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,N.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(ne,C,Y){(0,N.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let Ae;J.FontLoader=Ae,J.FontLoader=Ae=class extends He{constructor(ne){super(ne),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let ne=!1;if("undefined"==typeof navigator)ne=!0;else{const C=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==C?void 0:C[1])>=14&&(ne=!0)}return(0,N.shadow)(this,"isSyncFontLoadingSupported",ne)}_queueLoadingCallback(ne){const Y=this.loadingContext,V={id:"pdfjs-font-loading-"+Y.nextRequestId++,done:!1,complete:function C(){for((0,N.assert)(!V.done,"completeRequest() cannot be called twice."),V.done=!0;Y.requests.length>0&&Y.requests[0].done;){const z=Y.requests.shift();setTimeout(z.callback,0)}},callback:ne};return Y.requests.push(V),V}get _loadTestFont(){return(0,N.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(ne,C,Y){function V(_e,Te){return _e.charCodeAt(Te)<<24|_e.charCodeAt(Te+1)<<16|_e.charCodeAt(Te+2)<<8|255&_e.charCodeAt(Te+3)}function z(_e,Te,Oe,Pe){return _e.substring(0,Te)+Pe+_e.substring(Te+Oe)}let L,A;const S=this._document.createElement("canvas");S.width=1,S.height=1;const b=S.getContext("2d");let P=0;const F=`lt${Date.now()}${this.loadTestFontId++}`;let U=this._loadTestFont;U=z(U,976,F.length,F);const G=1482184792;let j=V(U,16);for(L=0,A=F.length-3;L<A;L+=4)j=j-G+V(F,L)|0;L<F.length&&(j=j-G+V(F+"XXX",L)|0),U=z(U,16,4,(0,N.string32)(j));const $=`url(data:font/opentype;base64,${btoa(U)});`;this.insertRule(`@font-face {font-family:"${F}";src:${$}}`);const ie=[];for(const _e of C)ie.push(_e.loadedName);ie.push(F);const ae=this._document.createElement("div");ae.style.visibility="hidden",ae.style.width=ae.style.height="10px",ae.style.position="absolute",ae.style.top=ae.style.left="0px";for(const _e of ie){const Te=this._document.createElement("span");Te.textContent="Hi",Te.style.fontFamily=_e,ae.appendChild(Te)}this._document.body.appendChild(ae),function W(_e,Te){if(P++,P>30)return(0,N.warn)("Load test font never loaded."),void Te();b.font="30px "+_e,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0?Te():setTimeout(W.bind(null,_e,Te))}(F,()=>{ae.remove(),Y.complete()})}},J.FontFaceObject=class be{constructor(ne,{isEvalSupported:C=!0,disableFontFace:Y=!1,ignoreErrors:V=!1,onUnsupportedFeature:z,fontRegistry:L=null}){this.compiledGlyphs=Object.create(null);for(const A in ne)this[A]=ne[A];this.isEvalSupported=!1!==C,this.disableFontFace=!0===Y,this.ignoreErrors=!0===V,this._onUnsupportedFeature=z,this.fontRegistry=L}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let ne;if(this.cssFontInfo){const C={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(C.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ne=new FontFace(this.cssFontInfo.fontFamily,this.data,C)}else ne=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),ne}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const ne=(0,N.bytesToString)(this.data),C=`url(data:${this.mimetype};base64,${btoa(ne)});`;let Y;if(this.cssFontInfo){let V=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(V+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),Y=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${V}src:${C}}`}else Y=`@font-face {font-family:"${this.loadedName}";src:${C}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,C),Y}getPathGenerator(ne,C){if(void 0!==this.compiledGlyphs[C])return this.compiledGlyphs[C];let Y;try{Y=ne.get(this.loadedName+"_path_"+C)}catch(V){if(!this.ignoreErrors)throw V;return this._onUnsupportedFeature({featureId:N.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,N.warn)(`getPathGenerator - ignoring character: "${V}".`),this.compiledGlyphs[C]=function(z,L){}}if(this.isEvalSupported&&N.FeatureTest.isEvalSupported){const V=[];for(const z of Y){const L=void 0!==z.args?z.args.join(","):"";V.push("c.",z.cmd,"(",L,");\n")}return this.compiledGlyphs[C]=new Function("c","size",V.join(""))}return this.compiledGlyphs[C]=function(V,z){for(const L of Y)"scale"===L.cmd&&(L.args=[z,-z]),V[L.cmd].apply(V,L.args)}}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.AnnotationStorage=void 0;var N=Re(9),He=Re(1);J.AnnotationStorage=class Ae{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(ge,ne){const C=this._storage.get(ge);return void 0===C?ne:Object.assign(ne,C)}getRawValue(ge){return this._storage.get(ge)}setValue(ge,ne){const C=this._storage.get(ge);let Y=!1;if(void 0!==C)for(const[V,z]of Object.entries(ne))C[V]!==z&&(Y=!0,C[V]=z);else Y=!0,this._storage.set(ge,ne);Y&&this._setModified()}getAll(){return this._storage.size>0?(0,He.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const ge=new N.MurmurHash3_64;for(const[ne,C]of this._storage)ge.update(`${ne}:${JSON.stringify(C)}`);return ge.hexdigest()}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.MurmurHash3_64=void 0;var N=Re(1);const He=3285377520,Ae=4294901760,be=65535;J.MurmurHash3_64=class ge{constructor(C){this.h1=C?4294967295&C:He,this.h2=C?4294967295&C:He}update(C){let Y,V;if("string"==typeof C){Y=new Uint8Array(2*C.length),V=0;for(let G=0,j=C.length;G<j;G++){const $=C.charCodeAt(G);$<=255?Y[V++]=$:(Y[V++]=$>>>8,Y[V++]=255&$)}}else{if(!(0,N.isArrayBuffer)(C))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");Y=C.slice(),V=Y.byteLength}const z=V>>2,L=V-4*z,A=new Uint32Array(Y.buffer,0,z);let S=0,b=0,P=this.h1,W=this.h2;const F=3432918353,U=461845907,y=F&be,x=U&be;for(let G=0;G<z;G++)1&G?(S=A[G],S=S*F&Ae|S*y&be,S=S<<15|S>>>17,S=S*U&Ae|S*x&be,P^=S,P=P<<13|P>>>19,P=5*P+3864292196):(b=A[G],b=b*F&Ae|b*y&be,b=b<<15|b>>>17,b=b*U&Ae|b*x&be,W^=b,W=W<<13|W>>>19,W=5*W+3864292196);switch(S=0,L){case 3:S^=Y[4*z+2]<<16;case 2:S^=Y[4*z+1]<<8;case 1:S^=Y[4*z],S=S*F&Ae|S*y&be,S=S<<15|S>>>17,S=S*U&Ae|S*x&be,1&z?P^=S:W^=S}this.h1=P,this.h2=W}hexdigest(){let C=this.h1,Y=this.h2;C^=Y>>>1,C=3981806797*C&Ae|36045*C&be,Y=4283543511*Y&Ae|(2950163797*(Y<<16|C>>>16)&Ae)>>>16,C^=Y>>>1,C=444984403*C&Ae|60499*C&be,Y=3301882366*Y&Ae|(3120437893*(Y<<16|C>>>16)&Ae)>>>16,C^=Y>>>1;const V=(C>>>0).toString(16),z=(Y>>>0).toString(16);return V.padStart(8,"0")+z.padStart(8,"0")}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.CanvasGraphics=void 0;var N=Re(1),He=Re(11),Ae=Re(12),be=Re(3),ge=Re(5);const Y=4096,S=16;function W(Q){if(Q._transformStack&&(Q._transformStack=[]),!Q.mozCurrentTransform){Q._originalSave=Q.save,Q._originalRestore=Q.restore,Q._originalRotate=Q.rotate,Q._originalScale=Q.scale,Q._originalTranslate=Q.translate,Q._originalTransform=Q.transform,Q._originalSetTransform=Q.setTransform,Q._originalResetTransform=Q.resetTransform,Q._transformMatrix=Q._transformMatrix||[1,0,0,1,0,0],Q._transformStack=[];try{const E=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Q),"lineWidth");Q._setLineWidth=E.set,Q._getLineWidth=E.get,Object.defineProperty(Q,"lineWidth",{set:function(v){this._setLineWidth(1.000001*v)},get:function(){return this._getLineWidth()}})}catch(E){}Object.defineProperty(Q,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(Q,"mozCurrentTransformInverse",{get:function(){const[R,v,T,I,H,k]=this._transformMatrix,X=R*I-v*T,fe=v*T-R*I;return[I/X,v/fe,T/fe,R/X,(I*H-T*k)/fe,(v*H-R*k)/X]}}),Q.save=function(){const R=this._transformMatrix;this._transformStack.push(R),this._transformMatrix=R.slice(0,6),this._originalSave()},Q.restore=function(){0===this._transformStack.length&&(0,N.warn)("Tried to restore a ctx when the stack was already empty.");const R=this._transformStack.pop();R&&(this._transformMatrix=R,this._originalRestore())},Q.translate=function(R,v){const T=this._transformMatrix;T[4]=T[0]*R+T[2]*v+T[4],T[5]=T[1]*R+T[3]*v+T[5],this._originalTranslate(R,v)},Q.scale=function(R,v){const T=this._transformMatrix;T[0]*=R,T[1]*=R,T[2]*=v,T[3]*=v,this._originalScale(R,v)},Q.transform=function(R,v,T,I,H,k){const X=this._transformMatrix;this._transformMatrix=[X[0]*R+X[2]*v,X[1]*R+X[3]*v,X[0]*T+X[2]*I,X[1]*T+X[3]*I,X[0]*H+X[2]*k+X[4],X[1]*H+X[3]*k+X[5]],Q._originalTransform(R,v,T,I,H,k)},Q.setTransform=function(R,v,T,I,H,k){this._transformMatrix=[R,v,T,I,H,k],Q._originalSetTransform(R,v,T,I,H,k)},Q.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],Q._originalResetTransform()},Q.rotate=function(R){const v=Math.cos(R),T=Math.sin(R),I=this._transformMatrix;this._transformMatrix=[I[0]*v+I[2]*T,I[1]*v+I[3]*T,I[0]*-T+I[2]*v,I[1]*-T+I[3]*v,I[4],I[5]],this._originalRotate(R)}}}class F{constructor(E){this.canvasFactory=E,this.cache=Object.create(null)}getCanvas(E,R,v,T){let I;return void 0!==this.cache[E]?(I=this.cache[E],this.canvasFactory.reset(I,R,v),I.context.setTransform(1,0,0,1,0,0)):(I=this.canvasFactory.create(R,v),this.cache[E]=I),T&&W(I.context),I}delete(E){delete this.cache[E]}clear(){for(const E in this.cache)this.canvasFactory.destroy(this.cache[E]),delete this.cache[E]}}function U(Q,E,R,v,T,I,H,k,X,fe){const[Se,Me,Ee,Le,je,ft]=Q.mozCurrentTransform;if(0===Me&&0===Ee){const Qe=Math.round(H*Se+je),he=Math.round(k*Le+ft),yt=Math.abs(Math.round((H+X)*Se+je)-Qe)||1,vt=Math.abs(Math.round((k+fe)*Le+ft)-he)||1;return Q.setTransform(Math.sign(Se),0,0,Math.sign(Le),Qe,he),Q.drawImage(E,R,v,T,I,0,0,yt,vt),Q.setTransform(Se,Me,Ee,Le,je,ft),[yt,vt]}if(0===Se&&0===Le){const Qe=Math.round(k*Ee+je),he=Math.round(H*Me+ft),yt=Math.abs(Math.round((k+fe)*Ee+je)-Qe)||1,vt=Math.abs(Math.round((H+X)*Me+ft)-he)||1;return Q.setTransform(0,Math.sign(Me),Math.sign(Ee),0,Qe,he),Q.drawImage(E,R,v,T,I,0,0,vt,yt),Q.setTransform(Se,Me,Ee,Le,je,ft),[vt,yt]}return Q.drawImage(E,R,v,T,I,H,k,X,fe),[Math.hypot(Se,Me)*X,Math.hypot(Ee,Le)*fe]}class x{constructor(E,R){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=N.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=N.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=N.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,E,R])}clone(){const E=Object.create(this);return E.clipBox=this.clipBox.slice(),E}setCurrentPoint(E,R){this.x=E,this.y=R}updatePathMinMax(E,R,v){[R,v]=N.Util.applyTransform([R,v],E),this.minX=Math.min(this.minX,R),this.minY=Math.min(this.minY,v),this.maxX=Math.max(this.maxX,R),this.maxY=Math.max(this.maxY,v)}updateRectMinMax(E,R){const v=N.Util.applyTransform(R,E),T=N.Util.applyTransform(R.slice(2),E);this.minX=Math.min(this.minX,v[0],T[0]),this.minY=Math.min(this.minY,v[1],T[1]),this.maxX=Math.max(this.maxX,v[0],T[0]),this.maxY=Math.max(this.maxY,v[1],T[1])}updateScalingPathMinMax(E,R){N.Util.scaleMinMax(E,R),this.minX=Math.min(this.minX,R[0]),this.maxX=Math.max(this.maxX,R[1]),this.minY=Math.min(this.minY,R[2]),this.maxY=Math.max(this.maxY,R[3])}updateCurvePathMinMax(E,R,v,T,I,H,k,X,fe,Se){const Me=N.Util.bezierBoundingBox(R,v,T,I,H,k,X,fe);if(Se)return Se[0]=Math.min(Se[0],Me[0],Me[2]),Se[1]=Math.max(Se[1],Me[0],Me[2]),Se[2]=Math.min(Se[2],Me[1],Me[3]),void(Se[3]=Math.max(Se[3],Me[1],Me[3]));this.updateRectMinMax(E,Me)}getPathBoundingBox(E=He.PathType.FILL,R=null){const v=[this.minX,this.minY,this.maxX,this.maxY];if(E===He.PathType.STROKE){R||(0,N.unreachable)("Stroke bounding box must include transform.");const T=N.Util.singularValueDecompose2dScale(R),I=T[0]*this.lineWidth/2,H=T[1]*this.lineWidth/2;v[0]-=I,v[1]-=H,v[2]+=I,v[3]+=H}return v}updateClipFromPath(){const E=N.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(E||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(E){this.clipBox=E,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(E=He.PathType.FILL,R=null){return N.Util.intersect(this.clipBox,this.getPathBoundingBox(E,R))}}function G(Q,E,R=null){if("undefined"!=typeof ImageData&&E instanceof ImageData)return void Q.putImageData(E,0,0);const v=E.height,T=E.width,I=v%S,H=(v-I)/S,k=0===I?H:H+1,X=Q.createImageData(T,S);let Se,fe=0;const Me=E.data,Ee=X.data;let Le,je,ft,Pt,$e,Ze,Qe,K;if(R)switch(R.length){case 1:$e=R[0],Ze=R[0],Qe=R[0],K=R[0];break;case 4:$e=R[0],Ze=R[1],Qe=R[2],K=R[3]}if(E.kind===N.ImageKind.GRAYSCALE_1BPP){const he=Me.byteLength,Fe=new Uint32Array(Ee.buffer,0,Ee.byteLength>>2),yt=Fe.length,gt=T+7>>3;let vt=4294967295,Ot=N.FeatureTest.isLittleEndian?4278190080:255;for(K&&255===K[0]&&0===K[255]&&([vt,Ot]=[Ot,vt]),Le=0;Le<k;Le++){for(ft=Le<H?S:I,Se=0,je=0;je<ft;je++){const Rt=he-fe;let Cn=0;const Nn=Rt>gt?T:8*Rt-7,fi=-8&Nn;let Ye=0,oe=0;for(;Cn<fi;Cn+=8)oe=Me[fe++],Fe[Se++]=128&oe?vt:Ot,Fe[Se++]=64&oe?vt:Ot,Fe[Se++]=32&oe?vt:Ot,Fe[Se++]=16&oe?vt:Ot,Fe[Se++]=8&oe?vt:Ot,Fe[Se++]=4&oe?vt:Ot,Fe[Se++]=2&oe?vt:Ot,Fe[Se++]=1&oe?vt:Ot;for(;Cn<Nn;Cn++)0===Ye&&(oe=Me[fe++],Ye=128),Fe[Se++]=oe&Ye?vt:Ot,Ye>>=1}for(;Se<yt;)Fe[Se++]=0;Q.putImageData(X,0,Le*S)}}else if(E.kind===N.ImageKind.RGBA_32BPP){const he=!!($e||Ze||Qe);for(je=0,Pt=T*S*4,Le=0;Le<H;Le++){if(Ee.set(Me.subarray(fe,fe+Pt)),fe+=Pt,he)for(let Fe=0;Fe<Pt;Fe+=4)$e&&(Ee[Fe+0]=$e[Ee[Fe+0]]),Ze&&(Ee[Fe+1]=Ze[Ee[Fe+1]]),Qe&&(Ee[Fe+2]=Qe[Ee[Fe+2]]);Q.putImageData(X,0,je),je+=S}if(Le<k){if(Pt=T*I*4,Ee.set(Me.subarray(fe,fe+Pt)),he)for(let Fe=0;Fe<Pt;Fe+=4)$e&&(Ee[Fe+0]=$e[Ee[Fe+0]]),Ze&&(Ee[Fe+1]=Ze[Ee[Fe+1]]),Qe&&(Ee[Fe+2]=Qe[Ee[Fe+2]]);Q.putImageData(X,0,je)}}else{if(E.kind!==N.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${E.kind}`);{const he=!!($e||Ze||Qe);for(ft=S,Pt=T*ft,Le=0;Le<k;Le++){for(Le>=H&&(ft=I,Pt=T*ft),Se=0,je=Pt;je--;)Ee[Se++]=Me[fe++],Ee[Se++]=Me[fe++],Ee[Se++]=Me[fe++],Ee[Se++]=255;if(he)for(let Fe=0;Fe<Se;Fe+=4)$e&&(Ee[Fe+0]=$e[Ee[Fe+0]]),Ze&&(Ee[Fe+1]=Ze[Ee[Fe+1]]),Qe&&(Ee[Fe+2]=Qe[Ee[Fe+2]]);Q.putImageData(X,0,Le*S)}}}}function j(Q,E){if(E.bitmap)return void Q.drawImage(E.bitmap,0,0);const R=E.height,v=E.width,T=R%S,I=(R-T)/S,H=0===T?I:I+1,k=Q.createImageData(v,S);let X=0;const fe=E.data,Se=k.data;for(let Me=0;Me<H;Me++){const Ee=Me<I?S:T;({srcPos:X}=(0,Ae.applyMaskImageData)({src:fe,srcPos:X,dest:Se,width:v,height:Ee})),Q.putImageData(k,0,Me*S)}}function $(Q,E){const R=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let v=0,T=R.length;v<T;v++){const I=R[v];void 0!==Q[I]&&(E[I]=Q[I])}void 0!==Q.setLineDash&&(E.setLineDash(Q.getLineDash()),E.lineDashOffset=Q.lineDashOffset)}function te(Q,E){Q.strokeStyle=Q.fillStyle=E||"#000000",Q.fillRule="nonzero",Q.globalAlpha=1,Q.lineWidth=1,Q.lineCap="butt",Q.lineJoin="miter",Q.miterLimit=10,Q.globalCompositeOperation="source-over",Q.font="10px sans-serif",void 0!==Q.setLineDash&&(Q.setLineDash([]),Q.lineDashOffset=0)}function ie(Q,E,R,v){const T=Q.length;for(let I=3;I<T;I+=4){const H=Q[I];if(0===H)Q[I-3]=E,Q[I-2]=R,Q[I-1]=v;else if(H<255){const k=255-H;Q[I-3]=Q[I-3]*H+E*k>>8,Q[I-2]=Q[I-2]*H+R*k>>8,Q[I-1]=Q[I-1]*H+v*k>>8}}}function ae(Q,E,R){const v=Q.length;for(let I=3;I<v;I+=4)E[I]=E[I]*(R?R[Q[I]]:Q[I])*.00392156862745098|0}function _e(Q,E,R){const v=Q.length;for(let T=3;T<v;T+=4){const I=77*Q[T-3]+152*Q[T-2]+28*Q[T-1];E[T]=R?E[T]*R[I>>8]>>8:E[T]*I>>16}}function Pe(Q,E){const R=N.Util.singularValueDecompose2dScale(Q);R[0]=Math.fround(R[0]),R[1]=Math.fround(R[1]);const v=Math.fround((globalThis.devicePixelRatio||1)*ge.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==E?E:R[0]<=v||R[1]<=v}const ye=["butt","round","square"],Ie=["miter","round","bevel"],Be={},we={};class De{constructor(E,R,v,T,I,H,k,X){this.ctx=E,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=R,this.objs=v,this.canvasFactory=T,this.imageLayer=I,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=H,this.cachedCanvases=new F(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=k,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==X?void 0:X.background)||null,this.foregroundColor=(null==X?void 0:X.foreground)||null,E&&W(E),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(E,R=null){return"string"==typeof E?E.startsWith("g_")?this.commonObjs.get(E):this.objs.get(E):R}beginDrawing({transform:E,viewport:R,transparency:v=!1,background:T=null}){const I=this.ctx.canvas.width,H=this.ctx.canvas.height,k=T||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const X=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const fe=this.backgroundColor=this.ctx.fillStyle;let Se=!0,Me=k;if(this.ctx.fillStyle=k,Me=this.ctx.fillStyle,Se="string"==typeof Me&&/^#[0-9A-Fa-f]{6}$/.test(Me),"#000000"===X&&"#ffffff"===fe||X===fe||!Se)this.foregroundColor=this.backgroundColor=null;else{const Ee=parseInt(Me.slice(1),16),je=(Ee&&65280)>>8,ft=Ee&&255,Pt=Ze=>(Ze/=255)<=.03928?Ze/12.92:((Ze+.055)/1.055)**2.4,$e=Math.round(.2126*Pt((Ee&&16711680)>>16)+.7152*Pt(je)+.0722*Pt(ft));this.selectColor=(Ze,Qe,K)=>{const he=.2126*Pt(Ze)+.7152*Pt(Qe)+.0722*Pt(K);return Math.round(he)===$e?fe:X}}}if(this.ctx.fillStyle=this.backgroundColor||k,this.ctx.fillRect(0,0,I,H),this.ctx.restore(),v){const X=this.cachedCanvases.getCanvas("transparent",I,H,!0);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),te(this.ctx,this.foregroundColor),E&&(this.ctx.transform.apply(this.ctx,E),this.outputScaleX=E[0],this.outputScaleY=E[0]),this.ctx.transform.apply(this.ctx,R.transform),this.viewportScale=R.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(E,R,v,T){const I=E.argsArray,H=E.fnArray;let k=R||0;const X=I.length;if(X===k)return k;const fe=X-k>10&&"function"==typeof v,Se=fe?Date.now()+15:0;let Me=0;const Ee=this.commonObjs,Le=this.objs;let je;for(;;){if(void 0!==T&&k===T.nextBreakPoint)return T.breakIt(k,v),k;if(je=H[k],je!==N.OPS.dependency)this[je].apply(this,I[k]);else for(const ft of I[k]){const Pt=ft.startsWith("g_")?Ee:Le;if(!Pt.has(ft))return Pt.get(ft,v),k}if(k++,k===X)return k;if(fe&&++Me>10){if(Date.now()>Se)return v(),k;Me=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const E of this._cachedBitmapsMap.values()){for(const R of E.values())"undefined"!=typeof HTMLCanvasElement&&R instanceof HTMLCanvasElement&&(R.width=R.height=0);E.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(E,R){const v=E.width,T=E.height;let Se,Me,I=Math.max(Math.hypot(R[0],R[1]),1),H=Math.max(Math.hypot(R[2],R[3]),1),k=v,X=T,fe="prescale1";for(;I>2&&k>1||H>2&&X>1;){let Ee=k,Le=X;I>2&&k>1&&(Ee=Math.ceil(k/2),I/=k/Ee),H>2&&X>1&&(Le=Math.ceil(X/2),H/=X/Le),Se=this.cachedCanvases.getCanvas(fe,Ee,Le,!1),Me=Se.context,Me.clearRect(0,0,Ee,Le),Me.drawImage(E,0,0,k,X,0,0,Ee,Le),E=Se.canvas,k=Ee,X=Le,fe="prescale1"===fe?"prescale2":"prescale1"}return{img:E,paintWidth:k,paintHeight:X}}_createMaskCanvas(E){const R=this.ctx,{width:v,height:T}=E,I=this.current.fillColor,H=this.current.patternFill,k=R.mozCurrentTransform;let X,fe,Se,Me;if((E.bitmap||E.data)&&E.count>1){const yt=E.bitmap||E.data.buffer,gt=k.slice(0,4);fe=JSON.stringify(H?gt:[gt,I]),X=this._cachedBitmapsMap.get(yt),X||(X=new Map,this._cachedBitmapsMap.set(yt,X));const vt=X.get(fe);if(vt&&!H)return{canvas:vt,offsetX:Math.round(Math.min(k[0],k[2])+k[4]),offsetY:Math.round(Math.min(k[1],k[3])+k[5])};Se=vt}Se||(Me=this.cachedCanvases.getCanvas("maskCanvas",v,T,!1),j(Me.context,E));let Ee=N.Util.transform(k,[1/v,0,0,-1/T,0,0]);Ee=N.Util.transform(Ee,[1,0,0,1,0,-T]);const Le=N.Util.applyTransform([0,0],Ee),je=N.Util.applyTransform([v,T],Ee),ft=N.Util.normalizeRect([Le[0],Le[1],je[0],je[1]]),Pt=Math.round(ft[2]-ft[0])||1,$e=Math.round(ft[3]-ft[1])||1,Ze=this.cachedCanvases.getCanvas("fillCanvas",Pt,$e,!0),Qe=Ze.context,K=Math.min(Le[0],je[0]),he=Math.min(Le[1],je[1]);Qe.translate(-K,-he),Qe.transform.apply(Qe,Ee),Se||(Se=this._scaleImage(Me.canvas,Qe.mozCurrentTransformInverse),Se=Se.img,X&&H&&X.set(fe,Se)),Qe.imageSmoothingEnabled=Pe(Qe.mozCurrentTransform,E.interpolate),U(Qe,Se,0,0,Se.width,Se.height,0,0,v,T),Qe.globalCompositeOperation="source-in";const Fe=N.Util.transform(Qe.mozCurrentTransformInverse,[1,0,0,1,-K,-he]);return Qe.fillStyle=H?I.getPattern(R,this,Fe,He.PathType.FILL):I,Qe.fillRect(0,0,v,T),X&&!H&&(this.cachedCanvases.delete("fillCanvas"),X.set(fe,Ze.canvas)),{canvas:Ze.canvas,offsetX:Math.round(K),offsetY:Math.round(he)}}setLineWidth(E){E!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=E,this.ctx.lineWidth=E}setLineCap(E){this.ctx.lineCap=ye[E]}setLineJoin(E){this.ctx.lineJoin=Ie[E]}setMiterLimit(E){this.ctx.miterLimit=E}setDash(E,R){const v=this.ctx;void 0!==v.setLineDash&&(v.setLineDash(E),v.lineDashOffset=R)}setRenderingIntent(E){}setFlatness(E){}setGState(E){for(let R=0,v=E.length;R<v;R++){const T=E[R],H=T[1];switch(T[0]){case"LW":this.setLineWidth(H);break;case"LC":this.setLineCap(H);break;case"LJ":this.setLineJoin(H);break;case"ML":this.setMiterLimit(H);break;case"D":this.setDash(H[0],H[1]);break;case"RI":this.setRenderingIntent(H);break;case"FL":this.setFlatness(H);break;case"Font":this.setFont(H[0],H[1]);break;case"CA":this.current.strokeAlpha=T[1];break;case"ca":this.current.fillAlpha=T[1],this.ctx.globalAlpha=T[1];break;case"BM":this.ctx.globalCompositeOperation=H;break;case"SMask":this.current.activeSMask=H?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=H}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const E=this.inSMaskMode;this.current.activeSMask&&!E?this.beginSMaskMode():!this.current.activeSMask&&E&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const T=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=T.context;const I=this.ctx;I.setTransform.apply(I,this.suspendedCtx.mozCurrentTransform),$(this.suspendedCtx,I),function P(Q,E){if(Q._removeMirroring)throw new Error("Context is already forwarding operations.");Q.__originalSave=Q.save,Q.__originalRestore=Q.restore,Q.__originalRotate=Q.rotate,Q.__originalScale=Q.scale,Q.__originalTranslate=Q.translate,Q.__originalTransform=Q.transform,Q.__originalSetTransform=Q.setTransform,Q.__originalResetTransform=Q.resetTransform,Q.__originalClip=Q.clip,Q.__originalMoveTo=Q.moveTo,Q.__originalLineTo=Q.lineTo,Q.__originalBezierCurveTo=Q.bezierCurveTo,Q.__originalRect=Q.rect,Q.__originalClosePath=Q.closePath,Q.__originalBeginPath=Q.beginPath,Q._removeMirroring=()=>{Q.save=Q.__originalSave,Q.restore=Q.__originalRestore,Q.rotate=Q.__originalRotate,Q.scale=Q.__originalScale,Q.translate=Q.__originalTranslate,Q.transform=Q.__originalTransform,Q.setTransform=Q.__originalSetTransform,Q.resetTransform=Q.__originalResetTransform,Q.clip=Q.__originalClip,Q.moveTo=Q.__originalMoveTo,Q.lineTo=Q.__originalLineTo,Q.bezierCurveTo=Q.__originalBezierCurveTo,Q.rect=Q.__originalRect,Q.closePath=Q.__originalClosePath,Q.beginPath=Q.__originalBeginPath,delete Q._removeMirroring},Q.save=function(){E.save(),this.__originalSave()},Q.restore=function(){E.restore(),this.__originalRestore()},Q.translate=function(v,T){E.translate(v,T),this.__originalTranslate(v,T)},Q.scale=function(v,T){E.scale(v,T),this.__originalScale(v,T)},Q.transform=function(v,T,I,H,k,X){E.transform(v,T,I,H,k,X),this.__originalTransform(v,T,I,H,k,X)},Q.setTransform=function(v,T,I,H,k,X){E.setTransform(v,T,I,H,k,X),this.__originalSetTransform(v,T,I,H,k,X)},Q.resetTransform=function(){E.resetTransform(),this.__originalResetTransform()},Q.rotate=function(v){E.rotate(v),this.__originalRotate(v)},Q.clip=function(v){E.clip(v),this.__originalClip(v)},Q.moveTo=function(R,v){E.moveTo(R,v),this.__originalMoveTo(R,v)},Q.lineTo=function(R,v){E.lineTo(R,v),this.__originalLineTo(R,v)},Q.bezierCurveTo=function(R,v,T,I,H,k){E.bezierCurveTo(R,v,T,I,H,k),this.__originalBezierCurveTo(R,v,T,I,H,k)},Q.rect=function(R,v,T,I){E.rect(R,v,T,I),this.__originalRect(R,v,T,I)},Q.closePath=function(){E.closePath(),this.__originalClosePath()},Q.beginPath=function(){E.beginPath(),this.__originalBeginPath()}}(I,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(E){this.current.activeSMask&&(E?(E[0]=Math.floor(E[0]),E[1]=Math.floor(E[1]),E[2]=Math.ceil(E[2]),E[3]=Math.ceil(E[3])):E=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function Oe(Q,E,R,v){const T=v[0],I=v[1],H=v[2]-T,k=v[3]-I;0===H||0===k||(function Te(Q,E,R,v,T,I,H,k,X,fe,Se){const Me=!!I,Ee=Me?I[0]:0,Le=Me?I[1]:0,je=Me?I[2]:0;let ft;ft="Luminosity"===T?_e:ae;const $e=Math.min(v,Math.ceil(1048576/R));for(let Ze=0;Ze<v;Ze+=$e){const Qe=Math.min($e,v-Ze),K=Q.getImageData(k-fe,Ze+(X-Se),R,Qe),he=E.getImageData(k,Ze+X,R,Qe);Me&&ie(K.data,Ee,Le,je),ft(K.data,he.data,H),E.putImageData(he,k,Ze+X)}}(E.context,R,H,k,E.subtype,E.backdrop,E.transferMap,T,I,E.offsetX,E.offsetY),Q.save(),Q.globalAlpha=1,Q.globalCompositeOperation="source-over",Q.setTransform(1,0,0,1,0,0),Q.drawImage(R.canvas,0,0),Q.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,E),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?($(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const E=this.current;this.stateStack.push(E),this.current=E.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),$(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(E,R,v,T,I,H){this.ctx.transform(E,R,v,T,I,H),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(E,R,v){const T=this.ctx,I=this.current;let X,fe,H=I.x,k=I.y;const Se=T.mozCurrentTransform,Me=0===Se[0]&&0===Se[3]||0===Se[1]&&0===Se[2],Ee=Me?v.slice(0):null;for(let Le=0,je=0,ft=E.length;Le<ft;Le++)switch(0|E[Le]){case N.OPS.rectangle:H=R[je++],k=R[je++];const Pt=R[je++],$e=R[je++],Ze=H+Pt,Qe=k+$e;T.moveTo(H,k),0===Pt||0===$e?T.lineTo(Ze,Qe):(T.lineTo(Ze,k),T.lineTo(Ze,Qe),T.lineTo(H,Qe)),Me||I.updateRectMinMax(Se,[H,k,Ze,Qe]),T.closePath();break;case N.OPS.moveTo:H=R[je++],k=R[je++],T.moveTo(H,k),Me||I.updatePathMinMax(Se,H,k);break;case N.OPS.lineTo:H=R[je++],k=R[je++],T.lineTo(H,k),Me||I.updatePathMinMax(Se,H,k);break;case N.OPS.curveTo:X=H,fe=k,H=R[je+4],k=R[je+5],T.bezierCurveTo(R[je],R[je+1],R[je+2],R[je+3],H,k),I.updateCurvePathMinMax(Se,X,fe,R[je],R[je+1],R[je+2],R[je+3],H,k,Ee),je+=6;break;case N.OPS.curveTo2:X=H,fe=k,T.bezierCurveTo(H,k,R[je],R[je+1],R[je+2],R[je+3]),I.updateCurvePathMinMax(Se,X,fe,H,k,R[je],R[je+1],R[je+2],R[je+3],Ee),H=R[je+2],k=R[je+3],je+=4;break;case N.OPS.curveTo3:X=H,fe=k,H=R[je+2],k=R[je+3],T.bezierCurveTo(R[je],R[je+1],H,k,H,k),I.updateCurvePathMinMax(Se,X,fe,R[je],R[je+1],H,k,H,k,Ee),je+=4;break;case N.OPS.closePath:T.closePath()}Me&&I.updateScalingPathMinMax(Se,Ee),I.setCurrentPoint(H,k)}closePath(){this.ctx.closePath()}stroke(E){E=void 0===E||E;const R=this.ctx,v=this.current.strokeColor;R.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof v&&(null==v?void 0:v.getPattern)?(R.save(),R.strokeStyle=v.getPattern(R,this,R.mozCurrentTransformInverse,He.PathType.STROKE),this.rescaleAndStroke(!1),R.restore()):this.rescaleAndStroke(!0)),E&&this.consumePath(this.current.getClippedPathBoundingBox()),R.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(E){E=void 0===E||E;const R=this.ctx,v=this.current.fillColor;let I=!1;this.current.patternFill&&(R.save(),R.fillStyle=v.getPattern(R,this,R.mozCurrentTransformInverse,He.PathType.FILL),I=!0);const H=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==H&&(this.pendingEOFill?(R.fill("evenodd"),this.pendingEOFill=!1):R.fill()),I&&R.restore(),E&&this.consumePath(H)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Be}eoClip(){this.pendingClip=we}beginText(){this.current.textMatrix=N.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const E=this.pendingTextPaths,R=this.ctx;if(void 0!==E){R.save(),R.beginPath();for(let v=0;v<E.length;v++){const T=E[v];R.setTransform.apply(R,T.transform),R.translate(T.x,T.y),T.addToPath(R,T.fontSize)}R.restore(),R.clip(),R.beginPath(),delete this.pendingTextPaths}else R.beginPath()}setCharSpacing(E){this.current.charSpacing=E}setWordSpacing(E){this.current.wordSpacing=E}setHScale(E){this.current.textHScale=E/100}setLeading(E){this.current.leading=-E}setFont(E,R){const v=this.commonObjs.get(E),T=this.current;if(!v)throw new Error(`Can't find font for ${E}`);if(T.fontMatrix=v.fontMatrix||N.FONT_IDENTITY_MATRIX,(0===T.fontMatrix[0]||0===T.fontMatrix[3])&&(0,N.warn)("Invalid font matrix for font "+E),R<0?(R=-R,T.fontDirection=-1):T.fontDirection=1,this.current.font=v,this.current.fontSize=R,v.isType3Font)return;let H="normal";v.black?H="900":v.bold&&(H="bold");const k=v.italic?"italic":"normal",X=`"${v.loadedName||"sans-serif"}", ${v.fallbackName}`;let fe=R;R<16?fe=16:R>100&&(fe=100),this.current.fontSizeScale=R/fe,this.ctx.font=`${k} ${H} ${fe}px ${X}`}setTextRenderingMode(E){this.current.textRenderingMode=E}setTextRise(E){this.current.textRise=E}moveText(E,R){this.current.x=this.current.lineX+=E,this.current.y=this.current.lineY+=R}setLeadingMoveText(E,R){this.setLeading(-R),this.moveText(E,R)}setTextMatrix(E,R,v,T,I,H){this.current.textMatrix=[E,R,v,T,I,H],this.current.textMatrixScale=Math.hypot(E,R),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(E,R,v,T){const I=this.ctx,H=this.current,k=H.font,X=H.textRenderingMode,fe=H.fontSize/H.fontSizeScale,Se=X&N.TextRenderingMode.FILL_STROKE_MASK,Me=!!(X&N.TextRenderingMode.ADD_TO_PATH_FLAG),Ee=H.patternFill&&!k.missingFile;let Le;(k.disableFontFace||Me||Ee)&&(Le=k.getPathGenerator(this.commonObjs,E)),k.disableFontFace||Ee?(I.save(),I.translate(R,v),I.beginPath(),Le(I,fe),T&&I.setTransform.apply(I,T),(Se===N.TextRenderingMode.FILL||Se===N.TextRenderingMode.FILL_STROKE)&&I.fill(),(Se===N.TextRenderingMode.STROKE||Se===N.TextRenderingMode.FILL_STROKE)&&I.stroke(),I.restore()):((Se===N.TextRenderingMode.FILL||Se===N.TextRenderingMode.FILL_STROKE)&&I.fillText(E,R,v),(Se===N.TextRenderingMode.STROKE||Se===N.TextRenderingMode.FILL_STROKE)&&I.strokeText(E,R,v)),Me&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:I.mozCurrentTransform,x:R,y:v,fontSize:fe,addToPath:Le})}get isFontSubpixelAAEnabled(){const{context:E}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);E.scale(1.5,1),E.fillText("I",0,10);const R=E.getImageData(0,0,10,10).data;let v=!1;for(let T=3;T<R.length;T+=4)if(R[T]>0&&R[T]<255){v=!0;break}return(0,N.shadow)(this,"isFontSubpixelAAEnabled",v)}showText(E){const R=this.current,v=R.font;if(v.isType3Font)return this.showType3Text(E);const T=R.fontSize;if(0===T)return;const I=this.ctx,H=R.fontSizeScale,k=R.charSpacing,X=R.wordSpacing,fe=R.fontDirection,Se=R.textHScale*fe,Me=E.length,Ee=v.vertical,Le=Ee?1:-1,je=v.defaultVMetrics,ft=T*R.fontMatrix[0],Pt=R.textRenderingMode===N.TextRenderingMode.FILL&&!v.disableFontFace&&!R.patternFill;let $e;if(I.save(),I.transform.apply(I,R.textMatrix),I.translate(R.x,R.y+R.textRise),I.scale(Se,fe>0?-1:1),R.patternFill){I.save();const Fe=R.fillColor.getPattern(I,this,I.mozCurrentTransformInverse,He.PathType.FILL);$e=I.mozCurrentTransform,I.restore(),I.fillStyle=Fe}let Ze=R.lineWidth;const Qe=R.textMatrixScale;if(0===Qe||0===Ze){const Fe=R.textRenderingMode&N.TextRenderingMode.FILL_STROKE_MASK;(Fe===N.TextRenderingMode.STROKE||Fe===N.TextRenderingMode.FILL_STROKE)&&(Ze=this.getSinglePixelWidth())}else Ze/=Qe;1!==H&&(I.scale(H,H),Ze/=H),I.lineWidth=Ze;let he,K=0;for(he=0;he<Me;++he){const Fe=E[he];if("number"==typeof Fe){K+=Le*Fe*T/1e3;continue}let yt=!1;const gt=(Fe.isSpace?X:0)+k,vt=Fe.fontChar,Ot=Fe.accent;let Rt,Cn,fi,Nn=Fe.width;if(Ee){const Ye=Fe.vmetric||je,oe=-(Fe.vmetric?Ye[1]:.5*Nn)*ft;Nn=Ye?-Ye[0]:Nn,Rt=oe/H,Cn=(K+Ye[2]*ft)/H}else Rt=K/H,Cn=0;if(v.remeasure&&Nn>0){const Ye=1e3*I.measureText(vt).width/T*H;if(Nn<Ye&&this.isFontSubpixelAAEnabled){const oe=Nn/Ye;yt=!0,I.save(),I.scale(oe,1),Rt/=oe}else Nn!==Ye&&(Rt+=(Nn-Ye)/2e3*T/H)}this.contentVisible&&(Fe.isInFont||v.missingFile)&&(Pt&&!Ot?I.fillText(vt,Rt,Cn):(this.paintChar(vt,Rt,Cn,$e),Ot&&this.paintChar(Ot.fontChar,Rt+T*Ot.offset.x/H,Cn-T*Ot.offset.y/H,$e))),fi=Ee?Nn*ft-gt*fe:Nn*ft+gt*fe,K+=fi,yt&&I.restore()}Ee?R.y-=K:R.x+=K*Se,I.restore(),this.compose()}showType3Text(E){const R=this.ctx,v=this.current,T=v.font,I=v.fontSize,H=v.fontDirection,k=T.vertical?1:-1,X=v.charSpacing,fe=v.wordSpacing,Se=v.textHScale*H,Me=v.fontMatrix||N.FONT_IDENTITY_MATRIX,Ee=E.length;let je,ft,Pt,$e;if(v.textRenderingMode!==N.TextRenderingMode.INVISIBLE&&0!==I){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,R.save(),R.transform.apply(R,v.textMatrix),R.translate(v.x,v.y),R.scale(Se,H),je=0;je<Ee;++je){if(ft=E[je],"number"==typeof ft){$e=k*ft*I/1e3,this.ctx.translate($e,0),v.x+=$e*Se;continue}const Ze=(ft.isSpace?fe:0)+X,Qe=T.charProcOperatorList[ft.operatorListId];Qe?(this.contentVisible&&(this.processingType3=ft,this.save(),R.scale(I,I),R.transform.apply(R,Me),this.executeOperatorList(Qe),this.restore()),Pt=N.Util.applyTransform([ft.width,0],Me)[0]*I+Ze,R.translate(Pt,0),v.x+=Pt*Se):(0,N.warn)(`Type3 character "${ft.operatorListId}" is not available.`)}R.restore(),this.processingType3=null}}setCharWidth(E,R){}setCharWidthAndBounds(E,R,v,T,I,H){this.ctx.rect(v,T,I-v,H-T),this.ctx.clip(),this.endPath()}getColorN_Pattern(E){let R;if("TilingPattern"===E[0]){const v=E[1],T=this.baseTransform||this.ctx.mozCurrentTransform.slice();R=new He.TilingPattern(E,v,this.ctx,{createCanvasGraphics:H=>new De(H,this.commonObjs,this.objs,this.canvasFactory)},T)}else R=this._getPattern(E[1],E[2]);return R}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(E,R,v){var I;const T=(null==(I=this.selectColor)?void 0:I.call(this,E,R,v))||N.Util.makeHexColor(E,R,v);this.ctx.strokeStyle=T,this.current.strokeColor=T}setFillRGBColor(E,R,v){var I;const T=(null==(I=this.selectColor)?void 0:I.call(this,E,R,v))||N.Util.makeHexColor(E,R,v);this.ctx.fillStyle=T,this.current.fillColor=T,this.current.patternFill=!1}_getPattern(E,R=null){let v;return this.cachedPatterns.has(E)?v=this.cachedPatterns.get(E):(v=(0,He.getShadingPattern)(this.objs.get(E)),this.cachedPatterns.set(E,v)),R&&(v.matrix=R),v}shadingFill(E){if(!this.contentVisible)return;const R=this.ctx;this.save();const v=this._getPattern(E);R.fillStyle=v.getPattern(R,this,R.mozCurrentTransformInverse,He.PathType.SHADING);const T=R.mozCurrentTransformInverse;if(T){const I=R.canvas,H=I.width,k=I.height,X=N.Util.applyTransform([0,0],T),fe=N.Util.applyTransform([0,k],T),Se=N.Util.applyTransform([H,0],T),Me=N.Util.applyTransform([H,k],T),Ee=Math.min(X[0],fe[0],Se[0],Me[0]),Le=Math.min(X[1],fe[1],Se[1],Me[1]),je=Math.max(X[0],fe[0],Se[0],Me[0]),ft=Math.max(X[1],fe[1],Se[1],Me[1]);this.ctx.fillRect(Ee,Le,je-Ee,ft-Le)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,N.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,N.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(E,R){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(E)&&6===E.length&&this.transform.apply(this,E),this.baseTransform=this.ctx.mozCurrentTransform,R)&&(this.ctx.rect(R[0],R[1],R[2]-R[0],R[3]-R[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,R),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(E){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const R=this.ctx;E.isolated||(0,N.info)("TODO: Support non-isolated groups."),E.knockout&&(0,N.warn)("Knockout groups not supported.");const v=R.mozCurrentTransform;if(E.matrix&&R.transform.apply(R,E.matrix),!E.bbox)throw new Error("Bounding box is required.");let T=N.Util.getAxialAlignedBoundingBox(E.bbox,R.mozCurrentTransform);T=N.Util.intersect(T,[0,0,R.canvas.width,R.canvas.height])||[0,0,0,0];const H=Math.floor(T[0]),k=Math.floor(T[1]);let X=Math.max(Math.ceil(T[2])-H,1),fe=Math.max(Math.ceil(T[3])-k,1),Se=1,Me=1;X>Y&&(Se=X/Y,X=Y),fe>Y&&(Me=fe/Y,fe=Y),this.current.startNewPathAndClipBox([0,0,X,fe]);let Ee="groupAt"+this.groupLevel;E.smask&&(Ee+="_smask_"+this.smaskCounter++%2);const Le=this.cachedCanvases.getCanvas(Ee,X,fe,!0),je=Le.context;je.scale(1/Se,1/Me),je.translate(-H,-k),je.transform.apply(je,v),E.smask?this.smaskStack.push({canvas:Le.canvas,context:je,offsetX:H,offsetY:k,scaleX:Se,scaleY:Me,subtype:E.smask.subtype,backdrop:E.smask.backdrop,transferMap:E.smask.transferMap||null,startTransformInverse:null}):(R.setTransform(1,0,0,1,0,0),R.translate(H,k),R.scale(Se,Me),R.save()),$(R,je),this.ctx=je,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(R),this.groupLevel++}endGroup(E){if(!this.contentVisible)return;this.groupLevel--;const R=this.ctx,v=this.groupStack.pop();if(this.ctx=v,this.ctx.imageSmoothingEnabled=!1,E.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const T=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,T);const I=N.Util.getAxialAlignedBoundingBox([0,0,R.canvas.width,R.canvas.height],T);this.ctx.drawImage(R.canvas,0,0),this.ctx.restore(),this.compose(I)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(E,R,v,T,I){if(this.save(),Array.isArray(R)&&4===R.length){const H=R[2]-R[0],k=R[3]-R[1];if(I&&this.annotationCanvasMap){(v=v.slice())[4]-=R[0],v[5]-=R[1],(R=R.slice())[0]=R[1]=0,R[2]=H,R[3]=k;const[X,fe]=N.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:Se}=this,Me=Math.ceil(H*this.outputScaleX*Se),Ee=Math.ceil(k*this.outputScaleY*Se);this.annotationCanvas=this.canvasFactory.create(Me,Ee);const{canvas:Le,context:je}=this.annotationCanvas,ft=`var(--zoom-factor) * ${ge.PixelsPerInch.PDF_TO_CSS_UNITS}`;Le.style.width=`calc(${H}px * ${ft})`,Le.style.height=`calc(${k}px * ${ft})`,this.annotationCanvasMap.set(E,Le),this.annotationCanvas.savedCtx=this.ctx,this.ctx=je,this.ctx.setTransform(X,0,0,-fe,0,k*fe),W(this.ctx),te(this.ctx,this.foregroundColor)}else te(this.ctx,this.foregroundColor),this.ctx.rect(R[0],R[1],H,k),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,v),this.transform.apply(this,T)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(E){if(!this.contentVisible)return;const R=E.count;(E=this.getObject(E.data,E)).count=R;const v=this.ctx,T=this.processingType3;if(T&&(void 0===T.compiled&&(T.compiled=function y(Q){const{width:E,height:R}=Q;if(E>1e3||R>1e3)return null;const T=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),I=E+1;let k,X,fe,H=new Uint8Array(I*(R+1));const Se=E+7&-8;let Me=new Uint8Array(Se*R),Ee=0;for(const Qe of Q.data){let K=128;for(;K>0;)Me[Ee++]=Qe&K?0:255,K>>=1}let Le=0;for(Ee=0,0!==Me[Ee]&&(H[0]=1,++Le),X=1;X<E;X++)Me[Ee]!==Me[Ee+1]&&(H[X]=Me[Ee]?2:1,++Le),Ee++;for(0!==Me[Ee]&&(H[X]=2,++Le),k=1;k<R;k++){Ee=k*Se,fe=k*I,Me[Ee-Se]!==Me[Ee]&&(H[fe]=Me[Ee]?1:8,++Le);let Qe=(Me[Ee]?4:0)+(Me[Ee-Se]?8:0);for(X=1;X<E;X++)Qe=(Qe>>2)+(Me[Ee+1]?4:0)+(Me[Ee-Se+1]?8:0),T[Qe]&&(H[fe+X]=T[Qe],++Le),Ee++;if(Me[Ee-Se]!==Me[Ee]&&(H[fe+X]=Me[Ee]?2:4,++Le),Le>1e3)return null}for(Ee=Se*(R-1),fe=k*I,0!==Me[Ee]&&(H[fe]=8,++Le),X=1;X<E;X++)Me[Ee]!==Me[Ee+1]&&(H[fe+X]=Me[Ee]?4:8,++Le),Ee++;if(0!==Me[Ee]&&(H[fe+X]=4,++Le),Le>1e3)return null;const je=new Int32Array([0,I,-1,0,-I,0,0,0,1]);let ft,Pt,$e;for(be.isNodeJS?Pt=[]:ft=new Path2D,k=0;Le&&k<=R;k++){let Qe=k*I;const K=Qe+E;for(;Qe<K&&!H[Qe];)Qe++;if(Qe===K)continue;ft?ft.moveTo(Qe%I,k):$e=[Qe%I,k];const he=Qe;let Fe=H[Qe];do{const yt=je[Fe];do{Qe+=yt}while(!H[Qe]);const gt=H[Qe];5!==gt&&10!==gt?(Fe=gt,H[Qe]=0):(Fe=gt&51*Fe>>4,H[Qe]&=Fe>>2|Fe<<2),ft?ft.lineTo(Qe%I,Qe/I|0):$e.push(Qe%I,Qe/I|0),H[Qe]||--Le}while(he!==Qe);ft||Pt.push($e),--k}return Me=null,H=null,function(Qe){if(Qe.save(),Qe.scale(1/E,-1/R),Qe.translate(0,-R),ft)Qe.fill(ft);else{Qe.beginPath();for(const K of Pt){Qe.moveTo(K[0],K[1]);for(let he=2,Fe=K.length;he<Fe;he+=2)Qe.lineTo(K[he],K[he+1])}Qe.fill()}Qe.beginPath(),Qe.restore()}}(E)),T.compiled))return void T.compiled(v);const I=this._createMaskCanvas(E),H=I.canvas;v.save(),v.setTransform(1,0,0,1,0,0),v.drawImage(H,I.offsetX,I.offsetY),v.restore(),this.compose()}paintImageMaskXObjectRepeat(E,R,v=0,T=0,I,H){if(!this.contentVisible)return;E=this.getObject(E.data,E);const k=this.ctx;k.save();const X=k.mozCurrentTransform;k.transform(R,v,T,I,0,0);const fe=this._createMaskCanvas(E);k.setTransform(1,0,0,1,0,0);for(let Se=0,Me=H.length;Se<Me;Se+=2){const Ee=N.Util.transform(X,[R,v,T,I,H[Se],H[Se+1]]),[Le,je]=N.Util.applyTransform([0,0],Ee);k.drawImage(fe.canvas,Le,je)}k.restore(),this.compose()}paintImageMaskXObjectGroup(E){if(!this.contentVisible)return;const R=this.ctx,v=this.current.fillColor,T=this.current.patternFill;for(let I=0,H=E.length;I<H;I++){const k=E[I],X=k.width,fe=k.height,Se=this.cachedCanvases.getCanvas("maskCanvas",X,fe,!1),Me=Se.context;Me.save(),j(Me,k),Me.globalCompositeOperation="source-in",Me.fillStyle=T?v.getPattern(Me,this,R.mozCurrentTransformInverse,He.PathType.FILL):v,Me.fillRect(0,0,X,fe),Me.restore(),R.save(),R.transform.apply(R,k.transform),R.scale(1,-1),U(R,Se.canvas,0,0,X,fe,0,-1,1,1),R.restore()}this.compose()}paintImageXObject(E){if(!this.contentVisible)return;const R=this.getObject(E);R?this.paintInlineImageXObject(R):(0,N.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(E,R,v,T){if(!this.contentVisible)return;const I=this.getObject(E);if(!I)return void(0,N.warn)("Dependent image isn't ready yet");const H=I.width,k=I.height,X=[];for(let fe=0,Se=T.length;fe<Se;fe+=2)X.push({transform:[R,0,0,v,T[fe],T[fe+1]],x:0,y:0,w:H,h:k});this.paintInlineImageXObjectGroup(I,X)}paintInlineImageXObject(E){if(!this.contentVisible)return;const R=E.width,v=E.height,T=this.ctx;let I;if(this.save(),T.scale(1/R,-1/v),"function"==typeof HTMLElement&&E instanceof HTMLElement||!E.data)I=E;else{const fe=this.cachedCanvases.getCanvas("inlineImage",R,v,!1);G(fe.context,E,this.current.transferMaps),I=fe.canvas}const H=this._scaleImage(I,T.mozCurrentTransformInverse);T.imageSmoothingEnabled=Pe(T.mozCurrentTransform,E.interpolate);const[k,X]=U(T,H.img,0,0,H.paintWidth,H.paintHeight,0,-v,R,v);if(this.imageLayer){const fe=this.getCanvasPosition(0,-v);this.imageLayer.appendImage({imgData:E,left:fe[0],top:fe[1],width:k,height:X})}this.compose(),this.restore()}paintInlineImageXObjectGroup(E,R){if(!this.contentVisible)return;const v=this.ctx,T=E.width,I=E.height,H=this.cachedCanvases.getCanvas("inlineImage",T,I,!1);G(H.context,E,this.current.transferMaps);for(let X=0,fe=R.length;X<fe;X++){const Se=R[X];if(v.save(),v.transform.apply(v,Se.transform),v.scale(1,-1),U(v,H.canvas,Se.x,Se.y,Se.w,Se.h,0,-1,1,1),this.imageLayer){const Me=this.getCanvasPosition(Se.x,Se.y);this.imageLayer.appendImage({imgData:E,left:Me[0],top:Me[1],width:T,height:I})}v.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(E){}markPointProps(E,R){}beginMarkedContent(E){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(E,R){this.markedContentStack.push("OC"===E?{visible:this.optionalContentConfig.isVisible(R)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(E){const R=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(E);const v=this.ctx;this.pendingClip&&(R||(this.pendingClip===we?v.clip("evenodd"):v.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),v.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const E=this.ctx.mozCurrentTransform;if(0===E[1]&&0===E[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(E[0]),Math.abs(E[3]));else{const R=Math.abs(E[0]*E[3]-E[2]*E[1]),v=Math.hypot(E[0],E[2]),T=Math.hypot(E[1],E[3]);this._cachedGetSinglePixelWidth=Math.max(v,T)/R}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:E}=this.current,R=this.ctx.mozCurrentTransform;let v,T;if(0===R[1]&&0===R[2]){const I=Math.abs(R[0]),H=Math.abs(R[3]);if(0===E)v=1/I,T=1/H;else{const k=I*E,X=H*E;v=k<1?1/k:1,T=X<1?1/X:1}}else{const I=Math.abs(R[0]*R[3]-R[2]*R[1]),H=Math.hypot(R[0],R[1]),k=Math.hypot(R[2],R[3]);if(0===E)v=k/I,T=H/I;else{const X=E*I;v=k>X?k/X:1,T=H>X?H/X:1}}this._cachedScaleForStroking=[v,T]}return this._cachedScaleForStroking}rescaleAndStroke(E){const{ctx:R}=this,{lineWidth:v}=this.current,[T,I]=this.getScaleForStroking();if(R.lineWidth=v||1,1===T&&1===I)return void R.stroke();let H,k,X;E&&(H=R.mozCurrentTransform.slice(),k=R.getLineDash().slice(),X=R.lineDashOffset),R.scale(T,I);const fe=Math.max(T,I);R.setLineDash(R.getLineDash().map(Se=>Se/fe)),R.lineDashOffset/=fe,R.stroke(),E&&(R.setTransform(...H),R.setLineDash(k),R.lineDashOffset=X)}getCanvasPosition(E,R){const v=this.ctx.mozCurrentTransform;return[v[0]*E+v[2]*R+v[4],v[1]*E+v[3]*R+v[5]]}isContentVisible(){for(let E=this.markedContentStack.length-1;E>=0;E--)if(!this.markedContentStack[E].visible)return!1;return!0}}J.CanvasGraphics=De;for(const Q in N.OPS)void 0!==De.prototype[Q]&&(De.prototype[N.OPS[Q]]=De.prototype[Q])},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.TilingPattern=J.PathType=void 0,J.getShadingPattern=function L(b){switch(b[0]){case"RadialAxial":return new ne(b);case"Mesh":return new V(b);case"Dummy":return new z}throw new Error(`Unknown IR type: ${b[0]}`)};var N=Re(1),He=Re(3);const Ae={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function be(b,P){if(!P||He.isNodeJS)return;const W=P[2]-P[0],F=P[3]-P[1],U=new Path2D;U.rect(P[0],P[1],W,F),b.clip(U)}J.PathType=Ae;class ge{constructor(){this.constructor===ge&&(0,N.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,N.unreachable)("Abstract method `getPattern` called.")}}class ne extends ge{constructor(P){super(),this._type=P[1],this._bbox=P[2],this._colorStops=P[3],this._p0=P[4],this._p1=P[5],this._r0=P[6],this._r1=P[7],this.matrix=null}_createGradient(P){let W;"axial"===this._type?W=P.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(W=P.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const F of this._colorStops)W.addColorStop(F[0],F[1]);return W}getPattern(P,W,F,U){let y;if(U===Ae.STROKE||U===Ae.FILL){const x=W.current.getClippedPathBoundingBox(U,P.mozCurrentTransform)||[0,0,0,0],G=Math.ceil(x[2]-x[0])||1,j=Math.ceil(x[3]-x[1])||1,$=W.cachedCanvases.getCanvas("pattern",G,j,!0),te=$.context;te.clearRect(0,0,te.canvas.width,te.canvas.height),te.beginPath(),te.rect(0,0,te.canvas.width,te.canvas.height),te.translate(-x[0],-x[1]),F=N.Util.transform(F,[1,0,0,1,x[0],x[1]]),te.transform.apply(te,W.baseTransform),this.matrix&&te.transform.apply(te,this.matrix),be(te,this._bbox),te.fillStyle=this._createGradient(te),te.fill(),y=P.createPattern($.canvas,"no-repeat");const ie=new DOMMatrix(F);try{y.setTransform(ie)}catch(ae){(0,N.warn)(`RadialAxialShadingPattern.getPattern: "${null==ae?void 0:ae.message}".`)}}else be(P,this._bbox),y=this._createGradient(P);return y}}function C(b,P,W,F,U,y,x,G){const j=P.coords,$=P.colors,te=b.data,ie=4*b.width;let ae;j[W+1]>j[F+1]&&(ae=W,W=F,F=ae,ae=y,y=x,x=ae),j[F+1]>j[U+1]&&(ae=F,F=U,U=ae,ae=x,x=G,G=ae),j[W+1]>j[F+1]&&(ae=W,W=F,F=ae,ae=y,y=x,x=ae);const _e=(j[W]+P.offsetX)*P.scaleX,Te=(j[W+1]+P.offsetY)*P.scaleY,Oe=(j[F]+P.offsetX)*P.scaleX,Pe=(j[F+1]+P.offsetY)*P.scaleY,ye=(j[U]+P.offsetX)*P.scaleX,Ie=(j[U+1]+P.offsetY)*P.scaleY;if(Te>=Ie)return;const Be=$[y],we=$[y+1],De=$[y+2],Q=$[x],E=$[x+1],R=$[x+2],v=$[G],T=$[G+1],I=$[G+2],H=Math.round(Te),k=Math.round(Ie);let X,fe,Se,Me,Ee,Le,je,ft;for(let Pt=H;Pt<=k;Pt++){if(Pt<Pe){let he;he=Pt<Te?0:(Te-Pt)/(Te-Pe),X=_e-(_e-Oe)*he,fe=Be-(Be-Q)*he,Se=we-(we-E)*he,Me=De-(De-R)*he}else{let he;he=Pt>Ie?1:Pe===Ie?0:(Pe-Pt)/(Pe-Ie),X=Oe-(Oe-ye)*he,fe=Q-(Q-v)*he,Se=E-(E-T)*he,Me=R-(R-I)*he}let $e;$e=Pt<Te?0:Pt>Ie?1:(Te-Pt)/(Te-Ie),Ee=_e-(_e-ye)*$e,Le=Be-(Be-v)*$e,je=we-(we-T)*$e,ft=De-(De-I)*$e;const Ze=Math.round(Math.min(X,Ee)),Qe=Math.round(Math.max(X,Ee));let K=ie*Pt+4*Ze;for(let he=Ze;he<=Qe;he++)$e=(X-he)/(X-Ee),$e<0?$e=0:$e>1&&($e=1),te[K++]=fe-(fe-Le)*$e|0,te[K++]=Se-(Se-je)*$e|0,te[K++]=Me-(Me-ft)*$e|0,te[K++]=255}}function Y(b,P,W){const F=P.coords,U=P.colors;let y,x;switch(P.type){case"lattice":const G=P.verticesPerRow,j=Math.floor(F.length/G)-1,$=G-1;for(y=0;y<j;y++){let te=y*G;for(let ie=0;ie<$;ie++,te++)C(b,W,F[te],F[te+1],F[te+G],U[te],U[te+1],U[te+G]),C(b,W,F[te+G+1],F[te+1],F[te+G],U[te+G+1],U[te+1],U[te+G])}break;case"triangles":for(y=0,x=F.length;y<x;y+=3)C(b,W,F[y],F[y+1],F[y+2],U[y],U[y+1],U[y+2]);break;default:throw new Error("illegal figure")}}class V extends ge{constructor(P){super(),this._coords=P[2],this._colors=P[3],this._figures=P[4],this._bounds=P[5],this._bbox=P[7],this._background=P[8],this.matrix=null}_createMeshCanvas(P,W,F){const G=Math.floor(this._bounds[0]),j=Math.floor(this._bounds[1]),$=Math.ceil(this._bounds[2])-G,te=Math.ceil(this._bounds[3])-j,ie=Math.min(Math.ceil(Math.abs($*P[0]*1.1)),3e3),ae=Math.min(Math.ceil(Math.abs(te*P[1]*1.1)),3e3),_e=$/ie,Te=te/ae,Oe={coords:this._coords,colors:this._colors,offsetX:-G,offsetY:-j,scaleX:1/_e,scaleY:1/Te},Ie=F.getCanvas("mesh",ie+4,ae+4,!1),Be=Ie.context,we=Be.createImageData(ie,ae);if(W){const Q=we.data;for(let E=0,R=Q.length;E<R;E+=4)Q[E]=W[0],Q[E+1]=W[1],Q[E+2]=W[2],Q[E+3]=255}for(const Q of this._figures)Y(we,Q,Oe);return Be.putImageData(we,2,2),{canvas:Ie.canvas,offsetX:G-2*_e,offsetY:j-2*Te,scaleX:_e,scaleY:Te}}getPattern(P,W,F,U){let y;if(be(P,this._bbox),U===Ae.SHADING)y=N.Util.singularValueDecompose2dScale(P.mozCurrentTransform);else if(y=N.Util.singularValueDecompose2dScale(W.baseTransform),this.matrix){const G=N.Util.singularValueDecompose2dScale(this.matrix);y=[y[0]*G[0],y[1]*G[1]]}const x=this._createMeshCanvas(y,U===Ae.SHADING?null:this._background,W.cachedCanvases);return U!==Ae.SHADING&&(P.setTransform.apply(P,W.baseTransform),this.matrix&&P.transform.apply(P,this.matrix)),P.translate(x.offsetX,x.offsetY),P.scale(x.scaleX,x.scaleY),P.createPattern(x.canvas,"no-repeat")}}class z extends ge{getPattern(){return"hotpink"}}class S{static get MAX_PATTERN_SIZE(){return(0,N.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(P,W,F,U,y){this.operatorList=P[2],this.matrix=P[3]||[1,0,0,1,0,0],this.bbox=P[4],this.xstep=P[5],this.ystep=P[6],this.paintType=P[7],this.tilingType=P[8],this.color=W,this.ctx=F,this.canvasGraphicsFactory=U,this.baseTransform=y}createPatternCanvas(P){const W=this.operatorList,F=this.bbox,U=this.xstep,y=this.ystep,x=this.paintType,j=this.color,$=this.canvasGraphicsFactory;(0,N.info)("TilingType: "+this.tilingType);const te=F[0],ie=F[1],ae=F[2],_e=F[3],Te=N.Util.singularValueDecompose2dScale(this.matrix),Oe=N.Util.singularValueDecompose2dScale(this.baseTransform),Pe=[Te[0]*Oe[0],Te[1]*Oe[1]],ye=this.getSizeAndScale(U,this.ctx.canvas.width,Pe[0]),Ie=this.getSizeAndScale(y,this.ctx.canvas.height,Pe[1]),Be=P.cachedCanvases.getCanvas("pattern",ye.size,Ie.size,!0),we=Be.context,De=$.createCanvasGraphics(we);De.groupLevel=P.groupLevel,this.setFillAndStrokeStyleToContext(De,x,j);let Q=te,E=ie,R=ae,v=_e;return te<0&&(Q=0,R+=Math.abs(te)),ie<0&&(E=0,v+=Math.abs(ie)),we.translate(-ye.scale*Q,-Ie.scale*E),De.transform(ye.scale,0,0,Ie.scale,0,0),we.save(),this.clipBbox(De,Q,E,R,v),De.baseTransform=De.ctx.mozCurrentTransform.slice(),De.executeOperatorList(W),De.endDrawing(),{canvas:Be.canvas,scaleX:ye.scale,scaleY:Ie.scale,offsetX:Q,offsetY:E}}getSizeAndScale(P,W,F){P=Math.abs(P);const U=Math.max(S.MAX_PATTERN_SIZE,W);let y=Math.ceil(P*F);return y>=U?y=U:F=y/P,{scale:F,size:y}}clipBbox(P,W,F,U,y){P.ctx.rect(W,F,U-W,y-F),P.current.updateRectMinMax(P.ctx.mozCurrentTransform,[W,F,U,y]),P.clip(),P.endPath()}setFillAndStrokeStyleToContext(P,W,F){const U=P.ctx,y=P.current;switch(W){case 1:const x=this.ctx;U.fillStyle=x.fillStyle,U.strokeStyle=x.strokeStyle,y.fillColor=x.fillStyle,y.strokeColor=x.strokeStyle;break;case 2:const G=N.Util.makeHexColor(F[0],F[1],F[2]);U.fillStyle=G,U.strokeStyle=G,y.fillColor=G,y.strokeColor=G;break;default:throw new N.FormatError(`Unsupported paint type: ${W}`)}}getPattern(P,W,F,U){let y=F;U!==Ae.SHADING&&(y=N.Util.transform(y,W.baseTransform),this.matrix&&(y=N.Util.transform(y,this.matrix)));const x=this.createPatternCanvas(W);let G=new DOMMatrix(y);G=G.translate(x.offsetX,x.offsetY),G=G.scale(1/x.scaleX,1/x.scaleY);const j=P.createPattern(x.canvas,"repeat");try{j.setTransform(G)}catch($){(0,N.warn)(`TilingPattern.getPattern: "${null==$?void 0:$.message}".`)}return j}}J.TilingPattern=S},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.applyMaskImageData=function He({src:Ae,srcPos:be=0,dest:ge,destPos:ne=0,width:C,height:Y,inverseDecode:V=!1}){const z=N.FeatureTest.isLittleEndian?4278190080:255,[L,A]=V?[0,z]:[z,0],S=C>>3,b=7&C,P=Ae.length;ge=new Uint32Array(ge.buffer);for(let W=0;W<Y;W++){for(const U=be+S;be<U;be++){const y=be<P?Ae[be]:255;ge[ne++]=128&y?A:L,ge[ne++]=64&y?A:L,ge[ne++]=32&y?A:L,ge[ne++]=16&y?A:L,ge[ne++]=8&y?A:L,ge[ne++]=4&y?A:L,ge[ne++]=2&y?A:L,ge[ne++]=1&y?A:L}if(0===b)continue;const F=be<P?Ae[be++]:255;for(let U=0;U<b;U++)ge[ne++]=F&1<<7-U?A:L}return{srcPos:be,destPos:ne}};var N=Re(1)},(Ke,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.GlobalWorkerOptions=void 0;const Re=Object.create(null);J.GlobalWorkerOptions=Re,Re.workerPort=void 0===Re.workerPort?null:Re.workerPort,Re.workerSrc=void 0===Re.workerSrc?"":Re.workerSrc},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.MessageHandler=void 0;var N=Re(1);function be(ne){switch(ne instanceof Error||"object"==typeof ne&&null!==ne||(0,N.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ne.name){case"AbortException":return new N.AbortException(ne.message);case"MissingPDFException":return new N.MissingPDFException(ne.message);case"PasswordException":return new N.PasswordException(ne.message,ne.code);case"UnexpectedResponseException":return new N.UnexpectedResponseException(ne.message,ne.status);case"UnknownErrorException":return new N.UnknownErrorException(ne.message,ne.details);default:return new N.UnknownErrorException(ne.message,ne.toString())}}J.MessageHandler=class ge{constructor(C,Y,V){this.sourceName=C,this.targetName=Y,this.comObj=V,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=z=>{const L=z.data;if(L.targetName!==this.sourceName)return;if(L.stream)return void this._processStreamMessage(L);if(L.callback){const S=L.callbackId,b=this.callbackCapabilities[S];if(!b)throw new Error(`Cannot resolve callback ${S}`);if(delete this.callbackCapabilities[S],1===L.callback)b.resolve(L.data);else{if(2!==L.callback)throw new Error("Unexpected callback case");b.reject(be(L.reason))}return}const A=this.actionHandler[L.action];if(!A)throw new Error(`Unknown action from worker: ${L.action}`);if(L.callbackId){const S=this.sourceName,b=L.sourceName;new Promise(function(P){P(A(L.data))}).then(function(P){V.postMessage({sourceName:S,targetName:b,callback:1,callbackId:L.callbackId,data:P})},function(P){V.postMessage({sourceName:S,targetName:b,callback:2,callbackId:L.callbackId,reason:be(P)})})}else L.streamId?this._createStreamSink(L):A(L.data)},V.addEventListener("message",this._onComObjOnMessage)}on(C,Y){const V=this.actionHandler;if(V[C])throw new Error(`There is already an actionName called "${C}"`);V[C]=Y}send(C,Y,V){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,data:Y},V)}sendWithPromise(C,Y,V){const z=this.callbackId++,L=(0,N.createPromiseCapability)();this.callbackCapabilities[z]=L;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,callbackId:z,data:Y},V)}catch(A){L.reject(A)}return L.promise}sendWithStream(C,Y,V,z){const L=this.streamId++,A=this.sourceName,S=this.targetName,b=this.comObj;return new ReadableStream({start:P=>{const W=(0,N.createPromiseCapability)();return this.streamControllers[L]={controller:P,startCall:W,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:A,targetName:S,action:C,streamId:L,data:Y,desiredSize:P.desiredSize},z),W.promise},pull:P=>{const W=(0,N.createPromiseCapability)();return this.streamControllers[L].pullCall=W,b.postMessage({sourceName:A,targetName:S,stream:6,streamId:L,desiredSize:P.desiredSize}),W.promise},cancel:P=>{(0,N.assert)(P instanceof Error,"cancel must have a valid reason");const W=(0,N.createPromiseCapability)();return this.streamControllers[L].cancelCall=W,this.streamControllers[L].isClosed=!0,b.postMessage({sourceName:A,targetName:S,stream:1,streamId:L,reason:be(P)}),W.promise}},V)}_createStreamSink(C){const Y=C.streamId,V=this.sourceName,z=C.sourceName,L=this.comObj,A=this,S=this.actionHandler[C.action],b={enqueue(P,W=1,F){if(this.isCancelled)return;const U=this.desiredSize;this.desiredSize-=W,U>0&&this.desiredSize<=0&&(this.sinkCapability=(0,N.createPromiseCapability)(),this.ready=this.sinkCapability.promise),L.postMessage({sourceName:V,targetName:z,stream:4,streamId:Y,chunk:P},F)},close(){this.isCancelled||(this.isCancelled=!0,L.postMessage({sourceName:V,targetName:z,stream:3,streamId:Y}),delete A.streamSinks[Y])},error(P){(0,N.assert)(P instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,L.postMessage({sourceName:V,targetName:z,stream:5,streamId:Y,reason:be(P)}))},sinkCapability:(0,N.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:C.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[Y]=b,new Promise(function(P){P(S(C.data,b))}).then(function(){L.postMessage({sourceName:V,targetName:z,stream:8,streamId:Y,success:!0})},function(P){L.postMessage({sourceName:V,targetName:z,stream:8,streamId:Y,reason:be(P)})})}_processStreamMessage(C){const Y=C.streamId,V=this.sourceName,z=C.sourceName,L=this.comObj,A=this.streamControllers[Y],S=this.streamSinks[Y];switch(C.stream){case 8:C.success?A.startCall.resolve():A.startCall.reject(be(C.reason));break;case 7:C.success?A.pullCall.resolve():A.pullCall.reject(be(C.reason));break;case 6:if(!S){L.postMessage({sourceName:V,targetName:z,stream:7,streamId:Y,success:!0});break}S.desiredSize<=0&&C.desiredSize>0&&S.sinkCapability.resolve(),S.desiredSize=C.desiredSize,new Promise(function(b){b(S.onPull&&S.onPull())}).then(function(){L.postMessage({sourceName:V,targetName:z,stream:7,streamId:Y,success:!0})},function(b){L.postMessage({sourceName:V,targetName:z,stream:7,streamId:Y,reason:be(b)})});break;case 4:if((0,N.assert)(A,"enqueue should have stream controller"),A.isClosed)break;A.controller.enqueue(C.chunk);break;case 3:if((0,N.assert)(A,"close should have stream controller"),A.isClosed)break;A.isClosed=!0,A.controller.close(),this._deleteStreamController(A,Y);break;case 5:(0,N.assert)(A,"error should have stream controller"),A.controller.error(be(C.reason)),this._deleteStreamController(A,Y);break;case 2:C.success?A.cancelCall.resolve():A.cancelCall.reject(be(C.reason)),this._deleteStreamController(A,Y);break;case 1:if(!S)break;new Promise(function(b){b(S.onCancel&&S.onCancel(be(C.reason)))}).then(function(){L.postMessage({sourceName:V,targetName:z,stream:2,streamId:Y,success:!0})},function(b){L.postMessage({sourceName:V,targetName:z,stream:2,streamId:Y,reason:be(b)})}),S.sinkCapability.reject(be(C.reason)),S.isCancelled=!0,delete this.streamSinks[Y];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(C,Y){var V=this;return _asyncToGenerator(function*(){yield Promise.allSettled([C.startCall&&C.startCall.promise,C.pullCall&&C.pullCall.promise,C.cancelCall&&C.cancelCall.promise]),delete V.streamControllers[Y]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(Ke,J,Re)=>{var Ae,be;Object.defineProperty(J,"__esModule",{value:!0}),J.Metadata=void 0;var N=Re(1);Ae=new WeakMap,be=new WeakMap,J.Metadata=class He{constructor({parsedData:ne,rawData:C}){ln(this,Ae,void 0),ln(this,be,void 0),Pi(this,Ae,ne),Pi(this,be,C)}getRaw(){return Jt(this,be)}get(ne){var C;return null!=(C=Jt(this,Ae).get(ne))?C:null}getAll(){return(0,N.objectFromMap)(Jt(this,Ae))}has(ne){return Jt(this,Ae).has(ne)}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.OptionalContentConfig=void 0;var N=Re(1);class He{constructor(ge,ne){this.visible=!0,this.name=ge,this.intent=ne}}J.OptionalContentConfig=class Ae{constructor(ge){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==ge){this.name=ge.name,this.creator=ge.creator,this._order=ge.order;for(const ne of ge.groups)this._groups.set(ne.id,new He(ne.name,ne.intent));if("OFF"===ge.baseState)for(const ne of this._groups)ne.visible=!1;for(const ne of ge.on)this._groups.get(ne).visible=!0;for(const ne of ge.off)this._groups.get(ne).visible=!1}}_evaluateVisibilityExpression(ge){const ne=ge.length;if(ne<2)return!0;const C=ge[0];for(let Y=1;Y<ne;Y++){const V=ge[Y];let z;if(Array.isArray(V))z=this._evaluateVisibilityExpression(V);else{if(!this._groups.has(V))return(0,N.warn)(`Optional content group not found: ${V}`),!0;z=this._groups.get(V).visible}switch(C){case"And":if(!z)return!1;break;case"Or":if(z)return!0;break;case"Not":return!z;default:return!0}}return"And"===C}isVisible(ge){if(0===this._groups.size)return!0;if(!ge)return(0,N.warn)("Optional content group not defined."),!0;if("OCG"===ge.type)return this._groups.has(ge.id)?this._groups.get(ge.id).visible:((0,N.warn)(`Optional content group not found: ${ge.id}`),!0);if("OCMD"===ge.type){if(ge.expression)return this._evaluateVisibilityExpression(ge.expression);if(!ge.policy||"AnyOn"===ge.policy){for(const ne of ge.ids){if(!this._groups.has(ne))return(0,N.warn)(`Optional content group not found: ${ne}`),!0;if(this._groups.get(ne).visible)return!0}return!1}if("AllOn"===ge.policy){for(const ne of ge.ids){if(!this._groups.has(ne))return(0,N.warn)(`Optional content group not found: ${ne}`),!0;if(!this._groups.get(ne).visible)return!1}return!0}if("AnyOff"===ge.policy){for(const ne of ge.ids){if(!this._groups.has(ne))return(0,N.warn)(`Optional content group not found: ${ne}`),!0;if(!this._groups.get(ne).visible)return!0}return!1}if("AllOff"===ge.policy){for(const ne of ge.ids){if(!this._groups.has(ne))return(0,N.warn)(`Optional content group not found: ${ne}`),!0;if(this._groups.get(ne).visible)return!1}return!0}return(0,N.warn)(`Unknown optional content policy ${ge.policy}.`),!0}return(0,N.warn)(`Unknown group type ${ge.type}.`),!0}setVisibility(ge,ne=!0){this._groups.has(ge)?this._groups.get(ge).visible=!!ne:(0,N.warn)(`Optional content group not found: ${ge}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,N.objectFromMap)(this._groups):null}getGroup(ge){return this._groups.get(ge)||null}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.PDFDataTransportStream=void 0;var N=Re(1),He=Re(5);J.PDFDataTransportStream=class Ae{constructor(C,Y){(0,N.assert)(Y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=C.progressiveDone||!1,this._contentDispositionFilename=C.contentDispositionFilename||null;const V=C.initialData;if((null==V?void 0:V.length)>0){const z=new Uint8Array(V).buffer;this._queuedChunks.push(z)}this._pdfDataRangeTransport=Y,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._contentLength=C.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((z,L)=>{this._onReceiveData({begin:z,chunk:L})}),this._pdfDataRangeTransport.addProgressListener((z,L)=>{this._onProgress({loaded:z,total:L})}),this._pdfDataRangeTransport.addProgressiveReadListener(z=>{this._onReceiveData({chunk:z})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(C){const Y=new Uint8Array(C.chunk).buffer;if(void 0===C.begin)this._fullRequestReader?this._fullRequestReader._enqueue(Y):this._queuedChunks.push(Y);else{const V=this._rangeReaders.some(function(z){return z._begin===C.begin&&(z._enqueue(Y),!0)});(0,N.assert)(V,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var C,Y;return null!=(Y=null==(C=this._fullRequestReader)?void 0:C._loaded)?Y:0}_onProgress(C){if(void 0===C.total){const Y=this._rangeReaders[0];(null==Y?void 0:Y.onProgress)&&Y.onProgress({loaded:C.loaded})}else{const Y=this._fullRequestReader;(null==Y?void 0:Y.onProgress)&&Y.onProgress({loaded:C.loaded,total:C.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(C){const Y=this._rangeReaders.indexOf(C);Y>=0&&this._rangeReaders.splice(Y,1)}getFullReader(){(0,N.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const C=this._queuedChunks;return this._queuedChunks=null,new be(this,C,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(C,Y){if(Y<=this._progressiveDataLength)return null;const V=new ge(this,C,Y);return this._pdfDataRangeTransport.requestDataRange(C,Y),this._rangeReaders.push(V),V}cancelAllRequests(C){this._fullRequestReader&&this._fullRequestReader.cancel(C);for(const Y of this._rangeReaders.slice(0))Y.cancel(C);this._pdfDataRangeTransport.abort()}};class be{constructor(C,Y,V=!1,z=null){this._stream=C,this._done=V||!1,this._filename=(0,He.isPdfFile)(z)?z:null,this._queuedChunks=Y||[],this._loaded=0;for(const L of this._queuedChunks)this._loaded+=L.byteLength;this._requests=[],this._headersReady=Promise.resolve(),C._fullRequestReader=this,this.onProgress=null}_enqueue(C){this._done||(this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunks.push(C),this._loaded+=C.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var C=this;return _asyncToGenerator(function*(){if(C._queuedChunks.length>0)return{value:C._queuedChunks.shift(),done:!1};if(C._done)return{value:void 0,done:!0};const Y=(0,N.createPromiseCapability)();return C._requests.push(Y),Y.promise})()}cancel(C){this._done=!0;for(const Y of this._requests)Y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ge{constructor(C,Y,V){this._stream=C,this._begin=Y,this._end=V,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(C){if(!this._done){if(0===this._requests.length)this._queuedChunk=C;else{this._requests.shift().resolve({value:C,done:!1});for(const V of this._requests)V.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var C=this;return _asyncToGenerator(function*(){if(C._queuedChunk){const V=C._queuedChunk;return C._queuedChunk=null,{value:V,done:!1}}if(C._done)return{value:void 0,done:!0};const Y=(0,N.createPromiseCapability)();return C._requests.push(Y),Y.promise})()}cancel(C){this._done=!0;for(const Y of this._requests)Y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Ke,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.XfaText=void 0;class Re{static textContent(He){const Ae=[],be={items:Ae,styles:Object.create(null)};return function ge(ne){var V;if(!ne)return;let C=null;const Y=ne.name;if("#text"===Y)C=ne.value;else{if(!Re.shouldBuildText(Y))return;(null==(V=null==ne?void 0:ne.attributes)?void 0:V.textContent)?C=ne.attributes.textContent:ne.value&&(C=ne.value)}if(null!==C&&Ae.push({str:C}),ne.children)for(const z of ne.children)ge(z)}(He),be}static shouldBuildText(He){return!("textarea"===He||"input"===He||"option"===He||"select"===He)}}J.XfaText=Re},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.NodeStandardFontDataFactory=J.NodeCanvasFactory=J.NodeCMapReaderFactory=void 0;var N=Re(6);const He=function(ne){return new Promise((C,Y)=>{__webpack_require__(172).readFile(ne,(z,L)=>{!z&&L?C(new Uint8Array(L)):Y(new Error(z))})})};J.NodeCanvasFactory=class Ae extends N.BaseCanvasFactory{_createCanvas(C,Y){return __webpack_require__(414).createCanvas(C,Y)}},J.NodeCMapReaderFactory=class be extends N.BaseCMapReaderFactory{_fetchData(C,Y){return He(C).then(V=>({cMapData:V,compressionType:Y}))}},J.NodeStandardFontDataFactory=class ge extends N.BaseStandardFontDataFactory{_fetchData(C){return He(C)}}},(Ke,J,Re)=>{var Q,mB;Object.defineProperty(J,"__esModule",{value:!0}),J.AnnotationLayer=void 0;var N=Re(1),He=Re(5),Ae=Re(8),be=Re(21),ge=Re(22);const C=new WeakSet;function Y(R){return{width:R[2]-R[0],height:R[3]-R[1]}}class V{static create(v){switch(v.data.annotationType){case N.AnnotationType.LINK:return new L(v);case N.AnnotationType.TEXT:return new A(v);case N.AnnotationType.WIDGET:switch(v.data.fieldType){case"Tx":return new b(v);case"Btn":return v.data.radioButton?new W(v):v.data.checkBox?new P(v):new F(v);case"Ch":return new U(v)}return new S(v);case N.AnnotationType.POPUP:return new y(v);case N.AnnotationType.FREETEXT:return new G(v);case N.AnnotationType.LINE:return new j(v);case N.AnnotationType.SQUARE:return new $(v);case N.AnnotationType.CIRCLE:return new te(v);case N.AnnotationType.POLYLINE:return new ie(v);case N.AnnotationType.CARET:return new _e(v);case N.AnnotationType.INK:return new Te(v);case N.AnnotationType.POLYGON:return new ae(v);case N.AnnotationType.HIGHLIGHT:return new Oe(v);case N.AnnotationType.UNDERLINE:return new Pe(v);case N.AnnotationType.SQUIGGLY:return new ye(v);case N.AnnotationType.STRIKEOUT:return new Ie(v);case N.AnnotationType.STAMP:return new Be(v);case N.AnnotationType.FILEATTACHMENT:return new we(v);default:return new z(v)}}}class z{constructor(v,{isRenderable:T=!1,ignoreBorder:I=!1,createQuadrilaterals:H=!1}={}){this.isRenderable=T,this.data=v.data,this.layer=v.layer,this.page=v.page,this.viewport=v.viewport,this.linkService=v.linkService,this.downloadManager=v.downloadManager,this.imageResourcesPath=v.imageResourcesPath,this.renderForms=v.renderForms,this.svgFactory=v.svgFactory,this.annotationStorage=v.annotationStorage,this.enableScripting=v.enableScripting,this.hasJSActions=v.hasJSActions,this._fieldObjects=v.fieldObjects,this._mouseState=v.mouseState,T&&(this.container=this._createContainer(I)),H&&(this.quadrilaterals=this._createQuadrilaterals(I))}_createContainer(v=!1){const T=this.data,I=this.page,H=this.viewport,k=document.createElement("section");let{width:X,height:fe}=Y(T.rect);k.setAttribute("data-annotation-id",T.id);const Se=N.Util.normalizeRect([T.rect[0],I.view[3]-T.rect[1]+I.view[1],T.rect[2],I.view[3]-T.rect[3]+I.view[1]]);if(T.hasOwnCanvas){const Me=H.transform.slice(),[Ee,Le]=N.Util.singularValueDecompose2dScale(Me);X=Math.ceil(X*Ee),fe=Math.ceil(fe*Le),Se[0]*=Ee,Se[1]*=Le;for(let je=0;je<4;je++)Me[je]=Math.sign(Me[je]);k.style.transform=`matrix(${Me.join(",")})`}else k.style.transform=`matrix(${H.transform.join(",")})`;if(k.style.transformOrigin=`${-Se[0]}px ${-Se[1]}px`,!v&&T.borderStyle.width>0){k.style.borderWidth=`${T.borderStyle.width}px`,T.borderStyle.style!==N.AnnotationBorderStyleType.UNDERLINE&&(X-=2*T.borderStyle.width,fe-=2*T.borderStyle.width);const Me=T.borderStyle.horizontalCornerRadius,Ee=T.borderStyle.verticalCornerRadius;switch((Me>0||Ee>0)&&(k.style.borderRadius=`${Me}px / ${Ee}px`),T.borderStyle.style){case N.AnnotationBorderStyleType.SOLID:k.style.borderStyle="solid";break;case N.AnnotationBorderStyleType.DASHED:k.style.borderStyle="dashed";break;case N.AnnotationBorderStyleType.BEVELED:(0,N.warn)("Unimplemented border style: beveled");break;case N.AnnotationBorderStyleType.INSET:(0,N.warn)("Unimplemented border style: inset");break;case N.AnnotationBorderStyleType.UNDERLINE:k.style.borderBottomStyle="solid"}T.borderColor||T.color?k.style.borderColor=N.Util.makeHexColor(0|T.color[0],0|T.color[1],0|T.color[2]):k.style.borderWidth=0}return k.style.left=`${Se[0]}px`,k.style.top=`${Se[1]}px`,T.hasOwnCanvas?k.style.width=k.style.height="auto":(k.style.width=`${X}px`,k.style.height=`${fe}px`),k}get _commonActions(){const v=(T,I,H)=>{const k=H.detail[T];H.target.style[I]=be.ColorConverters[`${k[0]}_HTML`](k.slice(1))};return(0,N.shadow)(this,"_commonActions",{display:T=>{const I=T.detail.display%2==1;T.target.style.visibility=I?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:I,print:0===T.detail.display||3===T.detail.display})},print:T=>{this.annotationStorage.setValue(this.data.id,{print:T.detail.print})},hidden:T=>{T.target.style.visibility=T.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:T.detail.hidden})},focus:T=>{setTimeout(()=>T.target.focus({preventScroll:!1}),0)},userName:T=>{T.target.title=T.detail.userName},readonly:T=>{T.detail.readonly?T.target.setAttribute("readonly",""):T.target.removeAttribute("readonly")},required:T=>{T.detail.required?T.target.setAttribute("required",""):T.target.removeAttribute("required")},bgColor:T=>{v("bgColor","backgroundColor",T)},fillColor:T=>{v("fillColor","backgroundColor",T)},fgColor:T=>{v("fgColor","color",T)},textColor:T=>{v("textColor","color",T)},borderColor:T=>{v("borderColor","borderColor",T)},strokeColor:T=>{v("strokeColor","borderColor",T)}})}_dispatchEventFromSandbox(v,T){const I=this._commonActions;for(const H of Object.keys(T.detail)){const k=v[H]||I[H];k&&k(T)}}_setDefaultPropertiesFromJS(v){if(!this.enableScripting)return;const T=this.annotationStorage.getRawValue(this.data.id);if(!T)return;const I=this._commonActions;for(const[H,k]of Object.entries(T)){const X=I[H];X&&(X({detail:k,target:v}),delete T[H])}}_createQuadrilaterals(v=!1){if(!this.data.quadPoints)return null;const T=[],I=this.data.rect;for(const H of this.data.quadPoints)this.data.rect=[H[2].x,H[2].y,H[1].x,H[1].y],T.push(this._createContainer(v));return this.data.rect=I,T}_createPopup(v,T){let I=this.container;this.quadrilaterals&&(v=v||this.quadrilaterals,I=this.quadrilaterals[0]),v||((v=document.createElement("div")).style.height=I.style.height,v.style.width=I.style.width,I.appendChild(v));const k=new x({container:I,trigger:v,color:T.color,titleObj:T.titleObj,modificationDate:T.modificationDate,contentsObj:T.contentsObj,richText:T.richText,hideWrapper:!0}).render();k.style.left=I.style.width,I.appendChild(k)}_renderQuadrilaterals(v){for(const T of this.quadrilaterals)T.className=v;return this.quadrilaterals}render(){(0,N.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(v,T=null){const I=[];if(this._fieldObjects){const H=this._fieldObjects[v];if(H)for(const{page:k,id:X,exportValues:fe}of H){if(-1===k||X===T)continue;const Se="string"==typeof fe?fe:null,Me=document.getElementById(X);!Me||C.has(Me)?I.push({id:X,exportValue:Se,domElement:Me}):(0,N.warn)(`_getElementsByName - element not allowed: ${X}`)}return I}for(const H of document.getElementsByName(v)){const{id:k,exportValue:X}=H;k!==T&&(!C.has(H)||I.push({id:k,exportValue:X,domElement:H}))}return I}static get platform(){const v="undefined"!=typeof navigator?navigator.platform:"";return(0,N.shadow)(this,"platform",{isWin:v.includes("Win"),isMac:v.includes("Mac")})}}class L extends z{constructor(v,T=null){super(v,{isRenderable:!!(v.data.url||v.data.dest||v.data.action||v.data.isTooltipOnly||v.data.resetForm||v.data.actions&&(v.data.actions.Action||v.data.actions["Mouse Up"]||v.data.actions["Mouse Down"])),ignoreBorder:!!(null==T?void 0:T.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:v,linkService:T}=this,I=document.createElement("a");if(v.url)T.addLinkAttributes(I,v.url,v.newWindow);else if(v.action)this._bindNamedAction(I,v.action);else if(v.dest)this._bindLink(I,v.dest);else{let H=!1;v.actions&&(v.actions.Action||v.actions["Mouse Up"]||v.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(H=!0,this._bindJSAction(I,v)),v.resetForm?this._bindResetFormAction(I,v.resetForm):H||this._bindLink(I,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((H,k)=>{const X=0===k?I:I.cloneNode();return H.appendChild(X),H}):(this.container.className="linkAnnotation",this.container.appendChild(I),this.container)}_bindLink(v,T){v.href=this.linkService.getDestinationHash(T),v.onclick=()=>(T&&this.linkService.goToDestination(T),!1),(T||""===T)&&(v.className="internalLink")}_bindNamedAction(v,T){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeNamedAction(T),!1),v.className="internalLink"}_bindJSAction(v,T){v.href=this.linkService.getAnchorUrl("");const I=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const H of Object.keys(T.actions)){const k=I.get(H);!k||(v[k]=()=>{var X;return null==(X=this.linkService.eventBus)||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T.id,name:H}}),!1})}v.onclick||(v.onclick=()=>!1),v.className="internalLink"}_bindResetFormAction(v,T){const I=v.onclick;if(I||(v.href=this.linkService.getAnchorUrl("")),v.className="internalLink",!this._fieldObjects)return(0,N.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(I||(v.onclick=()=>!1));v.onclick=()=>{var Ee;I&&I();const{fields:H,refs:k,include:X}=T,fe=[];if(0!==H.length||0!==k.length){const Le=new Set(k);for(const je of H){const ft=this._fieldObjects[je]||[];for(const{id:Pt}of ft)Le.add(Pt)}for(const je of Object.values(this._fieldObjects))for(const ft of je)Le.has(ft.id)===X&&fe.push(ft)}else for(const Le of Object.values(this._fieldObjects))fe.push(...Le);const Se=this.annotationStorage,Me=[];for(const Le of fe){const{id:je}=Le;switch(Me.push(je),Le.type){case"text":case"combobox":case"listbox":Se.setValue(je,{value:Le.defaultValue||""});break;case"checkbox":case"radiobutton":Se.setValue(je,{value:Le.defaultValue===Le.exportValues});break;default:continue}const ft=document.getElementById(je);!ft||!C.has(ft)||ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(null==(Ee=this.linkService.eventBus)||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Me,name:"ResetForm"}})),!1}}}class A extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str))})}render(){this.container.className="textAnnotation";const v=document.createElement("img");return v.style.height=this.container.style.height,v.style.width=this.container.style.width,v.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",v.alt="[{{type}} Annotation]",v.dataset.l10nId="text_annotation_type",v.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(v,this.data),this.container.appendChild(v),this.container}}class S extends z{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(v){const{isWin:T,isMac:I}=z.platform;return T&&v.ctrlKey||I&&v.metaKey}_setEventListener(v,T,I,H){T.includes("mouse")?v.addEventListener(T,k=>{var X;null==(X=this.linkService.eventBus)||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:I,value:H(k),shift:k.shiftKey,modifier:this._getKeyModifier(k)}})}):v.addEventListener(T,k=>{var X;null==(X=this.linkService.eventBus)||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:I,value:H(k)}})})}_setEventListeners(v,T,I){var H;for(const[k,X]of T)("Action"===X||(null==(H=this.data.actions)?void 0:H[X]))&&this._setEventListener(v,k,X,I)}_setBackgroundColor(v){const T=this.data.backgroundColor||null;v.style.backgroundColor=null===T?"transparent":N.Util.makeHexColor(T[0],T[1],T[2])}}class b extends S{constructor(v){super(v,{isRenderable:v.renderForms||!v.data.hasAppearance&&!!v.data.fieldValue})}setPropertyOnSiblings(v,T,I,H){const k=this.annotationStorage;for(const X of this._getElementsByName(v.name,v.id))X.domElement&&(X.domElement[T]=I),k.setValue(X.id,{[H]:I})}render(){var H;const v=this.annotationStorage,T=this.data.id;this.container.className="textWidgetAnnotation";let I=null;if(this.renderForms){const k=v.getValue(T,{value:this.data.fieldValue}),X=k.formattedValue||k.value||"",fe={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(I=document.createElement("textarea"),I.textContent=X):(I=document.createElement("input"),I.type="text",I.setAttribute("value",X)),C.add(I),I.disabled=this.data.readOnly,I.name=this.data.fieldName,I.tabIndex=1e3,fe.userValue=X,I.setAttribute("id",T),I.addEventListener("input",Me=>{v.setValue(T,{value:Me.target.value}),this.setPropertyOnSiblings(I,"value",Me.target.value,"value")}),I.addEventListener("resetform",Me=>{var Le;const Ee=null!=(Le=this.data.defaultFieldValue)?Le:"";I.value=fe.userValue=Ee,fe.formattedValue=null});let Se=Me=>{const{formattedValue:Ee}=fe;null!=Ee&&(Me.target.value=Ee),Me.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){I.addEventListener("focus",Ee=>{fe.userValue&&(Ee.target.value=fe.userValue),fe.valueOnFocus=Ee.target.value}),I.addEventListener("updatefromsandbox",Ee=>{this._dispatchEventFromSandbox({value(je){var ft;fe.userValue=null!=(ft=je.detail.value)?ft:"",v.setValue(T,{value:fe.userValue.toString()}),je.target.value=fe.userValue},formattedValue(je){const{formattedValue:ft}=je.detail;fe.formattedValue=ft,null!=ft&&je.target!==document.activeElement&&(je.target.value=ft),v.setValue(T,{formattedValue:ft})},selRange(je){je.target.setSelectionRange(...je.detail.selRange)}},Ee)}),I.addEventListener("keydown",Ee=>{var ft;let Le=-1;if("Escape"===Ee.key?Le=0:"Enter"===Ee.key?Le=2:"Tab"===Ee.key&&(Le=3),-1===Le)return;const{value:je}=Ee.target;fe.valueOnFocus!==je&&(fe.userValue=je,null==(ft=this.linkService.eventBus)||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:je,willCommit:!0,commitKey:Le,selStart:Ee.target.selectionStart,selEnd:Ee.target.selectionEnd}}))});const Me=Se;Se=null,I.addEventListener("blur",Ee=>{var je;const{value:Le}=Ee.target;fe.userValue=Le,this._mouseState.isDown&&fe.valueOnFocus!==Le&&(null==(je=this.linkService.eventBus)||je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Le,willCommit:!0,commitKey:1,selStart:Ee.target.selectionStart,selEnd:Ee.target.selectionEnd}})),Me(Ee)}),(null==(H=this.data.actions)?void 0:H.Keystroke)&&I.addEventListener("beforeinput",Ee=>{var K;const{data:Le,target:je}=Ee,{value:ft,selectionStart:Pt,selectionEnd:$e}=je;let Ze=Pt,Qe=$e;switch(Ee.inputType){case"deleteWordBackward":{const he=ft.substring(0,Pt).match(/\w*[^\w]*$/);he&&(Ze-=he[0].length);break}case"deleteWordForward":{const he=ft.substring(Pt).match(/^[^\w]*\w*/);he&&(Qe+=he[0].length);break}case"deleteContentBackward":Pt===$e&&(Ze-=1);break;case"deleteContentForward":Pt===$e&&(Qe+=1)}Ee.preventDefault(),null==(K=this.linkService.eventBus)||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:ft,change:Le||"",willCommit:!1,selStart:Ze,selEnd:Qe}})}),this._setEventListeners(I,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ee=>Ee.target.value)}if(Se&&I.addEventListener("blur",Se),null!==this.data.maxLen&&(I.maxLength=this.data.maxLen),this.data.comb){const Ee=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;I.classList.add("comb"),I.style.letterSpacing=`calc(${Ee}px - 1ch)`}}else I=document.createElement("div"),I.textContent=this.data.fieldValue,I.style.verticalAlign="middle",I.style.display="table-cell";return this._setTextStyle(I),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.appendChild(I),this.container}_setTextStyle(v){const{fontSize:I,fontColor:H}=this.data.defaultAppearanceData,k=v.style;I&&(k.fontSize=`${I}px`),k.color=N.Util.makeHexColor(H[0],H[1],H[2]),null!==this.data.textAlignment&&(k.textAlign=["left","center","right"][this.data.textAlignment])}}class P extends S{constructor(v){super(v,{isRenderable:v.renderForms})}render(){const v=this.annotationStorage,T=this.data,I=T.id;let H=v.getValue(I,{value:T.exportValue===T.fieldValue}).value;"string"==typeof H&&(H="Off"!==H,v.setValue(I,{value:H})),this.container.className="buttonWidgetAnnotation checkBox";const k=document.createElement("input");return C.add(k),k.disabled=T.readOnly,k.type="checkbox",k.name=T.fieldName,H&&k.setAttribute("checked",!0),k.setAttribute("id",I),k.setAttribute("exportValue",T.exportValue),k.tabIndex=1e3,k.addEventListener("change",X=>{const{name:fe,checked:Se}=X.target;for(const Me of this._getElementsByName(fe,I)){const Ee=Se&&Me.exportValue===T.exportValue;Me.domElement&&(Me.domElement.checked=Ee),v.setValue(Me.id,{value:Ee})}v.setValue(I,{value:Se})}),k.addEventListener("resetform",X=>{X.target.checked=(T.defaultFieldValue||"Off")===T.exportValue}),this.enableScripting&&this.hasJSActions&&(k.addEventListener("updatefromsandbox",X=>{this._dispatchEventFromSandbox({value(Se){Se.target.checked="Off"!==Se.detail.value,v.setValue(I,{value:Se.target.checked})}},X)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.appendChild(k),this.container}}class W extends S{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const v=this.annotationStorage,T=this.data,I=T.id;let H=v.getValue(I,{value:T.fieldValue===T.buttonValue}).value;"string"==typeof H&&(H=H!==T.buttonValue,v.setValue(I,{value:H}));const k=document.createElement("input");if(C.add(k),k.disabled=T.readOnly,k.type="radio",k.name=T.fieldName,H&&k.setAttribute("checked",!0),k.setAttribute("id",I),k.tabIndex=1e3,k.addEventListener("change",X=>{const{name:fe,checked:Se}=X.target;for(const Me of this._getElementsByName(fe,I))v.setValue(Me.id,{value:!1});v.setValue(I,{value:Se})}),k.addEventListener("resetform",X=>{const fe=T.defaultFieldValue;X.target.checked=null!=fe&&fe===T.buttonValue}),this.enableScripting&&this.hasJSActions){const X=T.buttonValue;k.addEventListener("updatefromsandbox",fe=>{this._dispatchEventFromSandbox({value:Me=>{const Ee=X===Me.detail.value;for(const Le of this._getElementsByName(Me.target.name)){const je=Ee&&Le.id===I;Le.domElement&&(Le.domElement.checked=je),v.setValue(Le.id,{value:je})}}},fe)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fe=>fe.target.checked)}return this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.appendChild(k),this.container}}class F extends L{constructor(v){super(v,{ignoreBorder:v.data.hasAppearance})}render(){const v=super.render();return v.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(v.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(v),v}}class U extends S{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const v=this.annotationStorage,T=this.data.id,I=v.getValue(T,{value:this.data.fieldValue});let{fontSize:H}=this.data.defaultAppearanceData;H||(H=9);const k=`calc(${H}px * var(--zoom-factor))`,X=document.createElement("select");C.add(X),X.disabled=this.data.readOnly,X.name=this.data.fieldName,X.setAttribute("id",T),X.tabIndex=1e3,X.style.fontSize=`${H}px`,this.data.combo||(X.size=this.data.options.length,this.data.multiSelect&&(X.multiple=!0)),X.addEventListener("resetform",Me=>{const Ee=this.data.defaultFieldValue;for(const Le of X.options)Le.selected=Le.value===Ee});for(const Me of this.data.options){const Ee=document.createElement("option");Ee.textContent=Me.displayValue,Ee.value=Me.exportValue,this.data.combo&&(Ee.style.fontSize=k),I.value.includes(Me.exportValue)&&Ee.setAttribute("selected",!0),X.appendChild(Ee)}const fe=(Me,Ee)=>{const Le=Ee?"value":"textContent",je=Me.target.options;return Me.target.multiple?Array.prototype.filter.call(je,ft=>ft.selected).map(ft=>ft[Le]):-1===je.selectedIndex?null:je[je.selectedIndex][Le]},Se=Me=>Array.prototype.map.call(Me.target.options,Le=>({displayValue:Le.textContent,exportValue:Le.value}));return this.enableScripting&&this.hasJSActions?(X.addEventListener("updatefromsandbox",Me=>{this._dispatchEventFromSandbox({value(Le){const je=Le.detail.value,ft=new Set(Array.isArray(je)?je:[je]);for(const Pt of X.options)Pt.selected=ft.has(Pt.value);v.setValue(T,{value:fe(Le,!0)})},multipleSelection(Le){X.multiple=!0},remove(Le){const je=X.options,ft=Le.detail.remove;je[ft].selected=!1,X.remove(ft),je.length>0&&-1===Array.prototype.findIndex.call(je,$e=>$e.selected)&&(je[0].selected=!0),v.setValue(T,{value:fe(Le,!0),items:Se(Le)})},clear(Le){for(;0!==X.length;)X.remove(0);v.setValue(T,{value:null,items:[]})},insert(Le){const{index:je,displayValue:ft,exportValue:Pt}=Le.detail.insert,$e=document.createElement("option");$e.textContent=ft,$e.value=Pt,X.insertBefore($e,X.children[je]),v.setValue(T,{value:fe(Le,!0),items:Se(Le)})},items(Le){const{items:je}=Le.detail;for(;0!==X.length;)X.remove(0);for(const ft of je){const{displayValue:Pt,exportValue:$e}=ft,Ze=document.createElement("option");Ze.textContent=Pt,Ze.value=$e,X.appendChild(Ze)}X.options.length>0&&(X.options[0].selected=!0),v.setValue(T,{value:fe(Le,!0),items:Se(Le)})},indices(Le){const je=new Set(Le.detail.indices);for(const ft of Le.target.options)ft.selected=je.has(ft.index);v.setValue(T,{value:fe(Le,!0)})},editable(Le){Le.target.disabled=!Le.detail.editable}},Me)}),X.addEventListener("input",Me=>{var je;const Ee=fe(Me,!0),Le=fe(Me,!1);v.setValue(T,{value:Ee}),null==(je=this.linkService.eventBus)||je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Le,changeEx:Ee,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(X,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],Me=>Me.target.checked)):X.addEventListener("input",function(Me){v.setValue(T,{value:fe(Me,!0)})}),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.appendChild(X),this.container}}class y extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!((null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str))})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const I=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===I.length)return this.container;const H=new x({container:this.container,trigger:Array.from(I),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),k=this.page,X=N.Util.normalizeRect([this.data.parentRect[0],k.view[3]-this.data.parentRect[1]+k.view[1],this.data.parentRect[2],k.view[3]-this.data.parentRect[3]+k.view[1]]),fe=X[0]+this.data.parentRect[2]-this.data.parentRect[0],Se=X[1];return this.container.style.transformOrigin=`${-fe}px ${-Se}px`,this.container.style.left=`${fe}px`,this.container.style.top=`${Se}px`,this.container.appendChild(H.render()),this.container}}class x{constructor(v){this.container=v.container,this.trigger=v.trigger,this.color=v.color,this.titleObj=v.titleObj,this.modificationDate=v.modificationDate,this.contentsObj=v.contentsObj,this.richText=v.richText,this.hideWrapper=v.hideWrapper||!1,this.pinned=!1}render(){var fe,Se;const T=document.createElement("div");T.className="popupWrapper",this.hideElement=this.hideWrapper?T:this.container,this.hideElement.hidden=!0;const I=document.createElement("div");I.className="popup";const H=this.color;H&&(I.style.backgroundColor=N.Util.makeHexColor(0|.7*(255-H[0])+H[0],0|.7*(255-H[1])+H[1],0|.7*(255-H[2])+H[2]));const k=document.createElement("h1");k.dir=this.titleObj.dir,k.textContent=this.titleObj.str,I.appendChild(k);const X=He.PDFDateString.toDateObject(this.modificationDate);if(X){const Me=document.createElement("span");Me.className="popupDate",Me.textContent="{{date}}, {{time}}",Me.dataset.l10nId="annotation_date_string",Me.dataset.l10nArgs=JSON.stringify({date:X.toLocaleDateString(),time:X.toLocaleTimeString()}),I.appendChild(Me)}if(!(null==(fe=this.richText)?void 0:fe.str)||(null==(Se=this.contentsObj)?void 0:Se.str)&&this.contentsObj.str!==this.richText.str){const Me=this._formatContents(this.contentsObj);I.appendChild(Me)}else ge.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:I}),I.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Me of this.trigger)Me.addEventListener("click",this._toggle.bind(this)),Me.addEventListener("mouseover",this._show.bind(this,!1)),Me.addEventListener("mouseout",this._hide.bind(this,!1));return I.addEventListener("click",this._hide.bind(this,!0)),T.appendChild(I),T}_formatContents({str:v,dir:T}){const I=document.createElement("p");I.className="popupContent",I.dir=T;const H=v.split(/(?:\r\n?|\n)/);for(let k=0,X=H.length;k<X;++k)I.appendChild(document.createTextNode(H[k])),k<X-1&&I.appendChild(document.createElement("br"));return I}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(v=!1){v&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(v=!0){v&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class G extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class j extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const v=this.data,{width:T,height:I}=Y(v.rect),H=this.svgFactory.create(T,I),k=this.svgFactory.createElement("svg:line");return k.setAttribute("x1",v.rect[2]-v.lineCoordinates[0]),k.setAttribute("y1",v.rect[3]-v.lineCoordinates[1]),k.setAttribute("x2",v.rect[2]-v.lineCoordinates[2]),k.setAttribute("y2",v.rect[3]-v.lineCoordinates[3]),k.setAttribute("stroke-width",v.borderStyle.width||1),k.setAttribute("stroke","transparent"),k.setAttribute("fill","transparent"),H.appendChild(k),this.container.append(H),this._createPopup(k,v),this.container}}class $ extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const v=this.data,{width:T,height:I}=Y(v.rect),H=this.svgFactory.create(T,I),k=v.borderStyle.width,X=this.svgFactory.createElement("svg:rect");return X.setAttribute("x",k/2),X.setAttribute("y",k/2),X.setAttribute("width",T-k),X.setAttribute("height",I-k),X.setAttribute("stroke-width",k||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),H.appendChild(X),this.container.append(H),this._createPopup(X,v),this.container}}class te extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const v=this.data,{width:T,height:I}=Y(v.rect),H=this.svgFactory.create(T,I),k=v.borderStyle.width,X=this.svgFactory.createElement("svg:ellipse");return X.setAttribute("cx",T/2),X.setAttribute("cy",I/2),X.setAttribute("rx",T/2-k/2),X.setAttribute("ry",I/2-k/2),X.setAttribute("stroke-width",k||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),H.appendChild(X),this.container.append(H),this._createPopup(X,v),this.container}}class ie extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const v=this.data,{width:T,height:I}=Y(v.rect),H=this.svgFactory.create(T,I);let k=[];for(const fe of v.vertices)k.push(fe.x-v.rect[0]+","+(v.rect[3]-fe.y));k=k.join(" ");const X=this.svgFactory.createElement(this.svgElementName);return X.setAttribute("points",k),X.setAttribute("stroke-width",v.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),H.appendChild(X),this.container.append(H),this._createPopup(X,v),this.container}}class ae extends ie{constructor(v){super(v),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _e extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Te extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const v=this.data,{width:T,height:I}=Y(v.rect),H=this.svgFactory.create(T,I);for(const k of v.inkLists){let X=[];for(const Se of k)X.push(`${Se.x-v.rect[0]},${v.rect[3]-Se.y}`);X=X.join(" ");const fe=this.svgFactory.createElement(this.svgElementName);fe.setAttribute("points",X),fe.setAttribute("stroke-width",v.borderStyle.width||1),fe.setAttribute("stroke","transparent"),fe.setAttribute("fill","transparent"),this._createPopup(fe,v),H.appendChild(fe)}return this.container.append(H),this.container}}class Oe extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Pe extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class ye extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Ie extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Be extends z{constructor(v){var I,H,k;super(v,{isRenderable:!!(v.data.hasPopup||(null==(I=v.data.titleObj)?void 0:I.str)||(null==(H=v.data.contentsObj)?void 0:H.str)||(null==(k=v.data.richText)?void 0:k.str)),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class we extends z{constructor(v){var H;super(v,{isRenderable:!0});const{filename:T,content:I}=this.data.file;this.filename=(0,He.getFilenameFromUrl)(T),this.content=I,null==(H=this.linkService.eventBus)||H.dispatch("fileattachmentannotation",{source:this,filename:T,content:I})}render(){var T,I;this.container.className="fileAttachmentAnnotation";const v=document.createElement("div");return v.style.height=this.container.style.height,v.style.width=this.container.style.width,v.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((null==(T=this.data.titleObj)?void 0:T.str)||(null==(I=this.data.contentsObj)?void 0:I.str)||this.data.richText)&&this._createPopup(v,this.data),this.container.appendChild(v),this.container}_download(){var v;null==(v=this.downloadManager)||v.openOrDownloadData(this.container,this.content,this.filename)}}class De{static render(v){const T=[],I=[];for(const k of v.annotations){if(!k)continue;const{width:X,height:fe}=Y(k.rect);if(!(X<=0||fe<=0)){if(k.annotationType===N.AnnotationType.POPUP){I.push(k);continue}T.push(k)}}I.length&&T.push(...I);const H=v.div;for(const k of T){const X=V.create({data:k,layer:H,page:v.page,viewport:v.viewport,linkService:v.linkService,downloadManager:v.downloadManager,imageResourcesPath:v.imageResourcesPath||"",renderForms:!1!==v.renderForms,svgFactory:new He.DOMSVGFactory,annotationStorage:v.annotationStorage||new Ae.AnnotationStorage,enableScripting:v.enableScripting,hasJSActions:v.hasJSActions,fieldObjects:v.fieldObjects,mouseState:v.mouseState||{isDown:!1}});if(X.isRenderable){const fe=X.render();if(k.hidden&&(fe.style.visibility="hidden"),Array.isArray(fe))for(const Se of fe)H.appendChild(Se);else X instanceof y?H.prepend(fe):H.appendChild(fe)}}tn(this,Q,mB).call(this,H,v.annotationCanvasMap)}static update(v){const{page:T,viewport:I,annotations:H,annotationCanvasMap:k,div:X}=v,fe=I.transform,Se=`matrix(${fe.join(",")})`;let Me,Ee;for(const Le of H){const je=X.querySelectorAll(`[data-annotation-id="${Le.id}"]`);if(je)for(const ft of je)if(Le.hasOwnCanvas){const Pt=N.Util.normalizeRect([Le.rect[0],T.view[3]-Le.rect[1]+T.view[1],Le.rect[2],T.view[3]-Le.rect[3]+T.view[1]]);if(!Ee){Me=Math.abs(fe[0]||fe[1]);const Qe=fe.slice();for(let K=0;K<4;K++)Qe[K]=Math.sign(Qe[K]);Ee=`matrix(${Qe.join(",")})`}const $e=Pt[0]*Me,Ze=Pt[1]*Me;ft.style.left=`${$e}px`,ft.style.top=`${Ze}px`,ft.style.transformOrigin=`${-$e}px ${-Ze}px`,ft.style.transform=Ee}else ft.style.transform=Se}tn(this,Q,mB).call(this,X,k),X.hidden=!1}}Q=new WeakSet,mB=function(v,T){if(T){for(const[I,H]of T){const k=v.querySelector(`[data-annotation-id="${I}"]`);if(!k)continue;const{firstChild:X}=k;"CANVAS"===X.nodeName?k.replaceChild(H,X):k.insertBefore(H,X)}T.clear()}},ln(De,Q),J.AnnotationLayer=De},(Ke,J)=>{function Re(He){return Math.floor(255*Math.max(0,Math.min(1,He))).toString(16).padStart(2,"0")}Object.defineProperty(J,"__esModule",{value:!0}),J.ColorConverters=void 0,J.ColorConverters=class N{static CMYK_G([Ae,be,ge,ne]){return["G",1-Math.min(1,.3*Ae+.59*ge+.11*be+ne)]}static G_CMYK([Ae]){return["CMYK",0,0,0,1-Ae]}static G_RGB([Ae]){return["RGB",Ae,Ae,Ae]}static G_HTML([Ae]){const be=Re(Ae);return`#${be}${be}${be}`}static RGB_G([Ae,be,ge]){return["G",.3*Ae+.59*be+.11*ge]}static RGB_HTML([Ae,be,ge]){return`#${Re(Ae)}${Re(be)}${Re(ge)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([Ae,be,ge,ne]){return["RGB",1-Math.min(1,Ae+ne),1-Math.min(1,ge+ne),1-Math.min(1,be+ne)]}static CMYK_HTML(Ae){return this.RGB_HTML(this.CMYK_RGB(Ae))}static RGB_CMYK([Ae,be,ge]){const ne=1-Ae,C=1-be,Y=1-ge;return["CMYK",ne,C,Y,Math.min(ne,C,Y)]}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.XfaLayer=void 0;var N=Re(18);J.XfaLayer=class He{static setupStorage(be,ge,ne,C,Y){const V=C.getValue(ge,{value:null});switch(ne.name){case"textarea":if(null!==V.value&&(be.textContent=V.value),"print"===Y)break;be.addEventListener("input",z=>{C.setValue(ge,{value:z.target.value})});break;case"input":if("radio"===ne.attributes.type||"checkbox"===ne.attributes.type){if(V.value===ne.attributes.xfaOn?be.setAttribute("checked",!0):V.value===ne.attributes.xfaOff&&be.removeAttribute("checked"),"print"===Y)break;be.addEventListener("change",z=>{C.setValue(ge,{value:z.target.getAttribute(z.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==V.value&&be.setAttribute("value",V.value),"print"===Y)break;be.addEventListener("input",z=>{C.setValue(ge,{value:z.target.value})})}break;case"select":if(null!==V.value)for(const z of ne.children)z.attributes.value===V.value&&(z.attributes.selected=!0);be.addEventListener("input",z=>{const L=z.target.options;C.setValue(ge,{value:-1===L.selectedIndex?"":L[L.selectedIndex].value})})}}static setAttributes({html:be,element:ge,storage:ne=null,intent:C,linkService:Y}){const{attributes:V}=ge,z=be instanceof HTMLAnchorElement;"radio"===V.type&&(V.name=`${V.name}-${C}`);for(const[L,A]of Object.entries(V))if(null!=A&&"dataId"!==L)if("style"!==L)if("textContent"===L)be.textContent=A;else if("class"===L)A.length&&be.setAttribute(L,A.join(" "));else{if(z&&("href"===L||"newWindow"===L))continue;be.setAttribute(L,A)}else Object.assign(be.style,A);z&&Y.addLinkAttributes(be,V.href,V.newWindow),ne&&V.dataId&&this.setupStorage(be,V.dataId,ge,ne)}static render(be){var S;const ge=be.annotationStorage,ne=be.linkService,C=be.xfaHtml,Y=be.intent||"display",V=document.createElement(C.name);C.attributes&&this.setAttributes({html:V,element:C,intent:Y,linkService:ne});const z=[[C,-1,V]],L=be.div;if(L.appendChild(V),be.viewport){const b=`matrix(${be.viewport.transform.join(",")})`;L.style.transform=b}"richText"!==Y&&L.setAttribute("class","xfaLayer xfaFont");const A=[];for(;z.length>0;){const[b,P,W]=z[z.length-1];if(P+1===b.children.length){z.pop();continue}const F=b.children[++z[z.length-1][1]];if(null===F)continue;const{name:U}=F;if("#text"===U){const x=document.createTextNode(F.value);A.push(x),W.appendChild(x);continue}let y;if(y=(null==(S=null==F?void 0:F.attributes)?void 0:S.xmlns)?document.createElementNS(F.attributes.xmlns,U):document.createElement(U),W.appendChild(y),F.attributes&&this.setAttributes({html:y,element:F,storage:ge,intent:Y,linkService:ne}),F.children&&F.children.length>0)z.push([F,-1,y]);else if(F.value){const x=document.createTextNode(F.value);N.XfaText.shouldBuildText(U)&&A.push(x),y.appendChild(x)}}for(const b of L.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:A}}static update(be){const ge=`matrix(${be.viewport.transform.join(",")})`;be.div.style.transform=ge,be.div.hidden=!1}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.renderTextLayer=function P(W){const F=new b({textContent:W.textContent,textContentStream:W.textContentStream,container:W.container,viewport:W.viewport,textDivs:W.textDivs,textContentItemsStr:W.textContentItemsStr,enhanceTextSelection:W.enhanceTextSelection});return F._render(W.timeout),F};var N=Re(1);const ge=new Map,ne=/^\s+$/g;function Y(W,F,U,y){const x=document.createElement("span"),G=W._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==F.str,hasEOL:F.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==F.str,hasEOL:F.hasEOL};W._textDivs.push(x);const j=N.Util.transform(W._viewport.transform,F.transform);let $=Math.atan2(j[1],j[0]);const te=U[F.fontName];te.vertical&&($+=Math.PI/2);const ie=Math.hypot(j[2],j[3]),ae=ie*function C(W,F){const U=ge.get(W);if(U)return U;F.save(),F.font=`30px ${W}`;const y=F.measureText("");let x=y.fontBoundingBoxAscent,G=Math.abs(y.fontBoundingBoxDescent);if(x){F.restore();const $=x/(x+G);return ge.set(W,$),$}F.strokeStyle="red",F.clearRect(0,0,30,30),F.strokeText("g",0,0);let j=F.getImageData(0,0,30,30).data;G=0;for(let $=j.length-1-3;$>=0;$-=4)if(j[$]>0){G=Math.ceil($/4/30);break}F.clearRect(0,0,30,30),F.strokeText("A",0,30),j=F.getImageData(0,0,30,30).data,x=0;for(let $=0,te=j.length;$<te;$+=4)if(j[$]>0){x=30-Math.floor($/4/30);break}if(F.restore(),x){const $=x/(x+G);return ge.set(W,$),$}return ge.set(W,.8),.8}(te.fontFamily,y);let _e,Te;0===$?(_e=j[4],Te=j[5]-ae):(_e=j[4]+ae*Math.sin($),Te=j[5]-ae*Math.cos($)),x.style.left=`${_e}px`,x.style.top=`${Te}px`,x.style.fontSize=`${ie}px`,x.style.fontFamily=te.fontFamily,x.setAttribute("role","presentation"),x.textContent=F.str,x.dir=F.dir,W._fontInspectorEnabled&&(x.dataset.fontName=F.fontName),0!==$&&(G.angle=$*(180/Math.PI));let Oe=!1;if(F.str.length>1||W._enhanceTextSelection&&ne.test(F.str))Oe=!0;else if(" "!==F.str&&F.transform[0]!==F.transform[3]){const Pe=Math.abs(F.transform[0]),ye=Math.abs(F.transform[3]);Pe!==ye&&Math.max(Pe,ye)/Math.min(Pe,ye)>1.5&&(Oe=!0)}if(Oe&&(G.canvasWidth=te.vertical?F.height*W._viewport.scale:F.width*W._viewport.scale),W._textDivProperties.set(x,G),W._textContentStream&&W._layoutText(x),W._enhanceTextSelection&&G.hasText){let Pe=1,ye=0;0!==$&&(Pe=Math.cos($),ye=Math.sin($));const Ie=(te.vertical?F.height:F.width)*W._viewport.scale,Be=ie;let we,De;0!==$?(we=[Pe,ye,-ye,Pe,_e,Te],De=N.Util.getAxialAlignedBoundingBox([0,0,Ie,Be],we)):De=[_e,Te,_e+Ie,Te+Be],W._bounds.push({left:De[0],top:De[1],right:De[2],bottom:De[3],div:x,size:[Ie,Be],m:we})}}function V(W){if(W._canceled)return;const F=W._textDivs,U=W._capability,y=F.length;if(y>1e5)return W._renderingDone=!0,void U.resolve();if(!W._textContentStream)for(let x=0;x<y;x++)W._layoutText(F[x]);W._renderingDone=!0,U.resolve()}function z(W,F,U){let y=0;for(let x=0;x<U;x++){const G=W[F++];G>0&&(y=y?Math.min(G,y):G)}return y}function S(W,F){F.sort(function(x,G){return x.x1-G.x1||x.index-G.index});const y=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const x of F){let G=0;for(;G<y.length&&y[G].end<=x.y1;)G++;let j=y.length-1;for(;j>=0&&y[j].start>=x.y2;)j--;let $,te,ie,ae,_e=-1/0;for(ie=G;ie<=j;ie++){let Pe;$=y[ie],te=$.boundary,Pe=te.x2>x.x1?te.index>x.index?te.x1New:x.x1:void 0===te.x2New?(te.x2+x.x1)/2:te.x2New,Pe>_e&&(_e=Pe)}for(x.x1New=_e,ie=G;ie<=j;ie++)$=y[ie],te=$.boundary,void 0===te.x2New?te.x2>x.x1?te.index>x.index&&(te.x2New=te.x2):te.x2New=_e:te.x2New>_e&&(te.x2New=Math.max(_e,te.x2));const Te=[];let Oe=null;for(ie=G;ie<=j;ie++){$=y[ie],te=$.boundary;const Pe=te.x2>x.x2?te:x;Oe===Pe?Te[Te.length-1].end=$.end:(Te.push({start:$.start,end:$.end,boundary:Pe}),Oe=Pe)}for(y[G].start<x.y1&&(Te[0].start=x.y1,Te.unshift({start:y[G].start,end:x.y1,boundary:y[G].boundary})),x.y2<y[j].end&&(Te[Te.length-1].end=x.y2,Te.push({start:x.y2,end:y[j].end,boundary:y[j].boundary})),ie=G;ie<=j;ie++){if($=y[ie],te=$.boundary,void 0!==te.x2New)continue;let Pe=!1;for(ae=G-1;!Pe&&ae>=0&&y[ae].start>=te.y1;ae--)Pe=y[ae].boundary===te;for(ae=j+1;!Pe&&ae<y.length&&y[ae].end<=te.y2;ae++)Pe=y[ae].boundary===te;for(ae=0;!Pe&&ae<Te.length;ae++)Pe=Te[ae].boundary===te;Pe||(te.x2New=_e)}Array.prototype.splice.apply(y,[G,j-G+1].concat(Te))}for(const x of y){const G=x.boundary;void 0===G.x2New&&(G.x2New=Math.max(W,G.x2))}}class b{constructor({textContent:F,textContentStream:U,container:y,viewport:x,textDivs:G,textContentItemsStr:j,enhanceTextSelection:$}){var te;this._textContent=F,this._textContentStream=U,this._container=y,this._document=y.ownerDocument,this._viewport=x,this._textDivs=G||[],this._textContentItemsStr=j||[],this._enhanceTextSelection=!!$,this._fontInspectorEnabled=!!(null==(te=globalThis.FontInspector)?void 0:te.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,N.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new N.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(F,U){for(let y=0,x=F.length;y<x;y++)if(void 0!==F[y].str)this._textContentItemsStr.push(F[y].str),Y(this,F[y],U,this._layoutTextCtx);else if("beginMarkedContentProps"===F[y].type||"beginMarkedContent"===F[y].type){const G=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==F[y].id&&this._container.setAttribute("id",`${F[y].id}`),G.appendChild(this._container)}else"endMarkedContent"===F[y].type&&(this._container=this._container.parentNode)}_layoutText(F){const U=this._textDivProperties.get(F);let y="";if(0!==U.canvasWidth&&U.hasText){const{fontSize:x,fontFamily:G}=F.style;(x!==this._layoutTextLastFontSize||G!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${x} ${G}`,this._layoutTextLastFontSize=x,this._layoutTextLastFontFamily=G);const{width:j}=this._layoutTextCtx.measureText(F.textContent);if(j>0){const $=U.canvasWidth/j;this._enhanceTextSelection&&(U.scale=$),y=`scaleX(${$})`}}if(0!==U.angle&&(y=`rotate(${U.angle}deg) ${y}`),y.length>0&&(this._enhanceTextSelection&&(U.originalTransform=y),F.style.transform=y),U.hasText&&this._container.appendChild(F),U.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this._container.appendChild(x)}}_render(F=0){const U=(0,N.createPromiseCapability)();let y=Object.create(null);const x=this._document.createElement("canvas");if(x.height=x.width=30,this._layoutTextCtx=x.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),U.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const G=()=>{this._reader.read().then(({value:j,done:$})=>{$?U.resolve():(Object.assign(y,j.styles),this._processItems(j.items,y),G())},U.reject)};this._reader=this._textContentStream.getReader(),G()}}U.promise.then(()=>{y=null,F?this._renderTimer=setTimeout(()=>{V(this),this._renderTimer=null},F):V(this)},this._capability.reject)}expandTextDivs(F=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function L(W){const F=W._bounds,U=W._viewport,y=function A(W,F,U){const y=U.map(function(G,j){return{x1:G.left,y1:G.top,x2:G.right,y2:G.bottom,index:j,x1New:void 0,x2New:void 0}});S(W,y);const x=new Array(U.length);for(const G of y)x[G.index]={left:G.x1New,top:0,right:G.x2New,bottom:0};U.map(function(G,j){const $=x[j],te=y[j];te.x1=G.top,te.y1=W-$.right,te.x2=G.bottom,te.y2=W-$.left,te.index=j,te.x1New=void 0,te.x2New=void 0}),S(F,y);for(const G of y){const j=G.index;x[j].top=G.x1New,x[j].bottom=G.x2New}return x}(U.width,U.height,F);for(let x=0;x<y.length;x++){const G=F[x].div,j=W._textDivProperties.get(G);if(0===j.angle){j.paddingLeft=F[x].left-y[x].left,j.paddingTop=F[x].top-y[x].top,j.paddingRight=y[x].right-F[x].right,j.paddingBottom=y[x].bottom-F[x].bottom,W._textDivProperties.set(G,j);continue}const $=y[x],te=F[x],ie=te.m,ae=ie[0],_e=ie[1],Te=[[0,0],[0,te.size[1]],[te.size[0],0],te.size],Oe=new Float64Array(64);for(let ye=0,Ie=Te.length;ye<Ie;ye++){const Be=N.Util.applyTransform(Te[ye],ie);Oe[ye+0]=ae&&($.left-Be[0])/ae,Oe[ye+4]=_e&&($.top-Be[1])/_e,Oe[ye+8]=ae&&($.right-Be[0])/ae,Oe[ye+12]=_e&&($.bottom-Be[1])/_e,Oe[ye+16]=_e&&($.left-Be[0])/-_e,Oe[ye+20]=ae&&($.top-Be[1])/ae,Oe[ye+24]=_e&&($.right-Be[0])/-_e,Oe[ye+28]=ae&&($.bottom-Be[1])/ae,Oe[ye+32]=ae&&($.left-Be[0])/-ae,Oe[ye+36]=_e&&($.top-Be[1])/-_e,Oe[ye+40]=ae&&($.right-Be[0])/-ae,Oe[ye+44]=_e&&($.bottom-Be[1])/-_e,Oe[ye+48]=_e&&($.left-Be[0])/_e,Oe[ye+52]=ae&&($.top-Be[1])/-ae,Oe[ye+56]=_e&&($.right-Be[0])/_e,Oe[ye+60]=ae&&($.bottom-Be[1])/-ae}const Pe=1+Math.min(Math.abs(ae),Math.abs(_e));j.paddingLeft=z(Oe,32,16)/Pe,j.paddingTop=z(Oe,48,16)/Pe,j.paddingRight=z(Oe,0,16)/Pe,j.paddingBottom=z(Oe,16,16)/Pe,W._textDivProperties.set(G,j)}}(this),this._bounds=null);const U=[],y=[];for(let x=0,G=this._textDivs.length;x<G;x++){const j=this._textDivs[x],$=this._textDivProperties.get(j);!$.hasText||(F?(U.length=0,y.length=0,$.originalTransform&&U.push($.originalTransform),$.paddingTop>0?(y.push(`${$.paddingTop}px`),U.push(`translateY(${-$.paddingTop}px)`)):y.push(0),y.push($.paddingRight>0?$.paddingRight/$.scale+"px":0),y.push($.paddingBottom>0?`${$.paddingBottom}px`:0),$.paddingLeft>0?(y.push($.paddingLeft/$.scale+"px"),U.push(`translateX(${-$.paddingLeft/$.scale}px)`)):y.push(0),j.style.padding=y.join(" "),U.length&&(j.style.transform=U.join(" "))):(j.style.padding=null,j.style.transform=$.originalTransform))}}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.SVGGraphics=void 0;var N=Re(1),He=Re(5),Ae=Re(3);let be=class{constructor(){(0,N.unreachable)("Not implemented: SVGGraphics")}};J.SVGGraphics=be;{let S=function(y){let x=[];const G=[];for(const j of y)"save"!==j.fn?"restore"===j.fn?x=G.pop():x.push(j):(x.push({fnId:92,fn:"group",items:[]}),G.push(x),x=x[x.length-1].items);return x},b=function(y){if(Number.isInteger(y))return y.toString();const x=y.toFixed(10);let G=x.length-1;if("0"!==x[G])return x;do{G--}while("0"===x[G]);return x.substring(0,"."===x[G]?G:G+1)},P=function(y){if(0===y[4]&&0===y[5]){if(0===y[1]&&0===y[2])return 1===y[0]&&1===y[3]?"":`scale(${b(y[0])} ${b(y[3])})`;if(y[0]===y[3]&&y[1]===-y[2]){const x=180*Math.acos(y[0])/Math.PI;return`rotate(${b(x)})`}}else if(1===y[0]&&0===y[1]&&0===y[2]&&1===y[3])return`translate(${b(y[4])} ${b(y[5])})`;return`matrix(${b(y[0])} ${b(y[1])} ${b(y[2])} ${b(y[3])} ${b(y[4])} ${b(y[5])})`};const ge={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ne="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/1999/xlink",Y=["butt","round","square"],V=["miter","round","bevel"],z=function(y,x="",G=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!G)return URL.createObjectURL(new Blob([y],{type:x}));const j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let $=`data:${x};base64,`;for(let te=0,ie=y.length;te<ie;te+=3){const ae=255&y[te],_e=255&y[te+1],Te=255&y[te+2];$+=j[ae>>2]+j[(3&ae)<<4|_e>>4]+j[te+1<ie?(15&_e)<<2|Te>>6:64]+j[te+2<ie?63&Te:64]}return $},L=function(){const y=new Uint8Array([137,80,78,71,13,10,26,10]),G=new Int32Array(256);for(let Te=0;Te<256;Te++){let Oe=Te;for(let Pe=0;Pe<8;Pe++)Oe=1&Oe?3988292384^Oe>>1&2147483647:Oe>>1&2147483647;G[Te]=Oe}function $(Te,Oe,Pe,ye){let Ie=ye;const Be=Oe.length;Pe[Ie]=Be>>24&255,Pe[Ie+1]=Be>>16&255,Pe[Ie+2]=Be>>8&255,Pe[Ie+3]=255&Be,Ie+=4,Pe[Ie]=255&Te.charCodeAt(0),Pe[Ie+1]=255&Te.charCodeAt(1),Pe[Ie+2]=255&Te.charCodeAt(2),Pe[Ie+3]=255&Te.charCodeAt(3),Ie+=4,Pe.set(Oe,Ie),Ie+=Oe.length;const we=function j(Te,Oe,Pe){let ye=-1;for(let Ie=Oe;Ie<Pe;Ie++)ye=ye>>>8^G[255&(ye^Te[Ie])];return-1^ye}(Pe,ye+4,Ie);Pe[Ie]=we>>24&255,Pe[Ie+1]=we>>16&255,Pe[Ie+2]=we>>8&255,Pe[Ie+3]=255&we}function ae(Te){let Oe=Te.length;const Pe=65535,ye=Math.ceil(Oe/Pe),Ie=new Uint8Array(2+Oe+5*ye+4);let Be=0;Ie[Be++]=120,Ie[Be++]=156;let we=0;for(;Oe>Pe;)Ie[Be++]=0,Ie[Be++]=255,Ie[Be++]=255,Ie[Be++]=0,Ie[Be++]=0,Ie.set(Te.subarray(we,we+Pe),Be),Be+=Pe,we+=Pe,Oe-=Pe;Ie[Be++]=1,Ie[Be++]=255&Oe,Ie[Be++]=Oe>>8&255,Ie[Be++]=255&~Oe,Ie[Be++]=(65535&~Oe)>>8&255,Ie.set(Te.subarray(we),Be),Be+=Te.length-we;const De=function te(Te,Oe,Pe){let ye=1,Ie=0;for(let Be=Oe;Be<Pe;++Be)ye=(ye+(255&Te[Be]))%65521,Ie=(Ie+ye)%65521;return Ie<<16|ye}(Te,0,Te.length);return Ie[Be++]=De>>24&255,Ie[Be++]=De>>16&255,Ie[Be++]=De>>8&255,Ie[Be++]=255&De,Ie}return function(Oe,Pe,ye){return function _e(Te,Oe,Pe,ye){const Ie=Te.width,Be=Te.height;let we,De,Q;const E=Te.data;switch(Oe){case N.ImageKind.GRAYSCALE_1BPP:De=0,we=1,Q=Ie+7>>3;break;case N.ImageKind.RGB_24BPP:De=2,we=8,Q=3*Ie;break;case N.ImageKind.RGBA_32BPP:De=6,we=8,Q=4*Ie;break;default:throw new Error("invalid format")}const R=new Uint8Array((1+Q)*Be);let v=0,T=0;for(let Se=0;Se<Be;++Se)R[v++]=0,R.set(E.subarray(T,T+Q),v),T+=Q,v+=Q;if(Oe===N.ImageKind.GRAYSCALE_1BPP&&ye){v=0;for(let Se=0;Se<Be;Se++){v++;for(let Me=0;Me<Q;Me++)R[v++]^=255}}const I=new Uint8Array([Ie>>24&255,Ie>>16&255,Ie>>8&255,255&Ie,Be>>24&255,Be>>16&255,Be>>8&255,255&Be,we,De,0,0,0]),H=function ie(Te){if(!Ae.isNodeJS)return ae(Te);try{let Oe;Oe=parseInt(process.versions.node)>=8?Te:Buffer.from(Te);const Pe=__webpack_require__(258).deflateSync(Oe,{level:9});return Pe instanceof Uint8Array?Pe:new Uint8Array(Pe)}catch(Oe){(0,N.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Oe)}return ae(Te)}(R),X=new Uint8Array(y.length+36+I.length+H.length);let fe=0;return X.set(y,fe),fe+=y.length,$("IHDR",I,X,fe),fe+=12+I.length,$("IDATA",H,X,fe),fe+=12+H.length,$("IEND",new Uint8Array(0),X,fe),z(X,"image/png",Pe)}(Oe,void 0===Oe.kind?N.ImageKind.GRAYSCALE_1BPP:Oe.kind,Pe,ye)}}();class A{constructor(){this.fontSizeScale=1,this.fontWeight=ge.fontWeight,this.fontSize=0,this.textMatrix=N.IDENTITY_MATRIX,this.fontMatrix=N.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=N.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=ge.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,G){this.x=x,this.y=G}}let W=0,F=0,U=0;J.SVGGraphics=be=class{constructor(y,x,G=!1){this.svgFactory=new He.DOMSVGFactory,this.current=new A,this.transformMatrix=N.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=y,this.objs=x,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!G,this._operatorIdMapping=[];for(const j in N.OPS)this._operatorIdMapping[N.OPS[j]]=j}save(){this.transformStack.push(this.transformMatrix);const y=this.current;this.extraStack.push(y),this.current=y.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(y){this.save(),this.executeOpTree(y),this.restore()}loadDependencies(y){const x=y.fnArray,G=y.argsArray;for(let j=0,$=x.length;j<$;j++)if(x[j]===N.OPS.dependency)for(const te of G[j]){const ie=te.startsWith("g_")?this.commonObjs:this.objs,ae=new Promise(_e=>{ie.get(te,_e)});this.current.dependencies.push(ae)}return Promise.all(this.current.dependencies)}transform(y,x,G,j,$,te){this.transformMatrix=N.Util.transform(this.transformMatrix,[y,x,G,j,$,te]),this.tgrp=null}getSVG(y,x){this.viewport=x;const G=this._initialize(x);return this.loadDependencies(y).then(()=>(this.transformMatrix=N.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(y)),G))}convertOpList(y){const x=this._operatorIdMapping,G=y.argsArray,j=y.fnArray,$=[];for(let te=0,ie=j.length;te<ie;te++){const ae=j[te];$.push({fnId:ae,fn:x[ae],args:G[te]})}return S($)}executeOpTree(y){for(const x of y){const G=x.fn,$=x.args;switch(0|x.fnId){case N.OPS.beginText:this.beginText();break;case N.OPS.dependency:break;case N.OPS.setLeading:this.setLeading($);break;case N.OPS.setLeadingMoveText:this.setLeadingMoveText($[0],$[1]);break;case N.OPS.setFont:this.setFont($);break;case N.OPS.showText:case N.OPS.showSpacedText:this.showText($[0]);break;case N.OPS.endText:this.endText();break;case N.OPS.moveText:this.moveText($[0],$[1]);break;case N.OPS.setCharSpacing:this.setCharSpacing($[0]);break;case N.OPS.setWordSpacing:this.setWordSpacing($[0]);break;case N.OPS.setHScale:this.setHScale($[0]);break;case N.OPS.setTextMatrix:this.setTextMatrix($[0],$[1],$[2],$[3],$[4],$[5]);break;case N.OPS.setTextRise:this.setTextRise($[0]);break;case N.OPS.setTextRenderingMode:this.setTextRenderingMode($[0]);break;case N.OPS.setLineWidth:this.setLineWidth($[0]);break;case N.OPS.setLineJoin:this.setLineJoin($[0]);break;case N.OPS.setLineCap:this.setLineCap($[0]);break;case N.OPS.setMiterLimit:this.setMiterLimit($[0]);break;case N.OPS.setFillRGBColor:this.setFillRGBColor($[0],$[1],$[2]);break;case N.OPS.setStrokeRGBColor:this.setStrokeRGBColor($[0],$[1],$[2]);break;case N.OPS.setStrokeColorN:this.setStrokeColorN($);break;case N.OPS.setFillColorN:this.setFillColorN($);break;case N.OPS.shadingFill:this.shadingFill($[0]);break;case N.OPS.setDash:this.setDash($[0],$[1]);break;case N.OPS.setRenderingIntent:this.setRenderingIntent($[0]);break;case N.OPS.setFlatness:this.setFlatness($[0]);break;case N.OPS.setGState:this.setGState($[0]);break;case N.OPS.fill:this.fill();break;case N.OPS.eoFill:this.eoFill();break;case N.OPS.stroke:this.stroke();break;case N.OPS.fillStroke:this.fillStroke();break;case N.OPS.eoFillStroke:this.eoFillStroke();break;case N.OPS.clip:this.clip("nonzero");break;case N.OPS.eoClip:this.clip("evenodd");break;case N.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case N.OPS.paintImageXObject:this.paintImageXObject($[0]);break;case N.OPS.paintInlineImageXObject:this.paintInlineImageXObject($[0]);break;case N.OPS.paintImageMaskXObject:this.paintImageMaskXObject($[0]);break;case N.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin($[0],$[1]);break;case N.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case N.OPS.closePath:this.closePath();break;case N.OPS.closeStroke:this.closeStroke();break;case N.OPS.closeFillStroke:this.closeFillStroke();break;case N.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case N.OPS.nextLine:this.nextLine();break;case N.OPS.transform:this.transform($[0],$[1],$[2],$[3],$[4],$[5]);break;case N.OPS.constructPath:this.constructPath($[0],$[1]);break;case N.OPS.endPath:this.endPath();break;case 92:this.group(x.items);break;default:(0,N.warn)(`Unimplemented operator ${G}`)}}}setWordSpacing(y){this.current.wordSpacing=y}setCharSpacing(y){this.current.charSpacing=y}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(y,x,G,j,$,te){const ie=this.current;ie.textMatrix=ie.lineMatrix=[y,x,G,j,$,te],ie.textMatrixScale=Math.hypot(y,x),ie.x=ie.lineX=0,ie.y=ie.lineY=0,ie.xcoords=[],ie.ycoords=[],ie.tspan=this.svgFactory.createElement("svg:tspan"),ie.tspan.setAttributeNS(null,"font-family",ie.fontFamily),ie.tspan.setAttributeNS(null,"font-size",`${b(ie.fontSize)}px`),ie.tspan.setAttributeNS(null,"y",b(-ie.y)),ie.txtElement=this.svgFactory.createElement("svg:text"),ie.txtElement.appendChild(ie.tspan)}beginText(){const y=this.current;y.x=y.lineX=0,y.y=y.lineY=0,y.textMatrix=N.IDENTITY_MATRIX,y.lineMatrix=N.IDENTITY_MATRIX,y.textMatrixScale=1,y.tspan=this.svgFactory.createElement("svg:tspan"),y.txtElement=this.svgFactory.createElement("svg:text"),y.txtgrp=this.svgFactory.createElement("svg:g"),y.xcoords=[],y.ycoords=[]}moveText(y,x){const G=this.current;G.x=G.lineX+=y,G.y=G.lineY+=x,G.xcoords=[],G.ycoords=[],G.tspan=this.svgFactory.createElement("svg:tspan"),G.tspan.setAttributeNS(null,"font-family",G.fontFamily),G.tspan.setAttributeNS(null,"font-size",`${b(G.fontSize)}px`),G.tspan.setAttributeNS(null,"y",b(-G.y))}showText(y){const x=this.current,G=x.font,j=x.fontSize;if(0===j)return;const $=x.fontSizeScale,te=x.charSpacing,ie=x.wordSpacing,ae=x.fontDirection,_e=x.textHScale*ae,Te=G.vertical,Oe=Te?1:-1,Pe=G.defaultVMetrics,ye=j*x.fontMatrix[0];let Ie=0;for(const De of y){if(null===De){Ie+=ae*ie;continue}if("number"==typeof De){Ie+=Oe*De*j/1e3;continue}const Q=(De.isSpace?ie:0)+te,E=De.fontChar;let R,v,I,T=De.width;if(Te){let H;const k=De.vmetric||Pe;H=De.vmetric?k[1]:.5*T,H=-H*ye,T=k?-k[0]:T,R=H/$,v=(Ie+k[2]*ye)/$}else R=Ie/$,v=0;(De.isInFont||G.missingFile)&&(x.xcoords.push(x.x+R),Te&&x.ycoords.push(-x.y+v),x.tspan.textContent+=E),I=Te?T*ye-Q*ae:T*ye+Q*ae,Ie+=I}x.tspan.setAttributeNS(null,"x",x.xcoords.map(b).join(" ")),x.tspan.setAttributeNS(null,"y",Te?x.ycoords.map(b).join(" "):b(-x.y)),Te?x.y-=Ie:x.x+=Ie*_e,x.tspan.setAttributeNS(null,"font-family",x.fontFamily),x.tspan.setAttributeNS(null,"font-size",`${b(x.fontSize)}px`),x.fontStyle!==ge.fontStyle&&x.tspan.setAttributeNS(null,"font-style",x.fontStyle),x.fontWeight!==ge.fontWeight&&x.tspan.setAttributeNS(null,"font-weight",x.fontWeight);const Be=x.textRenderingMode&N.TextRenderingMode.FILL_STROKE_MASK;Be===N.TextRenderingMode.FILL||Be===N.TextRenderingMode.FILL_STROKE?(x.fillColor!==ge.fillColor&&x.tspan.setAttributeNS(null,"fill",x.fillColor),x.fillAlpha<1&&x.tspan.setAttributeNS(null,"fill-opacity",x.fillAlpha)):x.tspan.setAttributeNS(null,"fill",x.textRenderingMode===N.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(Be===N.TextRenderingMode.STROKE||Be===N.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(x.tspan,1/(x.textMatrixScale||1));let we=x.textMatrix;0!==x.textRise&&(we=we.slice(),we[5]+=x.textRise),x.txtElement.setAttributeNS(null,"transform",`${P(we)} scale(${b(_e)}, -1)`),x.txtElement.setAttributeNS(ne,"xml:space","preserve"),x.txtElement.appendChild(x.tspan),x.txtgrp.appendChild(x.txtElement),this._ensureTransformGroup().appendChild(x.txtElement)}setLeadingMoveText(y,x){this.setLeading(-x),this.moveText(y,x)}addFontStyle(y){if(!y.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const x=z(y.data,y.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${y.loadedName}"; src: url(${x}); }\n`}setFont(y){const x=this.current,G=this.commonObjs.get(y[0]);let j=y[1];x.font=G,this.embedFonts&&!G.missingFile&&!this.embeddedFonts[G.loadedName]&&(this.addFontStyle(G),this.embeddedFonts[G.loadedName]=G),x.fontMatrix=G.fontMatrix||N.FONT_IDENTITY_MATRIX;let $="normal";G.black?$="900":G.bold&&($="bold");const te=G.italic?"italic":"normal";j<0?(j=-j,x.fontDirection=-1):x.fontDirection=1,x.fontSize=j,x.fontFamily=G.loadedName,x.fontWeight=$,x.fontStyle=te,x.tspan=this.svgFactory.createElement("svg:tspan"),x.tspan.setAttributeNS(null,"y",b(-x.y)),x.xcoords=[],x.ycoords=[]}endText(){var x;const y=this.current;y.textRenderingMode&N.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(x=y.txtElement)?void 0:x.hasChildNodes())&&(y.element=y.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(y){y>0&&(this.current.lineWidth=y)}setLineCap(y){this.current.lineCap=Y[y]}setLineJoin(y){this.current.lineJoin=V[y]}setMiterLimit(y){this.current.miterLimit=y}setStrokeAlpha(y){this.current.strokeAlpha=y}setStrokeRGBColor(y,x,G){this.current.strokeColor=N.Util.makeHexColor(y,x,G)}setFillAlpha(y){this.current.fillAlpha=y}setFillRGBColor(y,x,G){this.current.fillColor=N.Util.makeHexColor(y,x,G),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(y){this.current.strokeColor=this._makeColorN_Pattern(y)}setFillColorN(y){this.current.fillColor=this._makeColorN_Pattern(y)}shadingFill(y){const x=this.viewport.width,G=this.viewport.height,j=N.Util.inverseTransform(this.transformMatrix),$=N.Util.applyTransform([0,0],j),te=N.Util.applyTransform([0,G],j),ie=N.Util.applyTransform([x,0],j),ae=N.Util.applyTransform([x,G],j),_e=Math.min($[0],te[0],ie[0],ae[0]),Te=Math.min($[1],te[1],ie[1],ae[1]),Oe=Math.max($[0],te[0],ie[0],ae[0]),Pe=Math.max($[1],te[1],ie[1],ae[1]),ye=this.svgFactory.createElement("svg:rect");ye.setAttributeNS(null,"x",_e),ye.setAttributeNS(null,"y",Te),ye.setAttributeNS(null,"width",Oe-_e),ye.setAttributeNS(null,"height",Pe-Te),ye.setAttributeNS(null,"fill",this._makeShadingPattern(y)),this.current.fillAlpha<1&&ye.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(ye)}_makeColorN_Pattern(y){return"TilingPattern"===y[0]?this._makeTilingPattern(y):this._makeShadingPattern(y)}_makeTilingPattern(y){const x=y[1],G=y[2],j=y[3]||N.IDENTITY_MATRIX,[$,te,ie,ae]=y[4],_e=y[5],Te=y[6],Oe=y[7],Pe="shading"+U++,[ye,Ie,Be,we]=N.Util.normalizeRect([...N.Util.applyTransform([$,te],j),...N.Util.applyTransform([ie,ae],j)]),[De,Q]=N.Util.singularValueDecompose2dScale(j),E=_e*De,R=Te*Q,v=this.svgFactory.createElement("svg:pattern");v.setAttributeNS(null,"id",Pe),v.setAttributeNS(null,"patternUnits","userSpaceOnUse"),v.setAttributeNS(null,"width",E),v.setAttributeNS(null,"height",R),v.setAttributeNS(null,"x",`${ye}`),v.setAttributeNS(null,"y",`${Ie}`);const T=this.svg,I=this.transformMatrix,H=this.current.fillColor,k=this.current.strokeColor,X=this.svgFactory.create(Be-ye,we-Ie);if(this.svg=X,this.transformMatrix=j,2===Oe){const fe=N.Util.makeHexColor(...x);this.current.fillColor=fe,this.current.strokeColor=fe}return this.executeOpTree(this.convertOpList(G)),this.svg=T,this.transformMatrix=I,this.current.fillColor=H,this.current.strokeColor=k,v.appendChild(X.childNodes[0]),this.defs.appendChild(v),`url(#${Pe})`}_makeShadingPattern(y){switch("string"==typeof y&&(y=this.objs.get(y)),y[0]){case"RadialAxial":const x="shading"+U++,G=y[3];let j;switch(y[1]){case"axial":const $=y[4],te=y[5];j=this.svgFactory.createElement("svg:linearGradient"),j.setAttributeNS(null,"id",x),j.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),j.setAttributeNS(null,"x1",$[0]),j.setAttributeNS(null,"y1",$[1]),j.setAttributeNS(null,"x2",te[0]),j.setAttributeNS(null,"y2",te[1]);break;case"radial":const ie=y[4],ae=y[5],_e=y[6],Te=y[7];j=this.svgFactory.createElement("svg:radialGradient"),j.setAttributeNS(null,"id",x),j.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),j.setAttributeNS(null,"cx",ae[0]),j.setAttributeNS(null,"cy",ae[1]),j.setAttributeNS(null,"r",Te),j.setAttributeNS(null,"fx",ie[0]),j.setAttributeNS(null,"fy",ie[1]),j.setAttributeNS(null,"fr",_e);break;default:throw new Error(`Unknown RadialAxial type: ${y[1]}`)}for(const $ of G){const te=this.svgFactory.createElement("svg:stop");te.setAttributeNS(null,"offset",$[0]),te.setAttributeNS(null,"stop-color",$[1]),j.appendChild(te)}return this.defs.appendChild(j),`url(#${x})`;case"Mesh":return(0,N.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${y[0]}`)}}setDash(y,x){this.current.dashArray=y,this.current.dashPhase=x}constructPath(y,x){const G=this.current;let j=G.x,$=G.y,te=[],ie=0;for(const ae of y)switch(0|ae){case N.OPS.rectangle:j=x[ie++],$=x[ie++];const Oe=j+x[ie++],Pe=$+x[ie++];te.push("M",b(j),b($),"L",b(Oe),b($),"L",b(Oe),b(Pe),"L",b(j),b(Pe),"Z");break;case N.OPS.moveTo:j=x[ie++],$=x[ie++],te.push("M",b(j),b($));break;case N.OPS.lineTo:j=x[ie++],$=x[ie++],te.push("L",b(j),b($));break;case N.OPS.curveTo:j=x[ie+4],$=x[ie+5],te.push("C",b(x[ie]),b(x[ie+1]),b(x[ie+2]),b(x[ie+3]),b(j),b($)),ie+=6;break;case N.OPS.curveTo2:te.push("C",b(j),b($),b(x[ie]),b(x[ie+1]),b(x[ie+2]),b(x[ie+3])),j=x[ie+2],$=x[ie+3],ie+=4;break;case N.OPS.curveTo3:j=x[ie+2],$=x[ie+3],te.push("C",b(x[ie]),b(x[ie+1]),b(j),b($),b(j),b($)),ie+=4;break;case N.OPS.closePath:te.push("Z")}te=te.join(" "),G.path&&y.length>0&&y[0]!==N.OPS.rectangle&&y[0]!==N.OPS.moveTo?te=G.path.getAttributeNS(null,"d")+te:(G.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(G.path)),G.path.setAttributeNS(null,"d",te),G.path.setAttributeNS(null,"fill","none"),G.element=G.path,G.setCurrentPoint(j,$)}endPath(){const y=this.current;if(y.path=null,!this.pendingClip)return;if(!y.element)return void(this.pendingClip=null);const x="clippath"+W++,G=this.svgFactory.createElement("svg:clipPath");G.setAttributeNS(null,"id",x),G.setAttributeNS(null,"transform",P(this.transformMatrix));const j=y.element.cloneNode(!0);if(j.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,G.appendChild(j),this.defs.appendChild(G),y.activeClipUrl){y.clipGroup=null;for(const $ of this.extraStack)$.clipGroup=null;G.setAttributeNS(null,"clip-path",y.activeClipUrl)}y.activeClipUrl=`url(#${x})`,this.tgrp=null}clip(y){this.pendingClip=y}closePath(){const y=this.current;if(y.path){const x=`${y.path.getAttributeNS(null,"d")}Z`;y.path.setAttributeNS(null,"d",x)}}setLeading(y){this.current.leading=-y}setTextRise(y){this.current.textRise=y}setTextRenderingMode(y){this.current.textRenderingMode=y}setHScale(y){this.current.textHScale=y/100}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(const[x,G]of y)switch(x){case"LW":this.setLineWidth(G);break;case"LC":this.setLineCap(G);break;case"LJ":this.setLineJoin(G);break;case"ML":this.setMiterLimit(G);break;case"D":this.setDash(G[0],G[1]);break;case"RI":this.setRenderingIntent(G);break;case"FL":this.setFlatness(G);break;case"Font":this.setFont(G);break;case"CA":this.setStrokeAlpha(G);break;case"ca":this.setFillAlpha(G);break;default:(0,N.warn)(`Unimplemented graphic state operator ${x}`)}}fill(){const y=this.current;y.element&&(y.element.setAttributeNS(null,"fill",y.fillColor),y.element.setAttributeNS(null,"fill-opacity",y.fillAlpha),this.endPath())}stroke(){const y=this.current;y.element&&(this._setStrokeAttributes(y.element),y.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(y,x=1){const G=this.current;let j=G.dashArray;1!==x&&j.length>0&&(j=j.map(function($){return x*$})),y.setAttributeNS(null,"stroke",G.strokeColor),y.setAttributeNS(null,"stroke-opacity",G.strokeAlpha),y.setAttributeNS(null,"stroke-miterlimit",b(G.miterLimit)),y.setAttributeNS(null,"stroke-linecap",G.lineCap),y.setAttributeNS(null,"stroke-linejoin",G.lineJoin),y.setAttributeNS(null,"stroke-width",b(x*G.lineWidth)+"px"),y.setAttributeNS(null,"stroke-dasharray",j.map(b).join(" ")),y.setAttributeNS(null,"stroke-dashoffset",b(x*G.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x","0"),y.setAttributeNS(null,"y","0"),y.setAttributeNS(null,"width","1px"),y.setAttributeNS(null,"height","1px"),y.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(y)}paintImageXObject(y){const x=y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y);x?this.paintInlineImageXObject(x):(0,N.warn)(`Dependent image with object ID ${y} is not ready yet`)}paintInlineImageXObject(y,x){const G=y.width,j=y.height,$=L(y,this.forceDataSchema,!!x),te=this.svgFactory.createElement("svg:rect");te.setAttributeNS(null,"x","0"),te.setAttributeNS(null,"y","0"),te.setAttributeNS(null,"width",b(G)),te.setAttributeNS(null,"height",b(j)),this.current.element=te,this.clip("nonzero");const ie=this.svgFactory.createElement("svg:image");ie.setAttributeNS(C,"xlink:href",$),ie.setAttributeNS(null,"x","0"),ie.setAttributeNS(null,"y",b(-j)),ie.setAttributeNS(null,"width",b(G)+"px"),ie.setAttributeNS(null,"height",b(j)+"px"),ie.setAttributeNS(null,"transform",`scale(${b(1/G)} ${b(-1/j)})`),x?x.appendChild(ie):this._ensureTransformGroup().appendChild(ie)}paintImageMaskXObject(y){const x=this.current,G=y.width,j=y.height,$=x.fillColor;x.maskId="mask"+F++;const te=this.svgFactory.createElement("svg:mask");te.setAttributeNS(null,"id",x.maskId);const ie=this.svgFactory.createElement("svg:rect");ie.setAttributeNS(null,"x","0"),ie.setAttributeNS(null,"y","0"),ie.setAttributeNS(null,"width",b(G)),ie.setAttributeNS(null,"height",b(j)),ie.setAttributeNS(null,"fill",$),ie.setAttributeNS(null,"mask",`url(#${x.maskId})`),this.defs.appendChild(te),this._ensureTransformGroup().appendChild(ie),this.paintInlineImageXObject(y,te)}paintFormXObjectBegin(y,x){if(Array.isArray(y)&&6===y.length&&this.transform(y[0],y[1],y[2],y[3],y[4],y[5]),x){const G=x[2]-x[0],j=x[3]-x[1],$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",x[0]),$.setAttributeNS(null,"y",x[1]),$.setAttributeNS(null,"width",b(G)),$.setAttributeNS(null,"height",b(j)),this.current.element=$,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(y){const x=this.svgFactory.create(y.width,y.height),G=this.svgFactory.createElement("svg:defs");x.appendChild(G),this.defs=G;const j=this.svgFactory.createElement("svg:g");return j.setAttributeNS(null,"transform",P(y.transform)),x.appendChild(j),this.svg=j,x}_ensureClipGroup(){if(!this.current.clipGroup){const y=this.svgFactory.createElement("svg:g");y.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(y),this.current.clipGroup=y}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",P(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.PDFNodeStream=void 0;var N=Re(1),He=Re(26);const Ae=__webpack_require__(172),be=__webpack_require__(1),ge=__webpack_require__(779),ne=__webpack_require__(558),C=/^file:\/\/\/[a-zA-Z]:\//;J.PDFNodeStream=class V{constructor(U){this.source=U,this.url=function Y(F){const U=ne.parse(F);return"file:"===U.protocol||U.host?U:/^[a-z]:[/\\]/i.test(F)?ne.parse(`file:///${F}`):(U.host||(U.protocol="file:"),U)}(U.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&U.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var U,y;return null!=(y=null==(U=this._fullRequestReader)?void 0:U._loaded)?y:0}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new P(this):new S(this),this._fullRequestReader}getRangeReader(U,y){if(y<=this._progressiveDataLength)return null;const x=this.isFsUrl?new W(this,U,y):new b(this,U,y);return this._rangeRequestReaders.push(x),x}cancelAllRequests(U){this._fullRequestReader&&this._fullRequestReader.cancel(U);for(const y of this._rangeRequestReaders.slice(0))y.cancel(U)}};class z{constructor(U){this._url=U.url,this._done=!1,this._storedError=null,this.onProgress=null;const y=U.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=(0,N.createPromiseCapability)(),this._headersCapability=(0,N.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var U=this;return _asyncToGenerator(function*(){if(yield U._readCapability.promise,U._done)return{value:void 0,done:!0};if(U._storedError)throw U._storedError;const y=U._readableStream.read();return null===y?(U._readCapability=(0,N.createPromiseCapability)(),U.read()):(U._loaded+=y.length,U.onProgress&&U.onProgress({loaded:U._loaded,total:U._contentLength}),{value:new Uint8Array(y).buffer,done:!1})})()}cancel(U){this._readableStream?this._readableStream.destroy(U):this._error(U)}_error(U){this._storedError=U,this._readCapability.resolve()}_setReadableStream(U){this._readableStream=U,U.on("readable",()=>{this._readCapability.resolve()}),U.on("end",()=>{U.destroy(),this._done=!0,this._readCapability.resolve()}),U.on("error",y=>{this._error(y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new N.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class L{constructor(U){this._url=U.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,N.createPromiseCapability)(),this._isStreamingSupported=!U.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var U=this;return _asyncToGenerator(function*(){if(yield U._readCapability.promise,U._done)return{value:void 0,done:!0};if(U._storedError)throw U._storedError;const y=U._readableStream.read();return null===y?(U._readCapability=(0,N.createPromiseCapability)(),U.read()):(U._loaded+=y.length,U.onProgress&&U.onProgress({loaded:U._loaded}),{value:new Uint8Array(y).buffer,done:!1})})()}cancel(U){this._readableStream?this._readableStream.destroy(U):this._error(U)}_error(U){this._storedError=U,this._readCapability.resolve()}_setReadableStream(U){this._readableStream=U,U.on("readable",()=>{this._readCapability.resolve()}),U.on("end",()=>{U.destroy(),this._done=!0,this._readCapability.resolve()}),U.on("error",y=>{this._error(y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function A(F,U){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:U}}class S extends z{constructor(U){super(U);const y=x=>{if(404===x.statusCode){const te=new N.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=te,void this._headersCapability.reject(te)}this._headersCapability.resolve(),this._setReadableStream(x);const G=te=>this._readableStream.headers[te.toLowerCase()],{allowRangeRequests:j,suggestedLength:$}=(0,He.validateRangeRequestCapabilities)({getResponseHeader:G,isHttp:U.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=j,this._contentLength=$||this._contentLength,this._filename=(0,He.extractFilenameFromHeader)(G)};this._request=null,this._request="http:"===this._url.protocol?be.request(A(this._url,U.httpHeaders),y):ge.request(A(this._url,U.httpHeaders),y),this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class b extends L{constructor(U,y,x){super(U),this._httpHeaders={};for(const j in U.httpHeaders){const $=U.httpHeaders[j];void 0!==$&&(this._httpHeaders[j]=$)}this._httpHeaders.Range=`bytes=${y}-${x-1}`;const G=j=>{if(404!==j.statusCode)this._setReadableStream(j);else{const $=new N.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=$}};this._request=null,this._request="http:"===this._url.protocol?be.request(A(this._url,this._httpHeaders),G):ge.request(A(this._url,this._httpHeaders),G),this._request.on("error",j=>{this._storedError=j}),this._request.end()}}class P extends z{constructor(U){super(U);let y=decodeURIComponent(this._url.path);C.test(this._url.href)&&(y=y.replace(/^\//,"")),Ae.lstat(y,(x,G)=>{if(x)return"ENOENT"===x.code&&(x=new N.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=x,void this._headersCapability.reject(x);this._contentLength=G.size,this._setReadableStream(Ae.createReadStream(y)),this._headersCapability.resolve()})}}class W extends L{constructor(U,y,x){super(U);let G=decodeURIComponent(this._url.path);C.test(this._url.href)&&(G=G.replace(/^\//,"")),this._setReadableStream(Ae.createReadStream(G,{start:y,end:x-1}))}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.createResponseStatusError=function ne(Y,V){return 404===Y||0===Y&&V.startsWith("file:")?new N.MissingPDFException('Missing PDF "'+V+'".'):new N.UnexpectedResponseException(`Unexpected server response (${Y}) while retrieving PDF "${V}".`,Y)},J.extractFilenameFromHeader=function ge(Y){const V=Y("Content-Disposition");if(V){let z=(0,He.getFilenameFromContentDispositionHeader)(V);if(z.includes("%"))try{z=decodeURIComponent(z)}catch(L){}if((0,Ae.isPdfFile)(z))return z}return null},J.validateRangeRequestCapabilities=function be({getResponseHeader:Y,isHttp:V,rangeChunkSize:z,disableRange:L}){const A={allowRangeRequests:!1,suggestedLength:void 0},S=parseInt(Y("Content-Length"),10);return!Number.isInteger(S)||(A.suggestedLength=S,S<=2*z)||L||!V||"bytes"!==Y("Accept-Ranges")||"identity"!==(Y("Content-Encoding")||"identity")||(A.allowRangeRequests=!0),A},J.validateResponseStatus=function C(Y){return 200===Y||206===Y};var N=Re(1),He=Re(27),Ae=Re(5)},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.getFilenameFromContentDispositionHeader=function He(Ae){let be=!0,ge=ne("filename\\*","i").exec(Ae);if(ge){ge=ge[1];let S=z(ge);return S=unescape(S),S=L(S),S=A(S),Y(S)}if(ge=function V(S){const b=[];let P;const W=ne("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(P=W.exec(S));){let[,U,y,x]=P;if(U=parseInt(U,10),U in b){if(0===U)break}else b[U]=[y,x]}const F=[];for(let U=0;U<b.length&&U in b;++U){let[y,x]=b[U];x=z(x),y&&(x=unescape(x),0===U&&(x=L(x))),F.push(x)}return F.join("")}(Ae),ge)return Y(A(ge));if(ge=ne("filename","i").exec(Ae),ge){ge=ge[1];let S=z(ge);return S=A(S),Y(S)}function ne(S,b){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function C(S,b){if(S){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const P=new TextDecoder(S,{fatal:!0}),W=(0,N.stringToBytes)(b);b=P.decode(W),be=!1}catch(P){}}return b}function Y(S){return be&&/[\x80-\xff]/.test(S)&&(S=C("utf-8",S),be&&(S=C("iso-8859-1",S))),S}function z(S){if(S.startsWith('"')){const b=S.slice(1).split('\\"');for(let P=0;P<b.length;++P){const W=b[P].indexOf('"');-1!==W&&(b[P]=b[P].slice(0,W),b.length=P+1),b[P]=b[P].replace(/\\(.)/g,"$1")}S=b.join('"')}return S}function L(S){const b=S.indexOf("'");return-1===b?S:C(S.slice(0,b),S.slice(b+1).replace(/^[^']*'/,""))}function A(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,P,W,F){if("q"===W||"Q"===W)return C(P,F=(F=F.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(U,y){return String.fromCharCode(parseInt(y,16))}));try{F=atob(F)}catch(U){}return C(P,F)})}return""};var N=Re(1)},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.PDFNetworkStream=void 0;var N=Re(1),He=Re(26);class ne{constructor(L,A={}){this.url=L,this.isHttp=/^https?:/i.test(L),this.httpHeaders=this.isHttp&&A.httpHeaders||Object.create(null),this.withCredentials=A.withCredentials||!1,this.getXhr=A.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(L,A,S){const b={begin:L,end:A};for(const P in S)b[P]=S[P];return this.request(b)}requestFull(L){return this.request(L)}request(L){const A=this.getXhr(),S=this.currXhrId++,b=this.pendingRequests[S]={xhr:A};A.open("GET",this.url),A.withCredentials=this.withCredentials;for(const P in this.httpHeaders){const W=this.httpHeaders[P];void 0!==W&&A.setRequestHeader(P,W)}return this.isHttp&&"begin"in L&&"end"in L?(A.setRequestHeader("Range",`bytes=${L.begin}-${L.end-1}`),b.expectedStatus=206):b.expectedStatus=200,A.responseType="arraybuffer",L.onError&&(A.onerror=function(P){L.onError(A.status)}),A.onreadystatechange=this.onStateChange.bind(this,S),A.onprogress=this.onProgress.bind(this,S),b.onHeadersReceived=L.onHeadersReceived,b.onDone=L.onDone,b.onError=L.onError,b.onProgress=L.onProgress,A.send(null),S}onProgress(L,A){var b;const S=this.pendingRequests[L];!S||null==(b=S.onProgress)||b.call(S,A)}onStateChange(L,A){var U,y,x;const S=this.pendingRequests[L];if(!S)return;const b=S.xhr;if(b.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),4!==b.readyState||!(L in this.pendingRequests))return;if(delete this.pendingRequests[L],0===b.status&&this.isHttp)return void(null==(U=S.onError)||U.call(S,b.status));const P=b.status||200;if((200!==P||206!==S.expectedStatus)&&P!==S.expectedStatus)return void(null==(y=S.onError)||y.call(S,b.status));const F=function ge(z){const L=z.response;return"string"!=typeof L?L:(0,N.stringToBytes)(L).buffer}(b);if(206===P){const G=b.getResponseHeader("Content-Range"),j=/bytes (\d+)-(\d+)\/(\d+)/.exec(G);S.onDone({begin:parseInt(j[1],10),chunk:F})}else F?S.onDone({begin:0,chunk:F}):null==(x=S.onError)||x.call(S,b.status)}getRequestXhr(L){return this.pendingRequests[L].xhr}isPendingRequest(L){return L in this.pendingRequests}abortRequest(L){const A=this.pendingRequests[L].xhr;delete this.pendingRequests[L],A.abort()}}J.PDFNetworkStream=class C{constructor(L){this._source=L,this._manager=new ne(L.url,{httpHeaders:L.httpHeaders,withCredentials:L.withCredentials}),this._rangeChunkSize=L.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(L){const A=this._rangeRequestReaders.indexOf(L);A>=0&&this._rangeRequestReaders.splice(A,1)}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Y(this._manager,this._source),this._fullRequestReader}getRangeReader(L,A){const S=new V(this._manager,L,A);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(L){var A;null==(A=this._fullRequestReader)||A.cancel(L);for(const S of this._rangeRequestReaders.slice(0))S.cancel(L)}};class Y{constructor(L,A){this._manager=L;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._fullRequestId=L.requestFull(S),this._headersReceivedCapability=(0,N.createPromiseCapability)(),this._disableRange=A.disableRange||!1,this._contentLength=A.length,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const L=this._fullRequestId,A=this._manager.getRequestXhr(L),S=W=>A.getResponseHeader(W),{allowRangeRequests:b,suggestedLength:P}=(0,He.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=P||this._contentLength,this._filename=(0,He.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(L),this._headersReceivedCapability.resolve()}_onDone(L){if(L&&(this._requests.length>0?this._requests.shift().resolve({value:L.chunk,done:!1}):this._cachedChunks.push(L.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(L){this._storedError=(0,He.createResponseStatusError)(L,this._url),this._headersReceivedCapability.reject(this._storedError);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(L){var A;null==(A=this.onProgress)||A.call(this,{loaded:L.loaded,total:L.lengthComputable?L.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var L=this;return _asyncToGenerator(function*(){if(L._storedError)throw L._storedError;if(L._cachedChunks.length>0)return{value:L._cachedChunks.shift(),done:!1};if(L._done)return{value:void 0,done:!0};const A=(0,N.createPromiseCapability)();return L._requests.push(A),A.promise})()}cancel(L){this._done=!0,this._headersReceivedCapability.reject(L);for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class V{constructor(L,A,S){this._manager=L;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=L.url,this._requestId=L.requestRange(A,S,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var L;null==(L=this.onClosed)||L.call(this,this)}_onDone(L){const A=L.chunk;this._requests.length>0?this._requests.shift().resolve({value:A,done:!1}):this._queuedChunk=A,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(L){this._storedError=(0,He.createResponseStatusError)(L,this._url);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(L){var A;this.isStreamingSupported||null==(A=this.onProgress)||A.call(this,{loaded:L.loaded})}get isStreamingSupported(){return!1}read(){var L=this;return _asyncToGenerator(function*(){if(L._storedError)throw L._storedError;if(null!==L._queuedChunk){const S=L._queuedChunk;return L._queuedChunk=null,{value:S,done:!1}}if(L._done)return{value:void 0,done:!0};const A=(0,N.createPromiseCapability)();return L._requests.push(A),A.promise})()}cancel(L){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Ke,J,Re)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.PDFFetchStream=void 0;var N=Re(1),He=Re(26);function Ae(Y,V,z){return{method:"GET",headers:Y,signal:null==z?void 0:z.signal,mode:"cors",credentials:V?"include":"same-origin",redirect:"follow"}}function be(Y){const V=new Headers;for(const z in Y){const L=Y[z];void 0!==L&&V.append(z,L)}return V}J.PDFFetchStream=class ge{constructor(V){this.source=V,this.isHttp=/^https?:/i.test(V.url),this.httpHeaders=this.isHttp&&V.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var V,z;return null!=(z=null==(V=this._fullRequestReader)?void 0:V._loaded)?z:0}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ne(this),this._fullRequestReader}getRangeReader(V,z){if(z<=this._progressiveDataLength)return null;const L=new C(this,V,z);return this._rangeRequestReaders.push(L),L}cancelAllRequests(V){this._fullRequestReader&&this._fullRequestReader.cancel(V);for(const z of this._rangeRequestReaders.slice(0))z.cancel(V)}};class ne{constructor(V){this._stream=V,this._reader=null,this._loaded=0,this._filename=null;const z=V.source;this._withCredentials=z.withCredentials||!1,this._contentLength=z.length,this._headersCapability=(0,N.createPromiseCapability)(),this._disableRange=z.disableRange||!1,this._rangeChunkSize=z.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!z.disableStream,this._isRangeSupported=!z.disableRange,this._headers=be(this._stream.httpHeaders);const L=z.url;fetch(L,Ae(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,He.validateResponseStatus)(A.status))throw(0,He.createResponseStatusError)(A.status,L);this._reader=A.body.getReader(),this._headersCapability.resolve();const S=W=>A.headers.get(W),{allowRangeRequests:b,suggestedLength:P}=(0,He.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=P||this._contentLength,this._filename=(0,He.extractFilenameFromHeader)(S),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new N.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var V=this;return _asyncToGenerator(function*(){yield V._headersCapability.promise;const{value:z,done:L}=yield V._reader.read();return L?{value:z,done:L}:(V._loaded+=z.byteLength,V.onProgress&&V.onProgress({loaded:V._loaded,total:V._contentLength}),{value:new Uint8Array(z).buffer,done:!1})})()}cancel(V){this._reader&&this._reader.cancel(V),this._abortController&&this._abortController.abort()}}class C{constructor(V,z,L){this._stream=V,this._reader=null,this._loaded=0;const A=V.source;this._withCredentials=A.withCredentials||!1,this._readCapability=(0,N.createPromiseCapability)(),this._isStreamingSupported=!A.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=be(this._stream.httpHeaders),this._headers.append("Range",`bytes=${z}-${L-1}`);const S=A.url;fetch(S,Ae(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,He.validateResponseStatus)(b.status))throw(0,He.createResponseStatusError)(b.status,S);this._readCapability.resolve(),this._reader=b.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var V=this;return _asyncToGenerator(function*(){yield V._readCapability.promise;const{value:z,done:L}=yield V._reader.read();return L?{value:z,done:L}:(V._loaded+=z.byteLength,V.onProgress&&V.onProgress({loaded:V._loaded}),{value:new Uint8Array(z).buffer,done:!1})})()}cancel(V){this._reader&&this._reader.cancel(V),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(Ke){var J=__webpack_module_cache__[Ke];if(void 0!==J)return J.exports;var Re=__webpack_module_cache__[Ke]={exports:{}};return __webpack_modules__[Ke](Re,Re.exports,__w_pdfjs_require__),Re.exports}var __webpack_exports__={};return(()=>{var Ke=__webpack_exports__;Object.defineProperty(Ke,"__esModule",{value:!0}),Object.defineProperty(Ke,"AnnotationLayer",{enumerable:!0,get:function(){return He.AnnotationLayer}}),Object.defineProperty(Ke,"AnnotationMode",{enumerable:!0,get:function(){return J.AnnotationMode}}),Object.defineProperty(Ke,"CMapCompressionType",{enumerable:!0,get:function(){return J.CMapCompressionType}}),Object.defineProperty(Ke,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Ae.GlobalWorkerOptions}}),Object.defineProperty(Ke,"InvalidPDFException",{enumerable:!0,get:function(){return J.InvalidPDFException}}),Object.defineProperty(Ke,"LoopbackPort",{enumerable:!0,get:function(){return Re.LoopbackPort}}),Object.defineProperty(Ke,"MissingPDFException",{enumerable:!0,get:function(){return J.MissingPDFException}}),Object.defineProperty(Ke,"OPS",{enumerable:!0,get:function(){return J.OPS}}),Object.defineProperty(Ke,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Re.PDFDataRangeTransport}}),Object.defineProperty(Ke,"PDFDateString",{enumerable:!0,get:function(){return N.PDFDateString}}),Object.defineProperty(Ke,"PDFWorker",{enumerable:!0,get:function(){return Re.PDFWorker}}),Object.defineProperty(Ke,"PasswordResponses",{enumerable:!0,get:function(){return J.PasswordResponses}}),Object.defineProperty(Ke,"PermissionFlag",{enumerable:!0,get:function(){return J.PermissionFlag}}),Object.defineProperty(Ke,"PixelsPerInch",{enumerable:!0,get:function(){return N.PixelsPerInch}}),Object.defineProperty(Ke,"RenderingCancelledException",{enumerable:!0,get:function(){return N.RenderingCancelledException}}),Object.defineProperty(Ke,"SVGGraphics",{enumerable:!0,get:function(){return ne.SVGGraphics}}),Object.defineProperty(Ke,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return J.UNSUPPORTED_FEATURES}}),Object.defineProperty(Ke,"UnexpectedResponseException",{enumerable:!0,get:function(){return J.UnexpectedResponseException}}),Object.defineProperty(Ke,"Util",{enumerable:!0,get:function(){return J.Util}}),Object.defineProperty(Ke,"VerbosityLevel",{enumerable:!0,get:function(){return J.VerbosityLevel}}),Object.defineProperty(Ke,"XfaLayer",{enumerable:!0,get:function(){return C.XfaLayer}}),Object.defineProperty(Ke,"build",{enumerable:!0,get:function(){return Re.build}}),Object.defineProperty(Ke,"createPromiseCapability",{enumerable:!0,get:function(){return J.createPromiseCapability}}),Object.defineProperty(Ke,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return J.createValidAbsoluteUrl}}),Object.defineProperty(Ke,"getDocument",{enumerable:!0,get:function(){return Re.getDocument}}),Object.defineProperty(Ke,"getFilenameFromUrl",{enumerable:!0,get:function(){return N.getFilenameFromUrl}}),Object.defineProperty(Ke,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return N.getPdfFilenameFromUrl}}),Object.defineProperty(Ke,"getXfaPageViewport",{enumerable:!0,get:function(){return N.getXfaPageViewport}}),Object.defineProperty(Ke,"isPdfFile",{enumerable:!0,get:function(){return N.isPdfFile}}),Object.defineProperty(Ke,"loadScript",{enumerable:!0,get:function(){return N.loadScript}}),Object.defineProperty(Ke,"renderTextLayer",{enumerable:!0,get:function(){return ge.renderTextLayer}}),Object.defineProperty(Ke,"shadow",{enumerable:!0,get:function(){return J.shadow}}),Object.defineProperty(Ke,"version",{enumerable:!0,get:function(){return Re.version}});var J=__w_pdfjs_require__(1),Re=__w_pdfjs_require__(4),N=__w_pdfjs_require__(5),He=__w_pdfjs_require__(20),Ae=__w_pdfjs_require__(13),be=__w_pdfjs_require__(3),ge=__w_pdfjs_require__(23),ne=__w_pdfjs_require__(24),C=__w_pdfjs_require__(22);if(be.isNodeJS){const{PDFNodeStream:z}=__w_pdfjs_require__(25);(0,Re.setPDFNetworkStreamFactory)(L=>new z(L))}else{const{PDFNetworkStream:z}=__w_pdfjs_require__(28),{PDFFetchStream:L}=__w_pdfjs_require__(29);(0,Re.setPDFNetworkStreamFactory)(A=>(0,N.isValidFetchUrl)(A.url)?new L(A):new z(A))}})(),__webpack_exports__})(),module.exports=Re()},813:function(Ke,J,Re){var be,N=Re(926).default;be=()=>(()=>{"use strict";var He=[,(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.DefaultXfaLayerFactory=C.DefaultTextLayerFactory=C.DefaultStructTreeLayerFactory=C.DefaultAnnotationLayerFactory=void 0;var V=Y(2),z=Y(4),L=Y(5),A=Y(7),S=Y(8),b=Y(9);C.DefaultAnnotationLayerFactory=class P{createAnnotationLayerBuilder(x,G,j=null,$="",te=!0,ie=z.NullL10n,ae=!1,_e=null,Te=null,Oe=null,Pe=null){return new V.AnnotationLayerBuilder({pageDiv:x,pdfPage:G,imageResourcesPath:$,renderForms:te,linkService:new L.SimpleLinkService,l10n:ie,annotationStorage:j,enableScripting:ae,hasJSActionsPromise:_e,fieldObjectsPromise:Oe,mouseState:Te,annotationCanvasMap:Pe})}},C.DefaultStructTreeLayerFactory=class W{createStructTreeLayerBuilder(x){return new A.StructTreeLayerBuilder({pdfPage:x})}},C.DefaultTextLayerFactory=class F{createTextLayerBuilder(x,G,j,$=!1,te,ie){return new S.TextLayerBuilder({textLayerDiv:x,pageIndex:G,viewport:j,enhanceTextSelection:$,eventBus:te,highlighter:ie})}},C.DefaultXfaLayerFactory=class U{createXfaLayerBuilder(x,G,j=null,$=null){return new b.XfaLayerBuilder({pageDiv:x,pdfPage:G,annotationStorage:j,linkService:new L.SimpleLinkService,xfaHtml:$})}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.AnnotationLayerBuilder=void 0;var V=Y(3),z=Y(4);C.AnnotationLayerBuilder=class L{constructor({pageDiv:S,pdfPage:b,linkService:P,downloadManager:W,annotationStorage:F=null,imageResourcesPath:U="",renderForms:y=!0,l10n:x=z.NullL10n,enableScripting:G=!1,hasJSActionsPromise:j=null,fieldObjectsPromise:$=null,mouseState:te=null,annotationCanvasMap:ie=null}){this.pageDiv=S,this.pdfPage=b,this.linkService=P,this.downloadManager=W,this.imageResourcesPath=U,this.renderForms=y,this.l10n=x,this.annotationStorage=F,this.enableScripting=G,this._hasJSActionsPromise=j,this._fieldObjectsPromise=$,this._mouseState=te,this._annotationCanvasMap=ie,this.div=null,this._cancelled=!1}render(S,b="display"){var P=this;return N(function*(){const[W,F=!1,U=null]=yield Promise.all([P.pdfPage.getAnnotations({intent:b}),P._hasJSActionsPromise,P._fieldObjectsPromise]);if(P._cancelled||0===W.length)return;const y={viewport:S.clone({dontFlip:!0}),div:P.div,annotations:W,page:P.pdfPage,imageResourcesPath:P.imageResourcesPath,renderForms:P.renderForms,linkService:P.linkService,downloadManager:P.downloadManager,annotationStorage:P.annotationStorage,enableScripting:P.enableScripting,hasJSActions:F,fieldObjects:U,mouseState:P._mouseState,annotationCanvasMap:P._annotationCanvasMap};P.div?V.AnnotationLayer.update(y):(P.div=document.createElement("div"),P.div.className="annotationLayer",P.pageDiv.appendChild(P.div),y.div=P.div,V.AnnotationLayer.render(y),P.l10n.translate(P.div))})()}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},ne=>{let C;C="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:Re(36),ne.exports=C},(ne,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.NullL10n=void 0,C.fixupLangCode=function L(b){return z[null==b?void 0:b.toLowerCase()]||b},C.getL10nFallback=V;const Y={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function V(b,P){switch(b){case"find_match_count":b=`find_match_count[${1===P.total?"one":"other"}]`;break;case"find_match_count_limit":b=`find_match_count_limit[${1===P.limit?"one":"other"}]`}return Y[b]||""}const z={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};C.NullL10n={getLanguage:()=>N(function*(){return"en-us"})(),getDirection:()=>N(function*(){return"ltr"})(),get:(b,P=null,W=V(b,P))=>N(function*(){return function A(b,P){return P?b.replace(/\{\{\s*(\w+)\s*\}\}/g,(W,F)=>F in P?P[F]:"{{"+F+"}}"):b}(W,P)})(),translate:b=>N(function*(){})()}},(ne,C,Y)=>{var P,W,_B,U,dde;Object.defineProperty(C,"__esModule",{value:!0}),C.SimpleLinkService=C.PDFLinkService=C.LinkTarget=void 0;var V=Y(6);const L={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function A(G,{url:j,target:$,rel:te,enabled:ie=!0}={}){if(!j||"string"!=typeof j)throw new Error('A valid "url" parameter must provided.');const ae=(0,V.removeNullCharacters)(j);ie?G.href=G.title=ae:(G.href="",G.title=`Disabled: ${ae}`,G.onclick=()=>!1);let _e="";switch($){case L.NONE:break;case L.SELF:_e="_self";break;case L.BLANK:_e="_blank";break;case L.PARENT:_e="_parent";break;case L.TOP:_e="_top"}G.target=_e,G.rel="string"==typeof te?te:"noopener noreferrer nofollow"}C.LinkTarget=L;const x=class{constructor({eventBus:j,externalLinkTarget:$=null,externalLinkRel:te=null,ignoreDestinationZoom:ie=!1}={}){ln(this,W),ln(this,P,new Map),this.eventBus=j,this.externalLinkTarget=$,this.externalLinkRel=te,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=ie,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(j,$=null){this.baseUrl=$,this.pdfDocument=j,Jt(this,P).clear()}setViewer(j){this.pdfViewer=j}setHistory(j){this.pdfHistory=j}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(j){this.pdfViewer.currentPageNumber=j}get rotation(){return this.pdfViewer.pagesRotation}set rotation(j){this.pdfViewer.pagesRotation=j}goToDestination(j){var $=this;return N(function*(){var ae;if(!$.pdfDocument)return;let te,ie;"string"==typeof j?(te=j,ie=yield $.pdfDocument.getDestination(j)):(te=null,ie=yield j),Array.isArray(ie)?tn(ae=$,W,_B).call(ae,j,te,ie):console.error(`PDFLinkService.goToDestination: "${ie}" is not a valid destination array, for dest="${j}".`)})()}goToPage(j){if(!this.pdfDocument)return;const $="string"==typeof j&&this.pdfViewer.pageLabelToPageNumber(j)||0|j;Number.isInteger($)&&$>0&&$<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage($)),this.pdfViewer.scrollPageIntoView({pageNumber:$})):console.error(`PDFLinkService.goToPage: "${j}" is not a valid page.`)}addLinkAttributes(j,$,te=!1){A(j,{url:$,target:te?L.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(j){if("string"==typeof j){if(j.length>0)return this.getAnchorUrl("#"+escape(j))}else if(Array.isArray(j)){const $=JSON.stringify(j);if($.length>0)return this.getAnchorUrl("#"+escape($))}return this.getAnchorUrl("")}getAnchorUrl(j){return(this.baseUrl||"")+j}setHash(j){var ie;if(!this.pdfDocument)return;let $,te;if(j.includes("=")){const ae=(0,V.parseQueryString)(j);if(ae.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:ae.get("search").replace(/"/g,""),phraseSearch:"true"===ae.get("phrase")}),ae.has("page")&&($=0|ae.get("page")||1),ae.has("zoom")){const _e=ae.get("zoom").split(","),Te=_e[0],Oe=parseFloat(Te);Te.includes("Fit")?"Fit"===Te||"FitB"===Te?te=[null,{name:Te}]:"FitH"===Te||"FitBH"===Te||"FitV"===Te||"FitBV"===Te?te=[null,{name:Te},_e.length>1?0|_e[1]:null]:"FitR"===Te?5!==_e.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):te=[null,{name:Te},0|_e[1],0|_e[2],0|_e[3],0|_e[4]]:console.error(`PDFLinkService.setHash: "${Te}" is not a valid zoom value.`):te=[null,{name:"XYZ"},_e.length>1?0|_e[1]:null,_e.length>2?0|_e[2]:null,Oe?Oe/100:Te]}te?this.pdfViewer.scrollPageIntoView({pageNumber:$||this.page,destArray:te,allowNegativeOffset:!0}):$&&(this.page=$),ae.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:ae.get("pagemode")}),ae.has("nameddest")&&this.goToDestination(ae.get("nameddest"))}else{te=unescape(j);try{te=JSON.parse(te),Array.isArray(te)||(te=te.toString())}catch(ae){}if("string"==typeof te||tn(ie=x,U,dde).call(ie,te))return void this.goToDestination(te);console.error(`PDFLinkService.setHash: "${unescape(j)}" is not a valid destination.`)}}executeNamedAction(j){var $,te;switch(j){case"GoBack":null==($=this.pdfHistory)||$.back();break;case"GoForward":null==(te=this.pdfHistory)||te.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:j})}cachePageRef(j,$){if(!$)return;const te=0===$.gen?`${$.num}R`:`${$.num}R${$.gen}`;Jt(this,P).set(te,j)}_cachedPageNumber(j){if(!j)return null;const $=0===j.gen?`${j.num}R`:`${j.num}R${j.gen}`;return Jt(this,P).get($)||null}isPageVisible(j){return this.pdfViewer.isPageVisible(j)}isPageCached(j){return this.pdfViewer.isPageCached(j)}};let S=x;P=new WeakMap,W=new WeakSet,_B=function(j,$=null,te){const ie=te[0];let ae;if("object"==typeof ie&&null!==ie){if(ae=this._cachedPageNumber(ie),!ae)return void this.pdfDocument.getPageIndex(ie).then(_e=>{this.cachePageRef(_e+1,ie),tn(this,W,_B).call(this,j,$,te)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${ie}" is not a valid page reference, for dest="${j}".`)})}else{if(!Number.isInteger(ie))return void console.error(`PDFLinkService.#goToDestinationHelper: "${ie}" is not a valid destination reference, for dest="${j}".`);ae=ie+1}!ae||ae<1||ae>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${ae}" is not a valid page number, for dest="${j}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:$,explicitDest:te,pageNumber:ae})),this.pdfViewer.scrollPageIntoView({pageNumber:ae,destArray:te,ignoreDestinationZoom:this._ignoreDestinationZoom}))},U=new WeakSet,dde=function(j){if(!Array.isArray(j))return!1;const $=j.length;if($<2)return!1;const te=j[0];if(!("object"==typeof te&&Number.isInteger(te.num)&&Number.isInteger(te.gen)||Number.isInteger(te)&&te>=0))return!1;const ie=j[1];if("object"!=typeof ie||"string"!=typeof ie.name)return!1;let ae=!0;switch(ie.name){case"XYZ":if(5!==$)return!1;break;case"Fit":case"FitB":return 2===$;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==$)return!1;break;case"FitR":if(6!==$)return!1;ae=!1;break;default:return!1}for(let _e=2;_e<$;_e++){const Te=j[_e];if(!("number"==typeof Te||ae&&null===Te))return!1}return!0},ln(S,U),C.PDFLinkService=S,C.SimpleLinkService=class b{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(j){}get rotation(){return 0}set rotation(j){}goToDestination(j){return N(function*(){})()}goToPage(j){}addLinkAttributes(j,$,te=!1){A(j,{url:$,enabled:this.externalLinkEnabled})}getDestinationHash(j){return"#"}getAnchorUrl(j){return"#"}setHash(j){}executeNamedAction(j){}cachePageRef(j,$){}isPageVisible(j){return!0}isPageCached(j){return!0}}},(ne,C)=>{var ft,hde;Object.defineProperty(C,"__esModule",{value:!0}),C.animationStarted=C.VERTICAL_PADDING=C.UNKNOWN_SCALE=C.TextLayerMode=C.SpreadMode=C.SidebarView=C.ScrollMode=C.SCROLLBAR_PADDING=C.RenderingStates=C.RendererType=C.ProgressBar=C.PresentationModeState=C.OutputScale=C.MIN_SCALE=C.MAX_SCALE=C.MAX_AUTO_SCALE=C.DEFAULT_SCALE_VALUE=C.DEFAULT_SCALE_DELTA=C.DEFAULT_SCALE=C.AutoPrintRegExp=void 0,C.apiPageLayoutToViewerModes=function Le($e){let Ze=j.VERTICAL,Qe=$.NONE;switch($e){case"SinglePage":Ze=j.PAGE;break;case"OneColumn":break;case"TwoPageLeft":Ze=j.PAGE;case"TwoColumnLeft":Qe=$.ODD;break;case"TwoPageRight":Ze=j.PAGE;case"TwoColumnRight":Qe=$.EVEN}return{scrollMode:Ze,spreadMode:Qe}},C.apiPageModeToSidebarView=function je($e){switch($e){case"UseNone":return y.NONE;case"UseThumbs":return y.THUMBS;case"UseOutlines":return y.OUTLINE;case"UseAttachments":return y.ATTACHMENTS;case"UseOC":return y.LAYERS}return y.NONE},C.approximateFraction=function Be($e){if(Math.floor($e)===$e)return[$e,1];const Ze=1/$e;if(Ze>8)return[1,8];if(Math.floor(Ze)===Ze)return[1,Ze];const K=$e>1?Ze:$e;let vt,he=0,Fe=1,yt=1,gt=1;for(;;){const Ot=he+yt,Rt=Fe+gt;if(Rt>8)break;K<=Ot/Rt?(yt=Ot,gt=Rt):(he=Ot,Fe=Rt)}return vt=K-he/Fe<yt/gt-K?K===$e?[he,Fe]:[Fe,he]:K===$e?[yt,gt]:[gt,yt],vt},C.backtrackBeforeAllVisibleElements=Q,C.binarySearchFirstItem=Ie,C.getActiveOrFocusedElement=function Ee(){let $e=document,Ze=$e.activeElement||$e.querySelector(":focus");for(;null==Ze?void 0:Ze.shadowRoot;)$e=Ze.shadowRoot,Ze=$e.activeElement||$e.querySelector(":focus");return Ze},C.getPageSizeInches=function De({view:$e,userUnit:Ze,rotate:Qe}){const[K,he,Fe,yt]=$e,gt=Qe%180!=0,vt=(Fe-K)/72*Ze,Ot=(yt-he)/72*Ze;return{width:gt?Ot:vt,height:gt?vt:Ot}},C.getVisibleElements=function E({scrollEl:$e,views:Ze,sortByVisibility:Qe=!1,horizontal:K=!1,rtl:he=!1}){const Fe=$e.scrollTop,yt=Fe+$e.clientHeight,gt=$e.scrollLeft,vt=gt+$e.clientWidth,Cn=[],Nn=new Set,fi=Ze.length;let Ye=Ie(Ze,K?function Rt(pt){const Ct=pt.div,At=Ct.offsetLeft+Ct.clientLeft;return he?At<vt:At+Ct.clientWidth>gt}:function Ot(pt){const Ct=pt.div;return Ct.offsetTop+Ct.clientTop+Ct.clientHeight>Fe});Ye>0&&Ye<fi&&!K&&(Ye=Q(Ye,Ze,Fe));let oe=K?vt:-1;for(let pt=Ye;pt<fi;pt++){const Ct=Ze[pt],At=Ct.div,An=At.offsetLeft+At.clientLeft,Vn=At.offsetTop+At.clientTop,wi=At.clientWidth,_n=At.clientHeight,tr=An+wi,Oi=Vn+_n;if(-1===oe)Oi>=yt&&(oe=Oi);else if((K?An:Vn)>oe)break;if(Oi<=Fe||Vn>=yt||tr<=gt||An>=vt)continue;const fs=Math.max(0,Fe-Vn)+Math.max(0,Oi-yt),Ns=(wi-(Math.max(0,gt-An)+Math.max(0,tr-vt)))/wi;Cn.push({id:Ct.id,x:An,y:Vn,view:Ct,percent:(_n-fs)/_n*Ns*100|0,widthPercent:100*Ns|0}),Nn.add(Ct.id)}const le=Cn[0],nt=Cn[Cn.length-1];return Qe&&Cn.sort(function(pt,Ct){const At=pt.percent-Ct.percent;return Math.abs(At)>.001?-At:pt.id-Ct.id}),{first:le,last:nt,views:Cn,ids:Nn}},C.isPortraitOrientation=function X($e){return $e.width<=$e.height},C.isValidRotation=function I($e){return Number.isInteger($e)&&$e%90==0},C.isValidScrollMode=function H($e){return Number.isInteger($e)&&Object.values(j).includes($e)&&$e!==j.UNKNOWN},C.isValidSpreadMode=function k($e){return Number.isInteger($e)&&Object.values($).includes($e)&&$e!==$.UNKNOWN},C.noContextMenuHandler=function R($e){$e.preventDefault()},C.normalizeWheelEventDelta=function T($e){let Ze=v($e);return 0===$e.deltaMode?Ze/=900:1===$e.deltaMode&&(Ze/=30),Ze},C.normalizeWheelEventDirection=v,C.parseQueryString=function Te($e){const Ze=new Map;for(const[Qe,K]of new URLSearchParams($e))Ze.set(Qe.toLowerCase(),K);return Ze},C.removeNullCharacters=function ye($e,Ze=!1){return"string"!=typeof $e?(console.error("The argument must be a string."),$e):(Ze&&($e=$e.replace(Pe," ")),$e.replace(Oe,""))},C.roundToDivide=function we($e,Ze){const Qe=$e%Ze;return 0===Qe?$e:Math.round($e-Qe+Ze)},C.scrollIntoView=function ae($e,Ze,Qe=!1){let K=$e.offsetParent;if(!K)return void console.error("offsetParent is not set -- cannot scroll");let he=$e.offsetTop+$e.clientTop,Fe=$e.offsetLeft+$e.clientLeft;for(;K.clientHeight===K.scrollHeight&&K.clientWidth===K.scrollWidth||Qe&&(K.classList.contains("markedContent")||"hidden"===getComputedStyle(K).overflow);)if(he+=K.offsetTop,Fe+=K.offsetLeft,K=K.offsetParent,!K)return;Ze&&(void 0!==Ze.top&&(he+=Ze.top),void 0!==Ze.left&&(Fe+=Ze.left,K.scrollLeft=Fe)),K.scrollTop=he},C.watchScroll=function _e($e,Ze){const Qe=function(Fe){he||(he=window.requestAnimationFrame(function(){he=null;const gt=$e.scrollLeft,vt=K.lastX;gt!==vt&&(K.right=gt>vt),K.lastX=gt;const Ot=$e.scrollTop,Rt=K.lastY;Ot!==Rt&&(K.down=Ot>Rt),K.lastY=Ot,Ze(K)}))},K={right:!0,down:!0,lastX:$e.scrollLeft,lastY:$e.scrollTop,_eventHandler:Qe};let he=null;return $e.addEventListener("scroll",Qe,!0),K},C.DEFAULT_SCALE_VALUE="auto",C.DEFAULT_SCALE=1,C.DEFAULT_SCALE_DELTA=1.1,C.MIN_SCALE=.1,C.MAX_SCALE=10,C.UNKNOWN_SCALE=0,C.MAX_AUTO_SCALE=1.25,C.SCROLLBAR_PADDING=40,C.VERTICAL_PADDING=5,C.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},C.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const y={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};C.SidebarView=y,C.RendererType={CANVAS:"canvas",SVG:"svg"},C.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const j={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};C.ScrollMode=j;const $={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};C.SpreadMode=$,C.AutoPrintRegExp=/\bprint\s*\(/,C.OutputScale=class ie{constructor(){const Ze=window.devicePixelRatio||1;this.sx=Ze,this.sy=Ze}get scaled(){return 1!==this.sx||1!==this.sy}};const Oe=/\x00/g,Pe=/[\x01-\x1F]/g;function Ie($e,Ze,Qe=0){let K=Qe,he=$e.length-1;if(he<0||!Ze($e[he]))return $e.length;if(Ze($e[K]))return K;for(;K<he;){const Fe=K+he>>1;Ze($e[Fe])?he=Fe:K=Fe+1}return K}function Q($e,Ze,Qe){if($e<2)return $e;let K=Ze[$e].div,he=K.offsetTop+K.clientTop;he>=Qe&&(K=Ze[$e-1].div,he=K.offsetTop+K.clientTop);for(let Fe=$e-2;Fe>=0&&(K=Ze[Fe].div,!(K.offsetTop+K.clientTop+K.clientHeight<=he));--Fe)$e=Fe;return $e}function v($e){let Ze=Math.hypot($e.deltaX,$e.deltaY);const Qe=Math.atan2($e.deltaY,$e.deltaX);return-.25*Math.PI<Qe&&Qe<.75*Math.PI&&(Ze=-Ze),Ze}const fe=new Promise(function($e){window.requestAnimationFrame($e)});C.animationStarted=fe,ft=new WeakSet,hde=function(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))},C.ProgressBar=class Me{constructor(Ze){if(ln(this,ft),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(Ze+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(Ze){this._indeterminate=isNaN(Ze),this._percent=function Se($e,Ze,Qe){return Math.min(Math.max($e,Ze),Qe)}(Ze,0,100),tn(this,ft,hde).call(this)}setWidth(Ze){if(!Ze)return;const K=Ze.parentNode.offsetWidth-Ze.offsetWidth;K>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${K}px`)}hide(){!this.visible||(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(ne,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.StructTreeLayerBuilder=void 0;const Y={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},V=/^H(\d+)$/;C.StructTreeLayerBuilder=class z{constructor({pdfPage:A}){this.pdfPage=A}render(A){return this._walk(A)}_setAttributes(A,S){void 0!==A.alt&&S.setAttribute("aria-label",A.alt),void 0!==A.id&&S.setAttribute("aria-owns",A.id),void 0!==A.lang&&S.setAttribute("lang",A.lang)}_walk(A){if(!A)return null;const S=document.createElement("span");if("role"in A){const{role:b}=A,P=b.match(V);P?(S.setAttribute("role","heading"),S.setAttribute("aria-level",P[1])):Y[b]&&S.setAttribute("role",Y[b])}if(this._setAttributes(A,S),A.children)if(1===A.children.length&&"id"in A.children[0])this._setAttributes(A.children[0],S);else for(const b of A.children)S.appendChild(this._walk(b));return S}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.TextLayerBuilder=void 0;var V=Y(3);C.TextLayerBuilder=class L{constructor({textLayerDiv:S,eventBus:b,pageIndex:P,viewport:W,highlighter:F=null,enhanceTextSelection:U=!1}){this.textLayerDiv=S,this.eventBus=b,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=P+1,this.viewport=W,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=F,this.enhanceTextSelection=U,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const S=document.createElement("div");S.className="endOfContent",this.textLayerDiv.appendChild(S)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(S=0){var P;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null==(P=this.highlighter)||P.setTextMapping(this.textDivs,this.textContentItemsStr);const b=document.createDocumentFragment();this.textLayerRenderTask=(0,V.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:b,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:S,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var W;this.textLayerDiv.appendChild(b),this._finishRendering(),null==(W=this.highlighter)||W.enable()},function(W){})}cancel(){var S;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null==(S=this.highlighter)||S.disable()}setTextContentStream(S){this.cancel(),this.textContentStream=S}setTextContent(S){this.cancel(),this.textContent=S}_bindMouse(){const S=this.textLayerDiv;let b=null;S.addEventListener("mousedown",P=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(b&&(clearTimeout(b),b=null));const W=S.querySelector(".endOfContent");if(!W)return;let F=P.target!==S;if(F=F&&"none"!==window.getComputedStyle(W).getPropertyValue("-moz-user-select"),F){const U=S.getBoundingClientRect(),y=Math.max(0,(P.pageY-U.top)/U.height);W.style.top=(100*y).toFixed(2)+"%"}W.classList.add("active")}),S.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(b=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),b=null},300));const P=S.querySelector(".endOfContent");!P||(P.style.top="",P.classList.remove("active"))})}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.XfaLayerBuilder=void 0;var V=Y(3);C.XfaLayerBuilder=class z{constructor({pageDiv:A,pdfPage:S,annotationStorage:b=null,linkService:P,xfaHtml:W=null}){this.pageDiv=A,this.pdfPage=S,this.annotationStorage=b,this.linkService=P,this.xfaHtml=W,this.div=null,this._cancelled=!1}render(A,S="display"){if("print"===S){const b={viewport:A.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:S},P=document.createElement("div");this.pageDiv.appendChild(P),b.div=P;const W=V.XfaLayer.render(b);return Promise.resolve(W)}return this.pdfPage.getXfa().then(b=>{if(this._cancelled||!b)return{textDivs:[]};const P={viewport:A.clone({dontFlip:!0}),div:this.div,xfaHtml:b,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:S};return this.div?V.XfaLayer.update(P):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),P.div=this.div,V.XfaLayer.render(P))}).catch(b=>{console.error(b)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.PDFViewer=C.PDFSinglePageViewer=void 0;var V=Y(6),z=Y(11);C.PDFViewer=class L extends z.BaseViewer{},C.PDFSinglePageViewer=class A extends z.BaseViewer{_resetView(){super._resetView(),this._scrollMode=V.ScrollMode.PAGE,this._spreadMode=V.SpreadMode.NONE}set scrollMode(b){}_updateScrollMode(){}set spreadMode(b){}_updateSpreadMode(){}}},(ne,C,Y)=>{var ie,ae,_e,yB,Oe,Pe,ye,Ie,Be,we,De,Q,fde,R,pde,T,j0,H,oC,X,gde,Se,vB,Ee,mde,je,_de,Pt,yde;Object.defineProperty(C,"__esModule",{value:!0}),C.PagesCountLimit=C.PDFPageViewBuffer=C.BaseViewer=void 0;var V=Y(3),z=Y(6),L=Y(2),A=Y(4),S=Y(12),b=Y(14),P=Y(5),W=Y(7),F=Y(15),U=Y(8),y=Y(9);const G="enablePermissions",j={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};C.PagesCountLimit=j;class ${constructor(K){ln(this,_e),ln(this,ie,new Set),ln(this,ae,0),Pi(this,ae,K)}push(K){const he=Jt(this,ie);he.has(K)&&he.delete(K),he.add(K),he.size>Jt(this,ae)&&tn(this,_e,yB).call(this)}resize(K,he=null){Pi(this,ae,K);const Fe=Jt(this,ie);if(he){const yt=Fe.size;let gt=1;for(const vt of Fe)if(he.has(vt.id)&&(Fe.delete(vt),Fe.add(vt)),++gt>yt)break}for(;Fe.size>Jt(this,ae);)tn(this,_e,yB).call(this)}has(K){return Jt(this,ie).has(K)}[Symbol.iterator](){return Jt(this,ie).keys()}}ie=new WeakMap,ae=new WeakMap,_e=new WeakSet,yB=function(){const K=Jt(this,ie).keys().next().value;null==K||K.destroy(),Jt(this,ie).delete(K)},C.PDFPageViewBuffer=$;const Ze=class{constructor(K){var Fe,yt,gt,vt;if(ln(this,Q),ln(this,R),ln(this,T),ln(this,H),ln(this,X),ln(this,Se),ln(this,Ee),ln(this,je),ln(this,Pt),ln(this,Oe,null),ln(this,Pe,V.AnnotationMode.ENABLE_FORMS),ln(this,ye,null),ln(this,Ie,!1),ln(this,Be,0),ln(this,we,null),ln(this,De,null),this.constructor===Ze)throw new Error("Cannot initialize BaseViewer.");const he="2.14.305";if(V.version!==he)throw new Error(`The API version "${V.version}" does not match the Viewer version "${he}".`);if(this.container=K.container,this.viewer=K.viewer||K.container.firstElementChild,"DIV"!==(null==(Fe=this.container)?void 0:Fe.tagName.toUpperCase())||"DIV"!==(null==(yt=this.viewer)?void 0:yt.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=K.eventBus,this.linkService=K.linkService||new P.SimpleLinkService,this.downloadManager=K.downloadManager||null,this.findController=K.findController||null,this._scriptingManager=K.scriptingManager||null,this.removePageBorders=K.removePageBorders||!1,this.textLayerMode=null!=(gt=K.textLayerMode)?gt:z.TextLayerMode.ENABLE,Pi(this,Pe,null!=(vt=K.annotationMode)?vt:V.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=K.imageResourcesPath||"",this.enablePrintAutoRotate=K.enablePrintAutoRotate||!1,this.renderer=K.renderer||z.RendererType.CANVAS,this.useOnlyCssZoom=K.useOnlyCssZoom||!1,this.maxCanvasPixels=K.maxCanvasPixels,this.l10n=K.l10n||A.NullL10n,Pi(this,Ie,K.enablePermissions||!1),this.pageColors=K.pageColors||null,K.pageColors&&(!CSS.supports("color",K.pageColors.background)||!CSS.supports("color",K.pageColors.foreground))&&((K.pageColors.background||K.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!K.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new b.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=K.renderingQueue,this._doc=document.documentElement,this.scroll=(0,z.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=z.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(K){return this._pages[K]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(K){return null==K?void 0:K.pdfPage})}get renderForms(){return Jt(this,Pe)===V.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(K){if(!Number.isInteger(K))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(K,!0)||console.error(`currentPageNumber: "${K}" is not a valid page.`)}_setCurrentPageNumber(K,he=!1){var yt,gt;if(this._currentPageNumber===K)return he&&tn(this,Se,vB).call(this),!0;if(!(0<K&&K<=this.pagesCount))return!1;const Fe=this._currentPageNumber;return this._currentPageNumber=K,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:K,pageLabel:null!=(gt=null==(yt=this._pageLabels)?void 0:yt[K-1])?gt:null,previous:Fe}),he&&tn(this,Se,vB).call(this),!0}get currentPageLabel(){var K,he;return null!=(he=null==(K=this._pageLabels)?void 0:K[this._currentPageNumber-1])?he:null}set currentPageLabel(K){if(!this.pdfDocument)return;let he=0|K;if(this._pageLabels){const Fe=this._pageLabels.indexOf(K);Fe>=0&&(he=Fe+1)}this._setCurrentPageNumber(he,!0)||console.error(`currentPageLabel: "${K}" is not a valid page.`)}get currentScale(){return this._currentScale!==z.UNKNOWN_SCALE?this._currentScale:z.DEFAULT_SCALE}set currentScale(K){if(isNaN(K))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale(K,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(K){!this.pdfDocument||this._setScale(K,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(K){if(!(0,z.isValidRotation)(K))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((K%=360)<0&&(K+=360),this._pagesRotation===K))return;this._pagesRotation=K;const he=this._currentPageNumber,Fe={rotation:K};for(const yt of this._pages)yt.update(Fe);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:K,pageNumber:he}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(K){var he=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=K,!K)return;const Fe=K.isPureXfa,yt=K.numPages,gt=K.getPage(1),vt=K.getOptionalContentConfig(),Ot=Jt(this,Ie)?K.getPermissions():Promise.resolve();if(yt>j.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const Rt=this._scrollMode=z.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:Rt})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:yt})},()=>{}),this._onBeforeDraw=Rt=>{const Cn=this._pages[Rt.pageNumber-1];!Cn||Jt(this,Oe).push(Cn)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=Rt=>{Rt.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:Rt.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,Jt(this,De)&&(document.removeEventListener("visibilitychange",Jt(this,De)),Pi(this,De,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([gt,Ot]).then(([Rt,Cn])=>{if(K!==this.pdfDocument)return;this._firstPageCapability.resolve(Rt),this._optionalContentConfigPromise=vt,tn(this,Q,fde).call(this,Cn);const Nn=this._scrollMode===z.ScrollMode.PAGE?null:this.viewer,fi=this.currentScale,Ye=Rt.getViewport({scale:fi*V.PixelsPerInch.PDF_TO_CSS_UNITS}),oe=this.textLayerMode===z.TextLayerMode.DISABLE||Fe?null:this,le=Jt(this,Pe)!==V.AnnotationMode.DISABLE?this:null,nt=Fe?this:null;for(let Ct=1;Ct<=yt;++Ct){const At=new S.PDFPageView({container:Nn,eventBus:this.eventBus,id:Ct,scale:fi,defaultViewport:Ye.clone(),optionalContentConfigPromise:vt,renderingQueue:this.renderingQueue,textLayerFactory:oe,textLayerMode:this.textLayerMode,annotationLayerFactory:le,annotationMode:Jt(this,Pe),xfaLayerFactory:nt,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(At)}const pt=this._pages[0];pt&&(pt.setPdfPage(Rt),this.linkService.cachePageRef(1,Rt.ref)),this._scrollMode===z.ScrollMode.PAGE?tn(this,T,j0).call(this):this._spreadMode!==z.SpreadMode.NONE&&this._updateSpreadMode(),tn(this,R,pde).call(this).then(N(function*(){if(he.findController&&he.findController.setDocument(K),he._scriptingManager&&he._scriptingManager.setDocument(K),K.loadingParams.disableAutoFetch||yt>j.FORCE_LAZY_PAGE_INIT)return void he._pagesCapability.resolve();let Ct=yt-1;if(Ct<=0)he._pagesCapability.resolve();else for(let At=2;At<=yt;++At){const An=K.getPage(At).then(Vn=>{const wi=he._pages[At-1];wi.pdfPage||wi.setPdfPage(Vn),he.linkService.cachePageRef(At,Vn.ref),0==--Ct&&he._pagesCapability.resolve()},Vn=>{console.error(`Unable to get page ${At} to initialize viewer`,Vn),0==--Ct&&he._pagesCapability.resolve()});At%j.PAUSE_EAGER_PAGE_INIT==0&&(yield An)}})),this.eventBus.dispatch("pagesinit",{source:this}),K.getMetadata().then(({info:Ct})=>{K===this.pdfDocument&&Ct.Language&&(this.viewer.lang=Ct.Language)}),this.defaultRenderingQueue&&this.update()}).catch(Rt=>{console.error("Unable to initialize viewer",Rt),this._pagesCapability.reject(Rt)})}setPageLabels(K){var he,Fe;if(this.pdfDocument){K?Array.isArray(K)&&this.pdfDocument.numPages===K.length?this._pageLabels=K:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let yt=0,gt=this._pages.length;yt<gt;yt++)this._pages[yt].setPageLabel(null!=(Fe=null==(he=this._pageLabels)?void 0:he[yt])?Fe:null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=z.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,Pi(this,Oe,new $(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,V.createPromiseCapability)(),this._onePageRenderedCapability=(0,V.createPromiseCapability)(),this._pagesCapability=(0,V.createPromiseCapability)(),this._scrollMode=z.ScrollMode.VERTICAL,this._previousScrollMode=z.ScrollMode.UNKNOWN,this._spreadMode=z.SpreadMode.NONE,Pi(this,we,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),Jt(this,De)&&(document.removeEventListener("visibilitychange",Jt(this,De)),Pi(this,De,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(G),null!==Jt(this,ye)&&(Pi(this,Pe,Jt(this,ye)),Pi(this,ye,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(K,he,Fe=!1,yt=!1){if(this._currentScaleValue=he.toString(),tn(this,X,gde).call(this,K))return void(yt&&this.eventBus.dispatch("scalechanging",{source:this,scale:K,presetValue:he}));this._doc.style.setProperty("--zoom-factor",K);const gt={scale:K};for(const vt of this._pages)vt.update(gt);if(this._currentScale=K,!Fe){let Ot,vt=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(vt=this._location.pageNumber,Ot=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:vt,destArray:Ot,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:K,presetValue:yt?he:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==z.SpreadMode.NONE&&this._scrollMode!==z.ScrollMode.HORIZONTAL?2:1}_setScale(K,he=!1){let Fe=parseFloat(K);if(Fe>0)this._setScaleUpdatePages(Fe,K,he,!1);else{const yt=this._pages[this._currentPageNumber-1];if(!yt)return;let gt=z.SCROLLBAR_PADDING,vt=z.VERTICAL_PADDING;this.isInPresentationMode?gt=vt=4:this.removePageBorders?gt=vt=0:this._scrollMode===z.ScrollMode.HORIZONTAL&&([gt,vt]=[vt,gt]);const Ot=(this.container.clientWidth-gt)/yt.width*yt.scale/this._pageWidthScaleFactor,Rt=(this.container.clientHeight-vt)/yt.height*yt.scale;switch(K){case"page-actual":Fe=1;break;case"page-width":Fe=Ot;break;case"page-height":Fe=Rt;break;case"page-fit":Fe=Math.min(Ot,Rt);break;case"auto":const Cn=(0,z.isPortraitOrientation)(yt)?Ot:Math.min(Rt,Ot);Fe=Math.min(z.MAX_AUTO_SCALE,Cn);break;default:return void console.error(`_setScale: "${K}" is an unknown zoom value.`)}this._setScaleUpdatePages(Fe,K,he,!0)}}pageLabelToPageNumber(K){if(!this._pageLabels)return null;const he=this._pageLabels.indexOf(K);return he<0?null:he+1}scrollPageIntoView({pageNumber:K,destArray:he=null,allowNegativeOffset:Fe=!1,ignoreDestinationZoom:yt=!1}){if(!this.pdfDocument)return;const gt=Number.isInteger(K)&&this._pages[K-1];if(!gt)return void console.error(`scrollPageIntoView: "${K}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!he)return void this._setCurrentPageNumber(K,!0);let Nn,fi,vt=0,Ot=0,Rt=0,Cn=0;const Ye=gt.rotation%180!=0,oe=(Ye?gt.height:gt.width)/gt.scale/V.PixelsPerInch.PDF_TO_CSS_UNITS,le=(Ye?gt.width:gt.height)/gt.scale/V.PixelsPerInch.PDF_TO_CSS_UNITS;let nt=0;switch(he[1].name){case"XYZ":vt=he[2],Ot=he[3],nt=he[4],vt=null!==vt?vt:0,Ot=null!==Ot?Ot:le;break;case"Fit":case"FitB":nt="page-fit";break;case"FitH":case"FitBH":Ot=he[2],nt="page-width",null===Ot&&this._location?(vt=this._location.left,Ot=this._location.top):("number"!=typeof Ot||Ot<0)&&(Ot=le);break;case"FitV":case"FitBV":vt=he[2],Rt=oe,Cn=le,nt="page-height";break;case"FitR":vt=he[2],Ot=he[3],Rt=he[4]-vt,Cn=he[5]-Ot,Nn=(this.container.clientWidth-(this.removePageBorders?0:z.SCROLLBAR_PADDING))/Rt/V.PixelsPerInch.PDF_TO_CSS_UNITS,fi=(this.container.clientHeight-(this.removePageBorders?0:z.VERTICAL_PADDING))/Cn/V.PixelsPerInch.PDF_TO_CSS_UNITS,nt=Math.min(Math.abs(Nn),Math.abs(fi));break;default:return void console.error(`scrollPageIntoView: "${he[1].name}" is not a valid destination type.`)}if(yt||(nt&&nt!==this._currentScale?this.currentScaleValue=nt:this._currentScale===z.UNKNOWN_SCALE&&(this.currentScaleValue=z.DEFAULT_SCALE_VALUE)),"page-fit"===nt&&!he[4])return void tn(this,H,oC).call(this,gt);const pt=[gt.viewport.convertToViewportPoint(vt,Ot),gt.viewport.convertToViewportPoint(vt+Rt,Ot+Cn)];let Ct=Math.min(pt[0][0],pt[1][0]),At=Math.min(pt[0][1],pt[1][1]);Fe||(Ct=Math.max(Ct,0),At=Math.max(At,0)),tn(this,H,oC).call(this,gt,{left:Ct,top:At})}_updateLocation(K){const he=this._currentScale,Fe=this._currentScaleValue,yt=parseFloat(Fe)===he?Math.round(1e4*he)/100:Fe,gt=K.id,Ot=this.container,Rt=this._pages[gt-1].getPagePoint(Ot.scrollLeft-K.x,Ot.scrollTop-K.y),Cn=Math.round(Rt[0]),Nn=Math.round(Rt[1]);let fi=`#page=${gt}`;this.isInPresentationMode||(fi+=`&zoom=${yt},${Cn},${Nn}`),this._location={pageNumber:gt,scale:yt,top:Nn,left:Cn,rotation:this._pagesRotation,pdfOpenParams:fi}}update(){const K=this._getVisiblePages(),he=K.views,Fe=he.length;if(0===Fe)return;const yt=Math.max(10,2*Fe+1);Jt(this,Oe).resize(yt,K.ids),this.renderingQueue.renderHighestPriority(K);const gt=this._spreadMode===z.SpreadMode.NONE&&(this._scrollMode===z.ScrollMode.PAGE||this._scrollMode===z.ScrollMode.VERTICAL),vt=this._currentPageNumber;let Ot=!1;for(const Rt of he){if(Rt.percent<100)break;if(Rt.id===vt&&gt){Ot=!0;break}}this._setCurrentPageNumber(Ot?vt:he[0].id),this._updateLocation(K.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(K){return this.container.contains(K)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===z.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===z.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const K=this._scrollMode===z.ScrollMode.PAGE?Jt(this,we).pages:this._pages,he=this._scrollMode===z.ScrollMode.HORIZONTAL;return(0,z.getVisibleElements)({scrollEl:this.container,views:K,sortByVisibility:!0,horizontal:he,rtl:he&&this._isContainerRtl})}isPageVisible(K){return!!this.pdfDocument&&(Number.isInteger(K)&&K>0&&K<=this.pagesCount?this._getVisiblePages().ids.has(K):(console.error(`isPageVisible: "${K}" is not a valid page.`),!1))}isPageCached(K){if(!this.pdfDocument)return!1;if(!(Number.isInteger(K)&&K>0&&K<=this.pagesCount))return console.error(`isPageCached: "${K}" is not a valid page.`),!1;const he=this._pages[K-1];return Jt(this,Oe).has(he)}cleanup(){for(const K of this._pages)K.renderingState!==z.RenderingStates.FINISHED&&K.reset()}_cancelRendering(){for(const K of this._pages)K.cancelRendering()}forceRendering(K){const he=K||this._getVisiblePages(),Fe=tn(this,je,_de).call(this,he),gt=this.renderingQueue.getHighestPriority(he,this._pages,Fe,this._spreadMode!==z.SpreadMode.NONE&&this._scrollMode!==z.ScrollMode.HORIZONTAL);return tn(this,Pt,yde).call(this,he.ids),!!gt&&(tn(this,Ee,mde).call(this,gt).then(()=>{this.renderingQueue.renderView(gt)}),!0)}createTextLayerBuilder(K,he,Fe,yt=!1,gt,vt){return new U.TextLayerBuilder({textLayerDiv:K,eventBus:gt,pageIndex:he,viewport:Fe,enhanceTextSelection:!this.isInPresentationMode&&yt,highlighter:vt})}createTextHighlighter(K,he){return new F.TextHighlighter({eventBus:he,pageIndex:K,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(K,he,Fe=null,yt="",gt=!0,vt=A.NullL10n,Ot=null,Rt=null,Cn=null,Nn=null,fi=null){var Ye,oe,le,nt;return new L.AnnotationLayerBuilder({pageDiv:K,pdfPage:he,annotationStorage:Fe||(null==(Ye=this.pdfDocument)?void 0:Ye.annotationStorage),imageResourcesPath:yt,renderForms:gt,linkService:this.linkService,downloadManager:this.downloadManager,l10n:vt,enableScripting:null!=Ot?Ot:this.enableScripting,hasJSActionsPromise:Rt||(null==(oe=this.pdfDocument)?void 0:oe.hasJSActions()),fieldObjectsPromise:Nn||(null==(le=this.pdfDocument)?void 0:le.getFieldObjects()),mouseState:Cn||(null==(nt=this._scriptingManager)?void 0:nt.mouseState),annotationCanvasMap:fi})}createXfaLayerBuilder(K,he,Fe=null){var yt;return new y.XfaLayerBuilder({pageDiv:K,pdfPage:he,annotationStorage:Fe||(null==(yt=this.pdfDocument)?void 0:yt.annotationStorage),linkService:this.linkService})}createStructTreeLayerBuilder(K){return new W.StructTreeLayerBuilder({pdfPage:K})}get hasEqualPageSizes(){const K=this._pages[0];for(let he=1,Fe=this._pages.length;he<Fe;++he){const yt=this._pages[he];if(yt.width!==K.width||yt.height!==K.height)return!1}return!0}getPagesOverview(){return this._pages.map(K=>{const he=K.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,z.isPortraitOrientation)(he)?{width:he.width,height:he.height,rotation:he.rotation}:{width:he.height,height:he.width,rotation:(he.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(K){if(!(K instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${K}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=K;const he={optionalContentConfigPromise:K};for(const Fe of this._pages)Fe.update(he);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:K})}get scrollMode(){return this._scrollMode}set scrollMode(K){if(this._scrollMode!==K){if(!(0,z.isValidScrollMode)(K))throw new Error(`Invalid scroll mode: ${K}`);this.pagesCount>j.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=K,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:K}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(K=null){const he=this._scrollMode,Fe=this.viewer;Fe.classList.toggle("scrollHorizontal",he===z.ScrollMode.HORIZONTAL),Fe.classList.toggle("scrollWrapped",he===z.ScrollMode.WRAPPED),this.pdfDocument&&K&&(he===z.ScrollMode.PAGE?tn(this,T,j0).call(this):this._previousScrollMode===z.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(K,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(K){if(this._spreadMode!==K){if(!(0,z.isValidSpreadMode)(K))throw new Error(`Invalid spread mode: ${K}`);this._spreadMode=K,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:K}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(K=null){if(!this.pdfDocument)return;const he=this.viewer,Fe=this._pages;if(this._scrollMode===z.ScrollMode.PAGE)tn(this,T,j0).call(this);else if(he.textContent="",this._spreadMode===z.SpreadMode.NONE)for(const yt of this._pages)he.appendChild(yt.div);else{const yt=this._spreadMode-1;let gt=null;for(let vt=0,Ot=Fe.length;vt<Ot;++vt)null===gt?(gt=document.createElement("div"),gt.className="spread",he.appendChild(gt)):vt%2===yt&&(gt=gt.cloneNode(!1),he.appendChild(gt)),gt.appendChild(Fe[vt].div)}!K||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(K,!0),this.update())}_getPageAdvance(K,he=!1){switch(this._scrollMode){case z.ScrollMode.WRAPPED:{const{views:Fe}=this._getVisiblePages(),yt=new Map;for(const{id:gt,y:vt,percent:Ot,widthPercent:Rt}of Fe){if(0===Ot||Rt<100)continue;let Cn=yt.get(vt);Cn||yt.set(vt,Cn||(Cn=[])),Cn.push(gt)}for(const gt of yt.values()){const vt=gt.indexOf(K);if(-1===vt)continue;const Ot=gt.length;if(1===Ot)break;if(he)for(let Rt=vt-1,Cn=0;Rt>=Cn;Rt--){const fi=gt[Rt+1]-1;if(gt[Rt]<fi)return K-fi}else for(let Rt=vt+1,Cn=Ot;Rt<Cn;Rt++){const fi=gt[Rt-1]+1;if(gt[Rt]>fi)return fi-K}if(he){const Rt=gt[0];if(Rt<K)return K-Rt+1}else{const Rt=gt[Ot-1];if(Rt>K)return Rt-K+1}break}break}case z.ScrollMode.HORIZONTAL:break;case z.ScrollMode.PAGE:case z.ScrollMode.VERTICAL:{if(this._spreadMode===z.SpreadMode.NONE)break;const Fe=this._spreadMode-1;if(he&&K%2!==Fe)break;if(!he&&K%2===Fe)break;const{views:yt}=this._getVisiblePages(),gt=he?K-1:K+1;for(const{id:vt,percent:Ot,widthPercent:Rt}of yt)if(vt===gt){if(Ot>0&&100===Rt)return 2;break}break}}return 1}nextPage(){const K=this._currentPageNumber,he=this.pagesCount;if(K>=he)return!1;const Fe=this._getPageAdvance(K,!1)||1;return this.currentPageNumber=Math.min(K+Fe,he),!0}previousPage(){const K=this._currentPageNumber;if(K<=1)return!1;const he=this._getPageAdvance(K,!0)||1;return this.currentPageNumber=Math.max(K-he,1),!0}increaseScale(K=1){let he=this._currentScale;do{he=(he*z.DEFAULT_SCALE_DELTA).toFixed(2),he=Math.ceil(10*he)/10,he=Math.min(z.MAX_SCALE,he)}while(--K>0&&he<z.MAX_SCALE);this.currentScaleValue=he}decreaseScale(K=1){let he=this._currentScale;do{he=(he/z.DEFAULT_SCALE_DELTA).toFixed(2),he=Math.floor(10*he)/10,he=Math.max(z.MIN_SCALE,he)}while(--K>0&&he>z.MIN_SCALE);this.currentScaleValue=he}updateContainerHeightCss(){const K=this.container.clientHeight;K!==Jt(this,Be)&&(Pi(this,Be,K),this._doc.style.setProperty("--viewer-container-height",`${K}px`))}};let te=Ze;Oe=new WeakMap,Pe=new WeakMap,ye=new WeakMap,Ie=new WeakMap,Be=new WeakMap,we=new WeakMap,De=new WeakMap,Q=new WeakSet,fde=function(K){!K||(K.includes(V.PermissionFlag.COPY)||this.viewer.classList.add(G),!K.includes(V.PermissionFlag.MODIFY_ANNOTATIONS)&&!K.includes(V.PermissionFlag.FILL_INTERACTIVE_FORMS)&&Jt(this,Pe)===V.AnnotationMode.ENABLE_FORMS&&(Pi(this,ye,Jt(this,Pe)),Pi(this,Pe,V.AnnotationMode.ENABLE)))},R=new WeakSet,pde=function(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const K=new Promise(he=>{Pi(this,De,()=>{"hidden"===document.visibilityState&&(he(),document.removeEventListener("visibilitychange",Jt(this,De)),Pi(this,De,null))}),document.addEventListener("visibilitychange",Jt(this,De))});return Promise.race([this._onePageRenderedCapability.promise,K])},T=new WeakSet,j0=function(){if(this._scrollMode!==z.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const K=this._currentPageNumber,he=Jt(this,we),Fe=this.viewer;if(Fe.textContent="",he.pages.length=0,this._spreadMode!==z.SpreadMode.NONE||this.isInPresentationMode){const yt=new Set,gt=this._spreadMode-1;-1===gt?yt.add(K-1):K%2!==gt?(yt.add(K-1),yt.add(K)):(yt.add(K-2),yt.add(K-1));const vt=document.createElement("div");if(vt.className="spread",this.isInPresentationMode){const Ot=document.createElement("div");Ot.className="dummyPage",vt.appendChild(Ot)}for(const Ot of yt){const Rt=this._pages[Ot];!Rt||(vt.appendChild(Rt.div),he.pages.push(Rt))}Fe.appendChild(vt)}else{const yt=this._pages[K-1];Fe.appendChild(yt.div),he.pages.push(yt)}he.scrollDown=K>=he.previousPageNumber,he.previousPageNumber=K},H=new WeakSet,oC=function(K,he=null){const{div:Fe,id:yt}=K;if(this._scrollMode===z.ScrollMode.PAGE&&(this._setCurrentPageNumber(yt),tn(this,T,j0).call(this),this.update()),!he&&!this.isInPresentationMode){const gt=Fe.offsetLeft+Fe.clientLeft,vt=gt+Fe.clientWidth,{scrollLeft:Ot,clientWidth:Rt}=this.container;(this._scrollMode===z.ScrollMode.HORIZONTAL||gt<Ot||vt>Ot+Rt)&&(he={left:0,top:0})}(0,z.scrollIntoView)(Fe,he)},X=new WeakSet,gde=function(K){return K===this._currentScale||Math.abs(K-this._currentScale)<1e-15},Se=new WeakSet,vB=function(){const K=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),tn(this,H,oC).call(this,K)},Ee=new WeakSet,mde=function(K){var he=this;return N(function*(){var Fe,yt;if(K.pdfPage)return K.pdfPage;try{const gt=yield he.pdfDocument.getPage(K.id);return K.pdfPage||K.setPdfPage(gt),(null==(yt=(Fe=he.linkService)._cachedPageNumber)?void 0:yt.call(Fe,gt.ref))||he.linkService.cachePageRef(K.id,gt.ref),gt}catch(gt){return console.error("Unable to get page for page view",gt),null}})()},je=new WeakSet,_de=function(K){var he,Fe;if(1===(null==(he=K.first)?void 0:he.id))return!0;if((null==(Fe=K.last)?void 0:Fe.id)===this.pagesCount)return!1;switch(this._scrollMode){case z.ScrollMode.PAGE:return Jt(this,we).scrollDown;case z.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Pt=new WeakSet,yde=function(K){for(const he of K){const Fe=this._pages[he-1];null==Fe||Fe.toggleLoadingIconSpinner(!0)}for(const he of Jt(this,Oe))K.has(he.id)||he.toggleLoadingIconSpinner(!1)},C.BaseViewer=te},(ne,C,Y)=>{var P;Object.defineProperty(C,"__esModule",{value:!0}),C.PDFPageView=void 0;var V=Y(3),z=Y(6),L=Y(13),A=Y(4);const S=L.compatibilityParams.maxCanvasPixels||16777216;P=new WeakMap,C.PDFPageView=class b{constructor(F){var G,j,$,te;ln(this,P,V.AnnotationMode.ENABLE_FORMS);const U=F.container,y=F.defaultViewport;this.id=F.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=F.scale||z.DEFAULT_SCALE,this.viewport=y,this.pdfPageRotate=y.rotation,this._optionalContentConfigPromise=F.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!=(G=F.textLayerMode)?G:z.TextLayerMode.ENABLE,Pi(this,P,null!=(j=F.annotationMode)?j:V.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=F.imageResourcesPath||"",this.useOnlyCssZoom=F.useOnlyCssZoom||!1,this.maxCanvasPixels=F.maxCanvasPixels||S,this.pageColors=F.pageColors||null,this.eventBus=F.eventBus,this.renderingQueue=F.renderingQueue,this.textLayerFactory=F.textLayerFactory,this.annotationLayerFactory=F.annotationLayerFactory,this.xfaLayerFactory=F.xfaLayerFactory,this.textHighlighter=null==($=F.textHighlighterFactory)?void 0:$.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=F.structTreeLayerFactory,this.renderer=F.renderer||z.RendererType.CANVAS,this.l10n=F.l10n||A.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=z.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null==(te=this.renderingQueue)?void 0:te.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const x=document.createElement("div");x.className="page",x.style.width=Math.floor(this.viewport.width)+"px",x.style.height=Math.floor(this.viewport.height)+"px",x.setAttribute("data-page-number",this.id),x.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(ie=>{x.setAttribute("aria-label",ie)}),this.div=x,null==U||U.appendChild(x)}setPdfPage(F){this.pdfPage=F,this.pdfPageRotate=F.rotate,this.viewport=F.getViewport({scale:this.scale*V.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var F=this;return N(function*(){let U=null;try{yield F.annotationLayer.render(F.viewport,"display")}catch(y){U=y}finally{F.eventBus.dispatch("annotationlayerrendered",{source:F,pageNumber:F.id,error:U})}})()}_renderXfaLayer(){var F=this;return N(function*(){let U=null;try{const y=yield F.xfaLayer.render(F.viewport,"display");F.textHighlighter&&F._buildXfaTextContentItems(y.textDivs)}catch(y){U=y}finally{F.eventBus.dispatch("xfalayerrendered",{source:F,pageNumber:F.id,error:U})}})()}_buildXfaTextContentItems(F){var U=this;return N(function*(){const y=yield U.pdfPage.getTextContent(),x=[];for(const G of y.items)x.push(G.str);U.textHighlighter.setTextMapping(F,x),U.textHighlighter.enable()})()}_resetZoomLayer(F=!1){if(!this.zoomLayer)return;const U=this.zoomLayer.firstChild;this.paintedViewportMap.delete(U),U.width=0,U.height=0,F&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:F=!1,keepAnnotationLayer:U=!1,keepXfaLayer:y=!1}={}){var ie,ae;this.cancelRendering({keepAnnotationLayer:U,keepXfaLayer:y}),this.renderingState=z.RenderingStates.INITIAL;const x=this.div;x.style.width=Math.floor(this.viewport.width)+"px",x.style.height=Math.floor(this.viewport.height)+"px";const G=x.childNodes,j=F&&this.zoomLayer||null,$=U&&(null==(ie=this.annotationLayer)?void 0:ie.div)||null,te=y&&(null==(ae=this.xfaLayer)?void 0:ae.div)||null;for(let _e=G.length-1;_e>=0;_e--){const Te=G[_e];switch(Te){case j:case $:case te:continue}Te.remove()}x.removeAttribute("data-loaded"),$&&this.annotationLayer.hide(),te&&this.xfaLayer.hide(),j||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(_e=>{var Te;null==(Te=this.loadingIconDiv)||Te.setAttribute("aria-label",_e)}),x.appendChild(this.loadingIconDiv)}update({scale:F=0,rotation:U=null,optionalContentConfigPromise:y=null}){if(this.scale=F||this.scale,"number"==typeof U&&(this.rotation=U),y instanceof Promise&&(this._optionalContentConfigPromise=y),this.viewport=this.viewport.clone({scale:this.scale*V.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:j}=document.documentElement;j.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let G=!1;if(this.canvas&&this.maxCanvasPixels>0){const j=this.outputScale;(Math.floor(this.viewport.width)*j.sx|0)*(Math.floor(this.viewport.height)*j.sy|0)>this.maxCanvasPixels&&(G=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&G)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:F=!1,keepXfaLayer:U=!1}={}){var y;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!F||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!U||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,null==(y=this.textHighlighter)||y.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:F,redrawAnnotationLayer:U=!1,redrawXfaLayer:y=!1}){const x=this.viewport.width,G=this.viewport.height,j=this.div;F.style.width=F.parentNode.style.width=j.style.width=Math.floor(x)+"px",F.style.height=F.parentNode.style.height=j.style.height=Math.floor(G)+"px";const $=this.viewport.rotation-this.paintedViewportMap.get(F).rotation,te=Math.abs($);let ie=1,ae=1;if((90===te||270===te)&&(ie=G/x,ae=x/G),F.style.transform=`rotate(${$}deg) scale(${ie}, ${ae})`,this.textLayer){const _e=this.textLayer.viewport,Oe=Math.abs(this.viewport.rotation-_e.rotation);let Pe=x/_e.width;(90===Oe||270===Oe)&&(Pe=x/_e.height);const ye=this.textLayer.textLayerDiv;let Ie,Be;switch(Oe){case 0:Ie=Be=0;break;case 90:Ie=0,Be="-"+ye.style.height;break;case 180:Ie="-"+ye.style.width,Be="-"+ye.style.height;break;case 270:Ie="-"+ye.style.width,Be=0;break;default:console.error("Bad rotation value.")}ye.style.transform=`rotate(${Oe}deg) scale(${Pe}) translate(${Ie}, ${Be})`,ye.style.transformOrigin="0% 0%"}U&&this.annotationLayer&&this._renderAnnotationLayer(),y&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(F,U){return this.viewport.convertToPdfPoint(F,U)}toggleLoadingIconSpinner(F=!1){var U;null==(U=this.loadingIconDiv)||U.classList.toggle("notVisible",!F)}draw(){var ae,_e,Te,F=this;this.renderingState!==z.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:U,pdfPage:y}=this;if(!y)return this.renderingState=z.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=z.RenderingStates.RUNNING;const x=document.createElement("div");x.style.width=U.style.width,x.style.height=U.style.height,x.classList.add("canvasWrapper"),(null==(ae=this.annotationLayer)?void 0:ae.div)?U.insertBefore(x,this.annotationLayer.div):U.appendChild(x);let G=null;if(this.textLayerMode!==z.TextLayerMode.DISABLE&&this.textLayerFactory){const Oe=document.createElement("div");Oe.className="textLayer",Oe.style.width=x.style.width,Oe.style.height=x.style.height,(null==(_e=this.annotationLayer)?void 0:_e.div)?U.insertBefore(Oe,this.annotationLayer.div):U.appendChild(Oe),G=this.textLayerFactory.createTextLayerBuilder(Oe,this.id-1,this.viewport,this.textLayerMode===z.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=G,Jt(this,P)!==V.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(U,y,null,this.imageResourcesPath,Jt(this,P)===V.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))),(null==(Te=this.xfaLayer)?void 0:Te.div)&&U.appendChild(this.xfaLayer.div);let j=null;this.renderingQueue&&(j=Oe=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=z.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=z.RenderingStates.RUNNING,Oe()});Oe()});const $=function(){var Oe=N(function*(Pe=null){if(te===F.paintTask&&(F.paintTask=null),Pe instanceof V.RenderingCancelledException)F._renderError=null;else if(F._renderError=Pe,F.renderingState=z.RenderingStates.FINISHED,F.loadingIconDiv&&(F.loadingIconDiv.remove(),delete F.loadingIconDiv),F._resetZoomLayer(!0),F.eventBus.dispatch("pagerendered",{source:F,pageNumber:F.id,cssTransform:!1,timestamp:performance.now(),error:F._renderError}),Pe)throw Pe});return function(){return Oe.apply(this,arguments)}}(),te=this.renderer===z.RendererType.SVG?this.paintOnSvg(x):this.paintOnCanvas(x);te.onRenderContinue=j,this.paintTask=te;const ie=te.promise.then(()=>$(null).then(()=>{if(G){const Oe=y.streamTextContent({includeMarkedContent:!0});G.setTextContentStream(Oe),G.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(Oe){return $(Oe)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(U,y,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=Oe=>{Oe.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(Pe=>{if(!Pe||!this.canvas)return;const ye=this.structTreeLayer.render(Pe);ye.classList.add("structTree"),this.canvas.appendChild(ye)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(y)),U.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),ie}paintOnCanvas(F){const U=(0,V.createPromiseCapability)(),y={promise:U.promise,onRenderContinue(ye){ye()},cancel(){Pe.cancel()}},x=this.viewport,G=document.createElement("canvas");G.hidden=!0;let j=!0;const $=function(){j&&(G.hidden=!1,j=!1)};F.appendChild(G),this.canvas=G;const te=G.getContext("2d",{alpha:!1}),ie=this.outputScale=new z.OutputScale;if(this.useOnlyCssZoom){const ye=x.clone({scale:V.PixelsPerInch.PDF_TO_CSS_UNITS});ie.sx*=ye.width/x.width,ie.sy*=ye.height/x.height}if(this.maxCanvasPixels>0){const Ie=Math.sqrt(this.maxCanvasPixels/(x.width*x.height));ie.sx>Ie||ie.sy>Ie?(ie.sx=Ie,ie.sy=Ie,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const ae=(0,z.approximateFraction)(ie.sx),_e=(0,z.approximateFraction)(ie.sy);G.width=(0,z.roundToDivide)(x.width*ie.sx,ae[0]),G.height=(0,z.roundToDivide)(x.height*ie.sy,_e[0]),G.style.width=(0,z.roundToDivide)(x.width,ae[1])+"px",G.style.height=(0,z.roundToDivide)(x.height,_e[1])+"px",this.paintedViewportMap.set(G,x);const Oe={canvasContext:te,transform:ie.scaled?[ie.sx,0,0,ie.sy,0,0]:null,viewport:this.viewport,annotationMode:Jt(this,P),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},Pe=this.pdfPage.render(Oe);return Pe.onContinue=function(ye){$(),y.onRenderContinue?y.onRenderContinue(ye):ye()},Pe.promise.then(function(){$(),U.resolve()},function(ye){$(),U.reject(ye)}),y}paintOnSvg(F){let U=!1;const y=()=>{if(U)throw new V.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},x=this.pdfPage,G=this.viewport.clone({scale:V.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:x.getOperatorList({annotationMode:Jt(this,P)}).then($=>(y(),new V.SVGGraphics(x.commonObjs,x.objs).getSVG($,G).then(ie=>{y(),this.svg=ie,this.paintedViewportMap.set(ie,G),ie.style.width=F.style.width,ie.style.height=F.style.height,this.renderingState=z.RenderingStates.FINISHED,F.appendChild(ie)}))),onRenderContinue($){$()},cancel(){U=!0}}}setPageLabel(F){this.pageLabel="string"==typeof F?F:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(ne,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.compatibilityParams=C.OptionKind=C.AppOptions=void 0;const Y=Object.create(null);C.compatibilityParams=Y;{const S=navigator.userAgent||"",b=navigator.platform||"",P=navigator.maxTouchPoints||1,W=/Android/.test(S);(/\b(iPad|iPhone|iPod)(?=;)/.test(S)||"MacIntel"===b&&P>1||W)&&(Y.maxCanvasPixels=5242880)}const V={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};C.OptionKind=V;const z={annotationMode:{value:2,kind:V.VIEWER+V.PREFERENCE},cursorToolOnLoad:{value:0,kind:V.VIEWER+V.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:V.VIEWER},defaultZoomValue:{value:"",kind:V.VIEWER+V.PREFERENCE},disableHistory:{value:!1,kind:V.VIEWER},disablePageLabels:{value:!1,kind:V.VIEWER+V.PREFERENCE},enablePermissions:{value:!1,kind:V.VIEWER+V.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:V.VIEWER+V.PREFERENCE},enableScripting:{value:!0,kind:V.VIEWER+V.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:V.VIEWER},externalLinkTarget:{value:0,kind:V.VIEWER+V.PREFERENCE},historyUpdateUrl:{value:!1,kind:V.VIEWER+V.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:V.VIEWER+V.PREFERENCE},imageResourcesPath:{value:"./images/",kind:V.VIEWER},maxCanvasPixels:{value:16777216,compatibility:Y.maxCanvasPixels,kind:V.VIEWER},pageColorsBackground:{value:"Canvas",kind:V.VIEWER+V.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:V.VIEWER+V.PREFERENCE},pdfBugEnabled:{value:!1,kind:V.VIEWER+V.PREFERENCE},printResolution:{value:150,kind:V.VIEWER},renderer:{value:"canvas",kind:V.VIEWER},sidebarViewOnLoad:{value:-1,kind:V.VIEWER+V.PREFERENCE},scrollModeOnLoad:{value:-1,kind:V.VIEWER+V.PREFERENCE},spreadModeOnLoad:{value:-1,kind:V.VIEWER+V.PREFERENCE},textLayerMode:{value:1,kind:V.VIEWER+V.PREFERENCE},useOnlyCssZoom:{value:!1,kind:V.VIEWER+V.PREFERENCE},viewerCssTheme:{value:0,kind:V.VIEWER+V.PREFERENCE},viewOnLoad:{value:0,kind:V.VIEWER+V.PREFERENCE},cMapPacked:{value:!0,kind:V.API},cMapUrl:{value:"../web/cmaps/",kind:V.API},disableAutoFetch:{value:!1,kind:V.API+V.PREFERENCE},disableFontFace:{value:!1,kind:V.API+V.PREFERENCE},disableRange:{value:!1,kind:V.API+V.PREFERENCE},disableStream:{value:!1,kind:V.API+V.PREFERENCE},docBaseUrl:{value:"",kind:V.API},enableXfa:{value:!0,kind:V.API+V.PREFERENCE},fontExtraProperties:{value:!1,kind:V.API},isEvalSupported:{value:!0,kind:V.API},maxImageSize:{value:-1,kind:V.API},pdfBug:{value:!1,kind:V.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:V.API},verbosity:{value:1,kind:V.API},workerPort:{value:null,kind:V.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:V.WORKER}};z.disablePreferences={value:!1,kind:V.VIEWER},z.locale={value:navigator.language||"en-US",kind:V.VIEWER},z.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:V.VIEWER},z.renderer.kind+=V.PREFERENCE;const L=Object.create(null);C.AppOptions=class A{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(b){var F;const P=L[b];if(void 0!==P)return P;const W=z[b];return void 0!==W?null!=(F=W.compatibility)?F:W.value:void 0}static getAll(b=null){var W;const P=Object.create(null);for(const F in z){const U=z[F];if(b){if(0==(b&U.kind))continue;if(b===V.PREFERENCE){const x=U.value,G=typeof x;if("boolean"===G||"string"===G||"number"===G&&Number.isInteger(x)){P[F]=x;continue}throw new Error(`Invalid type for preference: ${F}`)}}const y=L[F];P[F]=void 0!==y?y:null!=(W=U.compatibility)?W:U.value}return P}static set(b,P){L[b]=P}static setAll(b){for(const P in b)L[P]=b[P]}static remove(b){delete L[b]}static _hasUserOptions(){return Object.keys(L).length>0}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.PDFRenderingQueue=void 0;var V=Y(3),z=Y(6);C.PDFRenderingQueue=class A{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(b){this.pdfViewer=b}setThumbnailViewer(b){this.pdfThumbnailViewer=b}isHighestPriority(b){return this.highestPriorityPage===b.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(b){var P;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(b)&&(this.isThumbnailViewEnabled&&(null==(P=this.pdfThumbnailViewer)?void 0:P.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(b,P,W,F=!1){const U=b.views,y=U.length;if(0===y)return null;for(let te=0;te<y;te++){const ie=U[te].view;if(!this.isViewFinished(ie))return ie}const x=b.first.id,G=b.last.id;if(G-x+1>y){const te=b.ids;for(let ie=1,ae=G-x;ie<ae;ie++){const _e=W?x+ie:G-ie;if(te.has(_e))continue;const Te=P[_e-1];if(!this.isViewFinished(Te))return Te}}let j=W?G:x-2,$=P[j];return $&&!this.isViewFinished($)||F&&(j+=W?1:-1,$=P[j],$&&!this.isViewFinished($))?$:null}isViewFinished(b){return b.renderingState===z.RenderingStates.FINISHED}renderView(b){switch(b.renderingState){case z.RenderingStates.FINISHED:return!1;case z.RenderingStates.PAUSED:this.highestPriorityPage=b.renderingId,b.resume();break;case z.RenderingStates.RUNNING:this.highestPriorityPage=b.renderingId;break;case z.RenderingStates.INITIAL:this.highestPriorityPage=b.renderingId,b.draw().finally(()=>{this.renderHighestPriority()}).catch(P=>{P instanceof V.RenderingCancelledException||console.error(`renderView: "${P}"`)})}return!0}}},(ne,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.TextHighlighter=void 0,C.TextHighlighter=class Y{constructor({findController:z,eventBus:L,pageIndex:A}){this.findController=z,this.matches=[],this.eventBus=L,this.pageIdx=A,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(z,L){this.textDivs=z,this.textContentItemsStr=L}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=z=>{(z.pageIndex===this.pageIdx||-1===z.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(z,L){if(!z)return[];const{textContentItemsStr:A}=this;let S=0,b=0;const P=A.length-1,W=[];for(let F=0,U=z.length;F<U;F++){let y=z[F];for(;S!==P&&y>=b+A[S].length;)b+=A[S].length,S++;S===A.length&&console.error("Could not find a matching mapping");const x={begin:{divIdx:S,offset:y-b}};for(y+=L[F];S!==P&&y>b+A[S].length;)b+=A[S].length,S++;x.end={divIdx:S,offset:y-b},W.push(x)}return W}_renderMatches(z){if(0===z.length)return;const{findController:L,pageIdx:A}=this,{textContentItemsStr:S,textDivs:b}=this,P=A===L.selected.pageIdx,W=L.selected.matchIdx;let U=null;function x(te,ie){const ae=te.divIdx;return b[ae].textContent="",G(ae,0,te.offset,ie)}function G(te,ie,ae,_e){let Te=b[te];if(Te.nodeType===Node.TEXT_NODE){const ye=document.createElement("span");Te.parentNode.insertBefore(ye,Te),ye.appendChild(Te),b[te]=ye,Te=ye}const Oe=S[te].substring(ie,ae),Pe=document.createTextNode(Oe);if(_e){const ye=document.createElement("span");return ye.className=`${_e} appended`,ye.appendChild(Pe),Te.appendChild(ye),_e.includes("selected")?ye.offsetLeft:0}return Te.appendChild(Pe),0}let j=W,$=j+1;if(L.state.highlightAll)j=0,$=z.length;else if(!P)return;for(let te=j;te<$;te++){const ie=z[te],ae=ie.begin,_e=ie.end,Te=P&&te===W,Oe=Te?" selected":"";let Pe=0;if(U&&ae.divIdx===U.divIdx?G(U.divIdx,U.offset,ae.offset):(null!==U&&G(U.divIdx,U.offset,undefined),x(ae)),ae.divIdx===_e.divIdx)Pe=G(ae.divIdx,ae.offset,_e.offset,"highlight"+Oe);else{Pe=G(ae.divIdx,ae.offset,undefined,"highlight begin"+Oe);for(let ye=ae.divIdx+1,Ie=_e.divIdx;ye<Ie;ye++)b[ye].className="highlight middle"+Oe;x(_e,"highlight end"+Oe)}U=_e,Te&&L.scrollMatchIntoView({element:b[ae.divIdx],selectedLeft:Pe,pageIndex:A,matchIndex:W})}U&&G(U.divIdx,U.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:z,matches:L,pageIdx:A}=this,{textContentItemsStr:S,textDivs:b}=this;let P=-1;for(let U=0,y=L.length;U<y;U++){const x=L[U];for(let j=Math.max(P,x.begin.divIdx),$=x.end.divIdx;j<=$;j++){const te=b[j];te.textContent=S[j],te.className=""}P=x.end.divIdx+1}(null==z?void 0:z.highlightMatches)&&(this.matches=this._convertMatches(z.pageMatches[A]||null,z.pageMatchesLength[A]||null),this._renderMatches(this.matches))}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.DownloadManager=void 0;var V=Y(3);function z(A,S){const b=document.createElement("a");if(!b.click)throw new Error('DownloadManager: "a.click()" is not supported.');b.href=A,b.target="_parent","download"in b&&(b.download=S),(document.body||document.documentElement).appendChild(b),b.click(),b.remove()}C.DownloadManager=class L{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(S,b){(0,V.createValidAbsoluteUrl)(S,"http://example.com")?z(S+"#pdfjs.action=download",b):console.error(`downloadUrl - not a valid URL: ${S}`)}downloadData(S,b,P){z(URL.createObjectURL(new Blob([S],{type:P})),b)}openOrDownloadData(S,b,P){const W=(0,V.isPdfFile)(P),F=W?"application/pdf":"";if(W){let y,U=this._openBlobUrls.get(S);U||(U=URL.createObjectURL(new Blob([b],{type:F})),this._openBlobUrls.set(S,U)),y="?file="+encodeURIComponent(U+"#"+P);try{return window.open(y),!0}catch(x){console.error(`openOrDownloadData: ${x}`),URL.revokeObjectURL(U),this._openBlobUrls.delete(S)}}return this.downloadData(b,P,F),!1}download(S,b,P,W="download"){z(URL.createObjectURL(S),P)}}},(ne,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.WaitOnType=C.EventBus=C.AutomationEventBus=void 0,C.waitOnEventOrTimeout=function V({target:A,name:S,delay:b=0}){return new Promise(function(P,W){if("object"!=typeof A||!S||"string"!=typeof S||!(Number.isInteger(b)&&b>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function F(G){A instanceof z?A._off(S,U):A.removeEventListener(S,U),x&&clearTimeout(x),P(G)}const U=F.bind(null,Y.EVENT);A instanceof z?A._on(S,U):A.addEventListener(S,U);const y=F.bind(null,Y.TIMEOUT),x=setTimeout(y,b)})};const Y={EVENT:"event",TIMEOUT:"timeout"};C.WaitOnType=Y;class z{constructor(){this._listeners=Object.create(null)}on(S,b,P=null){this._on(S,b,{external:!0,once:null==P?void 0:P.once})}off(S,b,P=null){this._off(S,b,{external:!0,once:null==P?void 0:P.once})}dispatch(S,b){const P=this._listeners[S];if(!P||0===P.length)return;let W;for(const{listener:F,external:U,once:y}of P.slice(0))y&&this._off(S,F),U?(W||(W=[])).push(F):F(b);if(W){for(const F of W)F(b);W=null}}_on(S,b,P=null){var F;((F=this._listeners)[S]||(F[S]=[])).push({listener:b,external:!0===(null==P?void 0:P.external),once:!0===(null==P?void 0:P.once)})}_off(S,b,P=null){const W=this._listeners[S];if(W)for(let F=0,U=W.length;F<U;F++)if(W[F].listener===b)return void W.splice(F,1)}}C.EventBus=z,C.AutomationEventBus=class L extends z{dispatch(S,b){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.GenericL10n=void 0,Y(19);var V=Y(4);const z=document.webL10n;C.GenericL10n=class L{constructor(S){this._lang=S,this._ready=new Promise((b,P)=>{z.setLanguage((0,V.fixupLangCode)(S),()=>{b(z)})})}getLanguage(){var S=this;return N(function*(){return(yield S._ready).getLanguage()})()}getDirection(){var S=this;return N(function*(){return(yield S._ready).getDirection()})()}get(S,b=null,P=(0,V.getL10nFallback)(S,b)){var W=this;return N(function*(){return(yield W._ready).get(S,b,P)})()}translate(S){var b=this;return N(function*(){return(yield b._ready).translate(S)})()}}},()=>{document.webL10n=function(ne,C,Y){var V={},z="",L="textContent",A="",S={},b="loading";function x(ye,Ie,Be){Ie=Ie||function(Q){},Be=Be||function(){};var we=new XMLHttpRequest;we.open("GET",ye,!0),we.overrideMimeType&&we.overrideMimeType("text/plain; charset=utf-8"),we.onreadystatechange=function(){4==we.readyState&&(200==we.status||0===we.status?Ie(we.responseText):Be())},we.onerror=Be,we.ontimeout=Be;try{we.send(null)}catch(De){Be()}}function j(ye,Ie){ye&&(ye=ye.toLowerCase()),Ie=Ie||function(){},function $(){V={},z="",A=""}(),A=ye;var Be=function W(){return C.querySelectorAll('link[type="application/l10n"]')}(),we=Be.length;if(0!==we){var R,v=0;R=function(){++v>=we&&(Ie(),b="complete")};for(var I=0;I<we;I++)new T(Be[I]).load(ye,R)}else{var De=function F(){var ye=C.querySelector('script[type="application/l10n"]');return ye?JSON.parse(ye.innerHTML):null}();if(De&&De.locales&&De.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(V=De.locales[ye])){var Q=De.default_locale.toLowerCase();for(var E in De.locales){if((E=E.toLowerCase())===ye){V=De.locales[ye];break}E===Q&&(V=De.locales[Q])}}Ie()}else console.log("no resource to load, early way out");b="complete"}function T(k){var X=k.href;this.load=function(fe,Se){!function G(ye,Ie,Be,we){var De=ye.replace(/[^\/]*$/,"")||"./";function Q(R){return R.lastIndexOf("\\")<0?R:R.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}x(ye,function(R){z+=R,function E(R,v){var T={},I=/^\s*|\s*$/,H=/^\s*#|^\s*$/,k=/^\s*\[(.*)\]\s*$/,X=/^\s*@import\s+url\((.*)\)\s*$/i,fe=/^([^=\s]*)\s*=\s*(.+)$/;function Se(Ee,Le,je){var ft=Ee.replace(I,"").split(/[\r\n]+/),Pt="*",$e=Ie.split("-",1)[0],Ze=!1,Qe="";!function K(){for(;;){if(!ft.length)return void je();var he=ft.shift();if(!H.test(he)){if(Le){if(Qe=k.exec(he)){Pt=Qe[1].toLowerCase(),Ze="*"!==Pt&&Pt!==Ie&&Pt!==$e;continue}if(Ze)continue;if(Qe=X.exec(he))return void Me(De+Qe[1],K)}var Fe=he.match(fe);Fe&&3==Fe.length&&(T[Fe[1]]=Q(Fe[2]))}}}()}function Me(Ee,Le){x(Ee,function(je){Se(je,!1,Le)},function(){console.warn(Ee+" not found."),Le()})}Se(R,!0,function(){v(T)})}(R,function(v){for(var T in v){var I,H,k=T.lastIndexOf(".");k>0?(I=T.substring(0,k),H=T.substring(k+1)):(I=T,H=L),V[I]||(V[I]={}),V[I][H]=v[T]}Be&&Be()})},we)}(X,fe,Se,function(){console.warn(X+" not found."),console.warn('"'+fe+'" resource not found'),A="",Se()})}}}function ie(ye,Ie,Be){var we=V[ye];if(!we){if(console.warn("#"+ye+" is undefined."),!Be)return null;we=Be}var De={};for(var Q in we){var E=we[Q];E=_e(E=ae(E,Ie,ye,Q),Ie,ye),De[Q]=E}return De}function ae(ye,Ie,Be,we){var Q=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(ye);if(!Q||!Q.length)return ye;var v,E=Q[1],R=Q[2];return Ie&&R in Ie?v=Ie[R]:R in V&&(v=V[R]),E in S&&(ye=(0,S[E])(ye,v,Be,we)),ye}function _e(ye,Ie,Be){return ye.replace(/\{\{\s*(.+?)\s*\}\}/g,function(De,Q){return Ie&&Q in Ie?Ie[Q]:Q in V?V[Q]:(console.log("argument {{"+Q+"}} for #"+Be+" is undefined."),De)})}function Te(ye){var Ie=function y(ye){if(!ye)return{};var Ie=ye.getAttribute("data-l10n-id"),Be=ye.getAttribute("data-l10n-args"),we={};if(Be)try{we=JSON.parse(Be)}catch(De){console.warn("could not parse arguments for #"+Ie)}return{id:Ie,args:we}}(ye);if(Ie.id){var Be=ie(Ie.id,Ie.args);if(!Be)return void console.warn("#"+Ie.id+" is undefined.");if(Be[L]){if(0===function Oe(ye){if(ye.children)return ye.children.length;if(void 0!==ye.childElementCount)return ye.childElementCount;for(var Ie=0,Be=0;Be<ye.childNodes.length;Be++)Ie+=1===ye.nodeType?1:0;return Ie}(ye))ye[L]=Be[L];else{for(var we=ye.childNodes,De=!1,Q=0,E=we.length;Q<E;Q++)3===we[Q].nodeType&&/\S/.test(we[Q].nodeValue)&&(De?we[Q].nodeValue="":(we[Q].nodeValue=Be[L],De=!0));if(!De){var R=C.createTextNode(Be[L]);ye.insertBefore(R,ye.firstChild)}}delete Be[L]}for(var v in Be)ye[v]=Be[v]}}return S.plural=function(ye,Ie,Be,we){var De=parseFloat(Ie);if(isNaN(De)||we!=L)return ye;S._pluralRules||(S._pluralRules=function te(ye){function Be(E,R){return-1!==R.indexOf(E)}function we(E,R,v){return R<=E&&E<=v}var De={0:function(E){return"other"},1:function(E){return we(E%100,3,10)?"few":0===E?"zero":we(E%100,11,99)?"many":2==E?"two":1==E?"one":"other"},2:function(E){return 0!==E&&E%10==0?"many":2==E?"two":1==E?"one":"other"},3:function(E){return 1==E?"one":"other"},4:function(E){return we(E,0,1)?"one":"other"},5:function(E){return we(E,0,2)&&2!=E?"one":"other"},6:function(E){return 0===E?"zero":E%10==1&&E%100!=11?"one":"other"},7:function(E){return 2==E?"two":1==E?"one":"other"},8:function(E){return we(E,3,6)?"few":we(E,7,10)?"many":2==E?"two":1==E?"one":"other"},9:function(E){return 0===E||1!=E&&we(E%100,1,19)?"few":1==E?"one":"other"},10:function(E){return we(E%10,2,9)&&!we(E%100,11,19)?"few":E%10!=1||we(E%100,11,19)?"other":"one"},11:function(E){return we(E%10,2,4)&&!we(E%100,12,14)?"few":E%10==0||we(E%10,5,9)||we(E%100,11,14)?"many":E%10==1&&E%100!=11?"one":"other"},12:function(E){return we(E,2,4)?"few":1==E?"one":"other"},13:function(E){return we(E%10,2,4)&&!we(E%100,12,14)?"few":1!=E&&we(E%10,0,1)||we(E%10,5,9)||we(E%100,12,14)?"many":1==E?"one":"other"},14:function(E){return we(E%100,3,4)?"few":E%100==2?"two":E%100==1?"one":"other"},15:function(E){return 0===E||we(E%100,2,10)?"few":we(E%100,11,19)?"many":1==E?"one":"other"},16:function(E){return E%10==1&&11!=E?"one":"other"},17:function(E){return 3==E?"few":0===E?"zero":6==E?"many":2==E?"two":1==E?"one":"other"},18:function(E){return 0===E?"zero":we(E,0,2)&&0!==E&&2!=E?"one":"other"},19:function(E){return we(E,2,10)?"few":we(E,0,1)?"one":"other"},20:function(E){return!we(E%10,3,4)&&E%10!=9||we(E%100,10,19)||we(E%100,70,79)||we(E%100,90,99)?E%1e6==0&&0!==E?"many":E%10!=2||Be(E%100,[12,72,92])?E%10!=1||Be(E%100,[11,71,91])?"other":"one":"two":"few"},21:function(E){return 0===E?"zero":1==E?"one":"other"},22:function(E){return we(E,0,1)||we(E,11,99)?"one":"other"},23:function(E){return we(E%10,1,2)||E%20==0?"one":"other"},24:function(E){return we(E,3,10)||we(E,13,19)?"few":Be(E,[2,12])?"two":Be(E,[1,11])?"one":"other"}},Q={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[ye.replace(/-.*$/,"")];return Q in De?De[Q]:(console.warn("plural form unknown for ["+ye+"]"),function(){return"other"})}(A));var Q="["+S._pluralRules(De)+"]";return 0===De&&Be+"[zero]"in V?ye=V[Be+"[zero]"][we]:1==De&&Be+"[one]"in V?ye=V[Be+"[one]"][we]:2==De&&Be+"[two]"in V?ye=V[Be+"[two]"][we]:Be+Q in V?ye=V[Be+Q][we]:Be+"[other]"in V&&(ye=V[Be+"[other]"][we]),ye},{get:function(ye,Ie,Be){var Q,we=ye.lastIndexOf("."),De=L;we>0&&(De=ye.substring(we+1),ye=ye.substring(0,we)),Be&&((Q={})[De]=Be);var E=ie(ye,Ie,Q);return E&&De in E?E[De]:"{{"+ye+"}}"},getData:function(){return V},getText:function(){return z},getLanguage:function(){return A},setLanguage:function(ye,Ie){j(ye,function(){Ie&&Ie()})},getDirection:function(){var Ie=A.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(Ie)>=0?"rtl":"ltr"},translate:function Pe(ye){for(var Ie=function U(ye){return ye?ye.querySelectorAll("*[data-l10n-id]"):[]}(ye=ye||C.documentElement),Be=Ie.length,we=0;we<Be;we++)Te(Ie[we]);Te(ye)},getReadyState:function(){return b},ready:function(ye){ye&&("complete"==b||"interactive"==b?ne.setTimeout(function(){ye()}):C.addEventListener&&C.addEventListener("localized",function Ie(){C.removeEventListener("localized",Ie),ye()}))}}}(window,document)},(ne,C,Y)=>{var _e,vde,Oe,bB,ye,wB,Be,bde,De,wde,E,xde,v,xB,I,Sde,k,Cde,fe,aC,Me,G0,Le,xp,ft,Mde,$e,SB,Qe,CB,he,lC,yt,Ade,vt,MB,Rt,Ede,Nn,W0;Object.defineProperty(C,"__esModule",{value:!0}),C.PDFFindController=C.FindState=void 0;var V=Y(6),z=Y(3),L=Y(21);const A={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};C.FindState=A;const W={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},F=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),U=[...F.values()].map(Ye=>String.fromCharCode(Ye)).join(""),y=/\p{M}+/gu,x=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,G=/([^\p{M}])\p{M}*$/u,j=/^\p{M}*([^\p{M}])/u;let $=null;function te(Ye){if(!$){const _n=Object.keys(W).join("");$=new RegExp(`([${_n}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const oe=[];let le;for(;null!==(le=y.exec(Ye));)oe.push([le[0].length,le.index]);let nt=Ye.normalize("NFD");const pt=[[0,0]];let Ct=0,At=0,An=0,Vn=0,wi=!1;return nt=nt.replace($,(_n,tr,Oi,fs,Ei,Mr)=>{var Ns;if(Mr-=An,tr){const ps=W[_n],nr=ps.length;for(let Dr=1;Dr<nr;Dr++)pt.push([Mr-At+Dr,At-Dr]);return At-=nr-1,ps}if(Oi){const ps=Oi.endsWith("\n"),nr=ps?Oi.length-2:Oi.length;wi=!0;let Dr=nr;Mr+Vn===(null==(Ns=oe[Ct])?void 0:Ns[1])&&(Dr-=oe[Ct][0],++Ct);for(let Un=1;Un<Dr+1;Un++)pt.push([Mr-1-At+Un,At-Un]);return At-=Dr,An+=Dr,ps?(pt.push([(Mr+=nr-1)-At+1,1+At]),At+=1,An+=1,Vn+=1,Oi.slice(0,nr)):Oi}return fs?(pt.push([Mr-At+1,1+At]),At+=1,An+=1,Vn+=1,fs.charAt(0)):(pt.push([Mr-At+1,At-1]),At-=1,An+=1,Vn+=1," ")}),pt.push([nt.length,At]),[nt,pt,wi]}function ie(Ye,oe,le){if(!Ye)return[oe,le];const nt=oe,pt=oe+le;let Ct=(0,V.binarySearchFirstItem)(Ye,An=>An[0]>=nt);Ye[Ct][0]>nt&&--Ct;let At=(0,V.binarySearchFirstItem)(Ye,An=>An[0]>=pt,Ct);return Ye[At][0]>pt&&--At,[nt+Ye[Ct][1],le+Ye[At][1]-Ye[Ct][1]]}_e=new WeakSet,vde=function(oe){if(!oe)return;const le=this._pdfDocument,{type:nt}=oe;(null===this._state||tn(this,Be,bde).call(this,oe))&&(this._dirtyMatch=!0),this._state=oe,"highlightallchange"!==nt&&tn(this,Nn,W0).call(this,A.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||le&&this._pdfDocument!==le)return;tn(this,k,Cde).call(this);const pt=!this._highlightMatches,Ct=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),nt?this._dirtyMatch?tn(this,Le,xp).call(this):"again"===nt?(tn(this,Le,xp).call(this),pt&&this._state.highlightAll&&tn(this,Me,G0).call(this)):"highlightallchange"===nt?(Ct?tn(this,Le,xp).call(this):this._highlightMatches=!0,tn(this,Me,G0).call(this)):tn(this,Le,xp).call(this):this._findTimeout=setTimeout(()=>{tn(this,Le,xp).call(this),this._findTimeout=null},250)})},Oe=new WeakSet,bB=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,z.createPromiseCapability)()},ye=new WeakSet,wB=function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=te(this._state.query)),this._normalizedQuery},Be=new WeakSet,bde=function(oe){if(oe.query!==this._state.query)return!0;switch(oe.type){case"again":const le=this._selected.pageIdx+1,nt=this._linkService;return le>=1&&le<=nt.pagesCount&&le!==nt.page&&!nt.isPageVisible(le);case"highlightallchange":return!1}return!0},De=new WeakSet,wde=function(oe,le,nt){let pt=oe.slice(0,le).match(G);if(pt){const Ct=oe.charCodeAt(le),At=pt[1].charCodeAt(0);if((0,L.getCharacterType)(Ct)===(0,L.getCharacterType)(At))return!1}if(pt=oe.slice(le+nt).match(j),pt){const Ct=oe.charCodeAt(le+nt-1),At=pt[1].charCodeAt(0);if((0,L.getCharacterType)(Ct)===(0,L.getCharacterType)(At))return!1}return!0},E=new WeakSet,xde=function(oe,le,nt,pt){const Ct=[],At=[],An=this._pageDiffs[nt];let Vn;for(;null!==(Vn=oe.exec(pt));){if(le&&!tn(this,De,wde).call(this,pt,Vn.index,Vn[0].length))continue;const[wi,_n]=ie(An,Vn.index,Vn[0].length);_n&&(Ct.push(wi),At.push(_n))}this._pageMatches[nt]=Ct,this._pageMatchesLength[nt]=At},v=new WeakSet,xB=function(oe,le){const{matchDiacritics:nt}=this._state;let pt=!1;return(oe=oe.replace(x,(At,An,Vn,wi,_n,tr)=>An?`[ ]*\\${An}[ ]*`:Vn?`[ ]*${Vn}[ ]*`:wi?"[ ]+":nt?_n||tr:_n?F.has(_n.charCodeAt(0))?_n:"":le?(pt=!0,`${tr}\\p{M}*`):tr)).endsWith("[ ]*")&&(oe=oe.slice(0,oe.length-"[ ]*".length)),nt&&le&&(pt=!0,oe=`${oe}(?=[${U}]|[^\\p{M}]|$)`),[pt,oe]},I=new WeakSet,Sde=function(oe){let le=Jt(this,ye,wB);if(0===le.length)return;const{caseSensitive:nt,entireWord:pt,phraseSearch:Ct}=this._state,At=this._pageContents[oe],An=this._hasDiacritics[oe];let Vn=!1;if(Ct)[Vn,le]=tn(this,v,xB).call(this,le,An);else{const tr=le.match(/\S+/g);tr&&(le=tr.sort().reverse().map(Oi=>{const[fs,Ei]=tn(this,v,xB).call(this,Oi,An);return Vn||(Vn=fs),`(${Ei})`}).join("|"))}le=new RegExp(le,`g${Vn?"u":""}${nt?"":"i"}`),tn(this,E,xde).call(this,le,pt,oe,At),this._state.highlightAll&&tn(this,fe,aC).call(this,oe),this._resumePageIdx===oe&&(this._resumePageIdx=null,tn(this,$e,SB).call(this));const _n=this._pageMatches[oe].length;_n>0&&(this._matchesCountTotal+=_n,tn(this,Rt,Ede).call(this))},k=new WeakSet,Cde=function(){if(this._extractTextPromises.length>0)return;let oe=Promise.resolve();for(let le=0,nt=this._linkService.pagesCount;le<nt;le++){const pt=(0,z.createPromiseCapability)();this._extractTextPromises[le]=pt.promise,oe=oe.then(()=>this._pdfDocument.getPage(le+1).then(Ct=>Ct.getTextContent()).then(Ct=>{const At=[];for(const An of Ct.items)At.push(An.str),An.hasEOL&&At.push("\n");[this._pageContents[le],this._pageDiffs[le],this._hasDiacritics[le]]=te(At.join("")),pt.resolve()},Ct=>{console.error(`Unable to get text content for page ${le+1}`,Ct),this._pageContents[le]="",this._pageDiffs[le]=null,this._hasDiacritics[le]=!1,pt.resolve()}))}},fe=new WeakSet,aC=function(oe){this._scrollMatches&&this._selected.pageIdx===oe&&(this._linkService.page=oe+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:oe})},Me=new WeakSet,G0=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Le=new WeakSet,xp=function(){const oe=this._state.findPrevious,le=this._linkService.page-1,nt=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=le,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,tn(this,Me,G0).call(this);for(let Ct=0;Ct<nt;Ct++)this._pendingFindMatches.has(Ct)||(this._pendingFindMatches.add(Ct),this._extractTextPromises[Ct].then(()=>{this._pendingFindMatches.delete(Ct),tn(this,I,Sde).call(this,Ct)}))}if(""===Jt(this,ye,wB))return void tn(this,Nn,W0).call(this,A.FOUND);if(this._resumePageIdx)return;const pt=this._offset;if(this._pagesToSearch=nt,null!==pt.matchIdx){const Ct=this._pageMatches[pt.pageIdx].length;if(!oe&&pt.matchIdx+1<Ct||oe&&pt.matchIdx>0)return pt.matchIdx=oe?pt.matchIdx-1:pt.matchIdx+1,void tn(this,he,lC).call(this,!0);tn(this,Qe,CB).call(this,oe)}tn(this,$e,SB).call(this)},ft=new WeakSet,Mde=function(oe){const le=this._offset,nt=oe.length,pt=this._state.findPrevious;return nt?(le.matchIdx=pt?nt-1:0,tn(this,he,lC).call(this,!0),!0):(tn(this,Qe,CB).call(this,pt),!!(le.wrapped&&(le.matchIdx=null,this._pagesToSearch<0))&&(tn(this,he,lC).call(this,!1),!0))},$e=new WeakSet,SB=function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let oe=null;do{const le=this._offset.pageIdx;if(oe=this._pageMatches[le],!oe){this._resumePageIdx=le;break}}while(!tn(this,ft,Mde).call(this,oe))},Qe=new WeakSet,CB=function(oe){const le=this._offset,nt=this._linkService.pagesCount;le.pageIdx=oe?le.pageIdx-1:le.pageIdx+1,le.matchIdx=null,this._pagesToSearch--,(le.pageIdx>=nt||le.pageIdx<0)&&(le.pageIdx=oe?nt-1:0,le.wrapped=!0)},he=new WeakSet,lC=function(oe=!1){let le=A.NOT_FOUND;const nt=this._offset.wrapped;if(this._offset.wrapped=!1,oe){const pt=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,le=nt?A.WRAPPED:A.FOUND,-1!==pt&&pt!==this._selected.pageIdx&&tn(this,fe,aC).call(this,pt)}tn(this,Nn,W0).call(this,le,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,tn(this,fe,aC).call(this,this._selected.pageIdx))},yt=new WeakSet,Ade=function(oe){const le=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||le&&this._pdfDocument!==le||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),tn(this,Nn,W0).call(this,A.FOUND),this._highlightMatches=!1,tn(this,Me,G0).call(this))})},vt=new WeakSet,MB=function(){var Ct;const{pageIdx:oe,matchIdx:le}=this._selected;let nt=0,pt=this._matchesCountTotal;if(-1!==le){for(let At=0;At<oe;At++)nt+=(null==(Ct=this._pageMatches[At])?void 0:Ct.length)||0;nt+=le+1}return(nt<1||nt>pt)&&(nt=pt=0),{current:nt,total:pt}},Rt=new WeakSet,Ede=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:tn(this,vt,MB).call(this)})},Nn=new WeakSet,W0=function(oe,le=!1){var nt,pt;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:oe,previous:le,matchesCount:tn(this,vt,MB).call(this),rawQuery:null!=(pt=null==(nt=this._state)?void 0:nt.query)?pt:null})},C.PDFFindController=class ae{constructor({linkService:oe,eventBus:le}){ln(this,_e),ln(this,Oe),ln(this,ye),ln(this,Be),ln(this,De),ln(this,E),ln(this,v),ln(this,I),ln(this,k),ln(this,fe),ln(this,Me),ln(this,Le),ln(this,ft),ln(this,$e),ln(this,Qe),ln(this,he),ln(this,yt),ln(this,vt),ln(this,Rt),ln(this,Nn),this._linkService=oe,this._eventBus=le,tn(this,Oe,bB).call(this),le._on("find",tn(this,_e,vde).bind(this)),le._on("findbarclose",tn(this,yt,Ade).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(oe){this._pdfDocument&&tn(this,Oe,bB).call(this),oe&&(this._pdfDocument=oe,this._firstPageCapability.resolve())}scrollMatchIntoView({element:oe=null,selectedLeft:le=0,pageIndex:nt=-1,matchIndex:pt=-1}){this._scrollMatches&&oe&&-1!==pt&&pt===this._selected.matchIdx&&-1!==nt&&nt===this._selected.pageIdx&&(this._scrollMatches=!1,(0,V.scrollIntoView)(oe,{top:-50,left:le+-400},!0))}}},(ne,C)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.CharacterType=void 0,C.getCharacterType=function y(x){return function V(x){return x<11904}(x)?function z(x){return 0==(65408&x)}(x)?function S(x){return 32===x||9===x||13===x||10===x}(x)?Y.SPACE:function L(x){return x>=97&&x<=122||x>=65&&x<=90}(x)||function A(x){return x>=48&&x<=57}(x)||95===x?Y.ALPHA_LETTER:Y.PUNCT:function U(x){return 3584==(65408&x)}(x)?Y.THAI_LETTER:160===x?Y.SPACE:Y.ALPHA_LETTER:function b(x){return x>=13312&&x<=40959||x>=63744&&x<=64255}(x)?Y.HAN_LETTER:function P(x){return x>=12448&&x<=12543}(x)?Y.KATAKANA_LETTER:function W(x){return x>=12352&&x<=12447}(x)?Y.HIRAGANA_LETTER:function F(x){return x>=65376&&x<=65439}(x)?Y.HALFWIDTH_KATAKANA_LETTER:Y.ALPHA_LETTER};const Y={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};C.CharacterType=Y},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.PDFHistory=void 0,C.isDestArraysEqual=F,C.isDestHashesEqual=W;var V=Y(6),z=Y(17);function b(){return document.location.hash}function W(U,y){return"string"==typeof U&&"string"==typeof y&&(U===y||(0,V.parseQueryString)(U).get("nameddest")===y)}function F(U,y){function x(G,j){if(typeof G!=typeof j||Array.isArray(G)||Array.isArray(j))return!1;if(null!==G&&"object"==typeof G&&null!==j){if(Object.keys(G).length!==Object.keys(j).length)return!1;for(const $ in G)if(!x(G[$],j[$]))return!1;return!0}return G===j||Number.isNaN(G)&&Number.isNaN(j)}if(!Array.isArray(U)||!Array.isArray(y)||U.length!==y.length)return!1;for(let G=0,j=U.length;G<j;G++)if(!x(U[G],y[G]))return!1;return!0}C.PDFHistory=class P{constructor({linkService:y,eventBus:x}){this.linkService=y,this.eventBus=x,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",G=>{this._isPagesLoaded=!!G.pagesCount},{once:!0})})}initialize({fingerprint:y,resetHistory:x=!1,updateUrl:G=!1}){if(!y||"string"!=typeof y)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const j=""!==this._fingerprint&&this._fingerprint!==y;this._fingerprint=y,this._updateUrl=!0===G,this._initialized=!0,this._bindEvents();const $=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=b(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState($,!0)||x){const{hash:ie,page:ae,rotation:_e}=this._parseCurrentHash(!0);return!ie||j||x?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:ie,page:ae,rotation:_e},!0)}const te=$.destination;this._updateInternalState(te,$.uid,!0),void 0!==te.rotation&&(this._initialRotation=te.rotation),te.dest?(this._initialBookmark=JSON.stringify(te.dest),this._destination.page=null):te.hash?this._initialBookmark=te.hash:te.page&&(this._initialBookmark=`page=${te.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:y=null,explicitDest:x,pageNumber:G}){if(!this._initialized)return;if(y&&"string"!=typeof y)return void console.error(`PDFHistory.push: "${y}" is not a valid namedDest parameter.`);if(!Array.isArray(x))return void console.error(`PDFHistory.push: "${x}" is not a valid explicitDest parameter.`);if(!this._isValidPage(G)&&(null!==G||this._destination))return void console.error(`PDFHistory.push: "${G}" is not a valid pageNumber parameter.`);const j=y||JSON.stringify(x);if(!j)return;let $=!1;if(this._destination&&(W(this._destination.hash,j)||F(this._destination.dest,x))){if(this._destination.page)return;$=!0}this._popStateInProgress&&!$||(this._pushOrReplaceState({dest:x,hash:j,page:G,rotation:this.linkService.rotation},$),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(y){var x;if(this._initialized){if(!this._isValidPage(y))return void console.error(`PDFHistory.pushPage: "${y}" is not a valid page number.`);(null==(x=this._destination)?void 0:x.page)!==y&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${y}`,page:y,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const y=window.history.state;this._isValidState(y)&&y.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const y=window.history.state;this._isValidState(y)&&y.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(y,x=!1){const G=x||!this._destination,j={fingerprint:this._fingerprint,uid:G?this._uid:this._uid+1,destination:y};let $;if(this._updateInternalState(y,j.uid),this._updateUrl&&(null==y?void 0:y.hash)){const te=document.location.href.split("#")[0];te.startsWith("file://")||($=`${te}#${y.hash}`)}G?window.history.replaceState(j,"",$):window.history.pushState(j,"",$)}_tryPushCurrentPosition(y=!1){if(!this._position)return;let x=this._position;if(y&&(x=Object.assign(Object.create(null),this._position),x.temporary=!0),!this._destination)return void this._pushOrReplaceState(x);if(this._destination.temporary)return void this._pushOrReplaceState(x,!0);if(this._destination.hash===x.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let G=!1;if(this._destination.page>=x.first&&this._destination.page<=x.page){if(void 0!==this._destination.dest||!this._destination.first)return;G=!0}this._pushOrReplaceState(x,G)}_isValidPage(y){return Number.isInteger(y)&&y>0&&y<=this.linkService.pagesCount}_isValidState(y,x=!1){if(!y)return!1;if(y.fingerprint!==this._fingerprint){if(!x)return!1;{if("string"!=typeof y.fingerprint||y.fingerprint.length!==this._fingerprint.length)return!1;const[G]=performance.getEntriesByType("navigation");if("reload"!==(null==G?void 0:G.type))return!1}}return!(!Number.isInteger(y.uid)||y.uid<0||null===y.destination||"object"!=typeof y.destination)}_updateInternalState(y,x,G=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),G&&(null==y?void 0:y.temporary)&&delete y.temporary,this._destination=y,this._uid=x,this._maxUid=Math.max(this._maxUid,x),this._numPositionUpdates=0}_parseCurrentHash(y=!1){const x=unescape(b()).substring(1),G=(0,V.parseQueryString)(x),j=G.get("nameddest")||"";let $=0|G.get("page");return(!this._isValidPage($)||y&&j.length>0)&&($=null),{hash:x,page:$,rotation:this.linkService.rotation}}_updateViewarea({location:y}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:y.pdfOpenParams.substring(1),page:this.linkService.page,first:y.pageNumber,rotation:y.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:y}){const x=b(),G=this._currentHash!==x;if(this._currentHash=x,!y){this._uid++;const{hash:$,page:te,rotation:ie}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:$,page:te,rotation:ie},!0)}if(!this._isValidState(y))return;this._popStateInProgress=!0,G&&(this._blockHashChange++,(0,z.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const j=y.destination;this._updateInternalState(j,y.uid,!0),(0,V.isValidRotation)(j.rotation)&&(this.linkService.rotation=j.rotation),j.dest?this.linkService.goToDestination(j.dest):j.hash?this.linkService.setHash(j.hash):j.page&&(this.linkService.page=j.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.PDFScriptingManager=void 0;var V=Y(6),z=Y(3);C.PDFScriptingManager=class L{constructor({eventBus:S,sandboxBundleSrc:b=null,scriptingFactory:P=null,docPropertiesLookup:W=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=S,this._sandboxBundleSrc=b,this._scriptingFactory=P,this._docPropertiesLookup=W,this._scriptingFactory||window.addEventListener("updatefromsandbox",F=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:F.detail})})}setViewer(S){this._pdfViewer=S}setDocument(S){var b=this;return N(function*(){var U;if(b._pdfDocument&&(yield b._destroyScripting()),b._pdfDocument=S,!S)return;const[P,W,F]=yield Promise.all([S.getFieldObjects(),S.getCalculationOrderIds(),S.getJSActions()]);if(P||F){if(S===b._pdfDocument){try{b._scripting=b._createScripting()}catch(y){return console.error(`PDFScriptingManager.setDocument: "${null==y?void 0:y.message}".`),void(yield b._destroyScripting())}b._internalEvents.set("updatefromsandbox",y=>{(null==y?void 0:y.source)===window&&b._updateFromSandbox(y.detail)}),b._internalEvents.set("dispatcheventinsandbox",y=>{var x;null==(x=b._scripting)||x.dispatchEventInSandbox(y.detail)}),b._internalEvents.set("pagechanging",({pageNumber:y,previous:x})=>{y!==x&&(b._dispatchPageClose(x),b._dispatchPageOpen(y))}),b._internalEvents.set("pagerendered",({pageNumber:y})=>{!b._pageOpenPending.has(y)||y===b._pdfViewer.currentPageNumber&&b._dispatchPageOpen(y)}),b._internalEvents.set("pagesdestroy",function(){var y=N(function*(x){var G,j;yield b._dispatchPageClose(b._pdfViewer.currentPageNumber),yield null==(G=b._scripting)?void 0:G.dispatchEventInSandbox({id:"doc",name:"WillClose"}),null==(j=b._closeCapability)||j.resolve()});return function(x){return y.apply(this,arguments)}}()),b._domEvents.set("mousedown",y=>{b._mouseState.isDown=!0}),b._domEvents.set("mouseup",y=>{b._mouseState.isDown=!1});for(const[y,x]of b._internalEvents)b._eventBus._on(y,x);for(const[y,x]of b._domEvents)window.addEventListener(y,x,!0);try{const y=yield b._getDocProperties();if(S!==b._pdfDocument)return;yield b._scripting.createSandbox({objects:P,calculationOrder:W,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:rC(iC({},y),{actions:F})}),b._eventBus.dispatch("sandboxcreated",{source:b})}catch(y){return console.error(`PDFScriptingManager.setDocument: "${null==y?void 0:y.message}".`),void(yield b._destroyScripting())}yield null==(U=b._scripting)?void 0:U.dispatchEventInSandbox({id:"doc",name:"Open"}),yield b._dispatchPageOpen(b._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{S===b._pdfDocument&&(b._ready=!0)})}}else yield b._destroyScripting()})()}dispatchWillSave(S){var b=this;return N(function*(){var P;return null==(P=b._scripting)?void 0:P.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(S){var b=this;return N(function*(){var P;return null==(P=b._scripting)?void 0:P.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(S){var b=this;return N(function*(){var P;return null==(P=b._scripting)?void 0:P.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(S){var b=this;return N(function*(){var P;return null==(P=b._scripting)?void 0:P.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){var S;return(null==(S=this._destroyCapability)?void 0:S.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,z.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,z.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,z.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,z.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(S){var b=this;return N(function*(){var G;const P=b._pdfViewer.isInPresentationMode||b._pdfViewer.isChangingPresentationMode,{id:W,siblings:F,command:U,value:y}=S;if(!W){switch(U){case"clear":console.clear();break;case"error":console.error(y);break;case"layout":if(P)return;const j=(0,V.apiPageLayoutToViewerModes)(y);b._pdfViewer.spreadMode=j.spreadMode;break;case"page-num":b._pdfViewer.currentPageNumber=y+1;break;case"print":yield b._pdfViewer.pagesPromise,b._eventBus.dispatch("print",{source:b});break;case"println":console.log(y);break;case"zoom":if(P)return;b._pdfViewer.currentScaleValue=y;break;case"SaveAs":b._eventBus.dispatch("save",{source:b});break;case"FirstPage":b._pdfViewer.currentPageNumber=1;break;case"LastPage":b._pdfViewer.currentPageNumber=b._pdfViewer.pagesCount;break;case"NextPage":b._pdfViewer.nextPage();break;case"PrevPage":b._pdfViewer.previousPage();break;case"ZoomViewIn":if(P)return;b._pdfViewer.increaseScale();break;case"ZoomViewOut":if(P)return;b._pdfViewer.decreaseScale()}return}if(P&&S.focus)return;delete S.id,delete S.siblings;const x=F?[W,...F]:[W];for(const j of x){const $=document.getElementById(j);$?$.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:S})):null==(G=b._pdfDocument)||G.annotationStorage.setValue(j,S)}})()}_dispatchPageOpen(S,b=!1){var P=this;return N(function*(){const W=P._pdfDocument,F=P._visitedPages;if(b&&(P._closeCapability=(0,z.createPromiseCapability)()),!P._closeCapability)return;const U=P._pdfViewer.getPageView(S-1);if((null==U?void 0:U.renderingState)!==V.RenderingStates.FINISHED)return void P._pageOpenPending.add(S);P._pageOpenPending.delete(S);const y=N(function*(){var G,j;const x=yield F.has(S)?null:null==(G=U.pdfPage)?void 0:G.getJSActions();W===P._pdfDocument&&(yield null==(j=P._scripting)?void 0:j.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:S,actions:x}))})();F.set(S,y)})()}_dispatchPageClose(S){var b=this;return N(function*(){var U;const P=b._pdfDocument,W=b._visitedPages;if(!b._closeCapability||b._pageOpenPending.has(S))return;const F=W.get(S);!F||(W.set(S,null),yield F,P===b._pdfDocument&&(yield null==(U=b._scripting)?void 0:U.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:S})))})()}_getDocProperties(){var S=this;return N(function*(){if(S._docPropertiesLookup)return S._docPropertiesLookup(S._pdfDocument);const{docPropertiesLookup:b}=Y(24);return b(S._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,z.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:S}=Y(24);return new S(this._sandboxBundleSrc)}_destroyScripting(){var S=this;return N(function*(){var b,P;if(!S._scripting)return S._pdfDocument=null,void(null==(b=S._destroyCapability)||b.resolve());S._closeCapability&&(yield Promise.race([S._closeCapability.promise,new Promise(W=>{setTimeout(W,1e3)})]).catch(W=>{}),S._closeCapability=null),S._pdfDocument=null;try{yield S._scripting.destroySandbox()}catch(W){}for(const[W,F]of S._internalEvents)S._eventBus._off(W,F);S._internalEvents.clear();for(const[W,F]of S._domEvents)window.removeEventListener(W,F,!0);S._domEvents.clear(),S._pageOpenPending.clear(),S._visitedPages.clear(),S._scripting=null,delete S._mouseState.isDown,S._ready=!1,null==(P=S._destroyCapability)||P.resolve()})()}}},(ne,C,Y)=>{Object.defineProperty(C,"__esModule",{value:!0}),C.GenericScripting=void 0,C.docPropertiesLookup=function z(S){return L.apply(this,arguments)};var V=Y(3);function L(){return(L=N(function*(S){const P="".split("#")[0];let{info:W,metadata:F,contentDispositionFilename:U,contentLength:y}=yield S.getMetadata();if(!y){const{length:x}=yield S.getDownloadInfo();y=x}return rC(iC({},W),{baseURL:P,filesize:y,filename:U||(0,V.getPdfFilenameFromUrl)(""),metadata:null==F?void 0:F.getRaw(),authors:null==F?void 0:F.get("dc:creator"),numPages:S.numPages,URL:""})})).apply(this,arguments)}C.GenericScripting=class A{constructor(b){this._ready=(0,V.loadScript)(b,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(b){var P=this;return N(function*(){(yield P._ready).create(b)})()}dispatchEventInSandbox(b){var P=this;return N(function*(){const W=yield P._ready;setTimeout(()=>W.dispatchEvent(b),0)})()}destroySandbox(){var b=this;return N(function*(){(yield b._ready).nukeSandbox()})()}}}],Ae={};function be(ne){var C=Ae[ne];if(void 0!==C)return C.exports;var Y=Ae[ne]={exports:{}};return He[ne](Y,Y.exports,be),Y.exports}var ge={};return(()=>{var ne=ge;Object.defineProperty(ne,"__esModule",{value:!0}),Object.defineProperty(ne,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return L.AnnotationLayerBuilder}}),Object.defineProperty(ne,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return C.DefaultAnnotationLayerFactory}}),Object.defineProperty(ne,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return C.DefaultStructTreeLayerFactory}}),Object.defineProperty(ne,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return C.DefaultTextLayerFactory}}),Object.defineProperty(ne,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return C.DefaultXfaLayerFactory}}),Object.defineProperty(ne,"DownloadManager",{enumerable:!0,get:function(){return A.DownloadManager}}),Object.defineProperty(ne,"EventBus",{enumerable:!0,get:function(){return S.EventBus}}),Object.defineProperty(ne,"GenericL10n",{enumerable:!0,get:function(){return b.GenericL10n}}),Object.defineProperty(ne,"LinkTarget",{enumerable:!0,get:function(){return Y.LinkTarget}}),Object.defineProperty(ne,"NullL10n",{enumerable:!0,get:function(){return P.NullL10n}}),Object.defineProperty(ne,"PDFFindController",{enumerable:!0,get:function(){return W.PDFFindController}}),Object.defineProperty(ne,"PDFHistory",{enumerable:!0,get:function(){return F.PDFHistory}}),Object.defineProperty(ne,"PDFLinkService",{enumerable:!0,get:function(){return Y.PDFLinkService}}),Object.defineProperty(ne,"PDFPageView",{enumerable:!0,get:function(){return U.PDFPageView}}),Object.defineProperty(ne,"PDFScriptingManager",{enumerable:!0,get:function(){return y.PDFScriptingManager}}),Object.defineProperty(ne,"PDFSinglePageViewer",{enumerable:!0,get:function(){return z.PDFSinglePageViewer}}),Object.defineProperty(ne,"PDFViewer",{enumerable:!0,get:function(){return z.PDFViewer}}),Object.defineProperty(ne,"ProgressBar",{enumerable:!0,get:function(){return V.ProgressBar}}),Object.defineProperty(ne,"SimpleLinkService",{enumerable:!0,get:function(){return Y.SimpleLinkService}}),Object.defineProperty(ne,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return x.StructTreeLayerBuilder}}),Object.defineProperty(ne,"TextLayerBuilder",{enumerable:!0,get:function(){return G.TextLayerBuilder}}),Object.defineProperty(ne,"XfaLayerBuilder",{enumerable:!0,get:function(){return j.XfaLayerBuilder}}),Object.defineProperty(ne,"parseQueryString",{enumerable:!0,get:function(){return V.parseQueryString}});var C=be(1),Y=be(5),V=be(6),z=be(10),L=be(2),A=be(16),S=be(17),b=be(18),P=be(4),W=be(20),F=be(22),U=be(12),y=be(23),x=be(7),G=be(8),j=be(9)})(),ge})(),Ke.exports=be()},926:Ke=>{function J(N,He,Ae,be,ge,ne,C){try{var Y=N[ne](C),V=Y.value}catch(z){return void Ae(z)}Y.done?He(V):Promise.resolve(V).then(be,ge)}Ke.exports=function Re(N){return function(){var He=this,Ae=arguments;return new Promise(function(be,ge){var ne=N.apply(He,Ae);function C(V){J(ne,be,ge,C,Y,"next",V)}function Y(V){J(ne,be,ge,C,Y,"throw",V)}C(void 0)})}},Ke.exports.__esModule=!0,Ke.exports.default=Ke.exports},414:()=>{},172:()=>{},1:()=>{},779:()=>{},558:()=>{},258:()=>{}},Ke=>{Ke(Ke.s=485)}]);